var T3=Object.defineProperty,C3=Object.defineProperties;var b3=Object.getOwnPropertyDescriptors;var mg=Object.getOwnPropertySymbols;var vM=Object.prototype.hasOwnProperty,yM=Object.prototype.propertyIsEnumerable;var xM=(n,e,t)=>e in n?T3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,cn=(n,e)=>{for(var t in e||(e={}))vM.call(e,t)&&xM(n,t,e[t]);if(mg)for(var t of mg(e))yM.call(e,t)&&xM(n,t,e[t]);return n},ei=(n,e)=>C3(n,b3(e));var su=(n,e)=>{var t={};for(var r in n)vM.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&mg)for(var r of mg(n))e.indexOf(r)<0&&yM.call(n,r)&&(t[r]=n[r]);return t};var uh=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Tt={exports:{}},$t={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var _M=Object.getOwnPropertySymbols,L3=Object.prototype.hasOwnProperty,B3=Object.prototype.propertyIsEnumerable;function R3(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function P3(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var z0=P3()?Object.assign:function(n,e){for(var t,r=R3(n),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)L3.call(t,o)&&(r[o]=t[o]);if(_M){i=_M(t);for(var l=0;l<i.length;l++)B3.call(t,i[l])&&(r[i[l]]=t[i[l]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0=z0,Qc=60103,wM=60106;$t.Fragment=60107;$t.StrictMode=60108;$t.Profiler=60114;var AM=60109,MM=60110,EM=60112;$t.Suspense=60113;var SM=60115,TM=60116;if(typeof Symbol=="function"&&Symbol.for){var Is=Symbol.for;Qc=Is("react.element"),wM=Is("react.portal"),$t.Fragment=Is("react.fragment"),$t.StrictMode=Is("react.strict_mode"),$t.Profiler=Is("react.profiler"),AM=Is("react.provider"),MM=Is("react.context"),EM=Is("react.forward_ref"),$t.Suspense=Is("react.suspense"),SM=Is("react.memo"),TM=Is("react.lazy")}var CM=typeof Symbol=="function"&&Symbol.iterator;function I3(n){return n===null||typeof n!="object"?null:(n=CM&&n[CM]||n["@@iterator"],typeof n=="function"?n:null)}function ch(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LM={};function Zc(n,e,t){this.props=n,this.context=e,this.refs=LM,this.updater=t||bM}Zc.prototype.isReactComponent={};Zc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error(ch(85));this.updater.enqueueSetState(this,n,e,"setState")};Zc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function BM(){}BM.prototype=Zc.prototype;function V0(n,e,t){this.props=n,this.context=e,this.refs=LM,this.updater=t||bM}var J0=V0.prototype=new BM;J0.constructor=V0;W0(J0,Zc.prototype);J0.isPureReactComponent=!0;var j0={current:null},RM=Object.prototype.hasOwnProperty,PM={key:!0,ref:!0,__self:!0,__source:!0};function IM(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)RM.call(e,r)&&!PM.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}if(n&&n.defaultProps)for(r in l=n.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Qc,type:n,key:s,ref:o,props:i,_owner:j0.current}}function F3(n,e){return{$$typeof:Qc,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function X0(n){return typeof n=="object"&&n!==null&&n.$$typeof===Qc}function D3(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var FM=/\/+/g;function K0(n,e){return typeof n=="object"&&n!==null&&n.key!=null?D3(""+n.key):e.toString(36)}function gg(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Qc:case wM:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+K0(o,0):r,Array.isArray(i)?(t="",n!=null&&(t=n.replace(FM,"$&/")+"/"),gg(i,e,t,"",function(h){return h})):i!=null&&(X0(i)&&(i=F3(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(FM,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Array.isArray(n))for(var l=0;l<n.length;l++){s=n[l];var c=r+K0(s,l);o+=gg(s,e,t,c,i)}else if(c=I3(n),typeof c=="function")for(n=c.call(n),l=0;!(s=n.next()).done;)s=s.value,c=r+K0(s,l++),o+=gg(s,e,t,c,i);else if(s==="object")throw e=""+n,Error(ch(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e));return o}function vg(n,e,t){if(n==null)return n;var r=[],i=0;return gg(n,r,"","",function(s){return e.call(t,s,i++)}),r}function O3(n){if(n._status===-1){var e=n._result;e=e(),n._status=0,n._result=e,e.then(function(t){n._status===0&&(t=t.default,n._status=1,n._result=t)},function(t){n._status===0&&(n._status=2,n._result=t)})}if(n._status===1)return n._result;throw n._result}var DM={current:null};function Qo(){var n=DM.current;if(n===null)throw Error(ch(321));return n}var N3={ReactCurrentDispatcher:DM,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:j0,IsSomeRendererActing:{current:!1},assign:W0};$t.Children={map:vg,forEach:function(n,e,t){vg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return vg(n,function(){e++}),e},toArray:function(n){return vg(n,function(e){return e})||[]},only:function(n){if(!X0(n))throw Error(ch(143));return n}};$t.Component=Zc;$t.PureComponent=V0;$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N3;$t.cloneElement=function(n,e,t){if(n==null)throw Error(ch(267,n));var r=W0({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=j0.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)RM.call(e,c)&&!PM.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=t;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Qc,type:n.type,key:i,ref:s,props:r,_owner:o}};$t.createContext=function(n,e){return e===void 0&&(e=null),n={$$typeof:MM,_calculateChangedBits:e,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider={$$typeof:AM,_context:n},n.Consumer=n};$t.createElement=IM;$t.createFactory=function(n){var e=IM.bind(null,n);return e.type=n,e};$t.createRef=function(){return{current:null}};$t.forwardRef=function(n){return{$$typeof:EM,render:n}};$t.isValidElement=X0;$t.lazy=function(n){return{$$typeof:TM,_payload:{_status:-1,_result:n},_init:O3}};$t.memo=function(n,e){return{$$typeof:SM,type:n,compare:e===void 0?null:e}};$t.useCallback=function(n,e){return Qo().useCallback(n,e)};$t.useContext=function(n,e){return Qo().useContext(n,e)};$t.useDebugValue=function(){};$t.useEffect=function(n,e){return Qo().useEffect(n,e)};$t.useImperativeHandle=function(n,e,t){return Qo().useImperativeHandle(n,e,t)};$t.useLayoutEffect=function(n,e){return Qo().useLayoutEffect(n,e)};$t.useMemo=function(n,e){return Qo().useMemo(n,e)};$t.useReducer=function(n,e,t){return Qo().useReducer(n,e,t)};$t.useRef=function(n){return Qo().useRef(n)};$t.useState=function(n){return Qo().useState(n)};$t.version="17.0.2";Tt.exports=$t;var R4=Tt.exports,OM={exports:{}},cs={},$c={exports:{}},NM={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){var e,t,r,i;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var c=null,h=null,v=function(){if(c!==null)try{var ue=n.unstable_now();c(!0,ue),c=null}catch(Oe){throw setTimeout(v,0),Oe}};e=function(ue){c!==null?setTimeout(e,0,ue):(c=ue,setTimeout(v,0))},t=function(ue,Oe){h=setTimeout(ue,Oe)},r=function(){clearTimeout(h)},n.unstable_shouldYield=function(){return!1},i=n.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,m=window.clearTimeout;if(typeof console!="undefined"){var x=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof x!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var A=!1,E=null,M=-1,w=5,_=0;n.unstable_shouldYield=function(){return n.unstable_now()>=_},i=function(){},n.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<ue?Math.floor(1e3/ue):5};var C=new MessageChannel,b=C.port2;C.port1.onmessage=function(){if(E!==null){var ue=n.unstable_now();_=ue+w;try{E(!0,ue)?b.postMessage(null):(A=!1,E=null)}catch(Oe){throw b.postMessage(null),Oe}}else A=!1},e=function(ue){E=ue,A||(A=!0,b.postMessage(null))},t=function(ue,Oe){M=p(function(){ue(n.unstable_now())},Oe)},r=function(){m(M),M=-1}}function I(ue,Oe){var ze=ue.length;ue.push(Oe);e:for(;;){var Ee=ze-1>>>1,F=ue[Ee];if(F!==void 0&&0<D(F,Oe))ue[Ee]=Oe,ue[ze]=F,ze=Ee;else break e}}function B(ue){return ue=ue[0],ue===void 0?null:ue}function H(ue){var Oe=ue[0];if(Oe!==void 0){var ze=ue.pop();if(ze!==Oe){ue[0]=ze;e:for(var Ee=0,F=ue.length;Ee<F;){var G=2*(Ee+1)-1,X=ue[G],V=G+1,K=ue[V];if(X!==void 0&&0>D(X,ze))K!==void 0&&0>D(K,X)?(ue[Ee]=K,ue[V]=ze,Ee=V):(ue[Ee]=X,ue[G]=ze,Ee=G);else if(K!==void 0&&0>D(K,ze))ue[Ee]=K,ue[V]=ze,Ee=V;else break e}}return Oe}return null}function D(ue,Oe){var ze=ue.sortIndex-Oe.sortIndex;return ze!==0?ze:ue.id-Oe.id}var O=[],ee=[],q=1,fe=null,ne=3,te=!1,$=!1,le=!1;function _e(ue){for(var Oe=B(ee);Oe!==null;){if(Oe.callback===null)H(ee);else if(Oe.startTime<=ue)H(ee),Oe.sortIndex=Oe.expirationTime,I(O,Oe);else break;Oe=B(ee)}}function Be(ue){if(le=!1,_e(ue),!$)if(B(O)!==null)$=!0,e(Ce);else{var Oe=B(ee);Oe!==null&&t(Be,Oe.startTime-ue)}}function Ce(ue,Oe){$=!1,le&&(le=!1,r()),te=!0;var ze=ne;try{for(_e(Oe),fe=B(O);fe!==null&&(!(fe.expirationTime>Oe)||ue&&!n.unstable_shouldYield());){var Ee=fe.callback;if(typeof Ee=="function"){fe.callback=null,ne=fe.priorityLevel;var F=Ee(fe.expirationTime<=Oe);Oe=n.unstable_now(),typeof F=="function"?fe.callback=F:fe===B(O)&&H(O),_e(Oe)}else H(O);fe=B(O)}if(fe!==null)var G=!0;else{var X=B(ee);X!==null&&t(Be,X.startTime-Oe),G=!1}return G}finally{fe=null,ne=ze,te=!1}}var He=i;n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ue){ue.callback=null},n.unstable_continueExecution=function(){$||te||($=!0,e(Ce))},n.unstable_getCurrentPriorityLevel=function(){return ne},n.unstable_getFirstCallbackNode=function(){return B(O)},n.unstable_next=function(ue){switch(ne){case 1:case 2:case 3:var Oe=3;break;default:Oe=ne}var ze=ne;ne=Oe;try{return ue()}finally{ne=ze}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=He,n.unstable_runWithPriority=function(ue,Oe){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var ze=ne;ne=ue;try{return Oe()}finally{ne=ze}},n.unstable_scheduleCallback=function(ue,Oe,ze){var Ee=n.unstable_now();switch(typeof ze=="object"&&ze!==null?(ze=ze.delay,ze=typeof ze=="number"&&0<ze?Ee+ze:Ee):ze=Ee,ue){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=ze+F,ue={id:q++,callback:Oe,priorityLevel:ue,startTime:ze,expirationTime:F,sortIndex:-1},ze>Ee?(ue.sortIndex=ze,I(ee,ue),B(O)===null&&ue===B(ee)&&(le?r():le=!0,t(Be,ze-Ee))):(ue.sortIndex=F,I(O,ue),$||te||($=!0,e(Ce))),ue},n.unstable_wrapCallback=function(ue){var Oe=ne;return function(){var ze=ne;ne=Oe;try{return ue.apply(this,arguments)}finally{ne=ze}}}})(NM);$c.exports=NM;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg=Tt.exports,Fn=z0,Cr=$c.exports;function Je(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!yg)throw Error(Je(227));var GM=new Set,fh={};function ou(n,e){ef(n,e),ef(n+"Capture",e)}function ef(n,e){for(fh[n]=e,n=0;n<e.length;n++)GM.add(e[n])}var Zo=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),G3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HM=Object.prototype.hasOwnProperty,UM={},kM={};function H3(n){return HM.call(kM,n)?!0:HM.call(UM,n)?!1:G3.test(n)?kM[n]=!0:(UM[n]=!0,!1)}function U3(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function k3(n,e,t,r){if(e===null||typeof e=="undefined"||U3(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Hr[n]=new vi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Hr[e]=new vi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Hr[n]=new vi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Hr[n]=new vi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Hr[n]=new vi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Hr[n]=new vi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Hr[n]=new vi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Hr[n]=new vi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Hr[n]=new vi(n,5,!1,n.toLowerCase(),null,!1,!1)});var Y0=/[\-:]([a-z])/g;function q0(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(Y0,q0);Hr[e]=new vi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(Y0,q0);Hr[e]=new vi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(Y0,q0);Hr[e]=new vi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Hr[n]=new vi(n,1,!1,n.toLowerCase(),null,!1,!1)});Hr.xlinkHref=new vi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Hr[n]=new vi(n,1,!1,n.toLowerCase(),null,!0,!0)});function Q0(n,e,t,r){var i=Hr.hasOwnProperty(e)?Hr[e]:null,s=i!==null?i.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(k3(e,t,i,r)&&(t=null),r||i===null?H3(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var au=yg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dh=60103,lu=60106,Fa=60107,Z0=60108,hh=60114,$0=60109,ex=60110,xg=60112,ph=60113,_g=60120,wg=60115,tx=60116,nx=60121,rx=60128,zM=60129,ix=60130,sx=60131;if(typeof Symbol=="function"&&Symbol.for){var br=Symbol.for;dh=br("react.element"),lu=br("react.portal"),Fa=br("react.fragment"),Z0=br("react.strict_mode"),hh=br("react.profiler"),$0=br("react.provider"),ex=br("react.context"),xg=br("react.forward_ref"),ph=br("react.suspense"),_g=br("react.suspense_list"),wg=br("react.memo"),tx=br("react.lazy"),nx=br("react.block"),br("react.scope"),rx=br("react.opaque.id"),zM=br("react.debug_trace_mode"),ix=br("react.offscreen"),sx=br("react.legacy_hidden")}var WM=typeof Symbol=="function"&&Symbol.iterator;function mh(n){return n===null||typeof n!="object"?null:(n=WM&&n[WM]||n["@@iterator"],typeof n=="function"?n:null)}var ox;function gh(n){if(ox===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);ox=e&&e[1]||""}return`
`+ox+n}var ax=!1;function Ag(n,e){if(!n||ax)return"";ax=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l])return`
`+i[o].replace(" at new "," at ");while(1<=o&&0<=l);break}}}finally{ax=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?gh(n):""}function z3(n){switch(n.tag){case 5:return gh(n.type);case 16:return gh("Lazy");case 13:return gh("Suspense");case 19:return gh("SuspenseList");case 0:case 2:case 15:return n=Ag(n.type,!1),n;case 11:return n=Ag(n.type.render,!1),n;case 22:return n=Ag(n.type._render,!1),n;case 1:return n=Ag(n.type,!0),n;default:return""}}function tf(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Fa:return"Fragment";case lu:return"Portal";case hh:return"Profiler";case Z0:return"StrictMode";case ph:return"Suspense";case _g:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ex:return(n.displayName||"Context")+".Consumer";case $0:return(n._context.displayName||"Context")+".Provider";case xg:var e=n.render;return e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case wg:return tf(n.type);case nx:return tf(n._render);case tx:e=n._payload,n=n._init;try{return tf(n(e))}catch{}}return null}function Da(n){switch(typeof n){case"boolean":case"number":case"object":case"string":case"undefined":return n;default:return""}}function VM(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function W3(n){var e=VM(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t!="undefined"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Mg(n){n._valueTracker||(n._valueTracker=W3(n))}function JM(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=VM(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Eg(n){if(n=n||(typeof document!="undefined"?document:void 0),typeof n=="undefined")return null;try{return n.activeElement||n.body}catch{return n.body}}function lx(n,e){var t=e.checked;return Fn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:n._wrapperState.initialChecked})}function jM(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Da(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function XM(n,e){e=e.checked,e!=null&&Q0(n,"checked",e,!1)}function ux(n,e){XM(n,e);var t=Da(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?cx(n,e.type,t):e.hasOwnProperty("defaultValue")&&cx(n,e.type,Da(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function KM(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function cx(n,e,t){(e!=="number"||Eg(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}function V3(n){var e="";return yg.Children.forEach(n,function(t){t!=null&&(e+=t)}),e}function fx(n,e){return n=Fn({children:void 0},e),(e=V3(e.children))&&(n.children=e),n}function nf(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Da(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function dx(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Je(91));return Fn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function YM(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Je(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(Je(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Da(t)}}function qM(n,e){var t=Da(e.value),r=Da(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function QM(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}var hx={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function ZM(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function px(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?ZM(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Sg,$M=function(n){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!==hx.svg||"innerHTML"in n)n.innerHTML=e;else{for(Sg=Sg||document.createElement("div"),Sg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function vh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var yh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},J3=["Webkit","ms","Moz","O"];Object.keys(yh).forEach(function(n){J3.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),yh[e]=yh[n]})});function eE(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||yh.hasOwnProperty(n)&&yh[n]?(""+e).trim():e+"px"}function tE(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=eE(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var j3=Fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mx(n,e){if(e){if(j3[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Je(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Je(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(Je(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Je(62))}}function gx(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function vx(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var yx=null,rf=null,sf=null;function nE(n){if(n=Nh(n)){if(typeof yx!="function")throw Error(Je(280));var e=n.stateNode;e&&(e=Wg(e),yx(n.stateNode,n.type,e))}}function rE(n){rf?sf?sf.push(n):sf=[n]:rf=n}function iE(){if(rf){var n=rf,e=sf;if(sf=rf=null,nE(n),e)for(n=0;n<e.length;n++)nE(e[n])}}function xx(n,e){return n(e)}function sE(n,e,t,r,i){return n(e,t,r,i)}function _x(){}var oE=xx,uu=!1,wx=!1;function Ax(){(rf!==null||sf!==null)&&(_x(),iE())}function X3(n,e,t){if(wx)return n(e,t);wx=!0;try{return oE(n,e,t)}finally{wx=!1,Ax()}}function xh(n,e){var t=n.stateNode;if(t===null)return null;var r=Wg(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Je(231,e,typeof t));return t}var Mx=!1;if(Zo)try{var _h={};Object.defineProperty(_h,"passive",{get:function(){Mx=!0}}),window.addEventListener("test",_h,_h),window.removeEventListener("test",_h,_h)}catch{Mx=!1}function K3(n,e,t,r,i,s,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(t,h)}catch(v){this.onError(v)}}var wh=!1,Tg=null,Cg=!1,Ex=null,Y3={onError:function(n){wh=!0,Tg=n}};function q3(n,e,t,r,i,s,o,l,c){wh=!1,Tg=null,K3.apply(Y3,arguments)}function Q3(n,e,t,r,i,s,o,l,c){if(q3.apply(this,arguments),wh){if(wh){var h=Tg;wh=!1,Tg=null}else throw Error(Je(198));Cg||(Cg=!0,Ex=h)}}function cu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,(e.flags&1026)!=0&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function aE(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function lE(n){if(cu(n)!==n)throw Error(Je(188))}function Z3(n){var e=n.alternate;if(!e){if(e=cu(n),e===null)throw Error(Je(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return lE(i),n;if(s===r)return lE(i),e;s=s.sibling}throw Error(Je(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===t){o=!0,t=i,r=s;break}if(l===r){o=!0,r=i,t=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===t){o=!0,t=s,r=i;break}if(l===r){o=!0,r=s,t=i;break}l=l.sibling}if(!o)throw Error(Je(189))}}if(t.alternate!==r)throw Error(Je(190))}if(t.tag!==3)throw Error(Je(188));return t.stateNode.current===t?n:e}function uE(n){if(n=Z3(n),!n)return null;for(var e=n;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===n)break;for(;!e.sibling;){if(!e.return||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function cE(n,e){for(var t=n.alternate;e!==null;){if(e===n||e===t)return!0;e=e.return}return!1}var fE,Sx,dE,hE,Tx=!1,no=[],Oa=null,Na=null,Ga=null,Ah=new Map,Mh=new Map,Eh=[],pE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cx(n,e,t,r,i){return{blockedOn:n,domEventName:e,eventSystemFlags:t|16,nativeEvent:i,targetContainers:[r]}}function mE(n,e){switch(n){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":Ga=null;break;case"pointerover":case"pointerout":Ah.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mh.delete(e.pointerId)}}function Sh(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n=Cx(e,t,r,i,s),e!==null&&(e=Nh(e),e!==null&&Sx(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function $3(n,e,t,r,i){switch(e){case"focusin":return Oa=Sh(Oa,n,e,t,r,i),!0;case"dragenter":return Na=Sh(Na,n,e,t,r,i),!0;case"mouseover":return Ga=Sh(Ga,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Ah.set(s,Sh(Ah.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Mh.set(s,Sh(Mh.get(s)||null,n,e,t,r,i)),!0}return!1}function eF(n){var e=fu(n.target);if(e!==null){var t=cu(e);if(t!==null){if(e=t.tag,e===13){if(e=aE(t),e!==null){n.blockedOn=e,hE(n.lanePriority,function(){Cr.unstable_runWithPriority(n.priority,function(){dE(t)})});return}}else if(e===3&&t.stateNode.hydrate){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function bg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Ix(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t!==null)return e=Nh(t),e!==null&&Sx(e),n.blockedOn=t,!1;e.shift()}return!0}function gE(n,e,t){bg(n)&&t.delete(e)}function tF(){for(Tx=!1;0<no.length;){var n=no[0];if(n.blockedOn!==null){n=Nh(n.blockedOn),n!==null&&fE(n);break}for(var e=n.targetContainers;0<e.length;){var t=Ix(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t!==null){n.blockedOn=t;break}e.shift()}n.blockedOn===null&&no.shift()}Oa!==null&&bg(Oa)&&(Oa=null),Na!==null&&bg(Na)&&(Na=null),Ga!==null&&bg(Ga)&&(Ga=null),Ah.forEach(gE),Mh.forEach(gE)}function Th(n,e){n.blockedOn===e&&(n.blockedOn=null,Tx||(Tx=!0,Cr.unstable_scheduleCallback(Cr.unstable_NormalPriority,tF)))}function vE(n){function e(i){return Th(i,n)}if(0<no.length){Th(no[0],n);for(var t=1;t<no.length;t++){var r=no[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Oa!==null&&Th(Oa,n),Na!==null&&Th(Na,n),Ga!==null&&Th(Ga,n),Ah.forEach(e),Mh.forEach(e),t=0;t<Eh.length;t++)r=Eh[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Eh.length&&(t=Eh[0],t.blockedOn===null);)eF(t),t.blockedOn===null&&Eh.shift()}function Lg(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var of={animationend:Lg("Animation","AnimationEnd"),animationiteration:Lg("Animation","AnimationIteration"),animationstart:Lg("Animation","AnimationStart"),transitionend:Lg("Transition","TransitionEnd")},bx={},yE={};Zo&&(yE=document.createElement("div").style,"AnimationEvent"in window||(delete of.animationend.animation,delete of.animationiteration.animation,delete of.animationstart.animation),"TransitionEvent"in window||delete of.transitionend.transition);function Bg(n){if(bx[n])return bx[n];if(!of[n])return n;var e=of[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in yE)return bx[n]=e[t];return n}var xE=Bg("animationend"),_E=Bg("animationiteration"),wE=Bg("animationstart"),AE=Bg("transitionend"),ME=new Map,Lx=new Map,nF=["abort","abort",xE,"animationEnd",_E,"animationIteration",wE,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",AE,"transitionEnd","waiting","waiting"];function Bx(n,e){for(var t=0;t<n.length;t+=2){var r=n[t],i=n[t+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Lx.set(r,e),ME.set(r,i),ou(i,[r])}}var rF=Cr.unstable_now;rF();var Sn=8;function af(n){if((1&n)!=0)return Sn=15,1;if((2&n)!=0)return Sn=14,2;if((4&n)!=0)return Sn=13,4;var e=24&n;return e!==0?(Sn=12,e):(n&32)!=0?(Sn=11,32):(e=192&n,e!==0?(Sn=10,e):(n&256)!=0?(Sn=9,256):(e=3584&n,e!==0?(Sn=8,e):(n&4096)!=0?(Sn=7,4096):(e=4186112&n,e!==0?(Sn=6,e):(e=62914560&n,e!==0?(Sn=5,e):n&67108864?(Sn=4,67108864):(n&134217728)!=0?(Sn=3,134217728):(e=805306368&n,e!==0?(Sn=2,e):(1073741824&n)!=0?(Sn=1,1073741824):(Sn=8,n))))))}function iF(n){switch(n){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function sF(n){switch(n){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Je(358,n))}}function Ch(n,e){var t=n.pendingLanes;if(t===0)return Sn=0;var r=0,i=0,s=n.expiredLanes,o=n.suspendedLanes,l=n.pingedLanes;if(s!==0)r=s,i=Sn=15;else if(s=t&134217727,s!==0){var c=s&~o;c!==0?(r=af(c),i=Sn):(l&=s,l!==0&&(r=af(l),i=Sn))}else s=t&~o,s!==0?(r=af(s),i=Sn):l!==0&&(r=af(l),i=Sn);if(r===0)return 0;if(r=31-Ha(r),r=t&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&(e&o)==0){if(af(e),i<=Sn)return e;Sn=i}if(e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ha(e),i=1<<t,r|=n[t],e&=~i;return r}function EE(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Rg(n,e){switch(n){case 15:return 1;case 14:return 2;case 12:return n=lf(24&~e),n===0?Rg(10,e):n;case 10:return n=lf(192&~e),n===0?Rg(8,e):n;case 8:return n=lf(3584&~e),n===0&&(n=lf(4186112&~e),n===0&&(n=512)),n;case 2:return e=lf(805306368&~e),e===0&&(e=268435456),e}throw Error(Je(358,n))}function lf(n){return n&-n}function Rx(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Pg(n,e,t){n.pendingLanes|=e;var r=e-1;n.suspendedLanes&=r,n.pingedLanes&=r,n=n.eventTimes,e=31-Ha(e),n[e]=t}var Ha=Math.clz32?Math.clz32:lF,oF=Math.log,aF=Math.LN2;function lF(n){return n===0?32:31-(oF(n)/aF|0)|0}var uF=Cr.unstable_UserBlockingPriority,cF=Cr.unstable_runWithPriority,Ig=!0;function fF(n,e,t,r){uu||_x();var i=Px,s=uu;uu=!0;try{sE(i,n,e,t,r)}finally{(uu=s)||Ax()}}function dF(n,e,t,r){cF(uF,Px.bind(null,n,e,t,r))}function Px(n,e,t,r){if(Ig){var i;if((i=(e&4)==0)&&0<no.length&&-1<pE.indexOf(n))n=Cx(null,n,e,t,r),no.push(n);else{var s=Ix(n,e,t,r);if(s===null)i&&mE(n,r);else{if(i){if(-1<pE.indexOf(n)){n=Cx(s,n,e,t,r),no.push(n);return}if($3(s,n,e,t,r))return;mE(n,r)}eS(n,e,r,null,t)}}}}function Ix(n,e,t,r){var i=vx(r);if(i=fu(i),i!==null){var s=cu(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=aE(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return eS(n,e,r,i,t),null}var Ua=null,Fx=null,Fg=null;function SE(){if(Fg)return Fg;var n,e=Fx,t=e.length,r,i="value"in Ua?Ua.value:Ua.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Fg=i.slice(n,1<r?1-r:void 0)}function Dg(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Og(){return!0}function TE(){return!1}function Ki(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Og:TE,this.isPropagationStopped=TE,this}return Fn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Og)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Og)},persist:function(){},isPersistent:Og}),e}var uf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dx=Ki(uf),bh=Fn({},uf,{view:0,detail:0}),hF=Ki(bh),Ox,Nx,Lh,Ng=Fn({},bh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hx,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Lh&&(Lh&&n.type==="mousemove"?(Ox=n.screenX-Lh.screenX,Nx=n.screenY-Lh.screenY):Nx=Ox=0,Lh=n),Ox)},movementY:function(n){return"movementY"in n?n.movementY:Nx}}),CE=Ki(Ng),pF=Fn({},Ng,{dataTransfer:0}),mF=Ki(pF),gF=Fn({},bh,{relatedTarget:0}),Gx=Ki(gF),vF=Fn({},uf,{animationName:0,elapsedTime:0,pseudoElement:0}),yF=Ki(vF),xF=Fn({},uf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),_F=Ki(xF),wF=Fn({},uf,{data:0}),bE=Ki(wF),AF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SF(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=EF[n])?!!e[n]:!1}function Hx(){return SF}var TF=Fn({},bh,{key:function(n){if(n.key){var e=AF[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Dg(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?MF[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hx,charCode:function(n){return n.type==="keypress"?Dg(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Dg(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),CF=Ki(TF),bF=Fn({},Ng,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LE=Ki(bF),LF=Fn({},bh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hx}),BF=Ki(LF),RF=Fn({},uf,{propertyName:0,elapsedTime:0,pseudoElement:0}),PF=Ki(RF),IF=Fn({},Ng,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),FF=Ki(IF),DF=[9,13,27,32],Ux=Zo&&"CompositionEvent"in window,Bh=null;Zo&&"documentMode"in document&&(Bh=document.documentMode);var OF=Zo&&"TextEvent"in window&&!Bh,BE=Zo&&(!Ux||Bh&&8<Bh&&11>=Bh),RE=String.fromCharCode(32),PE=!1;function IE(n,e){switch(n){case"keyup":return DF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var cf=!1;function NF(n,e){switch(n){case"compositionend":return FE(e);case"keypress":return e.which!==32?null:(PE=!0,RE);case"textInput":return n=e.data,n===RE&&PE?null:n;default:return null}}function GF(n,e){if(cf)return n==="compositionend"||!Ux&&IE(n,e)?(n=SE(),Fg=Fx=Ua=null,cf=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BE&&e.locale!=="ko"?null:e.data;default:return null}}var HF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!HF[n.type]:e==="textarea"}function OE(n,e,t,r){rE(r),e=Hg(e,"onChange"),0<e.length&&(t=new Dx("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Rh=null,Ph=null;function UF(n){YE(n,0)}function Gg(n){var e=mf(n);if(JM(e))return n}function kF(n,e){if(n==="change")return e}var NE=!1;if(Zo){var kx;if(Zo){var zx="oninput"in document;if(!zx){var GE=document.createElement("div");GE.setAttribute("oninput","return;"),zx=typeof GE.oninput=="function"}kx=zx}else kx=!1;NE=kx&&(!document.documentMode||9<document.documentMode)}function HE(){Rh&&(Rh.detachEvent("onpropertychange",UE),Ph=Rh=null)}function UE(n){if(n.propertyName==="value"&&Gg(Ph)){var e=[];if(OE(e,Ph,n,vx(n)),n=UF,uu)n(e);else{uu=!0;try{xx(n,e)}finally{uu=!1,Ax()}}}}function zF(n,e,t){n==="focusin"?(HE(),Rh=e,Ph=t,Rh.attachEvent("onpropertychange",UE)):n==="focusout"&&HE()}function WF(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gg(Ph)}function VF(n,e){if(n==="click")return Gg(e)}function JF(n,e){if(n==="input"||n==="change")return Gg(e)}function jF(n,e){return n===e&&(n!==0||1/n==1/e)||n!==n&&e!==e}var fs=typeof Object.is=="function"?Object.is:jF,XF=Object.prototype.hasOwnProperty;function Ih(n,e){if(fs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++)if(!XF.call(e,t[r])||!fs(n[t[r]],e[t[r]]))return!1;return!0}function kE(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function zE(n,e){var t=kE(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=kE(t)}}function WE(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?WE(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function VE(){for(var n=window,e=Eg();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Eg(n.document)}return e}function Wx(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}var KF=Zo&&"documentMode"in document&&11>=document.documentMode,ff=null,Vx=null,Fh=null,Jx=!1;function JE(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Jx||ff==null||ff!==Eg(r)||(r=ff,"selectionStart"in r&&Wx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fh&&Ih(Fh,r)||(Fh=r,r=Hg(Vx,"onSelect"),0<r.length&&(e=new Dx("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ff)))}Bx("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Bx("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Bx(nF,2);for(var jE="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),jx=0;jx<jE.length;jx++)Lx.set(jE[jx],0);ef("onMouseEnter",["mouseout","mouseover"]);ef("onMouseLeave",["mouseout","mouseover"]);ef("onPointerEnter",["pointerout","pointerover"]);ef("onPointerLeave",["pointerout","pointerover"]);ou("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ou("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ou("onBeforeInput",["compositionend","keypress","textInput","paste"]);ou("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ou("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ou("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dh));function KE(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Q3(r,e,void 0,n),n.currentTarget=null}function YE(n,e){e=(e&4)!=0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;KE(i,l,h),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;KE(i,l,h),s=c}}}if(Cg)throw n=Ex,Cg=!1,Ex=null,n}function bn(n,e){var t=oS(e),r=n+"__bubble";t.has(r)||($E(e,n,2,!1),t.add(r))}var qE="_reactListening"+Math.random().toString(36).slice(2);function QE(n){n[qE]||(n[qE]=!0,GM.forEach(function(e){XE.has(e)||ZE(e,!1,n,null),ZE(e,!0,n,null)}))}function ZE(n,e,t,r){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=t;if(n==="selectionchange"&&t.nodeType!==9&&(s=t.ownerDocument),r!==null&&!e&&XE.has(n)){if(n!=="scroll")return;i|=2,s=r}var o=oS(s),l=n+"__"+(e?"capture":"bubble");o.has(l)||(e&&(i|=4),$E(s,n,i,e),o.add(l))}function $E(n,e,t,r){var i=Lx.get(e);switch(i===void 0?2:i){case 0:i=fF;break;case 1:i=dF;break;default:i=Px}t=i.bind(null,e,t,n),i=void 0,!Mx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function eS(n,e,t,r,i){var s=r;if((e&1)==0&&(e&2)==0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=fu(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}X3(function(){var h=s,v=vx(t),p=[];e:{var m=ME.get(n);if(m!==void 0){var x=Dx,A=n;switch(n){case"keypress":if(Dg(t)===0)break e;case"keydown":case"keyup":x=CF;break;case"focusin":A="focus",x=Gx;break;case"focusout":A="blur",x=Gx;break;case"beforeblur":case"afterblur":x=Gx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=CE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=mF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=BF;break;case xE:case _E:case wE:x=yF;break;case AE:x=PF;break;case"scroll":x=hF;break;case"wheel":x=FF;break;case"copy":case"cut":case"paste":x=_F;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=LE}var E=(e&4)!=0,M=!E&&n==="scroll",w=E?m!==null?m+"Capture":null:m;E=[];for(var _=h,C;_!==null;){C=_;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,w!==null&&(b=xh(_,w),b!=null&&E.push(Oh(_,b,C)))),M)break;_=_.return}0<E.length&&(m=new x(m,A,null,t,v),p.push({event:m,listeners:E}))}}if((e&7)==0){e:{if(m=n==="mouseover"||n==="pointerover",x=n==="mouseout"||n==="pointerout",m&&(e&16)==0&&(A=t.relatedTarget||t.fromElement)&&(fu(A)||A[pf]))break e;if((x||m)&&(m=v.window===v?v:(m=v.ownerDocument)?m.defaultView||m.parentWindow:window,x?(A=t.relatedTarget||t.toElement,x=h,A=A?fu(A):null,A!==null&&(M=cu(A),A!==M||A.tag!==5&&A.tag!==6)&&(A=null)):(x=null,A=h),x!==A)){if(E=CE,b="onMouseLeave",w="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(E=LE,b="onPointerLeave",w="onPointerEnter",_="pointer"),M=x==null?m:mf(x),C=A==null?m:mf(A),m=new E(b,_+"leave",x,t,v),m.target=M,m.relatedTarget=C,b=null,fu(v)===h&&(E=new E(w,_+"enter",A,t,v),E.target=C,E.relatedTarget=M,b=E),M=b,x&&A)t:{for(E=x,w=A,_=0,C=E;C;C=df(C))_++;for(C=0,b=w;b;b=df(b))C++;for(;0<_-C;)E=df(E),_--;for(;0<C-_;)w=df(w),C--;for(;_--;){if(E===w||w!==null&&E===w.alternate)break t;E=df(E),w=df(w)}E=null}else E=null;x!==null&&tS(p,m,x,E,!1),A!==null&&M!==null&&tS(p,M,A,E,!0)}}e:{if(m=h?mf(h):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var I=kF;else if(DE(m))if(NE)I=JF;else{I=WF;var B=zF}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(I=VF);if(I&&(I=I(n,h))){OE(p,I,t,v);break e}B&&B(n,m,h),n==="focusout"&&(B=m._wrapperState)&&B.controlled&&m.type==="number"&&cx(m,"number",m.value)}switch(B=h?mf(h):window,n){case"focusin":(DE(B)||B.contentEditable==="true")&&(ff=B,Vx=h,Fh=null);break;case"focusout":Fh=Vx=ff=null;break;case"mousedown":Jx=!0;break;case"contextmenu":case"mouseup":case"dragend":Jx=!1,JE(p,t,v);break;case"selectionchange":if(KF)break;case"keydown":case"keyup":JE(p,t,v)}var H;if(Ux)e:{switch(n){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else cf?IE(n,t)&&(D="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(D="onCompositionStart");D&&(BE&&t.locale!=="ko"&&(cf||D!=="onCompositionStart"?D==="onCompositionEnd"&&cf&&(H=SE()):(Ua=v,Fx="value"in Ua?Ua.value:Ua.textContent,cf=!0)),B=Hg(h,D),0<B.length&&(D=new bE(D,n,null,t,v),p.push({event:D,listeners:B}),H?D.data=H:(H=FE(t),H!==null&&(D.data=H)))),(H=OF?NF(n,t):GF(n,t))&&(h=Hg(h,"onBeforeInput"),0<h.length&&(v=new bE("onBeforeInput","beforeinput",null,t,v),p.push({event:v,listeners:h}),v.data=H))}YE(p,e)})}function Oh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Hg(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=xh(n,t),s!=null&&r.unshift(Oh(n,s,i)),s=xh(n,e),s!=null&&r.push(Oh(n,s,i))),n=n.return}return r}function df(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function tS(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var l=t,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,i?(c=xh(t,s),c!=null&&o.unshift(Oh(t,c,l))):i||(c=xh(t,s),c!=null&&o.push(Oh(t,c,l)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}function Ug(){}var Xx=null,Kx=null;function nS(n,e){switch(n){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Yx(n,e){return n==="textarea"||n==="option"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rS=typeof setTimeout=="function"?setTimeout:void 0,YF=typeof clearTimeout=="function"?clearTimeout:void 0;function qx(n){n.nodeType===1?n.textContent="":n.nodeType===9&&(n=n.body,n!=null&&(n.textContent=""))}function hf(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break}return n}function iS(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Qx=0;function qF(n){return{$$typeof:rx,toString:n,valueOf:n}}var kg=Math.random().toString(36).slice(2),ka="__reactFiber$"+kg,zg="__reactProps$"+kg,pf="__reactContainer$"+kg,sS="__reactEvents$"+kg;function fu(n){var e=n[ka];if(e)return e;for(var t=n.parentNode;t;){if(e=t[pf]||t[ka]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=iS(n);n!==null;){if(t=n[ka])return t;n=iS(n)}return e}n=t,t=n.parentNode}return null}function Nh(n){return n=n[ka]||n[pf],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function mf(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Je(33))}function Wg(n){return n[zg]||null}function oS(n){var e=n[sS];return e===void 0&&(e=n[sS]=new Set),e}var Zx=[],gf=-1;function za(n){return{current:n}}function Ln(n){0>gf||(n.current=Zx[gf],Zx[gf]=null,gf--)}function Vn(n,e){gf++,Zx[gf]=n.current,n.current=e}var Wa={},ti=za(Wa),Di=za(!1),du=Wa;function vf(n,e){var t=n.type.contextTypes;if(!t)return Wa;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Oi(n){return n=n.childContextTypes,n!=null}function Vg(){Ln(Di),Ln(ti)}function aS(n,e,t){if(ti.current!==Wa)throw Error(Je(168));Vn(ti,e),Vn(Di,t)}function lS(n,e,t){var r=n.stateNode;if(n=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in n))throw Error(Je(108,tf(e)||"Unknown",i));return Fn({},t,r)}function Jg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Wa,du=ti.current,Vn(ti,n),Vn(Di,Di.current),!0}function uS(n,e,t){var r=n.stateNode;if(!r)throw Error(Je(169));t?(n=lS(n,e,du),r.__reactInternalMemoizedMergedChildContext=n,Ln(Di),Ln(ti),Vn(ti,n)):Ln(Di),Vn(Di,t)}var $x=null,hu=null,QF=Cr.unstable_runWithPriority,e_=Cr.unstable_scheduleCallback,t_=Cr.unstable_cancelCallback,ZF=Cr.unstable_shouldYield,cS=Cr.unstable_requestPaint,n_=Cr.unstable_now,$F=Cr.unstable_getCurrentPriorityLevel,jg=Cr.unstable_ImmediatePriority,fS=Cr.unstable_UserBlockingPriority,dS=Cr.unstable_NormalPriority,hS=Cr.unstable_LowPriority,pS=Cr.unstable_IdlePriority,r_={},eD=cS!==void 0?cS:function(){},$o=null,Xg=null,i_=!1,mS=n_(),ni=1e4>mS?n_:function(){return n_()-mS};function yf(){switch($F()){case jg:return 99;case fS:return 98;case dS:return 97;case hS:return 96;case pS:return 95;default:throw Error(Je(332))}}function gS(n){switch(n){case 99:return jg;case 98:return fS;case 97:return dS;case 96:return hS;case 95:return pS;default:throw Error(Je(332))}}function pu(n,e){return n=gS(n),QF(n,e)}function Gh(n,e,t){return n=gS(n),e_(n,e,t)}function ro(){if(Xg!==null){var n=Xg;Xg=null,t_(n)}vS()}function vS(){if(!i_&&$o!==null){i_=!0;var n=0;try{var e=$o;pu(99,function(){for(;n<e.length;n++){var t=e[n];do t=t(!0);while(t!==null)}}),$o=null}catch(t){throw $o!==null&&($o=$o.slice(n+1)),e_(jg,ro),t}finally{i_=!1}}}var tD=au.ReactCurrentBatchConfig;function Fs(n,e){if(n&&n.defaultProps){e=Fn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Kg=za(null),Yg=null,xf=null,qg=null;function s_(){qg=xf=Yg=null}function o_(n){var e=Kg.current;Ln(Kg),n.type._context._currentValue=e}function yS(n,e){for(;n!==null;){var t=n.alternate;if((n.childLanes&e)===e){if(t===null||(t.childLanes&e)===e)break;t.childLanes|=e}else n.childLanes|=e,t!==null&&(t.childLanes|=e);n=n.return}}function _f(n,e){Yg=n,qg=xf=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&e)!=0&&(Ds=!0),n.firstContext=null)}function ds(n,e){if(qg!==n&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(qg=n,e=1073741823),e={context:n,observedBits:e,next:null},xf===null){if(Yg===null)throw Error(Je(308));xf=e,Yg.dependencies={lanes:0,firstContext:e,responders:null}}else xf=xf.next=e;return n._currentValue}var Va=!1;function a_(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function xS(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ja(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ja(n,e){if(n=n.updateQueue,n!==null){n=n.shared;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}}function _S(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Hh(n,e,t,r){var i=n.updateQueue;Va=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var v=n.alternate;if(v!==null){v=v.updateQueue;var p=v.lastBaseUpdate;p!==o&&(p===null?v.firstBaseUpdate=h:p.next=h,v.lastBaseUpdate=c)}}if(s!==null){p=i.baseState,o=0,v=h=c=null;do{l=s.lane;var m=s.eventTime;if((r&l)===l){v!==null&&(v=v.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var x=n,A=s;switch(l=e,m=t,A.tag){case 1:if(x=A.payload,typeof x=="function"){p=x.call(m,p,l);break e}p=x;break e;case 3:x.flags=x.flags&-4097|64;case 0:if(x=A.payload,l=typeof x=="function"?x.call(m,p,l):x,l==null)break e;p=Fn({},p,l);break e;case 2:Va=!0}}s.callback!==null&&(n.flags|=32,l=i.effects,l===null?i.effects=[s]:l.push(s))}else m={eventTime:m,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},v===null?(h=v=m,c=p):v=v.next=m,o|=l;if(s=s.next,s===null){if(l=i.shared.pending,l===null)break;s=l.next,l.next=null,i.lastBaseUpdate=l,i.shared.pending=null}}while(1);v===null&&(c=p),i.baseState=c,i.firstBaseUpdate=h,i.lastBaseUpdate=v,Qh|=o,n.lanes=o,n.memoizedState=p}}function wS(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Je(191,i));i.call(r)}}}var AS=new yg.Component().refs;function Qg(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Fn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Zg={isMounted:function(n){return(n=n._reactInternals)?cu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Yi(),i=Ya(n),s=Ja(r,i);s.payload=e,t!=null&&(s.callback=t),ja(n,s),qa(n,i,r)},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Yi(),i=Ya(n),s=Ja(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),ja(n,s),qa(n,i,r)},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Yi(),r=Ya(n),i=Ja(t,r);i.tag=2,e!=null&&(i.callback=e),ja(n,i),qa(n,r,t)}};function MS(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ih(t,r)||!Ih(i,s):!0}function ES(n,e,t){var r=!1,i=Wa,s=e.contextType;return typeof s=="object"&&s!==null?s=ds(s):(i=Oi(e)?du:ti.current,r=e.contextTypes,s=(r=r!=null)?vf(n,i):Wa),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zg,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function SS(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Zg.enqueueReplaceState(e,e.state,null)}function l_(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=AS,a_(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ds(s):(s=Oi(e)?du:ti.current,i.context=vf(n,s)),Hh(n,t,i,r),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Qg(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Zg.enqueueReplaceState(i,i.state,null),Hh(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4)}var $g=Array.isArray;function Uh(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Je(309));var r=t.stateNode}if(!r)throw Error(Je(147,n));var i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var o=r.refs;o===AS&&(o=r.refs={}),s===null?delete o[i]:o[i]=s},e._stringRef=i,e)}if(typeof n!="string")throw Error(Je(284));if(!t._owner)throw Error(Je(290,n))}return n}function ev(n,e){if(n.type!=="textarea")throw Error(Je(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function TS(n){function e(M,w){if(n){var _=M.lastEffect;_!==null?(_.nextEffect=w,M.lastEffect=w):M.firstEffect=M.lastEffect=w,w.nextEffect=null,w.flags=8}}function t(M,w){if(!n)return null;for(;w!==null;)e(M,w),w=w.sibling;return null}function r(M,w){for(M=new Map;w!==null;)w.key!==null?M.set(w.key,w):M.set(w.index,w),w=w.sibling;return M}function i(M,w){return M=$a(M,w),M.index=0,M.sibling=null,M}function s(M,w,_){return M.index=_,n?(_=M.alternate,_!==null?(_=_.index,_<w?(M.flags=2,w):_):(M.flags=2,w)):w}function o(M){return n&&M.alternate===null&&(M.flags=2),M}function l(M,w,_,C){return w===null||w.tag!==6?(w=V_(_,M.mode,C),w.return=M,w):(w=i(w,_),w.return=M,w)}function c(M,w,_,C){return w!==null&&w.elementType===_.type?(C=i(w,_.props),C.ref=Uh(M,w,_),C.return=M,C):(C=yv(_.type,_.key,_.props,null,M.mode,C),C.ref=Uh(M,w,_),C.return=M,C)}function h(M,w,_,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=J_(_,M.mode,C),w.return=M,w):(w=i(w,_.children||[]),w.return=M,w)}function v(M,w,_,C,b){return w===null||w.tag!==7?(w=bf(_,M.mode,C,b),w.return=M,w):(w=i(w,_),w.return=M,w)}function p(M,w,_){if(typeof w=="string"||typeof w=="number")return w=V_(""+w,M.mode,_),w.return=M,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case dh:return _=yv(w.type,w.key,w.props,null,M.mode,_),_.ref=Uh(M,null,w),_.return=M,_;case lu:return w=J_(w,M.mode,_),w.return=M,w}if($g(w)||mh(w))return w=bf(w,M.mode,_,null),w.return=M,w;ev(M,w)}return null}function m(M,w,_,C){var b=w!==null?w.key:null;if(typeof _=="string"||typeof _=="number")return b!==null?null:l(M,w,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case dh:return _.key===b?_.type===Fa?v(M,w,_.props.children,C,b):c(M,w,_,C):null;case lu:return _.key===b?h(M,w,_,C):null}if($g(_)||mh(_))return b!==null?null:v(M,w,_,C,null);ev(M,_)}return null}function x(M,w,_,C,b){if(typeof C=="string"||typeof C=="number")return M=M.get(_)||null,l(w,M,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case dh:return M=M.get(C.key===null?_:C.key)||null,C.type===Fa?v(w,M,C.props.children,b,C.key):c(w,M,C,b);case lu:return M=M.get(C.key===null?_:C.key)||null,h(w,M,C,b)}if($g(C)||mh(C))return M=M.get(_)||null,v(w,M,C,b,null);ev(w,C)}return null}function A(M,w,_,C){for(var b=null,I=null,B=w,H=w=0,D=null;B!==null&&H<_.length;H++){B.index>H?(D=B,B=null):D=B.sibling;var O=m(M,B,_[H],C);if(O===null){B===null&&(B=D);break}n&&B&&O.alternate===null&&e(M,B),w=s(O,w,H),I===null?b=O:I.sibling=O,I=O,B=D}if(H===_.length)return t(M,B),b;if(B===null){for(;H<_.length;H++)B=p(M,_[H],C),B!==null&&(w=s(B,w,H),I===null?b=B:I.sibling=B,I=B);return b}for(B=r(M,B);H<_.length;H++)D=x(B,M,H,_[H],C),D!==null&&(n&&D.alternate!==null&&B.delete(D.key===null?H:D.key),w=s(D,w,H),I===null?b=D:I.sibling=D,I=D);return n&&B.forEach(function(ee){return e(M,ee)}),b}function E(M,w,_,C){var b=mh(_);if(typeof b!="function")throw Error(Je(150));if(_=b.call(_),_==null)throw Error(Je(151));for(var I=b=null,B=w,H=w=0,D=null,O=_.next();B!==null&&!O.done;H++,O=_.next()){B.index>H?(D=B,B=null):D=B.sibling;var ee=m(M,B,O.value,C);if(ee===null){B===null&&(B=D);break}n&&B&&ee.alternate===null&&e(M,B),w=s(ee,w,H),I===null?b=ee:I.sibling=ee,I=ee,B=D}if(O.done)return t(M,B),b;if(B===null){for(;!O.done;H++,O=_.next())O=p(M,O.value,C),O!==null&&(w=s(O,w,H),I===null?b=O:I.sibling=O,I=O);return b}for(B=r(M,B);!O.done;H++,O=_.next())O=x(B,M,H,O.value,C),O!==null&&(n&&O.alternate!==null&&B.delete(O.key===null?H:O.key),w=s(O,w,H),I===null?b=O:I.sibling=O,I=O);return n&&B.forEach(function(q){return e(M,q)}),b}return function(M,w,_,C){var b=typeof _=="object"&&_!==null&&_.type===Fa&&_.key===null;b&&(_=_.props.children);var I=typeof _=="object"&&_!==null;if(I)switch(_.$$typeof){case dh:e:{for(I=_.key,b=w;b!==null;){if(b.key===I){switch(b.tag){case 7:if(_.type===Fa){t(M,b.sibling),w=i(b,_.props.children),w.return=M,M=w;break e}break;default:if(b.elementType===_.type){t(M,b.sibling),w=i(b,_.props),w.ref=Uh(M,b,_),w.return=M,M=w;break e}}t(M,b);break}else e(M,b);b=b.sibling}_.type===Fa?(w=bf(_.props.children,M.mode,C,_.key),w.return=M,M=w):(C=yv(_.type,_.key,_.props,null,M.mode,C),C.ref=Uh(M,w,_),C.return=M,M=C)}return o(M);case lu:e:{for(b=_.key;w!==null;){if(w.key===b)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){t(M,w.sibling),w=i(w,_.children||[]),w.return=M,M=w;break e}else{t(M,w);break}else e(M,w);w=w.sibling}w=J_(_,M.mode,C),w.return=M,M=w}return o(M)}if(typeof _=="string"||typeof _=="number")return _=""+_,w!==null&&w.tag===6?(t(M,w.sibling),w=i(w,_),w.return=M,M=w):(t(M,w),w=V_(_,M.mode,C),w.return=M,M=w),o(M);if($g(_))return A(M,w,_,C);if(mh(_))return E(M,w,_,C);if(I&&ev(M,_),typeof _=="undefined"&&!b)switch(M.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Je(152,tf(M.type)||"Component"))}return t(M,w)}}var tv=TS(!0),CS=TS(!1),kh={},io=za(kh),zh=za(kh),Wh=za(kh);function mu(n){if(n===kh)throw Error(Je(174));return n}function u_(n,e){switch(Vn(Wh,e),Vn(zh,n),Vn(io,kh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:px(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=px(e,n)}Ln(io),Vn(io,e)}function wf(){Ln(io),Ln(zh),Ln(Wh)}function bS(n){mu(Wh.current);var e=mu(io.current),t=px(e,n.type);e!==t&&(Vn(zh,n),Vn(io,t))}function c_(n){zh.current===n&&(Ln(io),Ln(zh))}var Jn=za(0);function nv(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!=0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ea=null,Xa=null,so=!1;function LS(n,e){var t=ms(5,null,null,0);t.elementType="DELETED",t.type="DELETED",t.stateNode=e,t.return=n,t.flags=8,n.lastEffect!==null?(n.lastEffect.nextEffect=t,n.lastEffect=t):n.firstEffect=n.lastEffect=t}function BS(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function f_(n){if(so){var e=Xa;if(e){var t=e;if(!BS(n,e)){if(e=hf(t.nextSibling),!e||!BS(n,e)){n.flags=n.flags&-1025|2,so=!1,ea=n;return}LS(ea,t)}ea=n,Xa=hf(e.firstChild)}else n.flags=n.flags&-1025|2,so=!1,ea=n}}function RS(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ea=n}function rv(n){if(n!==ea)return!1;if(!so)return RS(n),so=!0,!1;var e=n.type;if(n.tag!==5||e!=="head"&&e!=="body"&&!Yx(e,n.memoizedProps))for(e=Xa;e;)LS(n,e),e=hf(e.nextSibling);if(RS(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Je(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Xa=hf(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Xa=null}}else Xa=ea?hf(n.stateNode.nextSibling):null;return!0}function d_(){Xa=ea=null,so=!1}var Af=[];function h_(){for(var n=0;n<Af.length;n++)Af[n]._workInProgressVersionPrimary=null;Af.length=0}var Vh=au.ReactCurrentDispatcher,hs=au.ReactCurrentBatchConfig,Jh=0,tr=null,ri=null,Ur=null,iv=!1,jh=!1;function Ni(){throw Error(Je(321))}function p_(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!fs(n[t],e[t]))return!1;return!0}function m_(n,e,t,r,i,s){if(Jh=s,tr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vh.current=n===null||n.memoizedState===null?rD:iD,n=t(r,i),jh){s=0;do{if(jh=!1,!(25>s))throw Error(Je(301));s+=1,Ur=ri=null,e.updateQueue=null,Vh.current=sD,n=t(r,i)}while(jh)}if(Vh.current=lv,e=ri!==null&&ri.next!==null,Jh=0,Ur=ri=tr=null,iv=!1,e)throw Error(Je(300));return n}function gu(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?tr.memoizedState=Ur=n:Ur=Ur.next=n,Ur}function vu(){if(ri===null){var n=tr.alternate;n=n!==null?n.memoizedState:null}else n=ri.next;var e=Ur===null?tr.memoizedState:Ur.next;if(e!==null)Ur=e,ri=n;else{if(n===null)throw Error(Je(310));ri=n,n={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},Ur===null?tr.memoizedState=Ur=n:Ur=Ur.next=n}return Ur}function oo(n,e){return typeof e=="function"?e(n):e}function Xh(n){var e=vu(),t=e.queue;if(t===null)throw Error(Je(311));t.lastRenderedReducer=n;var r=ri,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){i=i.next,r=r.baseState;var l=o=s=null,c=i;do{var h=c.lane;if((Jh&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===n?c.eagerState:n(r,c.action);else{var v={lane:h,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};l===null?(o=l=v,s=r):l=l.next=v,tr.lanes|=h,Qh|=h}c=c.next}while(c!==null&&c!==i);l===null?s=r:l.next=o,fs(r,e.memoizedState)||(Ds=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,t.lastRenderedState=r}return[e.memoizedState,t.dispatch]}function Kh(n){var e=vu(),t=e.queue;if(t===null)throw Error(Je(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);fs(s,e.memoizedState)||(Ds=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function PS(n,e,t){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?n=i===r:(n=n.mutableReadLanes,(n=(Jh&n)===n)&&(e._workInProgressVersionPrimary=r,Af.push(e))),n)return t(e._source);throw Af.push(e),Error(Je(350))}function IS(n,e,t,r){var i=yi;if(i===null)throw Error(Je(349));var s=e._getVersion,o=s(e._source),l=Vh.current,c=l.useState(function(){return PS(i,e,t)}),h=c[1],v=c[0];c=Ur;var p=n.memoizedState,m=p.refs,x=m.getSnapshot,A=p.source;p=p.subscribe;var E=tr;return n.memoizedState={refs:m,source:e,subscribe:r},l.useEffect(function(){m.getSnapshot=t,m.setSnapshot=h;var M=s(e._source);if(!fs(o,M)){M=t(e._source),fs(v,M)||(h(M),M=Ya(E),i.mutableReadLanes|=M&i.pendingLanes),M=i.mutableReadLanes,i.entangledLanes|=M;for(var w=i.entanglements,_=M;0<_;){var C=31-Ha(_),b=1<<C;w[C]|=M,_&=~b}}},[t,e,r]),l.useEffect(function(){return r(e._source,function(){var M=m.getSnapshot,w=m.setSnapshot;try{w(M(e._source));var _=Ya(E);i.mutableReadLanes|=_&i.pendingLanes}catch(C){w(function(){throw C})}})},[e,r]),fs(x,t)&&fs(A,e)&&fs(p,r)||(n={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:v},n.dispatch=h=x_.bind(null,tr,n),c.queue=n,c.baseQueue=null,v=PS(i,e,t),c.memoizedState=c.baseState=v),v}function FS(n,e,t){var r=vu();return IS(r,n,e,t)}function Yh(n){var e=gu();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n=e.queue={pending:null,dispatch:null,lastRenderedReducer:oo,lastRenderedState:n},n=n.dispatch=x_.bind(null,tr,n),[e.memoizedState,n]}function sv(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=tr.updateQueue,e===null?(e={lastEffect:null},tr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function DS(n){var e=gu();return n={current:n},e.memoizedState=n}function ov(){return vu().memoizedState}function g_(n,e,t,r){var i=gu();tr.flags|=n,i.memoizedState=sv(1|e,t,void 0,r===void 0?null:r)}function v_(n,e,t,r){var i=vu();r=r===void 0?null:r;var s=void 0;if(ri!==null){var o=ri.memoizedState;if(s=o.destroy,r!==null&&p_(r,o.deps)){sv(e,t,s,r);return}}tr.flags|=n,i.memoizedState=sv(1|e,t,s,r)}function OS(n,e){return g_(516,4,n,e)}function av(n,e){return v_(516,4,n,e)}function NS(n,e){return v_(4,2,n,e)}function GS(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function HS(n,e,t){return t=t!=null?t.concat([n]):null,v_(4,2,GS.bind(null,e,n),t)}function y_(){}function US(n,e){var t=vu();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&p_(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function kS(n,e){var t=vu();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&p_(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function nD(n,e){var t=yf();pu(98>t?98:t,function(){n(!0)}),pu(97<t?97:t,function(){var r=hs.transition;hs.transition=1;try{n(!1),e()}finally{hs.transition=r}})}function x_(n,e,t){var r=Yi(),i=Ya(n),s={lane:i,action:t,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(o===null?s.next=s:(s.next=o.next,o.next=s),e.pending=s,o=n.alternate,n===tr||o!==null&&o===tr)jh=iv=!0;else{if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,c=o(l,t);if(s.eagerReducer=o,s.eagerState=c,fs(c,l))return}catch{}finally{}qa(n,i,r)}}var lv={readContext:ds,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useOpaqueIdentifier:Ni,unstable_isNewReconciler:!1},rD={readContext:ds,useCallback:function(n,e){return gu().memoizedState=[n,e===void 0?null:e],n},useContext:ds,useEffect:OS,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,g_(4,2,GS.bind(null,e,n),t)},useLayoutEffect:function(n,e){return g_(4,2,n,e)},useMemo:function(n,e){var t=gu();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=gu();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n=r.queue={pending:null,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},n=n.dispatch=x_.bind(null,tr,n),[r.memoizedState,n]},useRef:DS,useState:Yh,useDebugValue:y_,useDeferredValue:function(n){var e=Yh(n),t=e[0],r=e[1];return OS(function(){var i=hs.transition;hs.transition=1;try{r(n)}finally{hs.transition=i}},[n]),t},useTransition:function(){var n=Yh(!1),e=n[0];return n=nD.bind(null,n[1]),DS(n),[n,e]},useMutableSource:function(n,e,t){var r=gu();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:n,subscribe:t},IS(r,n,e,t)},useOpaqueIdentifier:function(){if(so){var n=!1,e=qF(function(){throw n||(n=!0,t("r:"+(Qx++).toString(36))),Error(Je(355))}),t=Yh(e)[1];return(tr.mode&2)==0&&(tr.flags|=516,sv(5,function(){t("r:"+(Qx++).toString(36))},void 0,null)),e}return e="r:"+(Qx++).toString(36),Yh(e),e},unstable_isNewReconciler:!1},iD={readContext:ds,useCallback:US,useContext:ds,useEffect:av,useImperativeHandle:HS,useLayoutEffect:NS,useMemo:kS,useReducer:Xh,useRef:ov,useState:function(){return Xh(oo)},useDebugValue:y_,useDeferredValue:function(n){var e=Xh(oo),t=e[0],r=e[1];return av(function(){var i=hs.transition;hs.transition=1;try{r(n)}finally{hs.transition=i}},[n]),t},useTransition:function(){var n=Xh(oo)[0];return[ov().current,n]},useMutableSource:FS,useOpaqueIdentifier:function(){return Xh(oo)[0]},unstable_isNewReconciler:!1},sD={readContext:ds,useCallback:US,useContext:ds,useEffect:av,useImperativeHandle:HS,useLayoutEffect:NS,useMemo:kS,useReducer:Kh,useRef:ov,useState:function(){return Kh(oo)},useDebugValue:y_,useDeferredValue:function(n){var e=Kh(oo),t=e[0],r=e[1];return av(function(){var i=hs.transition;hs.transition=1;try{r(n)}finally{hs.transition=i}},[n]),t},useTransition:function(){var n=Kh(oo)[0];return[ov().current,n]},useMutableSource:FS,useOpaqueIdentifier:function(){return Kh(oo)[0]},unstable_isNewReconciler:!1},oD=au.ReactCurrentOwner,Ds=!1;function Gi(n,e,t,r){e.child=n===null?CS(e,null,t,r):tv(e,n.child,t,r)}function zS(n,e,t,r,i){t=t.render;var s=e.ref;return _f(e,i),r=m_(n,e,t,r,s,i),n!==null&&!Ds?(e.updateQueue=n.updateQueue,e.flags&=-517,n.lanes&=~i,ta(n,e,i)):(e.flags|=1,Gi(n,e,r,i),e.child)}function WS(n,e,t,r,i,s){if(n===null){var o=t.type;return typeof o=="function"&&!z_(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,VS(n,e,o,r,i,s)):(n=yv(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}return o=n.child,(i&s)==0&&(i=o.memoizedProps,t=t.compare,t=t!==null?t:Ih,t(i,r)&&n.ref===e.ref)?ta(n,e,s):(e.flags|=1,n=$a(o,r),n.ref=e.ref,n.return=e,e.child=n)}function VS(n,e,t,r,i,s){if(n!==null&&Ih(n.memoizedProps,r)&&n.ref===e.ref)if(Ds=!1,(s&i)!=0)(n.flags&16384)!=0&&(Ds=!0);else return e.lanes=n.lanes,ta(n,e,s);return w_(n,e,t,r,s)}function __(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if((e.mode&4)==0)e.memoizedState={baseLanes:0},vv(e,t);else if((t&1073741824)!=0)e.memoizedState={baseLanes:0},vv(e,s!==null?s.baseLanes:t);else return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n},vv(e,n),null;else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,vv(e,r);return Gi(n,e,i,t),e.child}function JS(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=128)}function w_(n,e,t,r,i){var s=Oi(t)?du:ti.current;return s=vf(e,s),_f(e,i),t=m_(n,e,t,r,s,i),n!==null&&!Ds?(e.updateQueue=n.updateQueue,e.flags&=-517,n.lanes&=~i,ta(n,e,i)):(e.flags|=1,Gi(n,e,t,i),e.child)}function jS(n,e,t,r,i){if(Oi(t)){var s=!0;Jg(e)}else s=!1;if(_f(e,i),e.stateNode===null)n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),ES(e,t,r),l_(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=t.contextType;typeof h=="object"&&h!==null?h=ds(h):(h=Oi(t)?du:ti.current,h=vf(e,h));var v=t.getDerivedStateFromProps,p=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&SS(e,o,r,h),Va=!1;var m=e.memoizedState;o.state=m,Hh(e,r,o,i),c=e.memoizedState,l!==r||m!==c||Di.current||Va?(typeof v=="function"&&(Qg(e,t,v,r),c=e.memoizedState),(l=Va||MS(e,t,l,r,m,c,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4)):(typeof o.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{o=e.stateNode,xS(n,e),l=e.memoizedProps,h=e.type===e.elementType?l:Fs(e.type,l),o.props=h,p=e.pendingProps,m=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=ds(c):(c=Oi(t)?du:ti.current,c=vf(e,c));var x=t.getDerivedStateFromProps;(v=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==c)&&SS(e,o,r,c),Va=!1,m=e.memoizedState,o.state=m,Hh(e,r,o,i);var A=e.memoizedState;l!==p||m!==A||Di.current||Va?(typeof x=="function"&&(Qg(e,t,x,r),A=e.memoizedState),(h=Va||MS(e,t,h,r,m,A,c))?(v||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=256),r=!1)}return A_(n,e,t,r,s,i)}function A_(n,e,t,r,i,s){JS(n,e);var o=(e.flags&64)!=0;if(!r&&!o)return i&&uS(e,t,!1),ta(n,e,s);r=e.stateNode,oD.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=tv(e,n.child,null,s),e.child=tv(e,null,l,s)):Gi(n,e,l,s),e.memoizedState=r.state,i&&uS(e,t,!0),e.child}function XS(n){var e=n.stateNode;e.pendingContext?aS(n,e.pendingContext,e.pendingContext!==e.context):e.context&&aS(n,e.context,!1),u_(n,e.containerInfo)}var uv={dehydrated:null,retryLane:0};function KS(n,e,t){var r=e.pendingProps,i=Jn.current,s=!1,o;return(o=(e.flags&64)!=0)||(o=n!==null&&n.memoizedState===null?!1:(i&2)!=0),o?(s=!0,e.flags&=-65):n!==null&&n.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(i|=1),Vn(Jn,i&1),n===null?(r.fallback!==void 0&&f_(e),n=r.children,i=r.fallback,s?(n=YS(e,n,i,t),e.child.memoizedState={baseLanes:t},e.memoizedState=uv,n):typeof r.unstable_expectedLoadTime=="number"?(n=YS(e,n,i,t),e.child.memoizedState={baseLanes:t},e.memoizedState=uv,e.lanes=33554432,n):(t=W_({mode:"visible",children:n},e.mode,t,null),t.return=e,e.child=t)):n.memoizedState!==null?s?(r=QS(n,e,r.children,r.fallback,t),s=e.child,i=n.child.memoizedState,s.memoizedState=i===null?{baseLanes:t}:{baseLanes:i.baseLanes|t},s.childLanes=n.childLanes&~t,e.memoizedState=uv,r):(t=qS(n,e,r.children,t),e.memoizedState=null,t):s?(r=QS(n,e,r.children,r.fallback,t),s=e.child,i=n.child.memoizedState,s.memoizedState=i===null?{baseLanes:t}:{baseLanes:i.baseLanes|t},s.childLanes=n.childLanes&~t,e.memoizedState=uv,r):(t=qS(n,e,r.children,t),e.memoizedState=null,t)}function YS(n,e,t,r){var i=n.mode,s=n.child;return e={mode:"hidden",children:e},(i&2)==0&&s!==null?(s.childLanes=0,s.pendingProps=e):s=W_(e,i,0,null),t=bf(t,i,r,null),s.return=n,t.return=n,s.sibling=t,n.child=s,t}function qS(n,e,t,r){var i=n.child;return n=i.sibling,t=$a(i,{mode:"visible",children:t}),(e.mode&2)==0&&(t.lanes=r),t.return=e,t.sibling=null,n!==null&&(n.nextEffect=null,n.flags=8,e.firstEffect=e.lastEffect=n),e.child=t}function QS(n,e,t,r,i){var s=e.mode,o=n.child;n=o.sibling;var l={mode:"hidden",children:t};return(s&2)==0&&e.child!==o?(t=e.child,t.childLanes=0,t.pendingProps=l,o=t.lastEffect,o!==null?(e.firstEffect=t.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):t=$a(o,l),n!==null?r=$a(n,r):(r=bf(r,s,i,null),r.flags|=2),r.return=e,t.return=e,t.sibling=r,e.child=t,r}function ZS(n,e){n.lanes|=e;var t=n.alternate;t!==null&&(t.lanes|=e),yS(n.return,e)}function M_(n,e,t,r,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i,lastEffect:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=i,o.lastEffect=s)}function $S(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Gi(n,e,r.children,t),r=Jn.current,(r&2)!=0)r=r&1|2,e.flags|=64;else{if(n!==null&&(n.flags&64)!=0)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ZS(n,t);else if(n.tag===19)ZS(n,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Vn(Jn,r),(e.mode&2)==0)e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&nv(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),M_(e,!1,i,t,s,e.lastEffect);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&nv(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}M_(e,!0,t,null,s,e.lastEffect);break;case"together":M_(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function ta(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Qh|=e.lanes,(t&e.childLanes)!=0){if(n!==null&&e.child!==n.child)throw Error(Je(153));if(e.child!==null){for(n=e.child,t=$a(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=$a(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}return null}var eT,E_,tT,nT;eT=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};E_=function(){};tT=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,mu(io.current);var s=null;switch(t){case"input":i=lx(n,i),r=lx(n,r),s=[];break;case"option":i=fx(n,i),r=fx(n,r),s=[];break;case"select":i=Fn({},i,{value:void 0}),r=Fn({},r,{value:void 0}),s=[];break;case"textarea":i=dx(n,i),r=dx(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Ug)}mx(t,r);var o;t=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(fh.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var c=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(s||(s=[]),s.push(h,t)),t=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(fh.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&bn("scroll",n),s||l===c||(s=[])):typeof c=="object"&&c!==null&&c.$$typeof===rx?c.toString():(s=s||[]).push(h,c))}t&&(s=s||[]).push("style",t);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};nT=function(n,e,t,r){t!==r&&(e.flags|=4)};function qh(n,e){if(!so)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function aD(n,e,t){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Oi(e.type)&&Vg(),null;case 3:return wf(),Ln(Di),Ln(ti),h_(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(rv(e)?e.flags|=4:r.hydrate||(e.flags|=256)),E_(e),null;case 5:c_(e);var i=mu(Wh.current);if(t=e.type,n!==null&&e.stateNode!=null)tT(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(Je(166));return null}if(n=mu(io.current),rv(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[ka]=e,r[zg]=s,t){case"dialog":bn("cancel",r),bn("close",r);break;case"iframe":case"object":case"embed":bn("load",r);break;case"video":case"audio":for(n=0;n<Dh.length;n++)bn(Dh[n],r);break;case"source":bn("error",r);break;case"img":case"image":case"link":bn("error",r),bn("load",r);break;case"details":bn("toggle",r);break;case"input":jM(r,s),bn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},bn("invalid",r);break;case"textarea":YM(r,s),bn("invalid",r)}mx(t,s),n=null;for(var o in s)s.hasOwnProperty(o)&&(i=s[o],o==="children"?typeof i=="string"?r.textContent!==i&&(n=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(n=["children",""+i]):fh.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&bn("scroll",r));switch(t){case"input":Mg(r),KM(r,s,!0);break;case"textarea":Mg(r),QM(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ug)}r=n,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,n===hx.html&&(n=ZM(t)),n===hx.html?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[ka]=e,n[zg]=r,eT(n,e,!1,!1),e.stateNode=n,o=gx(t,r),t){case"dialog":bn("cancel",n),bn("close",n),i=r;break;case"iframe":case"object":case"embed":bn("load",n),i=r;break;case"video":case"audio":for(i=0;i<Dh.length;i++)bn(Dh[i],n);i=r;break;case"source":bn("error",n),i=r;break;case"img":case"image":case"link":bn("error",n),bn("load",n),i=r;break;case"details":bn("toggle",n),i=r;break;case"input":jM(n,r),i=lx(n,r),bn("invalid",n);break;case"option":i=fx(n,r);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Fn({},r,{value:void 0}),bn("invalid",n);break;case"textarea":YM(n,r),i=dx(n,r),bn("invalid",n);break;default:i=r}mx(t,i);var l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?tE(n,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$M(n,c)):s==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&vh(n,c):typeof c=="number"&&vh(n,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fh.hasOwnProperty(s)?c!=null&&s==="onScroll"&&bn("scroll",n):c!=null&&Q0(n,s,c,o))}switch(t){case"input":Mg(n),KM(n,r,!1);break;case"textarea":Mg(n),QM(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Da(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?nf(n,!!r.multiple,s,!1):r.defaultValue!=null&&nf(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Ug)}nS(t,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(n&&e.stateNode!=null)nT(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Je(166));t=mu(Wh.current),mu(io.current),rv(e)?(r=e.stateNode,t=e.memoizedProps,r[ka]=e,r.nodeValue!==t&&(e.flags|=4)):(r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[ka]=e,e.stateNode=r)}return null;case 13:return Ln(Jn),r=e.memoizedState,(e.flags&64)!=0?(e.lanes=t,e):(r=r!==null,t=!1,n===null?e.memoizedProps.fallback!==void 0&&rv(e):t=n.memoizedState!==null,r&&!t&&(e.mode&2)!=0&&(n===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(Jn.current&1)!=0?kr===0&&(kr=3):((kr===0||kr===3)&&(kr=4),yi===null||(Qh&134217727)==0&&(Ef&134217727)==0||Tf(yi,ii))),(r||t)&&(e.flags|=4),null);case 4:return wf(),E_(e),n===null&&QE(e.stateNode.containerInfo),null;case 10:return o_(e),null;case 17:return Oi(e.type)&&Vg(),null;case 19:if(Ln(Jn),r=e.memoizedState,r===null)return null;if(s=(e.flags&64)!=0,o=r.rendering,o===null)if(s)qh(r,!1);else{if(kr!==0||n!==null&&(n.flags&64)!=0)for(n=e.child;n!==null;){if(o=nv(n),o!==null){for(e.flags|=64,qh(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Vn(Jn,Jn.current&1|2),e.child}n=n.sibling}r.tail!==null&&ni()>D_&&(e.flags|=64,s=!0,qh(r,!1),e.lanes=33554432)}else{if(!s)if(n=nv(o),n!==null){if(e.flags|=64,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),qh(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!so)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*ni()-r.renderingStartTime>D_&&t!==1073741824&&(e.flags|=64,s=!0,qh(r,!1),e.lanes=33554432);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=ni(),t.sibling=null,e=Jn.current,Vn(Jn,s?e&1|2:e&1),t):null;case 23:case 24:return k_(),n!==null&&n.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(Je(156,e.tag))}function lD(n){switch(n.tag){case 1:Oi(n.type)&&Vg();var e=n.flags;return e&4096?(n.flags=e&-4097|64,n):null;case 3:if(wf(),Ln(Di),Ln(ti),h_(),e=n.flags,(e&64)!=0)throw Error(Je(285));return n.flags=e&-4097|64,n;case 5:return c_(n),null;case 13:return Ln(Jn),e=n.flags,e&4096?(n.flags=e&-4097|64,n):null;case 19:return Ln(Jn),null;case 4:return wf(),null;case 10:return o_(n),null;case 23:case 24:return k_(),null;default:return null}}function S_(n,e){try{var t="",r=e;do t+=z3(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i}}function T_(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var uD=typeof WeakMap=="function"?WeakMap:Map;function rT(n,e,t){t=Ja(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){dv||(dv=!0,O_=r),T_(n,e)},t}function iT(n,e,t){t=Ja(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return T_(n,e),r(i)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){typeof r!="function"&&(ao===null?ao=new Set([this]):ao.add(this),T_(n,e));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}var cD=typeof WeakSet=="function"?WeakSet:Set;function sT(n){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(t){Za(n,t)}else e.current=null}function fD(n,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&n!==null){var t=n.memoizedProps,r=n.memoizedState;n=e.stateNode,e=n.getSnapshotBeforeUpdate(e.elementType===e.type?t:Fs(e.type,t),r),n.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&qx(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Je(163))}function dD(n,e,t){switch(t.tag){case 0:case 11:case 15:case 22:if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){n=e=e.next;do{if((n.tag&3)==3){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}if(e=t.updateQueue,e=e!==null?e.lastEffect:null,e!==null){n=e=e.next;do{var i=n;r=i.next,i=i.tag,(i&4)!=0&&(i&1)!=0&&(_T(t,n),_D(t,n)),n=r}while(n!==e)}return;case 1:n=t.stateNode,t.flags&4&&(e===null?n.componentDidMount():(r=t.elementType===t.type?e.memoizedProps:Fs(t.type,e.memoizedProps),n.componentDidUpdate(r,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate))),e=t.updateQueue,e!==null&&wS(t,e,n);return;case 3:if(e=t.updateQueue,e!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}wS(t,e,n)}return;case 5:n=t.stateNode,e===null&&t.flags&4&&nS(t.type,t.memoizedProps)&&n.focus();return;case 6:return;case 4:return;case 12:return;case 13:t.memoizedState===null&&(t=t.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&vE(t))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Je(163))}function oT(n,e){for(var t=n;;){if(t.tag===5){var r=t.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=t.stateNode;var i=t.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,r.style.display=eE("display",i)}}else if(t.tag===6)t.stateNode.nodeValue=e?"":t.memoizedProps;else if((t.tag!==23&&t.tag!==24||t.memoizedState===null||t===n)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}}function aT(n,e){if(hu&&typeof hu.onCommitFiberUnmount=="function")try{hu.onCommitFiberUnmount($x,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null)){var t=n=n.next;do{var r=t,i=r.destroy;if(r=r.tag,i!==void 0)if((r&4)!=0)_T(e,t);else{r=e;try{i()}catch(s){Za(r,s)}}t=t.next}while(t!==n)}break;case 1:if(sT(e),n=e.stateNode,typeof n.componentWillUnmount=="function")try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(s){Za(e,s)}break;case 5:sT(e);break;case 4:fT(n,e)}}function lT(n){n.alternate=null,n.child=null,n.dependencies=null,n.firstEffect=null,n.lastEffect=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.return=null,n.updateQueue=null}function uT(n){return n.tag===5||n.tag===3||n.tag===4}function cT(n){e:{for(var e=n.return;e!==null;){if(uT(e))break e;e=e.return}throw Error(Je(160))}var t=e;switch(e=t.stateNode,t.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(Je(161))}t.flags&16&&(vh(e,""),t.flags&=-17);e:t:for(t=n;;){for(;t.sibling===null;){if(t.return===null||uT(t.return)){t=null;break e}t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2)){t=t.stateNode;break e}}r?C_(n,t,e):b_(n,t,e)}function C_(n,e,t){var r=n.tag,i=r===5||r===6;if(i)n=i?n.stateNode:n.stateNode.instance,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ug));else if(r!==4&&(n=n.child,n!==null))for(C_(n,e,t),n=n.sibling;n!==null;)C_(n,e,t),n=n.sibling}function b_(n,e,t){var r=n.tag,i=r===5||r===6;if(i)n=i?n.stateNode:n.stateNode.instance,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(b_(n,e,t),n=n.sibling;n!==null;)b_(n,e,t),n=n.sibling}function fT(n,e){for(var t=e,r=!1,i,s;;){if(!r){r=t.return;e:for(;;){if(r===null)throw Error(Je(160));switch(i=r.stateNode,r.tag){case 5:s=!1;break e;case 3:i=i.containerInfo,s=!0;break e;case 4:i=i.containerInfo,s=!0;break e}r=r.return}r=!0}if(t.tag===5||t.tag===6){e:for(var o=n,l=t,c=l;;)if(aT(o,c),c.child!==null&&c.tag!==4)c.child.return=c,c=c.child;else{if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}s?(o=i,l=t.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):i.removeChild(t.stateNode)}else if(t.tag===4){if(t.child!==null){i=t.stateNode.containerInfo,s=!0,t.child.return=t,t=t.child;continue}}else if(aT(n,t),t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return,t.tag===4&&(r=!1)}t.sibling.return=t.return,t=t.sibling}}function L_(n,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var t=e.updateQueue;if(t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do(r.tag&3)==3&&(n=r.destroy,r.destroy=void 0,n!==void 0&&n()),r=r.next;while(r!==t)}return;case 1:return;case 5:if(t=e.stateNode,t!=null){r=e.memoizedProps;var i=n!==null?n.memoizedProps:r;n=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(t[zg]=r,n==="input"&&r.type==="radio"&&r.name!=null&&XM(t,r),gx(n,i),e=gx(n,r),i=0;i<s.length;i+=2){var o=s[i],l=s[i+1];o==="style"?tE(t,l):o==="dangerouslySetInnerHTML"?$M(t,l):o==="children"?vh(t,l):Q0(t,o,l,e)}switch(n){case"input":ux(t,r);break;case"textarea":qM(t,r);break;case"select":n=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!r.multiple,s=r.value,s!=null?nf(t,!!r.multiple,s,!1):n!==!!r.multiple&&(r.defaultValue!=null?nf(t,!!r.multiple,r.defaultValue,!0):nf(t,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(Je(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:t=e.stateNode,t.hydrate&&(t.hydrate=!1,vE(t.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(F_=ni(),oT(e.child,!0)),dT(e);return;case 19:dT(e);return;case 17:return;case 23:case 24:oT(e,e.memoizedState!==null);return}throw Error(Je(163))}function dT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new cD),e.forEach(function(r){var i=MD.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function hD(n,e){return n!==null&&(n=n.memoizedState,n===null||n.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var pD=Math.ceil,cv=au.ReactCurrentDispatcher,B_=au.ReactCurrentOwner,Lt=0,yi=null,yr=null,ii=0,yu=0,R_=za(0),kr=0,fv=null,Mf=0,Qh=0,Ef=0,P_=0,I_=null,F_=0,D_=1/0;function Sf(){D_=ni()+500}var ot=null,dv=!1,O_=null,ao=null,Ka=!1,Zh=null,$h=90,N_=[],G_=[],na=null,ep=0,H_=null,hv=-1,ra=0,pv=0,tp=null,mv=!1;function Yi(){return(Lt&48)!=0?ni():hv!==-1?hv:hv=ni()}function Ya(n){if(n=n.mode,(n&2)==0)return 1;if((n&4)==0)return yf()===99?1:2;if(ra===0&&(ra=Mf),tD.transition!==0){pv!==0&&(pv=I_!==null?I_.pendingLanes:0),n=ra;var e=4186112&~pv;return e&=-e,e===0&&(n=4186112&~n,e=n&-n,e===0&&(e=8192)),e}return n=yf(),(Lt&4)!=0&&n===98?n=Rg(12,ra):(n=iF(n),n=Rg(n,ra)),n}function qa(n,e,t){if(50<ep)throw ep=0,H_=null,Error(Je(185));if(n=gv(n,e),n===null)return null;Pg(n,e,t),n===yi&&(Ef|=e,kr===4&&Tf(n,ii));var r=yf();e===1?(Lt&8)!=0&&(Lt&48)==0?U_(n):(ps(n,t),Lt===0&&(Sf(),ro())):((Lt&4)==0||r!==98&&r!==99||(na===null?na=new Set([n]):na.add(n)),ps(n,t)),I_=n}function gv(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}function ps(n,e){for(var t=n.callbackNode,r=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var l=31-Ha(o),c=1<<l,h=s[l];if(h===-1){if((c&r)==0||(c&i)!=0){h=e,af(c);var v=Sn;s[l]=10<=v?h+250:6<=v?h+5e3:-1}}else h<=e&&(n.expiredLanes|=c);o&=~c}if(r=Ch(n,n===yi?ii:0),e=Sn,r===0)t!==null&&(t!==r_&&t_(t),n.callbackNode=null,n.callbackPriority=0);else{if(t!==null){if(n.callbackPriority===e)return;t!==r_&&t_(t)}e===15?(t=U_.bind(null,n),$o===null?($o=[t],Xg=e_(jg,vS)):$o.push(t),t=r_):e===14?t=Gh(99,U_.bind(null,n)):(t=sF(e),t=Gh(t,hT.bind(null,n))),n.callbackPriority=e,n.callbackNode=t}}function hT(n){if(hv=-1,pv=ra=0,(Lt&48)!=0)throw Error(Je(327));var e=n.callbackNode;if(Qa()&&n.callbackNode!==e)return null;var t=Ch(n,n===yi?ii:0);if(t===0)return null;var r=t,i=Lt;Lt|=16;var s=vT();(yi!==n||ii!==r)&&(Sf(),Cf(n,r));do try{vD();break}catch(l){gT(n,l)}while(1);if(s_(),cv.current=s,Lt=i,yr!==null?r=0:(yi=null,ii=0,r=kr),(Mf&Ef)!=0)Cf(n,0);else if(r!==0){if(r===2&&(Lt|=64,n.hydrate&&(n.hydrate=!1,qx(n.containerInfo)),t=EE(n),t!==0&&(r=np(n,t))),r===1)throw e=fv,Cf(n,0),Tf(n,t),ps(n,ni()),e;switch(n.finishedWork=n.current.alternate,n.finishedLanes=t,r){case 0:case 1:throw Error(Je(345));case 2:xu(n);break;case 3:if(Tf(n,t),(t&62914560)===t&&(r=F_+500-ni(),10<r)){if(Ch(n,0)!==0)break;if(i=n.suspendedLanes,(i&t)!==t){Yi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=rS(xu.bind(null,n),r);break}xu(n);break;case 4:if(Tf(n,t),(t&4186112)===t)break;for(r=n.eventTimes,i=-1;0<t;){var o=31-Ha(t);s=1<<o,o=r[o],o>i&&(i=o),t&=~s}if(t=i,t=ni()-t,t=(120>t?120:480>t?480:1080>t?1080:1920>t?1920:3e3>t?3e3:4320>t?4320:1960*pD(t/1960))-t,10<t){n.timeoutHandle=rS(xu.bind(null,n),t);break}xu(n);break;case 5:xu(n);break;default:throw Error(Je(329))}}return ps(n,ni()),n.callbackNode===e?hT.bind(null,n):null}function Tf(n,e){for(e&=~P_,e&=~Ef,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ha(e),r=1<<t;n[t]=-1,e&=~r}}function U_(n){if((Lt&48)!=0)throw Error(Je(327));if(Qa(),n===yi&&(n.expiredLanes&ii)!=0){var e=ii,t=np(n,e);(Mf&Ef)!=0&&(e=Ch(n,e),t=np(n,e))}else e=Ch(n,0),t=np(n,e);if(n.tag!==0&&t===2&&(Lt|=64,n.hydrate&&(n.hydrate=!1,qx(n.containerInfo)),e=EE(n),e!==0&&(t=np(n,e))),t===1)throw t=fv,Cf(n,0),Tf(n,e),ps(n,ni()),t;return n.finishedWork=n.current.alternate,n.finishedLanes=e,xu(n),ps(n,ni()),null}function mD(){if(na!==null){var n=na;na=null,n.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,ps(e,ni())})}ro()}function pT(n,e){var t=Lt;Lt|=1;try{return n(e)}finally{Lt=t,Lt===0&&(Sf(),ro())}}function mT(n,e){var t=Lt;Lt&=-2,Lt|=8;try{return n(e)}finally{Lt=t,Lt===0&&(Sf(),ro())}}function vv(n,e){Vn(R_,yu),yu|=e,Mf|=e}function k_(){yu=R_.current,Ln(R_)}function Cf(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,YF(t)),yr!==null)for(t=yr.return;t!==null;){var r=t;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vg();break;case 3:wf(),Ln(Di),Ln(ti),h_();break;case 5:c_(r);break;case 4:wf();break;case 13:Ln(Jn);break;case 19:Ln(Jn);break;case 10:o_(r);break;case 23:case 24:k_()}t=t.return}yi=n,yr=$a(n.current,null),ii=yu=Mf=e,kr=0,fv=null,P_=Ef=Qh=0}function gT(n,e){do{var t=yr;try{if(s_(),Vh.current=lv,iv){for(var r=tr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}iv=!1}if(Jh=0,Ur=ri=tr=null,jh=!1,B_.current=null,t===null||t.return===null){kr=1,fv=e,yr=null;break}e:{var s=n,o=t.return,l=t,c=e;if(e=ii,l.flags|=2048,l.firstEffect=l.lastEffect=null,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c;if((l.mode&2)==0){var v=l.alternate;v?(l.updateQueue=v.updateQueue,l.memoizedState=v.memoizedState,l.lanes=v.lanes):(l.updateQueue=null,l.memoizedState=null)}var p=(Jn.current&1)!=0,m=o;do{var x;if(x=m.tag===13){var A=m.memoizedState;if(A!==null)x=A.dehydrated!==null;else{var E=m.memoizedProps;x=E.fallback===void 0?!1:E.unstable_avoidThisFallback!==!0?!0:!p}}if(x){var M=m.updateQueue;if(M===null){var w=new Set;w.add(h),m.updateQueue=w}else M.add(h);if((m.mode&2)==0){if(m.flags|=64,l.flags|=16384,l.flags&=-2981,l.tag===1)if(l.alternate===null)l.tag=17;else{var _=Ja(-1,1);_.tag=2,ja(l,_)}l.lanes|=1;break e}c=void 0,l=e;var C=s.pingCache;if(C===null?(C=s.pingCache=new uD,c=new Set,C.set(h,c)):(c=C.get(h),c===void 0&&(c=new Set,C.set(h,c))),!c.has(l)){c.add(l);var b=AD.bind(null,s,h,l);h.then(b,b)}m.flags|=4096,m.lanes=e;break e}m=m.return}while(m!==null);c=Error((tf(l.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}kr!==5&&(kr=2),c=S_(c,l),m=o;do{switch(m.tag){case 3:s=c,m.flags|=4096,e&=-e,m.lanes|=e;var I=rT(m,s,e);_S(m,I);break e;case 1:s=c;var B=m.type,H=m.stateNode;if((m.flags&64)==0&&(typeof B.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(ao===null||!ao.has(H)))){m.flags|=4096,e&=-e,m.lanes|=e;var D=iT(m,s,e);_S(m,D);break e}}m=m.return}while(m!==null)}xT(t)}catch(O){e=O,yr===t&&t!==null&&(yr=t=t.return);continue}break}while(1)}function vT(){var n=cv.current;return cv.current=lv,n===null?lv:n}function np(n,e){var t=Lt;Lt|=16;var r=vT();yi===n&&ii===e||Cf(n,e);do try{gD();break}catch(i){gT(n,i)}while(1);if(s_(),Lt=t,cv.current=r,yr!==null)throw Error(Je(261));return yi=null,ii=0,kr}function gD(){for(;yr!==null;)yT(yr)}function vD(){for(;yr!==null&&!ZF();)yT(yr)}function yT(n){var e=AT(n.alternate,n,yu);n.memoizedProps=n.pendingProps,e===null?xT(n):yr=e,B_.current=null}function xT(n){var e=n;do{var t=e.alternate;if(n=e.return,(e.flags&2048)==0){if(t=aD(t,e,yu),t!==null){yr=t;return}if(t=e,t.tag!==24&&t.tag!==23||t.memoizedState===null||(yu&1073741824)!=0||(t.mode&4)==0){for(var r=0,i=t.child;i!==null;)r|=i.lanes|i.childLanes,i=i.sibling;t.childLanes=r}n!==null&&(n.flags&2048)==0&&(n.firstEffect===null&&(n.firstEffect=e.firstEffect),e.lastEffect!==null&&(n.lastEffect!==null&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.flags&&(n.lastEffect!==null?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(t=lD(e),t!==null){t.flags&=2047,yr=t;return}n!==null&&(n.firstEffect=n.lastEffect=null,n.flags|=2048)}if(e=e.sibling,e!==null){yr=e;return}yr=e=n}while(e!==null);kr===0&&(kr=5)}function xu(n){var e=yf();return pu(99,yD.bind(null,n,e)),null}function yD(n,e){do Qa();while(Zh!==null);if((Lt&48)!=0)throw Error(Je(327));var t=n.finishedWork;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Je(177));n.callbackNode=null;var r=t.lanes|t.childLanes,i=r,s=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;for(var o=n.eventTimes,l=n.expirationTimes;0<s;){var c=31-Ha(s),h=1<<c;i[c]=0,o[c]=-1,l[c]=-1,s&=~h}if(na!==null&&(r&24)==0&&na.has(n)&&na.delete(n),n===yi&&(yr=yi=null,ii=0),1<t.flags?t.lastEffect!==null?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,r!==null){if(i=Lt,Lt|=32,B_.current=null,Xx=Ig,o=VE(),Wx(o)){if("selectionStart"in o)l={start:o.selectionStart,end:o.selectionEnd};else e:if(l=(l=o.ownerDocument)&&l.defaultView||window,(h=l.getSelection&&l.getSelection())&&h.rangeCount!==0){l=h.anchorNode,s=h.anchorOffset,c=h.focusNode,h=h.focusOffset;try{l.nodeType,c.nodeType}catch{l=null;break e}var v=0,p=-1,m=-1,x=0,A=0,E=o,M=null;t:for(;;){for(var w;E!==l||s!==0&&E.nodeType!==3||(p=v+s),E!==c||h!==0&&E.nodeType!==3||(m=v+h),E.nodeType===3&&(v+=E.nodeValue.length),(w=E.firstChild)!==null;)M=E,E=w;for(;;){if(E===o)break t;if(M===l&&++x===s&&(p=v),M===c&&++A===h&&(m=v),(w=E.nextSibling)!==null)break;E=M,M=E.parentNode}E=w}l=p===-1||m===-1?null:{start:p,end:m}}else l=null;l=l||{start:0,end:0}}else l=null;Kx={focusedElem:o,selectionRange:l},Ig=!1,tp=null,mv=!1,ot=r;do try{xD()}catch(O){if(ot===null)throw Error(Je(330));Za(ot,O),ot=ot.nextEffect}while(ot!==null);tp=null,ot=r;do try{for(o=n;ot!==null;){var _=ot.flags;if(_&16&&vh(ot.stateNode,""),_&128){var C=ot.alternate;if(C!==null){var b=C.ref;b!==null&&(typeof b=="function"?b(null):b.current=null)}}switch(_&1038){case 2:cT(ot),ot.flags&=-3;break;case 6:cT(ot),ot.flags&=-3,L_(ot.alternate,ot);break;case 1024:ot.flags&=-1025;break;case 1028:ot.flags&=-1025,L_(ot.alternate,ot);break;case 4:L_(ot.alternate,ot);break;case 8:l=ot,fT(o,l);var I=l.alternate;lT(l),I!==null&&lT(I)}ot=ot.nextEffect}}catch(O){if(ot===null)throw Error(Je(330));Za(ot,O),ot=ot.nextEffect}while(ot!==null);if(b=Kx,C=VE(),_=b.focusedElem,o=b.selectionRange,C!==_&&_&&_.ownerDocument&&WE(_.ownerDocument.documentElement,_)){for(o!==null&&Wx(_)&&(C=o.start,b=o.end,b===void 0&&(b=C),"selectionStart"in _?(_.selectionStart=C,_.selectionEnd=Math.min(b,_.value.length)):(b=(C=_.ownerDocument||document)&&C.defaultView||window,b.getSelection&&(b=b.getSelection(),l=_.textContent.length,I=Math.min(o.start,l),o=o.end===void 0?I:Math.min(o.end,l),!b.extend&&I>o&&(l=o,o=I,I=l),l=zE(_,I),s=zE(_,o),l&&s&&(b.rangeCount!==1||b.anchorNode!==l.node||b.anchorOffset!==l.offset||b.focusNode!==s.node||b.focusOffset!==s.offset)&&(C=C.createRange(),C.setStart(l.node,l.offset),b.removeAllRanges(),I>o?(b.addRange(C),b.extend(s.node,s.offset)):(C.setEnd(s.node,s.offset),b.addRange(C)))))),C=[],b=_;b=b.parentNode;)b.nodeType===1&&C.push({element:b,left:b.scrollLeft,top:b.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<C.length;_++)b=C[_],b.element.scrollLeft=b.left,b.element.scrollTop=b.top}Ig=!!Xx,Kx=Xx=null,n.current=t,ot=r;do try{for(_=n;ot!==null;){var B=ot.flags;if(B&36&&dD(_,ot.alternate,ot),B&128){C=void 0;var H=ot.ref;if(H!==null){var D=ot.stateNode;switch(ot.tag){case 5:C=D;break;default:C=D}typeof H=="function"?H(C):H.current=C}}ot=ot.nextEffect}}catch(O){if(ot===null)throw Error(Je(330));Za(ot,O),ot=ot.nextEffect}while(ot!==null);ot=null,eD(),Lt=i}else n.current=t;if(Ka)Ka=!1,Zh=n,$h=e;else for(ot=r;ot!==null;)e=ot.nextEffect,ot.nextEffect=null,ot.flags&8&&(B=ot,B.sibling=null,B.stateNode=null),ot=e;if(r=n.pendingLanes,r===0&&(ao=null),r===1?n===H_?ep++:(ep=0,H_=n):ep=0,t=t.stateNode,hu&&typeof hu.onCommitFiberRoot=="function")try{hu.onCommitFiberRoot($x,t,void 0,(t.current.flags&64)==64)}catch{}if(ps(n,ni()),dv)throw dv=!1,n=O_,O_=null,n;return(Lt&8)!=0||ro(),null}function xD(){for(;ot!==null;){var n=ot.alternate;mv||tp===null||((ot.flags&8)!=0?cE(ot,tp)&&(mv=!0):ot.tag===13&&hD(n,ot)&&cE(ot,tp)&&(mv=!0));var e=ot.flags;(e&256)!=0&&fD(n,ot),(e&512)==0||Ka||(Ka=!0,Gh(97,function(){return Qa(),null})),ot=ot.nextEffect}}function Qa(){if($h!==90){var n=97<$h?97:$h;return $h=90,pu(n,wD)}return!1}function _D(n,e){N_.push(e,n),Ka||(Ka=!0,Gh(97,function(){return Qa(),null}))}function _T(n,e){G_.push(e,n),Ka||(Ka=!0,Gh(97,function(){return Qa(),null}))}function wD(){if(Zh===null)return!1;var n=Zh;if(Zh=null,(Lt&48)!=0)throw Error(Je(331));var e=Lt;Lt|=32;var t=G_;G_=[];for(var r=0;r<t.length;r+=2){var i=t[r],s=t[r+1],o=i.destroy;if(i.destroy=void 0,typeof o=="function")try{o()}catch(c){if(s===null)throw Error(Je(330));Za(s,c)}}for(t=N_,N_=[],r=0;r<t.length;r+=2){i=t[r],s=t[r+1];try{var l=i.create;i.destroy=l()}catch(c){if(s===null)throw Error(Je(330));Za(s,c)}}for(l=n.current.firstEffect;l!==null;)n=l.nextEffect,l.nextEffect=null,l.flags&8&&(l.sibling=null,l.stateNode=null),l=n;return Lt=e,ro(),!0}function wT(n,e,t){e=S_(t,e),e=rT(n,e,1),ja(n,e),e=Yi(),n=gv(n,1),n!==null&&(Pg(n,1,e),ps(n,e))}function Za(n,e){if(n.tag===3)wT(n,n,e);else for(var t=n.return;t!==null;){if(t.tag===3){wT(t,n,e);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ao===null||!ao.has(r))){n=S_(e,n);var i=iT(t,n,1);if(ja(t,i),i=Yi(),t=gv(t,1),t!==null)Pg(t,1,i),ps(t,i);else if(typeof r.componentDidCatch=="function"&&(ao===null||!ao.has(r)))try{r.componentDidCatch(e,n)}catch{}break}}t=t.return}}function AD(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Yi(),n.pingedLanes|=n.suspendedLanes&t,yi===n&&(ii&t)===t&&(kr===4||kr===3&&(ii&62914560)===ii&&500>ni()-F_?Cf(n,0):P_|=t),ps(n,e)}function MD(n,e){var t=n.stateNode;t!==null&&t.delete(e),e=0,e===0&&(e=n.mode,(e&2)==0?e=1:(e&4)==0?e=yf()===99?1:2:(ra===0&&(ra=Mf),e=lf(62914560&~ra),e===0&&(e=4194304))),t=Yi(),n=gv(n,e),n!==null&&(Pg(n,e,t),ps(n,t))}var AT;AT=function(n,e,t){var r=e.lanes;if(n!==null)if(n.memoizedProps!==e.pendingProps||Di.current)Ds=!0;else if((t&r)!=0)Ds=(n.flags&16384)!=0;else{switch(Ds=!1,e.tag){case 3:XS(e),d_();break;case 5:bS(e);break;case 1:Oi(e.type)&&Jg(e);break;case 4:u_(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;Vn(Kg,i._currentValue),i._currentValue=r;break;case 13:if(e.memoizedState!==null)return(t&e.child.childLanes)!=0?KS(n,e,t):(Vn(Jn,Jn.current&1),e=ta(n,e,t),e!==null?e.sibling:null);Vn(Jn,Jn.current&1);break;case 19:if(r=(t&e.childLanes)!=0,(n.flags&64)!=0){if(r)return $S(n,e,t);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Vn(Jn,Jn.current),r)break;return null;case 23:case 24:return e.lanes=0,__(n,e,t)}return ta(n,e,t)}else Ds=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps,i=vf(e,ti.current),_f(e,t),i=m_(null,e,r,n,i,t),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oi(r)){var s=!0;Jg(e)}else s=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,a_(e);var o=r.getDerivedStateFromProps;typeof o=="function"&&Qg(e,r,o,n),i.updater=Zg,e.stateNode=i,i._reactInternals=e,l_(e,r,n,t),e=A_(null,e,r,!0,s,t)}else e.tag=0,Gi(null,e,i,t),e=e.child;return e;case 16:i=e.elementType;e:{switch(n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=SD(i),n=Fs(i,n),s){case 0:e=w_(null,e,i,n,t);break e;case 1:e=jS(null,e,i,n,t);break e;case 11:e=zS(null,e,i,n,t);break e;case 14:e=WS(null,e,i,Fs(i.type,n),r,t);break e}throw Error(Je(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fs(r,i),w_(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fs(r,i),jS(n,e,r,i,t);case 3:if(XS(e),r=e.updateQueue,n===null||r===null)throw Error(Je(282));if(r=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,xS(n,e),Hh(e,r,null,t),r=e.memoizedState.element,r===i)d_(),e=ta(n,e,t);else{if(i=e.stateNode,(s=i.hydrate)&&(Xa=hf(e.stateNode.containerInfo.firstChild),ea=e,s=so=!0),s){if(n=i.mutableSourceEagerHydrationData,n!=null)for(i=0;i<n.length;i+=2)s=n[i],s._workInProgressVersionPrimary=n[i+1],Af.push(s);for(t=CS(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|1024,t=t.sibling}else Gi(n,e,r,t),d_();e=e.child}return e;case 5:return bS(e),n===null&&f_(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,Yx(r,i)?o=null:s!==null&&Yx(r,s)&&(e.flags|=16),JS(n,e),Gi(n,e,o,t),e.child;case 6:return n===null&&f_(e),null;case 13:return KS(n,e,t);case 4:return u_(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=tv(e,null,r,t):Gi(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fs(r,i),zS(n,e,r,i,t);case 7:return Gi(n,e,e.pendingProps,t),e.child;case 8:return Gi(n,e,e.pendingProps.children,t),e.child;case 12:return Gi(n,e,e.pendingProps.children,t),e.child;case 10:e:{r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value;var l=e.type._context;if(Vn(Kg,l._currentValue),l._currentValue=s,o!==null)if(l=o.value,s=fs(l,s)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(l,s):1073741823)|0,s===0){if(o.children===i.children&&!Di.current){e=ta(n,e,t);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var c=l.dependencies;if(c!==null){o=l.child;for(var h=c.firstContext;h!==null;){if(h.context===r&&(h.observedBits&s)!=0){l.tag===1&&(h=Ja(-1,t&-t),h.tag=2,ja(l,h)),l.lanes|=t,h=l.alternate,h!==null&&(h.lanes|=t),yS(l.return,t),c.lanes|=t;break}h=h.next}}else o=l.tag===10&&l.type===e.type?null:l.child;if(o!==null)o.return=l;else for(o=l;o!==null;){if(o===e){o=null;break}if(l=o.sibling,l!==null){l.return=o.return,o=l;break}o=o.return}l=o}Gi(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps,r=s.children,_f(e,t),i=ds(i,s.unstable_observedBits),r=r(i),e.flags|=1,Gi(n,e,r,t),e.child;case 14:return i=e.type,s=Fs(i,e.pendingProps),s=Fs(i.type,s),WS(n,e,i,s,r,t);case 15:return VS(n,e,e.type,e.pendingProps,r,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fs(r,i),n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Oi(r)?(n=!0,Jg(e)):n=!1,_f(e,t),ES(e,r,i),l_(e,r,i,t),A_(null,e,r,!0,n,t);case 19:return $S(n,e,t);case 23:return __(n,e,t);case 24:return __(n,e,t)}throw Error(Je(156,e.tag))};function ED(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(n,e,t,r){return new ED(n,e,t,r)}function z_(n){return n=n.prototype,!(!n||!n.isReactComponent)}function SD(n){if(typeof n=="function")return z_(n)?1:0;if(n!=null){if(n=n.$$typeof,n===xg)return 11;if(n===wg)return 14}return 2}function $a(n,e){var t=n.alternate;return t===null?(t=ms(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.nextEffect=null,t.firstEffect=null,t.lastEffect=null),t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function yv(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")z_(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Fa:return bf(t.children,i,s,e);case zM:o=8,i|=16;break;case Z0:o=8,i|=1;break;case hh:return n=ms(12,t,e,i|8),n.elementType=hh,n.type=hh,n.lanes=s,n;case ph:return n=ms(13,t,e,i),n.type=ph,n.elementType=ph,n.lanes=s,n;case _g:return n=ms(19,t,e,i),n.elementType=_g,n.lanes=s,n;case ix:return W_(t,i,s,e);case sx:return n=ms(24,t,e,i),n.elementType=sx,n.lanes=s,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $0:o=10;break e;case ex:o=9;break e;case xg:o=11;break e;case wg:o=14;break e;case tx:o=16,r=null;break e;case nx:o=22;break e}throw Error(Je(130,n==null?n:typeof n,""))}return e=ms(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function bf(n,e,t,r){return n=ms(7,n,r,e),n.lanes=t,n}function W_(n,e,t,r){return n=ms(23,n,r,e),n.elementType=ix,n.lanes=t,n}function V_(n,e,t){return n=ms(6,n,null,e),n.lanes=t,n}function J_(n,e,t){return e=ms(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function TD(n,e,t){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=t,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Rx(0),this.expirationTimes=Rx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rx(0),this.mutableSourceEagerHydrationData=null}function CD(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lu,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function xv(n,e,t,r){var i=e.current,s=Yi(),o=Ya(i);e:if(t){t=t._reactInternals;t:{if(cu(t)!==t||t.tag!==1)throw Error(Je(170));var l=t;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(Oi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(l!==null);throw Error(Je(171))}if(t.tag===1){var c=t.type;if(Oi(c)){t=lS(t,c,l);break e}}t=l}else t=Wa;return e.context===null?e.context=t:e.pendingContext=t,e=Ja(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),ja(i,e),qa(i,o,s),o}function j_(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function MT(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function X_(n,e){MT(n,e),(n=n.alternate)&&MT(n,e)}function bD(){return null}function K_(n,e,t){var r=t!=null&&t.hydrationOptions!=null&&t.hydrationOptions.mutableSources||null;if(t=new TD(n,e,t!=null&&t.hydrate===!0),e=ms(3,null,null,e===2?7:e===1?3:0),t.current=e,e.stateNode=t,a_(e),n[pf]=t.current,QE(n.nodeType===8?n.parentNode:n),r)for(n=0;n<r.length;n++){e=r[n];var i=e._getVersion;i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=t}K_.prototype.render=function(n){xv(n,this._internalRoot,null,null)};K_.prototype.unmount=function(){var n=this._internalRoot,e=n.containerInfo;xv(null,n,null,function(){e[pf]=null})};function rp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function LD(n,e){if(e||(e=n?n.nodeType===9?n.documentElement:n.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var t;t=n.lastChild;)n.removeChild(t);return new K_(n,0,e?{hydrate:!0}:void 0)}function _v(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s._internalRoot;if(typeof i=="function"){var l=i;i=function(){var h=j_(o);l.call(h)}}xv(e,o,n,i)}else{if(s=t._reactRootContainer=LD(t,r),o=s._internalRoot,typeof i=="function"){var c=i;i=function(){var h=j_(o);c.call(h)}}mT(function(){xv(e,o,n,i)})}return j_(o)}fE=function(n){if(n.tag===13){var e=Yi();qa(n,4,e),X_(n,4)}};Sx=function(n){if(n.tag===13){var e=Yi();qa(n,67108864,e),X_(n,67108864)}};dE=function(n){if(n.tag===13){var e=Yi(),t=Ya(n);qa(n,t,e),X_(n,t)}};hE=function(n,e){return e()};yx=function(n,e,t){switch(e){case"input":if(ux(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Wg(r);if(!i)throw Error(Je(90));JM(r),ux(r,i)}}}break;case"textarea":qM(n,t);break;case"select":e=t.value,e!=null&&nf(n,!!t.multiple,e,!1)}};xx=pT;sE=function(n,e,t,r,i){var s=Lt;Lt|=4;try{return pu(98,n.bind(null,e,t,r,i))}finally{Lt=s,Lt===0&&(Sf(),ro())}};_x=function(){(Lt&49)==0&&(mD(),Qa())};oE=function(n,e){var t=Lt;Lt|=2;try{return n(e)}finally{Lt=t,Lt===0&&(Sf(),ro())}};function ET(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rp(e))throw Error(Je(200));return CD(n,e,null,t)}var BD={Events:[Nh,mf,Wg,rE,iE,Qa,{current:!1}]},ip={findFiberByHostInstance:fu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},RD={bundleType:ip.bundleType,version:ip.version,rendererPackageName:ip.rendererPackageName,rendererConfig:ip.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:au.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=uE(n),n===null?null:n.stateNode},findFiberByHostInstance:ip.findFiberByHostInstance||bD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var wv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wv.isDisabled&&wv.supportsFiber)try{$x=wv.inject(RD),hu=wv}catch{}}cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BD;cs.createPortal=ET;cs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Je(188)):Error(Je(268,Object.keys(n)));return n=uE(e),n=n===null?null:n.stateNode,n};cs.flushSync=function(n,e){var t=Lt;if((t&48)!=0)return n(e);Lt|=1;try{if(n)return pu(99,n.bind(null,e))}finally{Lt=t,ro()}};cs.hydrate=function(n,e,t){if(!rp(e))throw Error(Je(200));return _v(null,n,e,!0,t)};cs.render=function(n,e,t){if(!rp(e))throw Error(Je(200));return _v(null,n,e,!1,t)};cs.unmountComponentAtNode=function(n){if(!rp(n))throw Error(Je(40));return n._reactRootContainer?(mT(function(){_v(null,null,n,!1,function(){n._reactRootContainer=null,n[pf]=null})}),!0):!1};cs.unstable_batchedUpdates=pT;cs.unstable_createPortal=function(n,e){return ET(n,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};cs.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!rp(t))throw Error(Je(200));if(n==null||n._reactInternals===void 0)throw Error(Je(38));return _v(n,e,t,!1,r)};cs.version="17.0.2";function ST(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ST)}catch(n){console.error(n)}}ST(),OM.exports=cs;var P4=OM.exports;/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Y_="127",_u={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},wu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},TT=0,q_=1,CT=2,PD=3,ID=0,Q_=1,Z_=2,Lf=3,el=0,ur=1,Au=2,$_=1,FD=2,ia=0,Bf=1,ew=2,tw=3,nw=4,bT=5,Mu=100,LT=101,BT=102,rw=103,iw=104,RT=200,PT=201,IT=202,FT=203,sw=204,ow=205,DT=206,OT=207,NT=208,GT=209,HT=210,UT=0,kT=1,zT=2,Av=3,WT=4,VT=5,JT=6,jT=7,sp=0,XT=1,KT=2,Eu=0,YT=1,qT=2,QT=3,aw=4,ZT=5,Mv=300,op=301,ap=302,Ev=303,Sv=304,Rf=306,lp=307,Os=1e3,zr=1001,Su=1002,Un=1003,Pf=1004,DD=1004,If=1005,OD=1005,An=1006,up=1007,ND=1007,lo=1008,GD=1008,uo=1009,$T=1010,eC=1011,cp=1012,tC=1013,fp=1014,gs=1015,tl=1016,nC=1017,rC=1018,iC=1019,Ff=1020,sC=1021,vs=1022,qi=1023,oC=1024,aC=1025,lw=qi,Tu=1026,Df=1027,lC=1028,uC=1029,cC=1030,fC=1031,dC=1032,hC=1033,uw=33776,cw=33777,fw=33778,dw=33779,hw=35840,pw=35841,mw=35842,gw=35843,pC=36196,vw=37492,yw=37496,mC=37808,gC=37809,vC=37810,yC=37811,xC=37812,_C=37813,wC=37814,AC=37815,MC=37816,EC=37817,SC=37818,TC=37819,CC=37820,bC=37821,LC=36492,BC=37840,RC=37841,PC=37842,IC=37843,FC=37844,DC=37845,OC=37846,NC=37847,GC=37848,HC=37849,UC=37850,kC=37851,zC=37852,WC=37853,VC=2200,JC=2201,jC=2202,Cu=2300,sa=2301,Tv=2302,bu=2400,Lu=2401,dp=2402,Cv=2500,xw=2501,XC=0,_w=1,hp=2,Wr=3e3,ys=3001,bv=3007,pp=3002,KC=3003,ww=3004,Aw=3005,Mw=3006,YC=3200,qC=3201,oa=0,QC=1,HD=0,Lv=7680,UD=7681,kD=7682,zD=7683,WD=34055,VD=34056,JD=5386,jD=512,XD=513,KD=514,YD=515,qD=516,QD=517,ZD=518,ZC=519,Of=35044,Bu=35048,$D=35040,eO=35045,tO=35049,nO=35041,rO=35046,iO=35050,sO=35042,oO="100",Ew="300 es";function co(){}Object.assign(co.prototype,{addEventListener:function(n,e){this._listeners===void 0&&(this._listeners={});const t=this._listeners;t[n]===void 0&&(t[n]=[]),t[n].indexOf(e)===-1&&t[n].push(e)},hasEventListener:function(n,e){if(this._listeners===void 0)return!1;const t=this._listeners;return t[n]!==void 0&&t[n].indexOf(e)!==-1},removeEventListener:function(n,e){if(this._listeners===void 0)return;const r=this._listeners[n];if(r!==void 0){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}},dispatchEvent:function(n){if(this._listeners===void 0)return;const t=this._listeners[n.type];if(t!==void 0){n.target=this;const r=t.slice(0);for(let i=0,s=r.length;i<s;i++)r[i].call(this,n);n.target=null}}});const Vr=[];for(let n=0;n<256;n++)Vr[n]=(n<16?"0":"")+n.toString(16);let Bv=1234567;const vt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Vr[n&255]+Vr[n>>8&255]+Vr[n>>16&255]+Vr[n>>24&255]+"-"+Vr[e&255]+Vr[e>>8&255]+"-"+Vr[e>>16&15|64]+Vr[e>>24&255]+"-"+Vr[t&63|128]+Vr[t>>8&255]+"-"+Vr[t>>16&255]+Vr[t>>24&255]+Vr[r&255]+Vr[r>>8&255]+Vr[r>>16&255]+Vr[r>>24&255]).toUpperCase()},clamp:function(n,e,t){return Math.max(e,Math.min(t,n))},euclideanModulo:function(n,e){return(n%e+e)%e},mapLinear:function(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)},inverseLerp:function(n,e,t){return n!==e?(t-n)/(e-n):0},lerp:function(n,e,t){return(1-t)*n+t*e},damp:function(n,e,t,r){return vt.lerp(n,e,1-Math.exp(-t*r))},pingpong:function(n,e=1){return e-Math.abs(vt.euclideanModulo(n,e*2)-e)},smoothstep:function(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))},smootherstep:function(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))},randInt:function(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function(n,e){return n+Math.random()*(e-n)},randFloatSpread:function(n){return n*(.5-Math.random())},seededRandom:function(n){return n!==void 0&&(Bv=n%2147483647),Bv=Bv*16807%2147483647,(Bv-1)/2147483646},degToRad:function(n){return n*vt.DEG2RAD},radToDeg:function(n){return n*vt.RAD2DEG},isPowerOfTwo:function(n){return(n&n-1)==0&&n!==0},ceilPowerOfTwo:function(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},floorPowerOfTwo:function(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))},setQuaternionFromProperEuler:function(n,e,t,r,i){const s=Math.cos,o=Math.sin,l=s(t/2),c=o(t/2),h=s((e+r)/2),v=o((e+r)/2),p=s((e-r)/2),m=o((e-r)/2),x=s((r-e)/2),A=o((r-e)/2);switch(i){case"XYX":n.set(l*v,c*p,c*m,l*h);break;case"YZY":n.set(c*m,l*v,c*p,l*h);break;case"ZXZ":n.set(c*p,c*m,l*v,l*h);break;case"XZX":n.set(l*v,c*A,c*x,l*h);break;case"YXY":n.set(c*x,l*v,c*A,l*h);break;case"ZYZ":n.set(c*A,c*x,l*v,l*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};class Pe{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Pe.prototype.isVector2=!0;class xr{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,s,o,l,c,h){const v=this.elements;return v[0]=e,v[1]=i,v[2]=l,v[3]=t,v[4]=s,v[5]=c,v[6]=r,v[7]=o,v[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],l=r[3],c=r[6],h=r[1],v=r[4],p=r[7],m=r[2],x=r[5],A=r[8],E=i[0],M=i[3],w=i[6],_=i[1],C=i[4],b=i[7],I=i[2],B=i[5],H=i[8];return s[0]=o*E+l*_+c*I,s[3]=o*M+l*C+c*B,s[6]=o*w+l*b+c*H,s[1]=h*E+v*_+p*I,s[4]=h*M+v*C+p*B,s[7]=h*w+v*b+p*H,s[2]=m*E+x*_+A*I,s[5]=m*M+x*C+A*B,s[8]=m*w+x*b+A*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],l=e[5],c=e[6],h=e[7],v=e[8];return t*o*v-t*l*h-r*s*v+r*l*c+i*s*h-i*o*c}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],l=e[5],c=e[6],h=e[7],v=e[8],p=v*o-l*h,m=l*c-v*s,x=h*s-o*c,A=t*p+r*m+i*x;if(A===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/A;return e[0]=p*E,e[1]=(i*h-v*r)*E,e[2]=(l*r-i*o)*E,e[3]=m*E,e[4]=(v*t-i*c)*E,e[5]=(i*s-l*t)*E,e[6]=x*E,e[7]=(r*c-h*t)*E,e[8]=(o*t-r*s)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,l){const c=Math.cos(s),h=Math.sin(s);return this.set(r*c,r*h,-r*(c*o+h*l)+o+e,-i*h,i*c,-i*(-h*o+c*l)+l+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],o=i[3],l=i[6],c=i[1],h=i[4],v=i[7];return i[0]=t*s+r*c,i[3]=t*o+r*h,i[6]=t*l+r*v,i[1]=-r*s+t*c,i[4]=-r*o+t*h,i[7]=-r*l+t*v,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}xr.prototype.isMatrix3=!0;let Nf;const Ru={getDataURL:function(n){if(/^data:/i.test(n.src)||typeof HTMLCanvasElement=="undefined")return n.src;let e;if(n instanceof HTMLCanvasElement)e=n;else{Nf===void 0&&(Nf=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Nf.width=n.width,Nf.height=n.height;const t=Nf.getContext("2d");n instanceof ImageData?t.putImageData(n,0,0):t.drawImage(n,0,0,n.width,n.height),e=Nf}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",n),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}};let aO=0;class nr extends co{constructor(e=nr.DEFAULT_IMAGE,t=nr.DEFAULT_MAPPING,r=zr,i=zr,s=An,o=lo,l=qi,c=uo,h=1,v=Wr){super();Object.defineProperty(this,"id",{value:aO++}),this.uuid=vt.generateUUID(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Pe(0,0),this.repeat=new Pe(1,1),this.center=new Pe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=v,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=vt.generateUUID()),!t&&e.images[i.uuid]===void 0){let s;if(Array.isArray(i)){s=[];for(let o=0,l=i.length;o<l;o++)i[o].isDataTexture?s.push(Sw(i[o].image)):s.push(Sw(i[o]))}else s=Sw(i);e.images[i.uuid]={uuid:i.uuid,url:s}}r.image=i.uuid}return t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Mv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Os:e.x=e.x-Math.floor(e.x);break;case zr:e.x=e.x<0?0:1;break;case Su:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Os:e.y=e.y-Math.floor(e.y);break;case zr:e.y=e.y<0?0:1;break;case Su:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}nr.DEFAULT_IMAGE=void 0;nr.DEFAULT_MAPPING=Mv;nr.prototype.isTexture=!0;function Sw(n){return typeof HTMLImageElement!="undefined"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&n instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&n instanceof ImageBitmap?Ru.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class on{constructor(e=0,t=0,r=0,i=1){this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const o=.01,l=.1,c=e.elements,h=c[0],v=c[4],p=c[8],m=c[1],x=c[5],A=c[9],E=c[2],M=c[6],w=c[10];if(Math.abs(v-m)<o&&Math.abs(p-E)<o&&Math.abs(A-M)<o){if(Math.abs(v+m)<l&&Math.abs(p+E)<l&&Math.abs(A+M)<l&&Math.abs(h+x+w-3)<l)return this.set(1,0,0,0),this;t=Math.PI;const C=(h+1)/2,b=(x+1)/2,I=(w+1)/2,B=(v+m)/4,H=(p+E)/4,D=(A+M)/4;return C>b&&C>I?C<o?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(C),i=B/r,s=H/r):b>I?b<o?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(b),r=B/i,s=D/i):I<o?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(I),r=H/s,i=D/s),this.set(r,i,s,t),this}let _=Math.sqrt((M-A)*(M-A)+(p-E)*(p-E)+(m-v)*(m-v));return Math.abs(_)<.001&&(_=1),this.x=(M-A)/_,this.y=(p-E)/_,this.z=(m-v)/_,this.w=Math.acos((h+x+w-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}on.prototype.isVector4=!0;class aa extends co{constructor(e,t,r){super();this.width=e,this.height=t,this.depth=1,this.scissor=new on(0,0,e,t),this.scissorTest=!1,this.viewport=new on(0,0,e,t),r=r||{},this.texture=new nr(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:An,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}aa.prototype.isWebGLRenderTarget=!0;class $C extends aa{constructor(e,t,r){super(e,t,r);this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}$C.prototype.isWebGLMultisampleRenderTarget=!0;class cr{constructor(e=0,t=0,r=0,i=1){this._x=e,this._y=t,this._z=r,this._w=i}static slerp(e,t,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,i)}static slerpFlat(e,t,r,i,s,o,l){let c=r[i+0],h=r[i+1],v=r[i+2],p=r[i+3];const m=s[o+0],x=s[o+1],A=s[o+2],E=s[o+3];if(l===0){e[t+0]=c,e[t+1]=h,e[t+2]=v,e[t+3]=p;return}if(l===1){e[t+0]=m,e[t+1]=x,e[t+2]=A,e[t+3]=E;return}if(p!==E||c!==m||h!==x||v!==A){let M=1-l;const w=c*m+h*x+v*A+p*E,_=w>=0?1:-1,C=1-w*w;if(C>Number.EPSILON){const I=Math.sqrt(C),B=Math.atan2(I,w*_);M=Math.sin(M*B)/I,l=Math.sin(l*B)/I}const b=l*_;if(c=c*M+m*b,h=h*M+x*b,v=v*M+A*b,p=p*M+E*b,M===1-l){const I=1/Math.sqrt(c*c+h*h+v*v+p*p);c*=I,h*=I,v*=I,p*=I}}e[t]=c,e[t+1]=h,e[t+2]=v,e[t+3]=p}static multiplyQuaternionsFlat(e,t,r,i,s,o){const l=r[i],c=r[i+1],h=r[i+2],v=r[i+3],p=s[o],m=s[o+1],x=s[o+2],A=s[o+3];return e[t]=l*A+v*p+c*x-h*m,e[t+1]=c*A+v*m+h*p-l*x,e[t+2]=h*A+v*x+l*m-c*p,e[t+3]=v*A-l*p-c*m-h*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,i=e._y,s=e._z,o=e._order,l=Math.cos,c=Math.sin,h=l(r/2),v=l(i/2),p=l(s/2),m=c(r/2),x=c(i/2),A=c(s/2);switch(o){case"XYZ":this._x=m*v*p+h*x*A,this._y=h*x*p-m*v*A,this._z=h*v*A+m*x*p,this._w=h*v*p-m*x*A;break;case"YXZ":this._x=m*v*p+h*x*A,this._y=h*x*p-m*v*A,this._z=h*v*A-m*x*p,this._w=h*v*p+m*x*A;break;case"ZXY":this._x=m*v*p-h*x*A,this._y=h*x*p+m*v*A,this._z=h*v*A+m*x*p,this._w=h*v*p-m*x*A;break;case"ZYX":this._x=m*v*p-h*x*A,this._y=h*x*p+m*v*A,this._z=h*v*A-m*x*p,this._w=h*v*p+m*x*A;break;case"YZX":this._x=m*v*p+h*x*A,this._y=h*x*p+m*v*A,this._z=h*v*A-m*x*p,this._w=h*v*p-m*x*A;break;case"XZY":this._x=m*v*p-h*x*A,this._y=h*x*p-m*v*A,this._z=h*v*A+m*x*p,this._w=h*v*p+m*x*A;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],l=t[5],c=t[9],h=t[2],v=t[6],p=t[10],m=r+l+p;if(m>0){const x=.5/Math.sqrt(m+1);this._w=.25/x,this._x=(v-c)*x,this._y=(s-h)*x,this._z=(o-i)*x}else if(r>l&&r>p){const x=2*Math.sqrt(1+r-l-p);this._w=(v-c)/x,this._x=.25*x,this._y=(i+o)/x,this._z=(s+h)/x}else if(l>p){const x=2*Math.sqrt(1+l-r-p);this._w=(s-h)/x,this._x=(i+o)/x,this._y=.25*x,this._z=(c+v)/x}else{const x=2*Math.sqrt(1+p-r-l);this._w=(o-i)/x,this._x=(s+h)/x,this._y=(c+v)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(vt.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,l=t._x,c=t._y,h=t._z,v=t._w;return this._x=r*v+o*l+i*h-s*c,this._y=i*v+o*c+s*l-r*h,this._z=s*v+o*h+r*c-i*l,this._w=o*v-r*l-i*c-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let l=o*e._w+r*e._x+i*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const x=1-t;return this._w=x*o+t*this._w,this._x=x*r+t*this._x,this._y=x*i+t*this._y,this._z=x*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(c),v=Math.atan2(h,l),p=Math.sin((1-t)*v)/h,m=Math.sin(t*v)/h;return this._w=o*p+this._w*m,this._x=r*p+this._x*m,this._y=i*p+this._y*m,this._z=s*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,r){this.copy(e).slerp(t,r)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}cr.prototype.isQuaternion=!0;class U{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(eb.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(eb.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,l=e.z,c=e.w,h=c*t+o*i-l*r,v=c*r+l*t-s*i,p=c*i+s*r-o*t,m=-s*t-o*r-l*i;return this.x=h*c+m*-s+v*-l-p*-o,this.y=v*c+m*-o+p*-s-h*-l,this.z=p*c+m*-l+h*-o-v*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,l=t.y,c=t.z;return this.x=i*c-s*l,this.y=s*o-r*c,this.z=r*l-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Tw.copy(this).projectOnVector(e),this.sub(Tw)}reflect(e){return this.sub(Tw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(vt.clamp(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}U.prototype.isVector3=!0;const Tw=new U,eb=new cr;class si{constructor(e=new U(1/0,1/0,1/0),t=new U(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,l=-1/0;for(let c=0,h=e.length;c<h;c+=3){const v=e[c],p=e[c+1],m=e[c+2];v<t&&(t=v),p<r&&(r=p),m<i&&(i=m),v>s&&(s=v),p>o&&(o=p),m>l&&(l=m)}return this.min.set(t,r,i),this.max.set(s,o,l),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,l=-1/0;for(let c=0,h=e.count;c<h;c++){const v=e.getX(c),p=e.getY(c),m=e.getZ(c);v<t&&(t=v),p<r&&(r=p),m<i&&(i=m),v>s&&(s=v),p>o&&(o=p),m>l&&(l=m)}return this.min.set(t,r,i),this.max.set(s,o,l),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=mp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new U),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new U),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),Cw.copy(t.boundingBox),Cw.applyMatrix4(e.matrixWorld),this.union(Cw));const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new U),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,mp),mp.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(gp),Rv.subVectors(this.max,gp),Gf.subVectors(e.a,gp),Hf.subVectors(e.b,gp),Uf.subVectors(e.c,gp),nl.subVectors(Hf,Gf),rl.subVectors(Uf,Hf),Pu.subVectors(Gf,Uf);let t=[0,-nl.z,nl.y,0,-rl.z,rl.y,0,-Pu.z,Pu.y,nl.z,0,-nl.x,rl.z,0,-rl.x,Pu.z,0,-Pu.x,-nl.y,nl.x,0,-rl.y,rl.x,0,-Pu.y,Pu.x,0];return!bw(t,Gf,Hf,Uf,Rv)||(t=[1,0,0,0,1,0,0,0,1],!bw(t,Gf,Hf,Uf,Rv))?!1:(Pv.crossVectors(nl,rl),t=[Pv.x,Pv.y,Pv.z],bw(t,Gf,Hf,Uf,Rv))}clampPoint(e,t){return t===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new U),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return mp.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(mp).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(la[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),la[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),la[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),la[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),la[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),la[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),la[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),la[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(la),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}si.prototype.isBox3=!0;const la=[new U,new U,new U,new U,new U,new U,new U,new U],mp=new U,Cw=new si,Gf=new U,Hf=new U,Uf=new U,nl=new U,rl=new U,Pu=new U,gp=new U,Rv=new U,Pv=new U,Iu=new U;function bw(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Iu.fromArray(n,s);const l=i.x*Math.abs(Iu.x)+i.y*Math.abs(Iu.y)+i.z*Math.abs(Iu.z),c=e.dot(Iu),h=t.dot(Iu),v=r.dot(Iu);if(Math.max(-Math.max(c,h,v),Math.min(c,h,v))>l)return!1}return!0}const lO=new si,tb=new U,Lw=new U,Bw=new U;class fo{constructor(e=new U,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):lO.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new U),t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new si),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Bw.subVectors(e,this.center);const t=Bw.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.add(Bw.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return Lw.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(tb.copy(e.center).add(Lw)),this.expandByPoint(tb.copy(e.center).sub(Lw)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ua=new U,Rw=new U,Iv=new U,il=new U,Pw=new U,Fv=new U,Iw=new U;class sl{constructor(e=new U,t=new U(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t===void 0&&(console.warn("THREE.Ray: .at() target is now required"),t=new U),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ua)),this}closestPointToPoint(e,t){t===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new U),t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ua.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ua.copy(this.direction).multiplyScalar(t).add(this.origin),ua.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Rw.copy(e).add(t).multiplyScalar(.5),Iv.copy(t).sub(e).normalize(),il.copy(this.origin).sub(Rw);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Iv),l=il.dot(this.direction),c=-il.dot(Iv),h=il.lengthSq(),v=Math.abs(1-o*o);let p,m,x,A;if(v>0)if(p=o*c-l,m=o*l-c,A=s*v,p>=0)if(m>=-A)if(m<=A){const E=1/v;p*=E,m*=E,x=p*(p+o*m+2*l)+m*(o*p+m+2*c)+h}else m=s,p=Math.max(0,-(o*m+l)),x=-p*p+m*(m+2*c)+h;else m=-s,p=Math.max(0,-(o*m+l)),x=-p*p+m*(m+2*c)+h;else m<=-A?(p=Math.max(0,-(-o*s+l)),m=p>0?-s:Math.min(Math.max(-s,-c),s),x=-p*p+m*(m+2*c)+h):m<=A?(p=0,m=Math.min(Math.max(-s,-c),s),x=m*(m+2*c)+h):(p=Math.max(0,-(o*s+l)),m=p>0?s:Math.min(Math.max(-s,-c),s),x=-p*p+m*(m+2*c)+h);else m=o>0?-s:s,p=Math.max(0,-(o*m+l)),x=-p*p+m*(m+2*c)+h;return r&&r.copy(this.direction).multiplyScalar(p).add(this.origin),i&&i.copy(Iv).multiplyScalar(m).add(Rw),x}intersectSphere(e,t){ua.subVectors(e.center,this.origin);const r=ua.dot(this.direction),i=ua.dot(ua)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),l=r-o,c=r+o;return l<0&&c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,l,c;const h=1/this.direction.x,v=1/this.direction.y,p=1/this.direction.z,m=this.origin;return h>=0?(r=(e.min.x-m.x)*h,i=(e.max.x-m.x)*h):(r=(e.max.x-m.x)*h,i=(e.min.x-m.x)*h),v>=0?(s=(e.min.y-m.y)*v,o=(e.max.y-m.y)*v):(s=(e.max.y-m.y)*v,o=(e.min.y-m.y)*v),r>o||s>i||((s>r||r!==r)&&(r=s),(o<i||i!==i)&&(i=o),p>=0?(l=(e.min.z-m.z)*p,c=(e.max.z-m.z)*p):(l=(e.max.z-m.z)*p,c=(e.min.z-m.z)*p),r>c||l>i)||((l>r||r!==r)&&(r=l),(c<i||i!==i)&&(i=c),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,ua)!==null}intersectTriangle(e,t,r,i,s){Pw.subVectors(t,e),Fv.subVectors(r,e),Iw.crossVectors(Pw,Fv);let o=this.direction.dot(Iw),l;if(o>0){if(i)return null;l=1}else if(o<0)l=-1,o=-o;else return null;il.subVectors(this.origin,e);const c=l*this.direction.dot(Fv.crossVectors(il,Fv));if(c<0)return null;const h=l*this.direction.dot(Pw.cross(il));if(h<0||c+h>o)return null;const v=-l*il.dot(Iw);return v<0?null:this.at(v/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class lt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,s,o,l,c,h,v,p,m,x,A,E,M){const w=this.elements;return w[0]=e,w[4]=t,w[8]=r,w[12]=i,w[1]=s,w[5]=o,w[9]=l,w[13]=c,w[2]=h,w[6]=v,w[10]=p,w[14]=m,w[3]=x,w[7]=A,w[11]=E,w[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new lt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/kf.setFromMatrixColumn(e,0).length(),s=1/kf.setFromMatrixColumn(e,1).length(),o=1/kf.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),l=Math.sin(r),c=Math.cos(i),h=Math.sin(i),v=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const m=o*v,x=o*p,A=l*v,E=l*p;t[0]=c*v,t[4]=-c*p,t[8]=h,t[1]=x+A*h,t[5]=m-E*h,t[9]=-l*c,t[2]=E-m*h,t[6]=A+x*h,t[10]=o*c}else if(e.order==="YXZ"){const m=c*v,x=c*p,A=h*v,E=h*p;t[0]=m+E*l,t[4]=A*l-x,t[8]=o*h,t[1]=o*p,t[5]=o*v,t[9]=-l,t[2]=x*l-A,t[6]=E+m*l,t[10]=o*c}else if(e.order==="ZXY"){const m=c*v,x=c*p,A=h*v,E=h*p;t[0]=m-E*l,t[4]=-o*p,t[8]=A+x*l,t[1]=x+A*l,t[5]=o*v,t[9]=E-m*l,t[2]=-o*h,t[6]=l,t[10]=o*c}else if(e.order==="ZYX"){const m=o*v,x=o*p,A=l*v,E=l*p;t[0]=c*v,t[4]=A*h-x,t[8]=m*h+E,t[1]=c*p,t[5]=E*h+m,t[9]=x*h-A,t[2]=-h,t[6]=l*c,t[10]=o*c}else if(e.order==="YZX"){const m=o*c,x=o*h,A=l*c,E=l*h;t[0]=c*v,t[4]=E-m*p,t[8]=A*p+x,t[1]=p,t[5]=o*v,t[9]=-l*v,t[2]=-h*v,t[6]=x*p+A,t[10]=m-E*p}else if(e.order==="XZY"){const m=o*c,x=o*h,A=l*c,E=l*h;t[0]=c*v,t[4]=-p,t[8]=h*v,t[1]=m*p+E,t[5]=o*v,t[9]=x*p-A,t[2]=A*p-x,t[6]=l*v,t[10]=E*p+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(uO,e,cO)}lookAt(e,t,r){const i=this.elements;return Qi.subVectors(e,t),Qi.lengthSq()===0&&(Qi.z=1),Qi.normalize(),ol.crossVectors(r,Qi),ol.lengthSq()===0&&(Math.abs(r.z)===1?Qi.x+=1e-4:Qi.z+=1e-4,Qi.normalize(),ol.crossVectors(r,Qi)),ol.normalize(),Dv.crossVectors(Qi,ol),i[0]=ol.x,i[4]=Dv.x,i[8]=Qi.x,i[1]=ol.y,i[5]=Dv.y,i[9]=Qi.y,i[2]=ol.z,i[6]=Dv.z,i[10]=Qi.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],l=r[4],c=r[8],h=r[12],v=r[1],p=r[5],m=r[9],x=r[13],A=r[2],E=r[6],M=r[10],w=r[14],_=r[3],C=r[7],b=r[11],I=r[15],B=i[0],H=i[4],D=i[8],O=i[12],ee=i[1],q=i[5],fe=i[9],ne=i[13],te=i[2],$=i[6],le=i[10],_e=i[14],Be=i[3],Ce=i[7],He=i[11],ue=i[15];return s[0]=o*B+l*ee+c*te+h*Be,s[4]=o*H+l*q+c*$+h*Ce,s[8]=o*D+l*fe+c*le+h*He,s[12]=o*O+l*ne+c*_e+h*ue,s[1]=v*B+p*ee+m*te+x*Be,s[5]=v*H+p*q+m*$+x*Ce,s[9]=v*D+p*fe+m*le+x*He,s[13]=v*O+p*ne+m*_e+x*ue,s[2]=A*B+E*ee+M*te+w*Be,s[6]=A*H+E*q+M*$+w*Ce,s[10]=A*D+E*fe+M*le+w*He,s[14]=A*O+E*ne+M*_e+w*ue,s[3]=_*B+C*ee+b*te+I*Be,s[7]=_*H+C*q+b*$+I*Ce,s[11]=_*D+C*fe+b*le+I*He,s[15]=_*O+C*ne+b*_e+I*ue,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],l=e[5],c=e[9],h=e[13],v=e[2],p=e[6],m=e[10],x=e[14],A=e[3],E=e[7],M=e[11],w=e[15];return A*(+s*c*p-i*h*p-s*l*m+r*h*m+i*l*x-r*c*x)+E*(+t*c*x-t*h*m+s*o*m-i*o*x+i*h*v-s*c*v)+M*(+t*h*p-t*l*x-s*o*p+r*o*x+s*l*v-r*h*v)+w*(-i*l*v-t*c*p+t*l*m+i*o*p-r*o*m+r*c*v)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],l=e[5],c=e[6],h=e[7],v=e[8],p=e[9],m=e[10],x=e[11],A=e[12],E=e[13],M=e[14],w=e[15],_=p*M*h-E*m*h+E*c*x-l*M*x-p*c*w+l*m*w,C=A*m*h-v*M*h-A*c*x+o*M*x+v*c*w-o*m*w,b=v*E*h-A*p*h+A*l*x-o*E*x-v*l*w+o*p*w,I=A*p*c-v*E*c-A*l*m+o*E*m+v*l*M-o*p*M,B=t*_+r*C+i*b+s*I;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const H=1/B;return e[0]=_*H,e[1]=(E*m*s-p*M*s-E*i*x+r*M*x+p*i*w-r*m*w)*H,e[2]=(l*M*s-E*c*s+E*i*h-r*M*h-l*i*w+r*c*w)*H,e[3]=(p*c*s-l*m*s-p*i*h+r*m*h+l*i*x-r*c*x)*H,e[4]=C*H,e[5]=(v*M*s-A*m*s+A*i*x-t*M*x-v*i*w+t*m*w)*H,e[6]=(A*c*s-o*M*s-A*i*h+t*M*h+o*i*w-t*c*w)*H,e[7]=(o*m*s-v*c*s+v*i*h-t*m*h-o*i*x+t*c*x)*H,e[8]=b*H,e[9]=(A*p*s-v*E*s-A*r*x+t*E*x+v*r*w-t*p*w)*H,e[10]=(o*E*s-A*l*s+A*r*h-t*E*h-o*r*w+t*l*w)*H,e[11]=(v*l*s-o*p*s-v*r*h+t*p*h+o*r*x-t*l*x)*H,e[12]=I*H,e[13]=(v*E*i-A*p*i+A*r*m-t*E*m-v*r*M+t*p*M)*H,e[14]=(A*l*i-o*E*i-A*r*c+t*E*c+o*r*M-t*l*M)*H,e[15]=(o*p*i-v*l*i+v*r*c-t*p*c-o*r*m+t*l*m)*H,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,l=e.y,c=e.z,h=s*o,v=s*l;return this.set(h*o+r,h*l-i*c,h*c+i*l,0,h*l+i*c,v*l+r,v*c-i*o,0,h*c-i*l,v*c+i*o,s*c*c+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r){return this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,l=t._z,c=t._w,h=s+s,v=o+o,p=l+l,m=s*h,x=s*v,A=s*p,E=o*v,M=o*p,w=l*p,_=c*h,C=c*v,b=c*p,I=r.x,B=r.y,H=r.z;return i[0]=(1-(E+w))*I,i[1]=(x+b)*I,i[2]=(A-C)*I,i[3]=0,i[4]=(x-b)*B,i[5]=(1-(m+w))*B,i[6]=(M+_)*B,i[7]=0,i[8]=(A+C)*H,i[9]=(M-_)*H,i[10]=(1-(m+E))*H,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=kf.set(i[0],i[1],i[2]).length();const o=kf.set(i[4],i[5],i[6]).length(),l=kf.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ns.copy(this);const h=1/s,v=1/o,p=1/l;return Ns.elements[0]*=h,Ns.elements[1]*=h,Ns.elements[2]*=h,Ns.elements[4]*=v,Ns.elements[5]*=v,Ns.elements[6]*=v,Ns.elements[8]*=p,Ns.elements[9]*=p,Ns.elements[10]*=p,t.setFromRotationMatrix(Ns),r.x=s,r.y=o,r.z=l,this}makePerspective(e,t,r,i,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const l=this.elements,c=2*s/(t-e),h=2*s/(r-i),v=(t+e)/(t-e),p=(r+i)/(r-i),m=-(o+s)/(o-s),x=-2*o*s/(o-s);return l[0]=c,l[4]=0,l[8]=v,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o){const l=this.elements,c=1/(t-e),h=1/(r-i),v=1/(o-s),p=(t+e)*c,m=(r+i)*h,x=(o+s)*v;return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=-2*v,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}lt.prototype.isMatrix4=!0;const kf=new U,Ns=new lt,uO=new U(0,0,0),cO=new U(1,1,1),ol=new U,Dv=new U,Qi=new U,nb=new lt,rb=new cr;class Fu{constructor(e=0,t=0,r=0,i=Fu.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._order=i||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,r){const i=vt.clamp,s=e.elements,o=s[0],l=s[4],c=s[8],h=s[1],v=s[5],p=s[9],m=s[2],x=s[6],A=s[10];switch(t=t||this._order,t){case"XYZ":this._y=Math.asin(i(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,A),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(x,v),this._z=0);break;case"YXZ":this._x=Math.asin(-i(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(c,A),this._z=Math.atan2(h,v)):(this._y=Math.atan2(-m,o),this._z=0);break;case"ZXY":this._x=Math.asin(i(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-m,A),this._z=Math.atan2(-l,v)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-i(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(x,A),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,v));break;case"YZX":this._z=Math.asin(i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-p,v),this._y=Math.atan2(-m,o)):(this._x=0,this._y=Math.atan2(c,A));break;case"XZY":this._z=Math.asin(-i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(x,v),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-p,A),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r!==!1&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return nb.makeRotationFromQuaternion(e),this.setFromRotationMatrix(nb,t,r)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return rb.setFromEuler(this),this.setFromQuaternion(rb,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new U(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Fu.prototype.isEuler=!0;Fu.DefaultOrder="XYZ";Fu.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class zf{constructor(){this.mask=1|0}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=4294967295|0}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}}let fO=0;const ib=new U,Wf=new cr,ca=new lt,Ov=new U,vp=new U,dO=new U,hO=new cr,sb=new U(1,0,0),ob=new U(0,1,0),ab=new U(0,0,1),pO={type:"added"},lb={type:"removed"};function mt(){Object.defineProperty(this,"id",{value:fO++}),this.uuid=vt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=mt.DefaultUp.clone();const n=new U,e=new Fu,t=new cr,r=new U(1,1,1);function i(){t.setFromEuler(e,!1)}function s(){e.setFromQuaternion(t,void 0,!1)}e._onChange(i),t._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new lt},normalMatrix:{value:new xr}}),this.matrix=new lt,this.matrixWorld=new lt,this.matrixAutoUpdate=mt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new zf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}mt.DefaultUp=new U(0,1,0);mt.DefaultMatrixAutoUpdate=!0;mt.prototype=Object.assign(Object.create(co.prototype),{constructor:mt,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(n){return this.quaternion.premultiply(n),this},setRotationFromAxisAngle:function(n,e){this.quaternion.setFromAxisAngle(n,e)},setRotationFromEuler:function(n){this.quaternion.setFromEuler(n,!0)},setRotationFromMatrix:function(n){this.quaternion.setFromRotationMatrix(n)},setRotationFromQuaternion:function(n){this.quaternion.copy(n)},rotateOnAxis:function(n,e){return Wf.setFromAxisAngle(n,e),this.quaternion.multiply(Wf),this},rotateOnWorldAxis:function(n,e){return Wf.setFromAxisAngle(n,e),this.quaternion.premultiply(Wf),this},rotateX:function(n){return this.rotateOnAxis(sb,n)},rotateY:function(n){return this.rotateOnAxis(ob,n)},rotateZ:function(n){return this.rotateOnAxis(ab,n)},translateOnAxis:function(n,e){return ib.copy(n).applyQuaternion(this.quaternion),this.position.add(ib.multiplyScalar(e)),this},translateX:function(n){return this.translateOnAxis(sb,n)},translateY:function(n){return this.translateOnAxis(ob,n)},translateZ:function(n){return this.translateOnAxis(ab,n)},localToWorld:function(n){return n.applyMatrix4(this.matrixWorld)},worldToLocal:function(n){return n.applyMatrix4(ca.copy(this.matrixWorld).invert())},lookAt:function(n,e,t){n.isVector3?Ov.copy(n):Ov.set(n,e,t);const r=this.parent;this.updateWorldMatrix(!0,!1),vp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ca.lookAt(vp,Ov,this.up):ca.lookAt(Ov,vp,this.up),this.quaternion.setFromRotationMatrix(ca),r&&(ca.extractRotation(r.matrixWorld),Wf.setFromRotationMatrix(ca),this.quaternion.premultiply(Wf.invert()))},add:function(n){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.parent!==null&&n.parent.remove(n),n.parent=this,this.children.push(n),n.dispatchEvent(pO)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)},remove:function(n){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(n);return e!==-1&&(n.parent=null,this.children.splice(e,1),n.dispatchEvent(lb)),this},clear:function(){for(let n=0;n<this.children.length;n++){const e=this.children[n];e.parent=null,e.dispatchEvent(lb)}return this.children.length=0,this},attach:function(n){return this.updateWorldMatrix(!0,!1),ca.copy(this.matrixWorld).invert(),n.parent!==null&&(n.parent.updateWorldMatrix(!0,!1),ca.multiply(n.parent.matrixWorld)),n.applyMatrix4(ca),this.add(n),n.updateWorldMatrix(!1,!0),this},getObjectById:function(n){return this.getObjectByProperty("id",n)},getObjectByName:function(n){return this.getObjectByProperty("name",n)},getObjectByProperty:function(n,e){if(this[n]===e)return this;for(let t=0,r=this.children.length;t<r;t++){const s=this.children[t].getObjectByProperty(n,e);if(s!==void 0)return s}},getWorldPosition:function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),n=new U),this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new cr),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vp,n,dO),n},getWorldScale:function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new U),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vp,hO,n),n},getWorldDirection:function(n){n===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),n=new U),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return n.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(n){n(this);const e=this.children;for(let t=0,r=e.length;t<r;t++)e[t].traverse(n)},traverseVisible:function(n){if(this.visible===!1)return;n(this);const e=this.children;for(let t=0,r=e.length;t<r;t++)e[t].traverseVisible(n)},traverseAncestors:function(n){const e=this.parent;e!==null&&(n(e),e.traverseAncestors(n))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,n=!0);const e=this.children;for(let t=0,r=e.length;t<r;t++)e[t].updateMatrixWorld(n)},updateWorldMatrix:function(n,e){const t=this.parent;if(n===!0&&t!==null&&t.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].updateWorldMatrix(!1,!0)}},toJSON:function(n){const e=n===void 0||typeof n=="string",t={};e&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},t.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function i(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(n)),l.uuid}if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(n.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const v=l[c];i(n.shapes,v)}else i(n.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(i(n.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(i(n.materials,this.material[l]));r.material=o}else r.material=i(n.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(n).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(i(n.animations,l))}}if(e){const o=s(n.geometries),l=s(n.materials),c=s(n.textures),h=s(n.images),v=s(n.shapes),p=s(n.skeletons),m=s(n.animations);o.length>0&&(t.geometries=o),l.length>0&&(t.materials=l),c.length>0&&(t.textures=c),h.length>0&&(t.images=h),v.length>0&&(t.shapes=v),p.length>0&&(t.skeletons=p),m.length>0&&(t.animations=m)}return t.object=r,t;function s(o){const l=[];for(const c in o){const h=o[c];delete h.metadata,l.push(h)}return l}},clone:function(n){return new this.constructor().copy(this,n)},copy:function(n,e=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.userData=JSON.parse(JSON.stringify(n.userData)),e===!0)for(let t=0;t<n.children.length;t++){const r=n.children[t];this.add(r.clone())}return this}});const Fw=new U,mO=new U,gO=new xr;class Gs{constructor(e=new U(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=Fw.subVectors(r,t).cross(mO.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new U),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){t===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new U);const r=e.delta(Fw),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new U),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||gO.getNormalMatrix(e),i=this.coplanarPoint(Fw).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}Gs.prototype.isPlane=!0;const Hs=new U,fa=new U,Dw=new U,da=new U,Vf=new U,Jf=new U,ub=new U,Ow=new U,Nw=new U,Gw=new U;class rr{constructor(e=new U,t=new U,r=new U){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new U),i.subVectors(r,t),Hs.subVectors(e,t),i.cross(Hs);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Hs.subVectors(i,t),fa.subVectors(r,t),Dw.subVectors(e,t);const o=Hs.dot(Hs),l=Hs.dot(fa),c=Hs.dot(Dw),h=fa.dot(fa),v=fa.dot(Dw),p=o*h-l*l;if(s===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new U),p===0)return s.set(-2,-1,-1);const m=1/p,x=(h*c-l*v)*m,A=(o*v-l*c)*m;return s.set(1-x-A,A,x)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,da),da.x>=0&&da.y>=0&&da.x+da.y<=1}static getUV(e,t,r,i,s,o,l,c){return this.getBarycoord(e,t,r,i,da),c.set(0,0),c.addScaledVector(s,da.x),c.addScaledVector(o,da.y),c.addScaledVector(l,da.z),c}static isFrontFacing(e,t,r,i){return Hs.subVectors(r,t),fa.subVectors(e,t),Hs.cross(fa).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Hs.subVectors(this.c,this.b),fa.subVectors(this.a,this.b),Hs.cross(fa).length()*.5}getMidpoint(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new U),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return rr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Gs),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return rr.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return rr.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return rr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return rr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){t===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new U);const r=this.a,i=this.b,s=this.c;let o,l;Vf.subVectors(i,r),Jf.subVectors(s,r),Ow.subVectors(e,r);const c=Vf.dot(Ow),h=Jf.dot(Ow);if(c<=0&&h<=0)return t.copy(r);Nw.subVectors(e,i);const v=Vf.dot(Nw),p=Jf.dot(Nw);if(v>=0&&p<=v)return t.copy(i);const m=c*p-v*h;if(m<=0&&c>=0&&v<=0)return o=c/(c-v),t.copy(r).addScaledVector(Vf,o);Gw.subVectors(e,s);const x=Vf.dot(Gw),A=Jf.dot(Gw);if(A>=0&&x<=A)return t.copy(s);const E=x*h-c*A;if(E<=0&&h>=0&&A<=0)return l=h/(h-A),t.copy(r).addScaledVector(Jf,l);const M=v*A-x*p;if(M<=0&&p-v>=0&&x-A>=0)return ub.subVectors(s,i),l=(p-v)/(p-v+(x-A)),t.copy(i).addScaledVector(ub,l);const w=1/(M+E+m);return o=E*w,l=m*w,t.copy(r).addScaledVector(Vf,o).addScaledVector(Jf,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let vO=0;function fn(){Object.defineProperty(this,"id",{value:vO++}),this.uuid=vt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Bf,this.side=el,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=sw,this.blendDst=ow,this.blendEquation=Mu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Av,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ZC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Lv,this.stencilZFail=Lv,this.stencilZPass=Lv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}fn.prototype=Object.assign(Object.create(co.prototype),{constructor:fn,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(n){if(n!==void 0)for(const e in n){const t=n[e];if(t===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===$_;continue}const r=this[e];if(r===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}r&&r.isColor?r.set(t):r&&r.isVector3&&t&&t.isVector3?r.copy(t):this[e]=t}},toJSON:function(n){const e=n===void 0||typeof n=="string";e&&(n={textures:{},images:{}});const t={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(t.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearcoat!==void 0&&(t.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(t.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(t.clearcoatMap=this.clearcoatMap.toJSON(n).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(n).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(n).uuid,t.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(n).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(n).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(n).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(n).uuid,t.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(n).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(n).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(n).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(n).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(n).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(n).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(n).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(n).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(n).uuid,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,this.combine!==void 0&&(t.combine=this.combine),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(n).uuid),this.size!==void 0&&(t.size=this.size),this.shadowSide!==null&&(t.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==Bf&&(t.blending=this.blending),this.side!==el&&(t.side=this.side),this.vertexColors&&(t.vertexColors=!0),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=this.transparent),t.depthFunc=this.depthFunc,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.colorWrite=this.colorWrite,t.stencilWrite=this.stencilWrite,t.stencilWriteMask=this.stencilWriteMask,t.stencilFunc=this.stencilFunc,t.stencilRef=this.stencilRef,t.stencilFuncMask=this.stencilFuncMask,t.stencilFail=this.stencilFail,t.stencilZFail=this.stencilZFail,t.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(t.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(t.morphTargets=!0),this.morphNormals===!0&&(t.morphNormals=!0),this.skinning===!0&&(t.skinning=!0),this.flatShading===!0&&(t.flatShading=this.flatShading),this.visible===!1&&(t.visible=!1),this.toneMapped===!1&&(t.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(t.userData=this.userData);function r(i){const s=[];for(const o in i){const l=i[o];delete l.metadata,s.push(l)}return s}if(e){const i=r(n.textures),s=r(n.images);i.length>0&&(t.textures=i),s.length>0&&(t.images=s)}return t},clone:function(){return new this.constructor().copy(this)},copy:function(n){this.name=n.name,this.fog=n.fog,this.blending=n.blending,this.side=n.side,this.vertexColors=n.vertexColors,this.opacity=n.opacity,this.transparent=n.transparent,this.blendSrc=n.blendSrc,this.blendDst=n.blendDst,this.blendEquation=n.blendEquation,this.blendSrcAlpha=n.blendSrcAlpha,this.blendDstAlpha=n.blendDstAlpha,this.blendEquationAlpha=n.blendEquationAlpha,this.depthFunc=n.depthFunc,this.depthTest=n.depthTest,this.depthWrite=n.depthWrite,this.stencilWriteMask=n.stencilWriteMask,this.stencilFunc=n.stencilFunc,this.stencilRef=n.stencilRef,this.stencilFuncMask=n.stencilFuncMask,this.stencilFail=n.stencilFail,this.stencilZFail=n.stencilZFail,this.stencilZPass=n.stencilZPass,this.stencilWrite=n.stencilWrite;const e=n.clippingPlanes;let t=null;if(e!==null){const r=e.length;t=new Array(r);for(let i=0;i!==r;++i)t[i]=e[i].clone()}return this.clippingPlanes=t,this.clipIntersection=n.clipIntersection,this.clipShadows=n.clipShadows,this.shadowSide=n.shadowSide,this.colorWrite=n.colorWrite,this.precision=n.precision,this.polygonOffset=n.polygonOffset,this.polygonOffsetFactor=n.polygonOffsetFactor,this.polygonOffsetUnits=n.polygonOffsetUnits,this.dithering=n.dithering,this.alphaTest=n.alphaTest,this.alphaToCoverage=n.alphaToCoverage,this.premultipliedAlpha=n.premultipliedAlpha,this.visible=n.visible,this.toneMapped=n.toneMapped,this.userData=JSON.parse(JSON.stringify(n.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(fn.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});const cb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Us={h:0,s:0,l:0},Nv={h:0,s:0,l:0};function Hw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function Uw(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function kw(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}class je{constructor(e,t,r){return t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,r){return this.r=e,this.g=t,this.b=r,this}setHSL(e,t,r){if(e=vt.euclideanModulo(e,1),t=vt.clamp(t,0,1),r=vt.clamp(r,0,1),t===0)this.r=this.g=this.b=r;else{const i=r<=.5?r*(1+t):r+t-r*t,s=2*r-i;this.r=Hw(s,i,e+1/3),this.g=Hw(s,i,e),this.b=Hw(s,i,e-1/3)}return this}setStyle(e){function t(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i;const s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const l=parseFloat(i[1])/360,c=parseInt(i[2],10)/100,h=parseInt(i[3],10)/100;return t(i[4]),this.setHSL(l,c,h)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=r[1],s=i.length;if(s===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=cb[e];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=Uw(e.r),this.g=Uw(e.g),this.b=Uw(e.b),this}copyLinearToSRGB(e){return this.r=kw(e.r),this.g=kw(e.g),this.b=kw(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,r=this.g,i=this.b,s=Math.max(t,r,i),o=Math.min(t,r,i);let l,c;const h=(o+s)/2;if(o===s)l=0,c=0;else{const v=s-o;switch(c=h<=.5?v/(s+o):v/(2-s-o),s){case t:l=(r-i)/v+(r<i?6:0);break;case r:l=(i-t)/v+2;break;case i:l=(t-r)/v+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,r){return this.getHSL(Us),Us.h+=e,Us.s+=t,Us.l+=r,this.setHSL(Us.h,Us.s,Us.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Us),e.getHSL(Nv);const r=vt.lerp(Us.h,Nv.h,t),i=vt.lerp(Us.s,Nv.s,t),s=vt.lerp(Us.l,Nv.l,t);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}je.NAMES=cb;je.prototype.isColor=!0;je.prototype.r=1;je.prototype.g=1;je.prototype.b=1;class _r extends fn{constructor(e){super();this.type="MeshBasicMaterial",this.color=new je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=sp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this}}_r.prototype.isMeshBasicMaterial=!0;const Tn=new U,Gv=new Pe;function dt(n,e,t){if(Array.isArray(n))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=n,this.itemSize=e,this.count=n!==void 0?n.length/e:0,this.normalized=t===!0,this.usage=Of,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(dt.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});Object.assign(dt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(n){return this.usage=n,this},copy:function(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this},copyAt:function(n,e,t){n*=this.itemSize,t*=e.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[n+r]=e.array[t+r];return this},copyArray:function(n){return this.array.set(n),this},copyColorsArray:function(n){const e=this.array;let t=0;for(let r=0,i=n.length;r<i;r++){let s=n[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),s=new je),e[t++]=s.r,e[t++]=s.g,e[t++]=s.b}return this},copyVector2sArray:function(n){const e=this.array;let t=0;for(let r=0,i=n.length;r<i;r++){let s=n[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new Pe),e[t++]=s.x,e[t++]=s.y}return this},copyVector3sArray:function(n){const e=this.array;let t=0;for(let r=0,i=n.length;r<i;r++){let s=n[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),s=new U),e[t++]=s.x,e[t++]=s.y,e[t++]=s.z}return this},copyVector4sArray:function(n){const e=this.array;let t=0;for(let r=0,i=n.length;r<i;r++){let s=n[r];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),s=new on),e[t++]=s.x,e[t++]=s.y,e[t++]=s.z,e[t++]=s.w}return this},applyMatrix3:function(n){if(this.itemSize===2)for(let e=0,t=this.count;e<t;e++)Gv.fromBufferAttribute(this,e),Gv.applyMatrix3(n),this.setXY(e,Gv.x,Gv.y);else if(this.itemSize===3)for(let e=0,t=this.count;e<t;e++)Tn.fromBufferAttribute(this,e),Tn.applyMatrix3(n),this.setXYZ(e,Tn.x,Tn.y,Tn.z);return this},applyMatrix4:function(n){for(let e=0,t=this.count;e<t;e++)Tn.x=this.getX(e),Tn.y=this.getY(e),Tn.z=this.getZ(e),Tn.applyMatrix4(n),this.setXYZ(e,Tn.x,Tn.y,Tn.z);return this},applyNormalMatrix:function(n){for(let e=0,t=this.count;e<t;e++)Tn.x=this.getX(e),Tn.y=this.getY(e),Tn.z=this.getZ(e),Tn.applyNormalMatrix(n),this.setXYZ(e,Tn.x,Tn.y,Tn.z);return this},transformDirection:function(n){for(let e=0,t=this.count;e<t;e++)Tn.x=this.getX(e),Tn.y=this.getY(e),Tn.z=this.getZ(e),Tn.transformDirection(n),this.setXYZ(e,Tn.x,Tn.y,Tn.z);return this},set:function(n,e=0){return this.array.set(n,e),this},getX:function(n){return this.array[n*this.itemSize]},setX:function(n,e){return this.array[n*this.itemSize]=e,this},getY:function(n){return this.array[n*this.itemSize+1]},setY:function(n,e){return this.array[n*this.itemSize+1]=e,this},getZ:function(n){return this.array[n*this.itemSize+2]},setZ:function(n,e){return this.array[n*this.itemSize+2]=e,this},getW:function(n){return this.array[n*this.itemSize+3]},setW:function(n,e){return this.array[n*this.itemSize+3]=e,this},setXY:function(n,e,t){return n*=this.itemSize,this.array[n+0]=e,this.array[n+1]=t,this},setXYZ:function(n,e,t,r){return n*=this.itemSize,this.array[n+0]=e,this.array[n+1]=t,this.array[n+2]=r,this},setXYZW:function(n,e,t,r,i){return n*=this.itemSize,this.array[n+0]=e,this.array[n+1]=t,this.array[n+2]=r,this.array[n+3]=i,this},onUpload:function(n){return this.onUploadCallback=n,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){const n={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(n.name=this.name),this.usage!==Of&&(n.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(n.updateRange=this.updateRange),n}});function yp(n,e,t){dt.call(this,new Int8Array(n),e,t)}yp.prototype=Object.create(dt.prototype);yp.prototype.constructor=yp;function xp(n,e,t){dt.call(this,new Uint8Array(n),e,t)}xp.prototype=Object.create(dt.prototype);xp.prototype.constructor=xp;function _p(n,e,t){dt.call(this,new Uint8ClampedArray(n),e,t)}_p.prototype=Object.create(dt.prototype);_p.prototype.constructor=_p;function wp(n,e,t){dt.call(this,new Int16Array(n),e,t)}wp.prototype=Object.create(dt.prototype);wp.prototype.constructor=wp;function Du(n,e,t){dt.call(this,new Uint16Array(n),e,t)}Du.prototype=Object.create(dt.prototype);Du.prototype.constructor=Du;function Ap(n,e,t){dt.call(this,new Int32Array(n),e,t)}Ap.prototype=Object.create(dt.prototype);Ap.prototype.constructor=Ap;function Ou(n,e,t){dt.call(this,new Uint32Array(n),e,t)}Ou.prototype=Object.create(dt.prototype);Ou.prototype.constructor=Ou;function Mp(n,e,t){dt.call(this,new Uint16Array(n),e,t)}Mp.prototype=Object.create(dt.prototype);Mp.prototype.constructor=Mp;Mp.prototype.isFloat16BufferAttribute=!0;function st(n,e,t){dt.call(this,new Float32Array(n),e,t)}st.prototype=Object.create(dt.prototype);st.prototype.constructor=st;function Ep(n,e,t){dt.call(this,new Float64Array(n),e,t)}Ep.prototype=Object.create(dt.prototype);Ep.prototype.constructor=Ep;function fb(n){if(n.length===0)return-1/0;let e=n[0];for(let t=1,r=n.length;t<r;++t)n[t]>e&&(e=n[t]);return e}const yO={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Sp(n,e){return new yO[n](e)}let xO=0;const ho=new lt,zw=new mt,jf=new U,Zi=new si,Tp=new si,Lr=new U;function ut(){Object.defineProperty(this,"id",{value:xO++}),this.uuid=vt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ut.prototype=Object.assign(Object.create(co.prototype),{constructor:ut,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(n){return Array.isArray(n)?this.index=new(fb(n)>65535?Ou:Du)(n,1):this.index=n,this},getAttribute:function(n){return this.attributes[n]},setAttribute:function(n,e){return this.attributes[n]=e,this},deleteAttribute:function(n){return delete this.attributes[n],this},hasAttribute:function(n){return this.attributes[n]!==void 0},addGroup:function(n,e,t=0){this.groups.push({start:n,count:e,materialIndex:t})},clearGroups:function(){this.groups=[]},setDrawRange:function(n,e){this.drawRange.start=n,this.drawRange.count=e},applyMatrix4:function(n){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(n),e.needsUpdate=!0);const t=this.attributes.normal;if(t!==void 0){const i=new xr().getNormalMatrix(n);t.applyNormalMatrix(i),t.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(n),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(n){return ho.makeRotationX(n),this.applyMatrix4(ho),this},rotateY:function(n){return ho.makeRotationY(n),this.applyMatrix4(ho),this},rotateZ:function(n){return ho.makeRotationZ(n),this.applyMatrix4(ho),this},translate:function(n,e,t){return ho.makeTranslation(n,e,t),this.applyMatrix4(ho),this},scale:function(n,e,t){return ho.makeScale(n,e,t),this.applyMatrix4(ho),this},lookAt:function(n){return zw.lookAt(n),zw.updateMatrix(),this.applyMatrix4(zw.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(jf).negate(),this.translate(jf.x,jf.y,jf.z),this},setFromPoints:function(n){const e=[];for(let t=0,r=n.length;t<r;t++){const i=n[t];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new st(e,3)),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new si);const n=this.attributes.position,e=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new U(-1/0,-1/0,-1/0),new U(1/0,1/0,1/0));return}if(n!==void 0){if(this.boundingBox.setFromBufferAttribute(n),e)for(let t=0,r=e.length;t<r;t++){const i=e[t];Zi.setFromBufferAttribute(i),this.morphTargetsRelative?(Lr.addVectors(this.boundingBox.min,Zi.min),this.boundingBox.expandByPoint(Lr),Lr.addVectors(this.boundingBox.max,Zi.max),this.boundingBox.expandByPoint(Lr)):(this.boundingBox.expandByPoint(Zi.min),this.boundingBox.expandByPoint(Zi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new fo);const n=this.attributes.position,e=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new U,1/0);return}if(n){const t=this.boundingSphere.center;if(Zi.setFromBufferAttribute(n),e)for(let i=0,s=e.length;i<s;i++){const o=e[i];Tp.setFromBufferAttribute(o),this.morphTargetsRelative?(Lr.addVectors(Zi.min,Tp.min),Zi.expandByPoint(Lr),Lr.addVectors(Zi.max,Tp.max),Zi.expandByPoint(Lr)):(Zi.expandByPoint(Tp.min),Zi.expandByPoint(Tp.max))}Zi.getCenter(t);let r=0;for(let i=0,s=n.count;i<s;i++)Lr.fromBufferAttribute(n,i),r=Math.max(r,t.distanceToSquared(Lr));if(e)for(let i=0,s=e.length;i<s;i++){const o=e[i],l=this.morphTargetsRelative;for(let c=0,h=o.count;c<h;c++)Lr.fromBufferAttribute(o,c),l&&(jf.fromBufferAttribute(n,c),Lr.add(jf)),r=Math.max(r,t.distanceToSquared(Lr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const n=this.index,e=this.attributes;if(n===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const t=n.array,r=e.position.array,i=e.normal.array,s=e.uv.array,o=r.length/3;e.tangent===void 0&&this.setAttribute("tangent",new dt(new Float32Array(4*o),4));const l=e.tangent.array,c=[],h=[];for(let O=0;O<o;O++)c[O]=new U,h[O]=new U;const v=new U,p=new U,m=new U,x=new Pe,A=new Pe,E=new Pe,M=new U,w=new U;function _(O,ee,q){v.fromArray(r,O*3),p.fromArray(r,ee*3),m.fromArray(r,q*3),x.fromArray(s,O*2),A.fromArray(s,ee*2),E.fromArray(s,q*2),p.sub(v),m.sub(v),A.sub(x),E.sub(x);const fe=1/(A.x*E.y-E.x*A.y);!isFinite(fe)||(M.copy(p).multiplyScalar(E.y).addScaledVector(m,-A.y).multiplyScalar(fe),w.copy(m).multiplyScalar(A.x).addScaledVector(p,-E.x).multiplyScalar(fe),c[O].add(M),c[ee].add(M),c[q].add(M),h[O].add(w),h[ee].add(w),h[q].add(w))}let C=this.groups;C.length===0&&(C=[{start:0,count:t.length}]);for(let O=0,ee=C.length;O<ee;++O){const q=C[O],fe=q.start,ne=q.count;for(let te=fe,$=fe+ne;te<$;te+=3)_(t[te+0],t[te+1],t[te+2])}const b=new U,I=new U,B=new U,H=new U;function D(O){B.fromArray(i,O*3),H.copy(B);const ee=c[O];b.copy(ee),b.sub(B.multiplyScalar(B.dot(ee))).normalize(),I.crossVectors(H,ee);const fe=I.dot(h[O])<0?-1:1;l[O*4]=b.x,l[O*4+1]=b.y,l[O*4+2]=b.z,l[O*4+3]=fe}for(let O=0,ee=C.length;O<ee;++O){const q=C[O],fe=q.start,ne=q.count;for(let te=fe,$=fe+ne;te<$;te+=3)D(t[te+0]),D(t[te+1]),D(t[te+2])}},computeVertexNormals:function(){const n=this.index,e=this.getAttribute("position");if(e!==void 0){let t=this.getAttribute("normal");if(t===void 0)t=new dt(new Float32Array(e.count*3),3),this.setAttribute("normal",t);else for(let p=0,m=t.count;p<m;p++)t.setXYZ(p,0,0,0);const r=new U,i=new U,s=new U,o=new U,l=new U,c=new U,h=new U,v=new U;if(n)for(let p=0,m=n.count;p<m;p+=3){const x=n.getX(p+0),A=n.getX(p+1),E=n.getX(p+2);r.fromBufferAttribute(e,x),i.fromBufferAttribute(e,A),s.fromBufferAttribute(e,E),h.subVectors(s,i),v.subVectors(r,i),h.cross(v),o.fromBufferAttribute(t,x),l.fromBufferAttribute(t,A),c.fromBufferAttribute(t,E),o.add(h),l.add(h),c.add(h),t.setXYZ(x,o.x,o.y,o.z),t.setXYZ(A,l.x,l.y,l.z),t.setXYZ(E,c.x,c.y,c.z)}else for(let p=0,m=e.count;p<m;p+=3)r.fromBufferAttribute(e,p+0),i.fromBufferAttribute(e,p+1),s.fromBufferAttribute(e,p+2),h.subVectors(s,i),v.subVectors(r,i),h.cross(v),t.setXYZ(p+0,h.x,h.y,h.z),t.setXYZ(p+1,h.x,h.y,h.z),t.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),t.needsUpdate=!0}},merge:function(n,e){if(!(n&&n.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",n);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const t=this.attributes;for(const r in t){if(n.attributes[r]===void 0)continue;const s=t[r].array,o=n.attributes[r],l=o.array,c=o.itemSize*e,h=Math.min(l.length,s.length-c);for(let v=0,p=c;v<h;v++,p++)s[p]=l[v]}return this},normalizeNormals:function(){const n=this.attributes.normal;for(let e=0,t=n.count;e<t;e++)Lr.fromBufferAttribute(n,e),Lr.normalize(),n.setXYZ(e,Lr.x,Lr.y,Lr.z)},toNonIndexed:function(){function n(o,l){const c=o.array,h=o.itemSize,v=o.normalized,p=new c.constructor(l.length*h);let m=0,x=0;for(let A=0,E=l.length;A<E;A++){m=l[A]*h;for(let M=0;M<h;M++)p[x++]=c[m++]}return new dt(p,h,v)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new ut,t=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=n(l,t);e.setAttribute(o,c)}const i=this.morphAttributes;for(const o in i){const l=[],c=i[o];for(let h=0,v=c.length;h<v;h++){const p=c[h],m=n(p,t);l.push(m)}e.morphAttributes[o]=l}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const c=s[o];e.addGroup(c.start,c.count,c.materialIndex)}return e},toJSON:function(){const n={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),Object.keys(this.userData).length>0&&(n.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(n[c]=l[c]);return n}n.data={attributes:{}};const e=this.index;e!==null&&(n.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const t=this.attributes;for(const l in t){const c=t[l];n.data.attributes[l]=c.toJSON(n.data)}const r={};let i=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let v=0,p=c.length;v<p;v++){const m=c[v];h.push(m.toJSON(n.data))}h.length>0&&(r[l]=h,i=!0)}i&&(n.data.morphAttributes=r,n.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(n.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(n.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),n},clone:function(){return new ut().copy(this)},copy:function(n){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=n.name;const t=n.index;t!==null&&this.setIndex(t.clone(e));const r=n.attributes;for(const c in r){const h=r[c];this.setAttribute(c,h.clone(e))}const i=n.morphAttributes;for(const c in i){const h=[],v=i[c];for(let p=0,m=v.length;p<m;p++)h.push(v[p].clone(e));this.morphAttributes[c]=h}this.morphTargetsRelative=n.morphTargetsRelative;const s=n.groups;for(let c=0,h=s.length;c<h;c++){const v=s[c];this.addGroup(v.start,v.count,v.materialIndex)}const o=n.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=n.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=n.drawRange.start,this.drawRange.count=n.drawRange.count,this.userData=n.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const db=new lt,Xf=new sl,Ww=new fo,al=new U,ll=new U,ul=new U,Vw=new U,Jw=new U,jw=new U,Hv=new U,Uv=new U,kv=new U,zv=new Pe,Wv=new Pe,Vv=new Pe,Xw=new U,Jv=new U;function pn(n=new ut,e=new _r){mt.call(this),this.type="Mesh",this.geometry=n,this.material=e,this.updateMorphTargets()}pn.prototype=Object.assign(Object.create(mt.prototype),{constructor:pn,isMesh:!0,copy:function(n){return mt.prototype.copy.call(this,n),n.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=n.morphTargetInfluences.slice()),n.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},n.morphTargetDictionary)),this.material=n.material,this.geometry=n.geometry,this},updateMorphTargets:function(){const n=this.geometry;if(n.isBufferGeometry){const e=n.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{const e=n.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(n,e){const t=this.geometry,r=this.material,i=this.matrixWorld;if(r===void 0||(t.boundingSphere===null&&t.computeBoundingSphere(),Ww.copy(t.boundingSphere),Ww.applyMatrix4(i),n.ray.intersectsSphere(Ww)===!1)||(db.copy(i).invert(),Xf.copy(n.ray).applyMatrix4(db),t.boundingBox!==null&&Xf.intersectsBox(t.boundingBox)===!1))return;let s;if(t.isBufferGeometry){const o=t.index,l=t.attributes.position,c=t.morphAttributes.position,h=t.morphTargetsRelative,v=t.attributes.uv,p=t.attributes.uv2,m=t.groups,x=t.drawRange;if(o!==null)if(Array.isArray(r))for(let A=0,E=m.length;A<E;A++){const M=m[A],w=r[M.materialIndex],_=Math.max(M.start,x.start),C=Math.min(M.start+M.count,x.start+x.count);for(let b=_,I=C;b<I;b+=3){const B=o.getX(b),H=o.getX(b+1),D=o.getX(b+2);s=jv(this,w,n,Xf,l,c,h,v,p,B,H,D),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=M.materialIndex,e.push(s))}}else{const A=Math.max(0,x.start),E=Math.min(o.count,x.start+x.count);for(let M=A,w=E;M<w;M+=3){const _=o.getX(M),C=o.getX(M+1),b=o.getX(M+2);s=jv(this,r,n,Xf,l,c,h,v,p,_,C,b),s&&(s.faceIndex=Math.floor(M/3),e.push(s))}}else if(l!==void 0)if(Array.isArray(r))for(let A=0,E=m.length;A<E;A++){const M=m[A],w=r[M.materialIndex],_=Math.max(M.start,x.start),C=Math.min(M.start+M.count,x.start+x.count);for(let b=_,I=C;b<I;b+=3){const B=b,H=b+1,D=b+2;s=jv(this,w,n,Xf,l,c,h,v,p,B,H,D),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=M.materialIndex,e.push(s))}}else{const A=Math.max(0,x.start),E=Math.min(l.count,x.start+x.count);for(let M=A,w=E;M<w;M+=3){const _=M,C=M+1,b=M+2;s=jv(this,r,n,Xf,l,c,h,v,p,_,C,b),s&&(s.faceIndex=Math.floor(M/3),e.push(s))}}}else t.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});function _O(n,e,t,r,i,s,o,l){let c;if(e.side===ur?c=r.intersectTriangle(o,s,i,!0,l):c=r.intersectTriangle(i,s,o,e.side!==Au,l),c===null)return null;Jv.copy(l),Jv.applyMatrix4(n.matrixWorld);const h=t.ray.origin.distanceTo(Jv);return h<t.near||h>t.far?null:{distance:h,point:Jv.clone(),object:n}}function jv(n,e,t,r,i,s,o,l,c,h,v,p){al.fromBufferAttribute(i,h),ll.fromBufferAttribute(i,v),ul.fromBufferAttribute(i,p);const m=n.morphTargetInfluences;if(e.morphTargets&&s&&m){Hv.set(0,0,0),Uv.set(0,0,0),kv.set(0,0,0);for(let A=0,E=s.length;A<E;A++){const M=m[A],w=s[A];M!==0&&(Vw.fromBufferAttribute(w,h),Jw.fromBufferAttribute(w,v),jw.fromBufferAttribute(w,p),o?(Hv.addScaledVector(Vw,M),Uv.addScaledVector(Jw,M),kv.addScaledVector(jw,M)):(Hv.addScaledVector(Vw.sub(al),M),Uv.addScaledVector(Jw.sub(ll),M),kv.addScaledVector(jw.sub(ul),M)))}al.add(Hv),ll.add(Uv),ul.add(kv)}n.isSkinnedMesh&&e.skinning&&(n.boneTransform(h,al),n.boneTransform(v,ll),n.boneTransform(p,ul));const x=_O(n,e,t,r,al,ll,ul,Xw);if(x){l&&(zv.fromBufferAttribute(l,h),Wv.fromBufferAttribute(l,v),Vv.fromBufferAttribute(l,p),x.uv=rr.getUV(Xw,al,ll,ul,zv,Wv,Vv,new Pe)),c&&(zv.fromBufferAttribute(c,h),Wv.fromBufferAttribute(c,v),Vv.fromBufferAttribute(c,p),x.uv2=rr.getUV(Xw,al,ll,ul,zv,Wv,Vv,new Pe));const A={a:h,b:v,c:p,normal:new U,materialIndex:0};rr.getNormal(al,ll,ul,A.normal),x.face=A}return x}class Nu extends ut{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super();this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const l=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const c=[],h=[],v=[],p=[];let m=0,x=0;A("z","y","x",-1,-1,r,t,e,o,s,0),A("z","y","x",1,-1,r,t,-e,o,s,1),A("x","z","y",1,1,e,r,t,i,o,2),A("x","z","y",1,-1,e,r,-t,i,o,3),A("x","y","z",1,-1,e,t,r,i,s,4),A("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(c),this.setAttribute("position",new st(h,3)),this.setAttribute("normal",new st(v,3)),this.setAttribute("uv",new st(p,2));function A(E,M,w,_,C,b,I,B,H,D,O){const ee=b/H,q=I/D,fe=b/2,ne=I/2,te=B/2,$=H+1,le=D+1;let _e=0,Be=0;const Ce=new U;for(let He=0;He<le;He++){const ue=He*q-ne;for(let Oe=0;Oe<$;Oe++){const ze=Oe*ee-fe;Ce[E]=ze*_,Ce[M]=ue*C,Ce[w]=te,h.push(Ce.x,Ce.y,Ce.z),Ce[E]=0,Ce[M]=0,Ce[w]=B>0?1:-1,v.push(Ce.x,Ce.y,Ce.z),p.push(Oe/H),p.push(1-He/D),_e+=1}}for(let He=0;He<D;He++)for(let ue=0;ue<H;ue++){const Oe=m+ue+$*He,ze=m+ue+$*(He+1),Ee=m+(ue+1)+$*(He+1),F=m+(ue+1)+$*He;c.push(Oe,ze,F),c.push(ze,Ee,F),Be+=6}l.addGroup(x,Be,O),x+=Be,m+=_e}}}function Kf(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function oi(n){const e={};for(let t=0;t<n.length;t++){const r=Kf(n[t]);for(const i in r)e[i]=r[i]}return e}const hb={clone:Kf,merge:oi};var wO=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,AO=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function Hi(n){fn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=wO,this.fragmentShader=AO,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,n!==void 0&&(n.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(n))}Hi.prototype=Object.create(fn.prototype);Hi.prototype.constructor=Hi;Hi.prototype.isShaderMaterial=!0;Hi.prototype.copy=function(n){return fn.prototype.copy.call(this,n),this.fragmentShader=n.fragmentShader,this.vertexShader=n.vertexShader,this.uniforms=Kf(n.uniforms),this.defines=Object.assign({},n.defines),this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.lights=n.lights,this.clipping=n.clipping,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this.extensions=Object.assign({},n.extensions),this.glslVersion=n.glslVersion,this};Hi.prototype.toJSON=function(n){const e=fn.prototype.toJSON.call(this,n);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?e.uniforms[r]={type:"t",value:s.toJSON(n).uuid}:s&&s.isColor?e.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[r]={type:"m4",value:s.toArray()}:e.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const t={};for(const r in this.extensions)this.extensions[r]===!0&&(t[r]=!0);return Object.keys(t).length>0&&(e.extensions=t),e};function po(){mt.call(this),this.type="Camera",this.matrixWorldInverse=new lt,this.projectionMatrix=new lt,this.projectionMatrixInverse=new lt}po.prototype=Object.assign(Object.create(mt.prototype),{constructor:po,isCamera:!0,copy:function(n,e){return mt.prototype.copy.call(this,n,e),this.matrixWorldInverse.copy(n.matrixWorldInverse),this.projectionMatrix.copy(n.projectionMatrix),this.projectionMatrixInverse.copy(n.projectionMatrixInverse),this},getWorldDirection:function(n){n===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),n=new U),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return n.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(n){mt.prototype.updateMatrixWorld.call(this,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(n,e){mt.prototype.updateWorldMatrix.call(this,n,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return new this.constructor().copy(this)}});function mn(n=50,e=1,t=.1,r=2e3){po.call(this),this.type="PerspectiveCamera",this.fov=n,this.zoom=1,this.near=t,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}mn.prototype=Object.assign(Object.create(po.prototype),{constructor:mn,isPerspectiveCamera:!0,copy:function(n,e){return po.prototype.copy.call(this,n,e),this.fov=n.fov,this.zoom=n.zoom,this.near=n.near,this.far=n.far,this.focus=n.focus,this.aspect=n.aspect,this.view=n.view===null?null:Object.assign({},n.view),this.filmGauge=n.filmGauge,this.filmOffset=n.filmOffset,this},setFocalLength:function(n){const e=.5*this.getFilmHeight()/n;this.fov=vt.RAD2DEG*2*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const n=Math.tan(vt.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/n},getEffectiveFOV:function(){return vt.RAD2DEG*2*Math.atan(Math.tan(vt.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(n,e,t,r,i,s){this.aspect=n/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=e,this.view.offsetX=t,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const n=this.near;let e=n*Math.tan(vt.DEG2RAD*.5*this.fov)/this.zoom,t=2*e,r=this.aspect*t,i=-.5*r;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;i+=s.offsetX*r/l,e-=s.offsetY*t/c,r*=s.width/l,t*=s.height/c}const o=this.filmOffset;o!==0&&(i+=n*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-t,n,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(n){const e=mt.prototype.toJSON.call(this,n);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});const Yf=90,qf=1;class Xv extends mt{constructor(e,t,r){super();if(this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const i=new mn(Yf,qf,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new U(1,0,0)),this.add(i);const s=new mn(Yf,qf,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new U(-1,0,0)),this.add(s);const o=new mn(Yf,qf,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new U(0,1,0)),this.add(o);const l=new mn(Yf,qf,e,t);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(new U(0,-1,0)),this.add(l);const c=new mn(Yf,qf,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new U(0,0,1)),this.add(c);const h=new mn(Yf,qf,e,t);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new U(0,0,-1)),this.add(h)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,l,c,h]=this.children,v=e.xr.enabled,p=e.getRenderTarget();e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,l),e.setRenderTarget(r,4),e.render(t,c),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(t,h),e.setRenderTarget(p),e.xr.enabled=v}}class Qf extends nr{constructor(e,t,r,i,s,o,l,c,h,v){e=e!==void 0?e:[],t=t!==void 0?t:op,l=l!==void 0?l:vs;super(e,t,r,i,s,o,l,c,h,v);this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Qf.prototype.isCubeTexture=!0;class Kv extends aa{constructor(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r);super(e,e,t);t=t||{},this.texture=new Qf(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:An,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=qi,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Nu(5,5,5),s=new Hi({name:"CubemapFromEquirect",uniforms:Kf(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ur,blending:ia});s.uniforms.tEquirect.value=t;const o=new pn(i,s),l=t.minFilter;return t.minFilter===lo&&(t.minFilter=An),new Xv(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}Kv.prototype.isWebGLCubeRenderTarget=!0;class Zf extends nr{constructor(e,t,r,i,s,o,l,c,h,v,p,m){super(null,o,l,c,h,v,i,s,p,m);this.image={data:e||null,width:t||1,height:r||1},this.magFilter=h!==void 0?h:Un,this.minFilter=v!==void 0?v:Un,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Zf.prototype.isDataTexture=!0;const $f=new fo,Yv=new U;class Cp{constructor(e=new Gs,t=new Gs,r=new Gs,i=new Gs,s=new Gs,o=new Gs){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(r),l[3].copy(i),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],l=r[3],c=r[4],h=r[5],v=r[6],p=r[7],m=r[8],x=r[9],A=r[10],E=r[11],M=r[12],w=r[13],_=r[14],C=r[15];return t[0].setComponents(l-i,p-c,E-m,C-M).normalize(),t[1].setComponents(l+i,p+c,E+m,C+M).normalize(),t[2].setComponents(l+s,p+h,E+x,C+w).normalize(),t[3].setComponents(l-s,p-h,E-x,C-w).normalize(),t[4].setComponents(l-o,p-v,E-A,C-_).normalize(),t[5].setComponents(l+o,p+v,E+A,C+_).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),$f.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere($f)}intersectsSprite(e){return $f.center.set(0,0,0),$f.radius=.7071067811865476,$f.applyMatrix4(e.matrixWorld),this.intersectsSphere($f)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Yv.x=i.normal.x>0?e.max.x:e.min.x,Yv.y=i.normal.y>0?e.max.y:e.min.y,Yv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Yv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function pb(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function MO(n,e){const t=e.isWebGL2,r=new WeakMap;function i(h,v){const p=h.array,m=h.usage,x=n.createBuffer();n.bindBuffer(v,x),n.bufferData(v,p,m),h.onUploadCallback();let A=5126;return p instanceof Float32Array?A=5126:p instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):p instanceof Uint16Array?h.isFloat16BufferAttribute?t?A=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):A=5123:p instanceof Int16Array?A=5122:p instanceof Uint32Array?A=5125:p instanceof Int32Array?A=5124:p instanceof Int8Array?A=5120:p instanceof Uint8Array&&(A=5121),{buffer:x,type:A,bytesPerElement:p.BYTES_PER_ELEMENT,version:h.version}}function s(h,v,p){const m=v.array,x=v.updateRange;n.bindBuffer(p,h),x.count===-1?n.bufferSubData(p,0,m):(t?n.bufferSubData(p,x.offset*m.BYTES_PER_ELEMENT,m,x.offset,x.count):n.bufferSubData(p,x.offset*m.BYTES_PER_ELEMENT,m.subarray(x.offset,x.offset+x.count)),x.count=-1)}function o(h){return h.isInterleavedBufferAttribute&&(h=h.data),r.get(h)}function l(h){h.isInterleavedBufferAttribute&&(h=h.data);const v=r.get(h);v&&(n.deleteBuffer(v.buffer),r.delete(h))}function c(h,v){if(h.isGLBufferAttribute){const m=r.get(h);(!m||m.version<h.version)&&r.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const p=r.get(h);p===void 0?r.set(h,i(h,v)):p.version<h.version&&(s(p.buffer,h,v),p.version=h.version)}return{get:o,remove:l,update:c}}class bp extends ut{constructor(e=1,t=1,r=1,i=1){super();this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,l=Math.floor(r),c=Math.floor(i),h=l+1,v=c+1,p=e/l,m=t/c,x=[],A=[],E=[],M=[];for(let w=0;w<v;w++){const _=w*m-o;for(let C=0;C<h;C++){const b=C*p-s;A.push(b,-_,0),E.push(0,0,1),M.push(C/l),M.push(1-w/c)}}for(let w=0;w<c;w++)for(let _=0;_<l;_++){const C=_+h*w,b=_+h*(w+1),I=_+1+h*(w+1),B=_+1+h*w;x.push(C,b,B),x.push(b,I,B)}this.setIndex(x),this.setAttribute("position",new st(A,3)),this.setAttribute("normal",new st(E,3)),this.setAttribute("uv",new st(M,2))}}var EO=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,SO=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,TO=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,CO=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,bO=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,LO="vec3 transformed = vec3( position );",BO=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,RO=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,PO=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,IO=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,FO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,DO=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,OO=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,NO=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,GO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,HO=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,UO=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,kO=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,zO=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,WO=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,VO=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,JO=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,jO=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,XO=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,KO="gl_FragColor = linearToOutputTexel( gl_FragColor );",YO=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,qO=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,QO=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ZO=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$O=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,eN=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,tN=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,nN=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,rN=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,iN=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,sN=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,oN=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,aN=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lN=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,uN=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,cN=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,fN=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,dN=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,hN=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,pN=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,mN=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,gN=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,vN=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,yN=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,xN=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,_N=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,wN=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,AN=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,MN=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,EN=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,SN=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,TN=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,CN=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bN=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,LN=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,BN=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,RN=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,PN=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,IN=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,FN=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,DN=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,ON=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,NN=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,GN=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,HN=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,UN=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,kN=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,zN=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,WN=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,VN=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,JN=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,jN=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,XN=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,KN=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,YN=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,qN=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,QN=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,ZN=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,$N=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,eG=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,tG=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,nG=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,rG=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,iG=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,sG=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,oG=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,aG=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,lG=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,uG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,cG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,fG=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,dG=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,hG=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,pG=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,mG=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,gG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,vG=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,yG=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,xG=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,_G=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,wG=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,AG=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,MG=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,EG=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,SG=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TG=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,CG=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bG=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LG=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BG=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,RG=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PG=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IG=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FG=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DG=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OG=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,NG=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,GG=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,HG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,UG=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,kG=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,zG=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,VG=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const Gt={alphamap_fragment:EO,alphamap_pars_fragment:SO,alphatest_fragment:TO,aomap_fragment:CO,aomap_pars_fragment:bO,begin_vertex:LO,beginnormal_vertex:BO,bsdfs:RO,bumpmap_pars_fragment:PO,clipping_planes_fragment:IO,clipping_planes_pars_fragment:FO,clipping_planes_pars_vertex:DO,clipping_planes_vertex:OO,color_fragment:NO,color_pars_fragment:GO,color_pars_vertex:HO,color_vertex:UO,common:kO,cube_uv_reflection_fragment:zO,defaultnormal_vertex:WO,displacementmap_pars_vertex:VO,displacementmap_vertex:JO,emissivemap_fragment:jO,emissivemap_pars_fragment:XO,encodings_fragment:KO,encodings_pars_fragment:YO,envmap_fragment:qO,envmap_common_pars_fragment:QO,envmap_pars_fragment:ZO,envmap_pars_vertex:$O,envmap_physical_pars_fragment:cN,envmap_vertex:eN,fog_vertex:tN,fog_pars_vertex:nN,fog_fragment:rN,fog_pars_fragment:iN,gradientmap_pars_fragment:sN,lightmap_fragment:oN,lightmap_pars_fragment:aN,lights_lambert_vertex:lN,lights_pars_begin:uN,lights_toon_fragment:fN,lights_toon_pars_fragment:dN,lights_phong_fragment:hN,lights_phong_pars_fragment:pN,lights_physical_fragment:mN,lights_physical_pars_fragment:gN,lights_fragment_begin:vN,lights_fragment_maps:yN,lights_fragment_end:xN,logdepthbuf_fragment:_N,logdepthbuf_pars_fragment:wN,logdepthbuf_pars_vertex:AN,logdepthbuf_vertex:MN,map_fragment:EN,map_pars_fragment:SN,map_particle_fragment:TN,map_particle_pars_fragment:CN,metalnessmap_fragment:bN,metalnessmap_pars_fragment:LN,morphnormal_vertex:BN,morphtarget_pars_vertex:RN,morphtarget_vertex:PN,normal_fragment_begin:IN,normal_fragment_maps:FN,normalmap_pars_fragment:DN,clearcoat_normal_fragment_begin:ON,clearcoat_normal_fragment_maps:NN,clearcoat_pars_fragment:GN,packing:HN,premultiplied_alpha_fragment:UN,project_vertex:kN,dithering_fragment:zN,dithering_pars_fragment:WN,roughnessmap_fragment:VN,roughnessmap_pars_fragment:JN,shadowmap_pars_fragment:jN,shadowmap_pars_vertex:XN,shadowmap_vertex:KN,shadowmask_pars_fragment:YN,skinbase_vertex:qN,skinning_pars_vertex:QN,skinning_vertex:ZN,skinnormal_vertex:$N,specularmap_fragment:eG,specularmap_pars_fragment:tG,tonemapping_fragment:nG,tonemapping_pars_fragment:rG,transmissionmap_fragment:iG,transmissionmap_pars_fragment:sG,uv_pars_fragment:oG,uv_pars_vertex:aG,uv_vertex:lG,uv2_pars_fragment:uG,uv2_pars_vertex:cG,uv2_vertex:fG,worldpos_vertex:dG,background_frag:hG,background_vert:pG,cube_frag:mG,cube_vert:gG,depth_frag:vG,depth_vert:yG,distanceRGBA_frag:xG,distanceRGBA_vert:_G,equirect_frag:wG,equirect_vert:AG,linedashed_frag:MG,linedashed_vert:EG,meshbasic_frag:SG,meshbasic_vert:TG,meshlambert_frag:CG,meshlambert_vert:bG,meshmatcap_frag:LG,meshmatcap_vert:BG,meshtoon_frag:RG,meshtoon_vert:PG,meshphong_frag:IG,meshphong_vert:FG,meshphysical_frag:DG,meshphysical_vert:OG,normal_frag:NG,normal_vert:GG,points_frag:HG,points_vert:UG,shadow_frag:kG,shadow_vert:zG,sprite_frag:WG,sprite_vert:VG},qe={common:{diffuse:{value:new je(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new xr},uv2Transform:{value:new xr},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Pe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new je(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new je(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new xr}},sprite:{diffuse:{value:new je(15658734)},opacity:{value:1},center:{value:new Pe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new xr}}},ks={basic:{uniforms:oi([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.fog]),vertexShader:Gt.meshbasic_vert,fragmentShader:Gt.meshbasic_frag},lambert:{uniforms:oi([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.fog,qe.lights,{emissive:{value:new je(0)}}]),vertexShader:Gt.meshlambert_vert,fragmentShader:Gt.meshlambert_frag},phong:{uniforms:oi([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,qe.lights,{emissive:{value:new je(0)},specular:{value:new je(1118481)},shininess:{value:30}}]),vertexShader:Gt.meshphong_vert,fragmentShader:Gt.meshphong_frag},standard:{uniforms:oi([qe.common,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.roughnessmap,qe.metalnessmap,qe.fog,qe.lights,{emissive:{value:new je(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Gt.meshphysical_vert,fragmentShader:Gt.meshphysical_frag},toon:{uniforms:oi([qe.common,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.gradientmap,qe.fog,qe.lights,{emissive:{value:new je(0)}}]),vertexShader:Gt.meshtoon_vert,fragmentShader:Gt.meshtoon_frag},matcap:{uniforms:oi([qe.common,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,{matcap:{value:null}}]),vertexShader:Gt.meshmatcap_vert,fragmentShader:Gt.meshmatcap_frag},points:{uniforms:oi([qe.points,qe.fog]),vertexShader:Gt.points_vert,fragmentShader:Gt.points_frag},dashed:{uniforms:oi([qe.common,qe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Gt.linedashed_vert,fragmentShader:Gt.linedashed_frag},depth:{uniforms:oi([qe.common,qe.displacementmap]),vertexShader:Gt.depth_vert,fragmentShader:Gt.depth_frag},normal:{uniforms:oi([qe.common,qe.bumpmap,qe.normalmap,qe.displacementmap,{opacity:{value:1}}]),vertexShader:Gt.normal_vert,fragmentShader:Gt.normal_frag},sprite:{uniforms:oi([qe.sprite,qe.fog]),vertexShader:Gt.sprite_vert,fragmentShader:Gt.sprite_frag},background:{uniforms:{uvTransform:{value:new xr},t2D:{value:null}},vertexShader:Gt.background_vert,fragmentShader:Gt.background_frag},cube:{uniforms:oi([qe.envmap,{opacity:{value:1}}]),vertexShader:Gt.cube_vert,fragmentShader:Gt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Gt.equirect_vert,fragmentShader:Gt.equirect_frag},distanceRGBA:{uniforms:oi([qe.common,qe.displacementmap,{referencePosition:{value:new U},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Gt.distanceRGBA_vert,fragmentShader:Gt.distanceRGBA_frag},shadow:{uniforms:oi([qe.lights,qe.fog,{color:{value:new je(0)},opacity:{value:1}}]),vertexShader:Gt.shadow_vert,fragmentShader:Gt.shadow_frag}};ks.physical={uniforms:oi([ks.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Pe(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new je(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Gt.meshphysical_vert,fragmentShader:Gt.meshphysical_frag};function JG(n,e,t,r,i){const s=new je(0);let o=0,l,c,h=null,v=0,p=null;function m(A,E,M,w){let _=E.isScene===!0?E.background:null;_&&_.isTexture&&(_=e.get(_));const C=n.xr,b=C.getSession&&C.getSession();b&&b.environmentBlendMode==="additive"&&(_=null),_===null?x(s,o):_&&_.isColor&&(x(_,1),w=!0),(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||_.mapping===Rf)?(c===void 0&&(c=new pn(new Nu(1,1,1),new Hi({name:"BackgroundCubeMaterial",uniforms:Kf(ks.cube.uniforms),vertexShader:ks.cube.vertexShader,fragmentShader:ks.cube.fragmentShader,side:ur,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(I,B,H){this.matrixWorld.copyPosition(H.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_._needsFlipEnvMap?-1:1,(h!==_||v!==_.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,h=_,v=_.version,p=n.toneMapping),A.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(l===void 0&&(l=new pn(new bp(2,2),new Hi({name:"BackgroundMaterial",uniforms:Kf(ks.background.uniforms),vertexShader:ks.background.vertexShader,fragmentShader:ks.background.fragmentShader,side:el,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=_,_.matrixAutoUpdate===!0&&_.updateMatrix(),l.material.uniforms.uvTransform.value.copy(_.matrix),(h!==_||v!==_.version||p!==n.toneMapping)&&(l.material.needsUpdate=!0,h=_,v=_.version,p=n.toneMapping),A.unshift(l,l.geometry,l.material,0,0,null))}function x(A,E){t.buffers.color.setClear(A.r,A.g,A.b,E,i)}return{getClearColor:function(){return s},setClearColor:function(A,E=1){s.set(A),o=E,x(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(A){o=A,x(s,o)},render:m}}function jG(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,l={},c=E(null);let h=c;function v(ne,te,$,le,_e){let Be=!1;if(o){const Ce=A(le,$,te);h!==Ce&&(h=Ce,m(h.object)),Be=M(le,_e),Be&&w(le,_e)}else{const Ce=te.wireframe===!0;(h.geometry!==le.id||h.program!==$.id||h.wireframe!==Ce)&&(h.geometry=le.id,h.program=$.id,h.wireframe=Ce,Be=!0)}ne.isInstancedMesh===!0&&(Be=!0),_e!==null&&t.update(_e,34963),Be&&(H(ne,te,$,le),_e!==null&&n.bindBuffer(34963,t.get(_e).buffer))}function p(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(ne){return r.isWebGL2?n.bindVertexArray(ne):s.bindVertexArrayOES(ne)}function x(ne){return r.isWebGL2?n.deleteVertexArray(ne):s.deleteVertexArrayOES(ne)}function A(ne,te,$){const le=$.wireframe===!0;let _e=l[ne.id];_e===void 0&&(_e={},l[ne.id]=_e);let Be=_e[te.id];Be===void 0&&(Be={},_e[te.id]=Be);let Ce=Be[le];return Ce===void 0&&(Ce=E(p()),Be[le]=Ce),Ce}function E(ne){const te=[],$=[],le=[];for(let _e=0;_e<i;_e++)te[_e]=0,$[_e]=0,le[_e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:te,enabledAttributes:$,attributeDivisors:le,object:ne,attributes:{},index:null}}function M(ne,te){const $=h.attributes,le=ne.attributes;let _e=0;for(const Be in le){const Ce=$[Be],He=le[Be];if(Ce===void 0||Ce.attribute!==He||Ce.data!==He.data)return!0;_e++}return h.attributesNum!==_e||h.index!==te}function w(ne,te){const $={},le=ne.attributes;let _e=0;for(const Be in le){const Ce=le[Be],He={};He.attribute=Ce,Ce.data&&(He.data=Ce.data),$[Be]=He,_e++}h.attributes=$,h.attributesNum=_e,h.index=te}function _(){const ne=h.newAttributes;for(let te=0,$=ne.length;te<$;te++)ne[te]=0}function C(ne){b(ne,0)}function b(ne,te){const $=h.newAttributes,le=h.enabledAttributes,_e=h.attributeDivisors;$[ne]=1,le[ne]===0&&(n.enableVertexAttribArray(ne),le[ne]=1),_e[ne]!==te&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ne,te),_e[ne]=te)}function I(){const ne=h.newAttributes,te=h.enabledAttributes;for(let $=0,le=te.length;$<le;$++)te[$]!==ne[$]&&(n.disableVertexAttribArray($),te[$]=0)}function B(ne,te,$,le,_e,Be){r.isWebGL2===!0&&($===5124||$===5125)?n.vertexAttribIPointer(ne,te,$,_e,Be):n.vertexAttribPointer(ne,te,$,le,_e,Be)}function H(ne,te,$,le){if(r.isWebGL2===!1&&(ne.isInstancedMesh||le.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const _e=le.attributes,Be=$.getAttributes(),Ce=te.defaultAttributeValues;for(const He in Be){const ue=Be[He];if(ue>=0){const Oe=_e[He];if(Oe!==void 0){const ze=Oe.normalized,Ee=Oe.itemSize,F=t.get(Oe);if(F===void 0)continue;const G=F.buffer,X=F.type,V=F.bytesPerElement;if(Oe.isInterleavedBufferAttribute){const K=Oe.data,Z=K.stride,se=Oe.offset;K&&K.isInstancedInterleavedBuffer?(b(ue,K.meshPerAttribute),le._maxInstanceCount===void 0&&(le._maxInstanceCount=K.meshPerAttribute*K.count)):C(ue),n.bindBuffer(34962,G),B(ue,Ee,X,ze,Z*V,se*V)}else Oe.isInstancedBufferAttribute?(b(ue,Oe.meshPerAttribute),le._maxInstanceCount===void 0&&(le._maxInstanceCount=Oe.meshPerAttribute*Oe.count)):C(ue),n.bindBuffer(34962,G),B(ue,Ee,X,ze,0,0)}else if(He==="instanceMatrix"){const ze=t.get(ne.instanceMatrix);if(ze===void 0)continue;const Ee=ze.buffer,F=ze.type;b(ue+0,1),b(ue+1,1),b(ue+2,1),b(ue+3,1),n.bindBuffer(34962,Ee),n.vertexAttribPointer(ue+0,4,F,!1,64,0),n.vertexAttribPointer(ue+1,4,F,!1,64,16),n.vertexAttribPointer(ue+2,4,F,!1,64,32),n.vertexAttribPointer(ue+3,4,F,!1,64,48)}else if(He==="instanceColor"){const ze=t.get(ne.instanceColor);if(ze===void 0)continue;const Ee=ze.buffer,F=ze.type;b(ue,1),n.bindBuffer(34962,Ee),n.vertexAttribPointer(ue,3,F,!1,12,0)}else if(Ce!==void 0){const ze=Ce[He];if(ze!==void 0)switch(ze.length){case 2:n.vertexAttrib2fv(ue,ze);break;case 3:n.vertexAttrib3fv(ue,ze);break;case 4:n.vertexAttrib4fv(ue,ze);break;default:n.vertexAttrib1fv(ue,ze)}}}}I()}function D(){q();for(const ne in l){const te=l[ne];for(const $ in te){const le=te[$];for(const _e in le)x(le[_e].object),delete le[_e];delete te[$]}delete l[ne]}}function O(ne){if(l[ne.id]===void 0)return;const te=l[ne.id];for(const $ in te){const le=te[$];for(const _e in le)x(le[_e].object),delete le[_e];delete te[$]}delete l[ne.id]}function ee(ne){for(const te in l){const $=l[te];if($[ne.id]===void 0)continue;const le=$[ne.id];for(const _e in le)x(le[_e].object),delete le[_e];delete $[ne.id]}}function q(){fe(),h!==c&&(h=c,m(h.object))}function fe(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:v,reset:q,resetDefaultState:fe,dispose:D,releaseStatesOfGeometry:O,releaseStatesOfProgram:ee,initAttributes:_,enableAttribute:C,disableUnusedAttributes:I}}function XG(n,e,t,r){const i=r.isWebGL2;let s;function o(h){s=h}function l(h,v){n.drawArrays(s,h,v),t.update(v,s,1)}function c(h,v,p){if(p===0)return;let m,x;if(i)m=n,x="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),x="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[x](s,h,v,p),t.update(v,s,p)}this.setMode=o,this.render=l,this.renderInstances=c}function KG(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(B){if(B==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";B="mediump"}return B==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext!="undefined"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&n instanceof WebGL2ComputeRenderingContext;let l=t.precision!==void 0?t.precision:"highp";const c=s(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);const h=t.logarithmicDepthBuffer===!0,v=n.getParameter(34930),p=n.getParameter(35660),m=n.getParameter(3379),x=n.getParameter(34076),A=n.getParameter(34921),E=n.getParameter(36347),M=n.getParameter(36348),w=n.getParameter(36349),_=p>0,C=o||e.has("OES_texture_float"),b=_&&C,I=o?n.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:i,getMaxPrecision:s,precision:l,logarithmicDepthBuffer:h,maxTextures:v,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:x,maxAttributes:A,maxVertexUniforms:E,maxVaryings:M,maxFragmentUniforms:w,vertexTextures:_,floatFragmentTextures:C,floatVertexTextures:b,maxSamples:I}}function YG(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Gs,l=new xr,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m,x){const A=p.length!==0||m||r!==0||i;return i=m,t=v(p,x,0),r=p.length,A},this.beginShadows=function(){s=!0,v(null)},this.endShadows=function(){s=!1,h()},this.setState=function(p,m,x){const A=p.clippingPlanes,E=p.clipIntersection,M=p.clipShadows,w=n.get(p);if(!i||A===null||A.length===0||s&&!M)s?v(null):h();else{const _=s?0:r,C=_*4;let b=w.clippingState||null;c.value=b,b=v(A,m,C,x);for(let I=0;I!==C;++I)b[I]=t[I];w.clippingState=b,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=_}};function h(){c.value!==t&&(c.value=t,c.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function v(p,m,x,A){const E=p!==null?p.length:0;let M=null;if(E!==0){if(M=c.value,A!==!0||M===null){const w=x+E*4,_=m.matrixWorldInverse;l.getNormalMatrix(_),(M===null||M.length<w)&&(M=new Float32Array(w));for(let C=0,b=x;C!==E;++C,b+=4)o.copy(p[C]).applyMatrix4(_,l),o.normal.toArray(M,b),M[b+3]=o.constant}c.value=M,c.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,M}}function qG(n){let e=new WeakMap;function t(o,l){return l===Ev?o.mapping=op:l===Sv&&(o.mapping=ap),o}function r(o){if(o&&o.isTexture){const l=o.mapping;if(l===Ev||l===Sv)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const h=n.getRenderTarget(),v=new Kv(c.height/2);return v.fromEquirectangularTexture(n,o),e.set(o,v),n.setRenderTarget(h),o.addEventListener("dispose",i),t(v.texture,o.mapping)}else return null}}return o}function i(o){const l=o.target;l.removeEventListener("dispose",i);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}function QG(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function ZG(n,e,t,r){const i={},s=new WeakMap;function o(p){const m=p.target;m.index!==null&&e.remove(m.index);for(const A in m.attributes)e.remove(m.attributes[A]);m.removeEventListener("dispose",o),delete i[m.id];const x=s.get(m);x&&(e.remove(x),s.delete(m)),r.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function l(p,m){return i[m.id]===!0||(m.addEventListener("dispose",o),i[m.id]=!0,t.memory.geometries++),m}function c(p){const m=p.attributes;for(const A in m)e.update(m[A],34962);const x=p.morphAttributes;for(const A in x){const E=x[A];for(let M=0,w=E.length;M<w;M++)e.update(E[M],34962)}}function h(p){const m=[],x=p.index,A=p.attributes.position;let E=0;if(x!==null){const _=x.array;E=x.version;for(let C=0,b=_.length;C<b;C+=3){const I=_[C+0],B=_[C+1],H=_[C+2];m.push(I,B,B,H,H,I)}}else{const _=A.array;E=A.version;for(let C=0,b=_.length/3-1;C<b;C+=3){const I=C+0,B=C+1,H=C+2;m.push(I,B,B,H,H,I)}}const M=new(fb(m)>65535?Ou:Du)(m,1);M.version=E;const w=s.get(p);w&&e.remove(w),s.set(p,M)}function v(p){const m=s.get(p);if(m){const x=p.index;x!==null&&m.version<x.version&&h(p)}else h(p);return s.get(p)}return{get:l,update:c,getWireframeAttribute:v}}function $G(n,e,t,r){const i=r.isWebGL2;let s;function o(m){s=m}let l,c;function h(m){l=m.type,c=m.bytesPerElement}function v(m,x){n.drawElements(s,x,l,m*c),t.update(x,s,1)}function p(m,x,A){if(A===0)return;let E,M;if(i)E=n,M="drawElementsInstanced";else if(E=e.get("ANGLE_instanced_arrays"),M="drawElementsInstancedANGLE",E===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}E[M](s,x,l,m*c,A),t.update(x,s,A)}this.setMode=o,this.setIndex=h,this.render=v,this.renderInstances=p}function eH(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,l){switch(t.calls++,o){case 4:t.triangles+=l*(s/3);break;case 1:t.lines+=l*(s/2);break;case 3:t.lines+=l*(s-1);break;case 2:t.lines+=l*s;break;case 0:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function tH(n,e){return n[0]-e[0]}function nH(n,e){return Math.abs(e[1])-Math.abs(n[1])}function rH(n){const e={},t=new Float32Array(8),r=[];for(let s=0;s<8;s++)r[s]=[s,0];function i(s,o,l,c){const h=s.morphTargetInfluences,v=h===void 0?0:h.length;let p=e[o.id];if(p===void 0){p=[];for(let M=0;M<v;M++)p[M]=[M,0];e[o.id]=p}for(let M=0;M<v;M++){const w=p[M];w[0]=M,w[1]=h[M]}p.sort(nH);for(let M=0;M<8;M++)M<v&&p[M][1]?(r[M][0]=p[M][0],r[M][1]=p[M][1]):(r[M][0]=Number.MAX_SAFE_INTEGER,r[M][1]=0);r.sort(tH);const m=l.morphTargets&&o.morphAttributes.position,x=l.morphNormals&&o.morphAttributes.normal;let A=0;for(let M=0;M<8;M++){const w=r[M],_=w[0],C=w[1];_!==Number.MAX_SAFE_INTEGER&&C?(m&&o.getAttribute("morphTarget"+M)!==m[_]&&o.setAttribute("morphTarget"+M,m[_]),x&&o.getAttribute("morphNormal"+M)!==x[_]&&o.setAttribute("morphNormal"+M,x[_]),t[M]=C,A+=C):(m&&o.hasAttribute("morphTarget"+M)===!0&&o.deleteAttribute("morphTarget"+M),x&&o.hasAttribute("morphNormal"+M)===!0&&o.deleteAttribute("morphNormal"+M),t[M]=0)}const E=o.morphTargetsRelative?1:1-A;c.getUniforms().setValue(n,"morphTargetBaseInfluence",E),c.getUniforms().setValue(n,"morphTargetInfluences",t)}return{update:i}}function iH(n,e,t,r){let i=new WeakMap;function s(c){const h=r.render.frame,v=c.geometry,p=e.get(c,v);return i.get(p)!==h&&(e.update(p),i.set(p,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),t.update(c.instanceMatrix,34962),c.instanceColor!==null&&t.update(c.instanceColor,34962)),p}function o(){i=new WeakMap}function l(c){const h=c.target;h.removeEventListener("dispose",l),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:s,dispose:o}}class Kw extends nr{constructor(e=null,t=1,r=1,i=1){super(null);this.image={data:e,width:t,height:r,depth:i},this.magFilter=Un,this.minFilter=Un,this.wrapR=zr,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}Kw.prototype.isDataTexture2DArray=!0;class Yw extends nr{constructor(e=null,t=1,r=1,i=1){super(null);this.image={data:e,width:t,height:r,depth:i},this.magFilter=Un,this.minFilter=Un,this.wrapR=zr,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}Yw.prototype.isDataTexture3D=!0;const mb=new nr,sH=new Kw,oH=new Yw,gb=new Qf,vb=[],yb=[],xb=new Float32Array(16),_b=new Float32Array(9),wb=new Float32Array(4);function ed(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=vb[i];if(s===void 0&&(s=new Float32Array(i),vb[i]=s),e!==0){r.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,n[o].toArray(s,l)}return s}function xi(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ai(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Ab(n,e){let t=yb[e];t===void 0&&(t=new Int32Array(e),yb[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function aH(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function lH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(xi(t,e))return;n.uniform2fv(this.addr,e),ai(t,e)}}function uH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(xi(t,e))return;n.uniform3fv(this.addr,e),ai(t,e)}}function cH(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(xi(t,e))return;n.uniform4fv(this.addr,e),ai(t,e)}}function fH(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(xi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ai(t,e)}else{if(xi(t,r))return;wb.set(r),n.uniformMatrix2fv(this.addr,!1,wb),ai(t,r)}}function dH(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(xi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ai(t,e)}else{if(xi(t,r))return;_b.set(r),n.uniformMatrix3fv(this.addr,!1,_b),ai(t,r)}}function hH(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(xi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ai(t,e)}else{if(xi(t,r))return;xb.set(r),n.uniformMatrix4fv(this.addr,!1,xb),ai(t,r)}}function pH(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function mH(n,e){const t=this.cache;xi(t,e)||(n.uniform2iv(this.addr,e),ai(t,e))}function gH(n,e){const t=this.cache;xi(t,e)||(n.uniform3iv(this.addr,e),ai(t,e))}function vH(n,e){const t=this.cache;xi(t,e)||(n.uniform4iv(this.addr,e),ai(t,e))}function yH(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function xH(n,e){const t=this.cache;xi(t,e)||(n.uniform2uiv(this.addr,e),ai(t,e))}function _H(n,e){const t=this.cache;xi(t,e)||(n.uniform3uiv(this.addr,e),ai(t,e))}function wH(n,e){const t=this.cache;xi(t,e)||(n.uniform4uiv(this.addr,e),ai(t,e))}function AH(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.safeSetTexture2D(e||mb,i)}function MH(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||oH,i)}function EH(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.safeSetTextureCube(e||gb,i)}function SH(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||sH,i)}function TH(n){switch(n){case 5126:return aH;case 35664:return lH;case 35665:return uH;case 35666:return cH;case 35674:return fH;case 35675:return dH;case 35676:return hH;case 5124:case 35670:return pH;case 35667:case 35671:return mH;case 35668:case 35672:return gH;case 35669:case 35673:return vH;case 5125:return yH;case 36294:return xH;case 36295:return _H;case 36296:return wH;case 35678:case 36198:case 36298:case 36306:case 35682:return AH;case 35679:case 36299:case 36307:return MH;case 35680:case 36300:case 36308:case 36293:return EH;case 36289:case 36303:case 36311:case 36292:return SH}}function CH(n,e){n.uniform1fv(this.addr,e)}function bH(n,e){const t=ed(e,this.size,2);n.uniform2fv(this.addr,t)}function LH(n,e){const t=ed(e,this.size,3);n.uniform3fv(this.addr,t)}function BH(n,e){const t=ed(e,this.size,4);n.uniform4fv(this.addr,t)}function RH(n,e){const t=ed(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function PH(n,e){const t=ed(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function IH(n,e){const t=ed(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function FH(n,e){n.uniform1iv(this.addr,e)}function DH(n,e){n.uniform2iv(this.addr,e)}function OH(n,e){n.uniform3iv(this.addr,e)}function NH(n,e){n.uniform4iv(this.addr,e)}function GH(n,e){n.uniform1uiv(this.addr,e)}function HH(n,e){n.uniform2uiv(this.addr,e)}function UH(n,e){n.uniform3uiv(this.addr,e)}function kH(n,e){n.uniform4uiv(this.addr,e)}function zH(n,e,t){const r=e.length,i=Ab(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.safeSetTexture2D(e[s]||mb,i[s])}function WH(n,e,t){const r=e.length,i=Ab(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.safeSetTextureCube(e[s]||gb,i[s])}function VH(n){switch(n){case 5126:return CH;case 35664:return bH;case 35665:return LH;case 35666:return BH;case 35674:return RH;case 35675:return PH;case 35676:return IH;case 5124:case 35670:return FH;case 35667:case 35671:return DH;case 35668:case 35672:return OH;case 35669:case 35673:return NH;case 5125:return GH;case 36294:return HH;case 36295:return UH;case 36296:return kH;case 35678:case 36198:case 36298:case 36306:case 35682:return zH;case 35680:case 36300:case 36308:case 36293:return WH}}function JH(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=TH(e.type)}function Mb(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=VH(e.type)}Mb.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),ai(e,n)};function Eb(n){this.id=n,this.seq=[],this.map={}}Eb.prototype.setValue=function(n,e,t){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const o=r[i];o.setValue(n,e[o.id],t)}};const qw=/(\w+)(\])?(\[|\.)?/g;function Sb(n,e){n.seq.push(e),n.map[e.id]=e}function jH(n,e,t){const r=n.name,i=r.length;for(qw.lastIndex=0;;){const s=qw.exec(r),o=qw.lastIndex;let l=s[1];const c=s[2]==="]",h=s[3];if(c&&(l=l|0),h===void 0||h==="["&&o+2===i){Sb(t,h===void 0?new JH(l,n,e):new Mb(l,n,e));break}else{let p=t.map[l];p===void 0&&(p=new Eb(l),Sb(t,p)),t=p}}}function cl(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let r=0;r<t;++r){const i=n.getActiveUniform(e,r),s=n.getUniformLocation(e,i.name);jH(i,s,this)}}cl.prototype.setValue=function(n,e,t,r){const i=this.map[e];i!==void 0&&i.setValue(n,t,r)};cl.prototype.setOptional=function(n,e,t){const r=e[t];r!==void 0&&this.setValue(n,t,r)};cl.upload=function(n,e,t,r){for(let i=0,s=e.length;i!==s;++i){const o=e[i],l=t[o.id];l.needsUpdate!==!1&&o.setValue(n,l.value,r)}};cl.seqWithValue=function(n,e){const t=[];for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.id in e&&t.push(s)}return t};function Tb(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let XH=0;function KH(n){const e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function Cb(n){switch(n){case Wr:return["Linear","( value )"];case ys:return["sRGB","( value )"];case pp:return["RGBE","( value )"];case ww:return["RGBM","( value, 7.0 )"];case Aw:return["RGBM","( value, 16.0 )"];case Mw:return["RGBD","( value, 256.0 )"];case bv:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case KC:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function bb(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=n.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+t+`
`+i+KH(s)}function Lp(n,e){const t=Cb(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function YH(n,e){const t=Cb(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function qH(n,e){let t;switch(e){case YT:t="Linear";break;case qT:t="Reinhard";break;case QT:t="OptimizedCineon";break;case aw:t="ACESFilmic";break;case ZT:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function QH(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bp).join(`
`)}function ZH(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function $H(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const o=n.getActiveAttrib(e,i).name;t[o]=n.getAttribLocation(e,o)}return t}function Bp(n){return n!==""}function Lb(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Bb(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const eU=/^[ \t]*#include +<([\w\d./]+)>/gm;function Qw(n){return n.replace(eU,tU)}function tU(n,e){const t=Gt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return Qw(t)}const nU=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,rU=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Rb(n){return n.replace(rU,Pb).replace(nU,iU)}function iU(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Pb(n,e,t,r)}function Pb(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Ib(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function sU(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Q_?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Z_?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Lf&&(e="SHADOWMAP_TYPE_VSM"),e}function oU(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case op:case ap:e="ENVMAP_TYPE_CUBE";break;case Rf:case lp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function aU(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ap:case lp:e="ENVMAP_MODE_REFRACTION";break}return e}function lU(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case sp:e="ENVMAP_BLENDING_MULTIPLY";break;case XT:e="ENVMAP_BLENDING_MIX";break;case KT:e="ENVMAP_BLENDING_ADD";break}return e}function uU(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const c=sU(t),h=oU(t),v=aU(t),p=lU(t),m=n.gammaFactor>0?n.gammaFactor:1,x=t.isWebGL2?"":QH(t),A=ZH(s),E=i.createProgram();let M,w,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=[A].filter(Bp).join(`
`),M.length>0&&(M+=`
`),w=[x,A].filter(Bp).join(`
`),w.length>0&&(w+=`
`)):(M=[Ib(t),"#define SHADER_NAME "+t.shaderName,A,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+v:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Bp).join(`
`),w=[x,Ib(t),"#define SHADER_NAME "+t.shaderName,A,t.alphaTest?"#define ALPHATEST "+t.alphaTest+(t.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+v:"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.sheen?"#define USE_SHEEN":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Eu?"#define TONE_MAPPING":"",t.toneMapping!==Eu?Gt.tonemapping_pars_fragment:"",t.toneMapping!==Eu?qH("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",Gt.encodings_pars_fragment,t.map?Lp("mapTexelToLinear",t.mapEncoding):"",t.matcap?Lp("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?Lp("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?Lp("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.lightMap?Lp("lightMapTexelToLinear",t.lightMapEncoding):"",YH("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Bp).join(`
`)),o=Qw(o),o=Lb(o,t),o=Bb(o,t),l=Qw(l),l=Lb(l,t),l=Bb(l,t),o=Rb(o),l=Rb(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,M=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,w=["#define varying in",t.glslVersion===Ew?"":"out highp vec4 pc_fragColor;",t.glslVersion===Ew?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const C=_+M+o,b=_+w+l,I=Tb(i,35633,C),B=Tb(i,35632,b);if(i.attachShader(E,I),i.attachShader(E,B),t.index0AttributeName!==void 0?i.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(E,0,"position"),i.linkProgram(E),n.debug.checkShaderErrors){const O=i.getProgramInfoLog(E).trim(),ee=i.getShaderInfoLog(I).trim(),q=i.getShaderInfoLog(B).trim();let fe=!0,ne=!0;if(i.getProgramParameter(E,35714)===!1){fe=!1;const te=bb(i,I,"vertex"),$=bb(i,B,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(E,35715),"gl.getProgramInfoLog",O,te,$)}else O!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",O):(ee===""||q==="")&&(ne=!1);ne&&(this.diagnostics={runnable:fe,programLog:O,vertexShader:{log:ee,prefix:M},fragmentShader:{log:q,prefix:w}})}i.deleteShader(I),i.deleteShader(B);let H;this.getUniforms=function(){return H===void 0&&(H=new cl(i,E)),H};let D;return this.getAttributes=function(){return D===void 0&&(D=$H(i,E)),D},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(E),this.program=void 0},this.name=t.shaderName,this.id=XH++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=I,this.fragmentShader=B,this}function cU(n,e,t,r,i,s){const o=[],l=r.isWebGL2,c=r.logarithmicDepthBuffer,h=r.floatVertexTextures,v=r.maxVertexUniforms,p=r.vertexTextures;let m=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},A=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function E(B){const D=B.skeleton.bones;if(h)return 1024;{const ee=Math.floor((v-20)/4),q=Math.min(ee,D.length);return q<D.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+D.length+" bones. This GPU supports "+q+"."),0):q}}function M(B){let H;return B&&B.isTexture?H=B.encoding:B&&B.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),H=B.texture.encoding):H=Wr,H}function w(B,H,D,O,ee){const q=O.fog,fe=B.isMeshStandardMaterial?O.environment:null,ne=e.get(B.envMap||fe),te=x[B.type],$=ee.isSkinnedMesh?E(ee):0;B.precision!==null&&(m=r.getMaxPrecision(B.precision),m!==B.precision&&console.warn("THREE.WebGLProgram.getParameters:",B.precision,"not supported, using",m,"instead."));let le,_e;if(te){const He=ks[te];le=He.vertexShader,_e=He.fragmentShader}else le=B.vertexShader,_e=B.fragmentShader;const Be=n.getRenderTarget();return{isWebGL2:l,shaderID:te,shaderName:B.type,vertexShader:le,fragmentShader:_e,defines:B.defines,isRawShaderMaterial:B.isRawShaderMaterial===!0,glslVersion:B.glslVersion,precision:m,instancing:ee.isInstancedMesh===!0,instancingColor:ee.isInstancedMesh===!0&&ee.instanceColor!==null,supportsVertexTextures:p,outputEncoding:Be!==null?M(Be.texture):n.outputEncoding,map:!!B.map,mapEncoding:M(B.map),matcap:!!B.matcap,matcapEncoding:M(B.matcap),envMap:!!ne,envMapMode:ne&&ne.mapping,envMapEncoding:M(ne),envMapCubeUV:!!ne&&(ne.mapping===Rf||ne.mapping===lp),lightMap:!!B.lightMap,lightMapEncoding:M(B.lightMap),aoMap:!!B.aoMap,emissiveMap:!!B.emissiveMap,emissiveMapEncoding:M(B.emissiveMap),bumpMap:!!B.bumpMap,normalMap:!!B.normalMap,objectSpaceNormalMap:B.normalMapType===QC,tangentSpaceNormalMap:B.normalMapType===oa,clearcoatMap:!!B.clearcoatMap,clearcoatRoughnessMap:!!B.clearcoatRoughnessMap,clearcoatNormalMap:!!B.clearcoatNormalMap,displacementMap:!!B.displacementMap,roughnessMap:!!B.roughnessMap,metalnessMap:!!B.metalnessMap,specularMap:!!B.specularMap,alphaMap:!!B.alphaMap,gradientMap:!!B.gradientMap,sheen:!!B.sheen,transmissionMap:!!B.transmissionMap,combine:B.combine,vertexTangents:B.normalMap&&B.vertexTangents,vertexColors:B.vertexColors,vertexAlphas:B.vertexColors===!0&&ee.geometry.attributes.color&&ee.geometry.attributes.color.itemSize===4,vertexUvs:!!B.map||!!B.bumpMap||!!B.normalMap||!!B.specularMap||!!B.alphaMap||!!B.emissiveMap||!!B.roughnessMap||!!B.metalnessMap||!!B.clearcoatMap||!!B.clearcoatRoughnessMap||!!B.clearcoatNormalMap||!!B.displacementMap||!!B.transmissionMap,uvsVertexOnly:!(!!B.map||!!B.bumpMap||!!B.normalMap||!!B.specularMap||!!B.alphaMap||!!B.emissiveMap||!!B.roughnessMap||!!B.metalnessMap||!!B.clearcoatNormalMap||!!B.transmissionMap)&&!!B.displacementMap,fog:!!q,useFog:B.fog,fogExp2:q&&q.isFogExp2,flatShading:!!B.flatShading,sizeAttenuation:B.sizeAttenuation,logarithmicDepthBuffer:c,skinning:B.skinning&&$>0,maxBones:$,useVertexTexture:h,morphTargets:B.morphTargets,morphNormals:B.morphNormals,numDirLights:H.directional.length,numPointLights:H.point.length,numSpotLights:H.spot.length,numRectAreaLights:H.rectArea.length,numHemiLights:H.hemi.length,numDirLightShadows:H.directionalShadowMap.length,numPointLightShadows:H.pointShadowMap.length,numSpotLightShadows:H.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:B.dithering,shadowMapEnabled:n.shadowMap.enabled&&D.length>0,shadowMapType:n.shadowMap.type,toneMapping:B.toneMapped?n.toneMapping:Eu,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:B.premultipliedAlpha,alphaTest:B.alphaTest,doubleSided:B.side===Au,flipSided:B.side===ur,depthPacking:B.depthPacking!==void 0?B.depthPacking:!1,index0AttributeName:B.index0AttributeName,extensionDerivatives:B.extensions&&B.extensions.derivatives,extensionFragDepth:B.extensions&&B.extensions.fragDepth,extensionDrawBuffers:B.extensions&&B.extensions.drawBuffers,extensionShaderTextureLOD:B.extensions&&B.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||t.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||t.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||t.has("EXT_shader_texture_lod"),customProgramCacheKey:B.customProgramCacheKey()}}function _(B){const H=[];if(B.shaderID?H.push(B.shaderID):(H.push(B.fragmentShader),H.push(B.vertexShader)),B.defines!==void 0)for(const D in B.defines)H.push(D),H.push(B.defines[D]);if(B.isRawShaderMaterial===!1){for(let D=0;D<A.length;D++)H.push(B[A[D]]);H.push(n.outputEncoding),H.push(n.gammaFactor)}return H.push(B.customProgramCacheKey),H.join()}function C(B){const H=x[B.type];let D;if(H){const O=ks[H];D=hb.clone(O.uniforms)}else D=B.uniforms;return D}function b(B,H){let D;for(let O=0,ee=o.length;O<ee;O++){const q=o[O];if(q.cacheKey===H){D=q,++D.usedTimes;break}}return D===void 0&&(D=new uU(n,H,B,i),o.push(D)),D}function I(B){if(--B.usedTimes==0){const H=o.indexOf(B);o[H]=o[o.length-1],o.pop(),B.destroy()}}return{getParameters:w,getProgramCacheKey:_,getUniforms:C,acquireProgram:b,releaseProgram:I,programs:o}}function fU(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,l){n.get(s)[o]=l}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function dU(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.program!==e.program?n.program.id-e.program.id:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function hU(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Fb(n){const e=[];let t=0;const r=[],i=[],s={id:-1};function o(){t=0,r.length=0,i.length=0}function l(m,x,A,E,M,w){let _=e[t];const C=n.get(A);return _===void 0?(_={id:m.id,object:m,geometry:x,material:A,program:C.program||s,groupOrder:E,renderOrder:m.renderOrder,z:M,group:w},e[t]=_):(_.id=m.id,_.object=m,_.geometry=x,_.material=A,_.program=C.program||s,_.groupOrder=E,_.renderOrder=m.renderOrder,_.z=M,_.group=w),t++,_}function c(m,x,A,E,M,w){const _=l(m,x,A,E,M,w);(A.transparent===!0?i:r).push(_)}function h(m,x,A,E,M,w){const _=l(m,x,A,E,M,w);(A.transparent===!0?i:r).unshift(_)}function v(m,x){r.length>1&&r.sort(m||dU),i.length>1&&i.sort(x||hU)}function p(){for(let m=t,x=e.length;m<x;m++){const A=e[m];if(A.id===null)break;A.id=null,A.object=null,A.geometry=null,A.material=null,A.program=null,A.group=null}}return{opaque:r,transparent:i,init:o,push:c,unshift:h,finish:p,sort:v}}function pU(n){let e=new WeakMap;function t(i,s){let o;return e.has(i)===!1?(o=new Fb(n),e.set(i,[o])):s>=e.get(i).length?(o=new Fb(n),e.get(i).push(o)):o=e.get(i)[s],o}function r(){e=new WeakMap}return{get:t,dispose:r}}function mU(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new U,color:new je};break;case"SpotLight":t={position:new U,direction:new U,color:new je,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new U,color:new je,distance:0,decay:0};break;case"HemisphereLight":t={direction:new U,skyColor:new je,groundColor:new je};break;case"RectAreaLight":t={color:new je,position:new U,halfWidth:new U,halfHeight:new U};break}return n[e.id]=t,t}}}function gU(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let vU=0;function yU(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function xU(n,e){const t=new mU,r=gU(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let v=0;v<9;v++)i.probe.push(new U);const s=new U,o=new lt,l=new lt;function c(v){let p=0,m=0,x=0;for(let H=0;H<9;H++)i.probe[H].set(0,0,0);let A=0,E=0,M=0,w=0,_=0,C=0,b=0,I=0;v.sort(yU);for(let H=0,D=v.length;H<D;H++){const O=v[H],ee=O.color,q=O.intensity,fe=O.distance,ne=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)p+=ee.r*q,m+=ee.g*q,x+=ee.b*q;else if(O.isLightProbe)for(let te=0;te<9;te++)i.probe[te].addScaledVector(O.sh.coefficients[te],q);else if(O.isDirectionalLight){const te=t.get(O);if(te.color.copy(O.color).multiplyScalar(O.intensity),O.castShadow){const $=O.shadow,le=r.get(O);le.shadowBias=$.bias,le.shadowNormalBias=$.normalBias,le.shadowRadius=$.radius,le.shadowMapSize=$.mapSize,i.directionalShadow[A]=le,i.directionalShadowMap[A]=ne,i.directionalShadowMatrix[A]=O.shadow.matrix,C++}i.directional[A]=te,A++}else if(O.isSpotLight){const te=t.get(O);if(te.position.setFromMatrixPosition(O.matrixWorld),te.color.copy(ee).multiplyScalar(q),te.distance=fe,te.coneCos=Math.cos(O.angle),te.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),te.decay=O.decay,O.castShadow){const $=O.shadow,le=r.get(O);le.shadowBias=$.bias,le.shadowNormalBias=$.normalBias,le.shadowRadius=$.radius,le.shadowMapSize=$.mapSize,i.spotShadow[M]=le,i.spotShadowMap[M]=ne,i.spotShadowMatrix[M]=O.shadow.matrix,I++}i.spot[M]=te,M++}else if(O.isRectAreaLight){const te=t.get(O);te.color.copy(ee).multiplyScalar(q),te.halfWidth.set(O.width*.5,0,0),te.halfHeight.set(0,O.height*.5,0),i.rectArea[w]=te,w++}else if(O.isPointLight){const te=t.get(O);if(te.color.copy(O.color).multiplyScalar(O.intensity),te.distance=O.distance,te.decay=O.decay,O.castShadow){const $=O.shadow,le=r.get(O);le.shadowBias=$.bias,le.shadowNormalBias=$.normalBias,le.shadowRadius=$.radius,le.shadowMapSize=$.mapSize,le.shadowCameraNear=$.camera.near,le.shadowCameraFar=$.camera.far,i.pointShadow[E]=le,i.pointShadowMap[E]=ne,i.pointShadowMatrix[E]=O.shadow.matrix,b++}i.point[E]=te,E++}else if(O.isHemisphereLight){const te=t.get(O);te.skyColor.copy(O.color).multiplyScalar(q),te.groundColor.copy(O.groundColor).multiplyScalar(q),i.hemi[_]=te,_++}}w>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=qe.LTC_FLOAT_1,i.rectAreaLTC2=qe.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=qe.LTC_HALF_1,i.rectAreaLTC2=qe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=x;const B=i.hash;(B.directionalLength!==A||B.pointLength!==E||B.spotLength!==M||B.rectAreaLength!==w||B.hemiLength!==_||B.numDirectionalShadows!==C||B.numPointShadows!==b||B.numSpotShadows!==I)&&(i.directional.length=A,i.spot.length=M,i.rectArea.length=w,i.point.length=E,i.hemi.length=_,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=b,i.pointShadowMap.length=b,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=b,i.spotShadowMatrix.length=I,B.directionalLength=A,B.pointLength=E,B.spotLength=M,B.rectAreaLength=w,B.hemiLength=_,B.numDirectionalShadows=C,B.numPointShadows=b,B.numSpotShadows=I,i.version=vU++)}function h(v,p){let m=0,x=0,A=0,E=0,M=0;const w=p.matrixWorldInverse;for(let _=0,C=v.length;_<C;_++){const b=v[_];if(b.isDirectionalLight){const I=i.directional[m];I.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(w),m++}else if(b.isSpotLight){const I=i.spot[A];I.position.setFromMatrixPosition(b.matrixWorld),I.position.applyMatrix4(w),I.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(w),A++}else if(b.isRectAreaLight){const I=i.rectArea[E];I.position.setFromMatrixPosition(b.matrixWorld),I.position.applyMatrix4(w),l.identity(),o.copy(b.matrixWorld),o.premultiply(w),l.extractRotation(o),I.halfWidth.set(b.width*.5,0,0),I.halfHeight.set(0,b.height*.5,0),I.halfWidth.applyMatrix4(l),I.halfHeight.applyMatrix4(l),E++}else if(b.isPointLight){const I=i.point[x];I.position.setFromMatrixPosition(b.matrixWorld),I.position.applyMatrix4(w),x++}else if(b.isHemisphereLight){const I=i.hemi[M];I.direction.setFromMatrixPosition(b.matrixWorld),I.direction.transformDirection(w),I.direction.normalize(),M++}}}return{setup:c,setupView:h,state:i}}function Db(n,e){const t=new xU(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(p){r.push(p)}function l(p){i.push(p)}function c(){t.setup(r)}function h(p){t.setupView(r,p)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:c,setupLightsView:h,pushLight:o,pushShadow:l}}function _U(n,e){let t=new WeakMap;function r(s,o=0){let l;return t.has(s)===!1?(l=new Db(n,e),t.set(s,[l])):o>=t.get(s).length?(l=new Db(n,e),t.get(s).push(l)):l=t.get(s)[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class qv extends fn{constructor(e){super();this.type="MeshDepthMaterial",this.depthPacking=YC,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}qv.prototype.isMeshDepthMaterial=!0;class Qv extends fn{constructor(e){super();this.type="MeshDistanceMaterial",this.referencePosition=new U,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Qv.prototype.isMeshDistanceMaterial=!0;var wU=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,AU=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function Ob(n,e,t){let r=new Cp;const i=new Pe,s=new Pe,o=new on,l=[],c=[],h={},v=t.maxTextureSize,p={0:ur,1:el,2:Au},m=new Hi({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Pe},radius:{value:4}},vertexShader:AU,fragmentShader:wU}),x=m.clone();x.defines.HORIZONTAL_PASS=1;const A=new ut;A.setAttribute("position",new dt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new pn(A,m),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Q_,this.render=function(B,H,D){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||B.length===0)return;const O=n.getRenderTarget(),ee=n.getActiveCubeFace(),q=n.getActiveMipmapLevel(),fe=n.state;fe.setBlending(ia),fe.buffers.color.setClear(1,1,1,1),fe.buffers.depth.setTest(!0),fe.setScissorTest(!1);for(let ne=0,te=B.length;ne<te;ne++){const $=B[ne],le=$.shadow;if(le===void 0){console.warn("THREE.WebGLShadowMap:",$,"has no shadow.");continue}if(le.autoUpdate===!1&&le.needsUpdate===!1)continue;i.copy(le.mapSize);const _e=le.getFrameExtents();if(i.multiply(_e),s.copy(le.mapSize),(i.x>v||i.y>v)&&(i.x>v&&(s.x=Math.floor(v/_e.x),i.x=s.x*_e.x,le.mapSize.x=s.x),i.y>v&&(s.y=Math.floor(v/_e.y),i.y=s.y*_e.y,le.mapSize.y=s.y)),le.map===null&&!le.isPointLightShadow&&this.type===Lf){const Ce={minFilter:An,magFilter:An,format:qi};le.map=new aa(i.x,i.y,Ce),le.map.texture.name=$.name+".shadowMap",le.mapPass=new aa(i.x,i.y,Ce),le.camera.updateProjectionMatrix()}if(le.map===null){const Ce={minFilter:Un,magFilter:Un,format:qi};le.map=new aa(i.x,i.y,Ce),le.map.texture.name=$.name+".shadowMap",le.camera.updateProjectionMatrix()}n.setRenderTarget(le.map),n.clear();const Be=le.getViewportCount();for(let Ce=0;Ce<Be;Ce++){const He=le.getViewport(Ce);o.set(s.x*He.x,s.y*He.y,s.x*He.z,s.y*He.w),fe.viewport(o),le.updateMatrices($,Ce),r=le.getFrustum(),I(H,D,le.camera,$,this.type)}!le.isPointLightShadow&&this.type===Lf&&w(le,D),le.needsUpdate=!1}M.needsUpdate=!1,n.setRenderTarget(O,ee,q)};function w(B,H){const D=e.update(E);m.uniforms.shadow_pass.value=B.map.texture,m.uniforms.resolution.value=B.mapSize,m.uniforms.radius.value=B.radius,n.setRenderTarget(B.mapPass),n.clear(),n.renderBufferDirect(H,null,D,m,E,null),x.uniforms.shadow_pass.value=B.mapPass.texture,x.uniforms.resolution.value=B.mapSize,x.uniforms.radius.value=B.radius,n.setRenderTarget(B.map),n.clear(),n.renderBufferDirect(H,null,D,x,E,null)}function _(B,H,D){const O=B<<0|H<<1|D<<2;let ee=l[O];return ee===void 0&&(ee=new qv({depthPacking:qC,morphTargets:B,skinning:H}),l[O]=ee),ee}function C(B,H,D){const O=B<<0|H<<1|D<<2;let ee=c[O];return ee===void 0&&(ee=new Qv({morphTargets:B,skinning:H}),c[O]=ee),ee}function b(B,H,D,O,ee,q,fe){let ne=null,te=_,$=B.customDepthMaterial;if(O.isPointLight===!0&&(te=C,$=B.customDistanceMaterial),$===void 0){let le=!1;D.morphTargets===!0&&(le=H.morphAttributes&&H.morphAttributes.position&&H.morphAttributes.position.length>0);let _e=!1;B.isSkinnedMesh===!0&&(D.skinning===!0?_e=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",B));const Be=B.isInstancedMesh===!0;ne=te(le,_e,Be)}else ne=$;if(n.localClippingEnabled&&D.clipShadows===!0&&D.clippingPlanes.length!==0){const le=ne.uuid,_e=D.uuid;let Be=h[le];Be===void 0&&(Be={},h[le]=Be);let Ce=Be[_e];Ce===void 0&&(Ce=ne.clone(),Be[_e]=Ce),ne=Ce}return ne.visible=D.visible,ne.wireframe=D.wireframe,fe===Lf?ne.side=D.shadowSide!==null?D.shadowSide:D.side:ne.side=D.shadowSide!==null?D.shadowSide:p[D.side],ne.clipShadows=D.clipShadows,ne.clippingPlanes=D.clippingPlanes,ne.clipIntersection=D.clipIntersection,ne.wireframeLinewidth=D.wireframeLinewidth,ne.linewidth=D.linewidth,O.isPointLight===!0&&ne.isMeshDistanceMaterial===!0&&(ne.referencePosition.setFromMatrixPosition(O.matrixWorld),ne.nearDistance=ee,ne.farDistance=q),ne}function I(B,H,D,O,ee){if(B.visible===!1)return;if(B.layers.test(H.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&ee===Lf)&&(!B.frustumCulled||r.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,B.matrixWorld);const ne=e.update(B),te=B.material;if(Array.isArray(te)){const $=ne.groups;for(let le=0,_e=$.length;le<_e;le++){const Be=$[le],Ce=te[Be.materialIndex];if(Ce&&Ce.visible){const He=b(B,ne,Ce,O,D.near,D.far,ee);n.renderBufferDirect(D,null,ne,He,B,Be)}}}else if(te.visible){const $=b(B,ne,te,O,D.near,D.far,ee);n.renderBufferDirect(D,null,ne,$,B,null)}}const fe=B.children;for(let ne=0,te=fe.length;ne<te;ne++)I(fe[ne],H,D,O,ee)}}function MU(n,e,t){const r=t.isWebGL2;function i(){let oe=!1;const Ve=new on;let ke=null;const Qe=new on(0,0,0,0);return{setMask:function(Ie){ke!==Ie&&!oe&&(n.colorMask(Ie,Ie,Ie,Ie),ke=Ie)},setLocked:function(Ie){oe=Ie},setClear:function(Ie,rt,It,Ht,Kn){Kn===!0&&(Ie*=Ht,rt*=Ht,It*=Ht),Ve.set(Ie,rt,It,Ht),Qe.equals(Ve)===!1&&(n.clearColor(Ie,rt,It,Ht),Qe.copy(Ve))},reset:function(){oe=!1,ke=null,Qe.set(-1,0,0,0)}}}function s(){let oe=!1,Ve=null,ke=null,Qe=null;return{setTest:function(Ie){Ie?Oe(2929):ze(2929)},setMask:function(Ie){Ve!==Ie&&!oe&&(n.depthMask(Ie),Ve=Ie)},setFunc:function(Ie){if(ke!==Ie){if(Ie)switch(Ie){case UT:n.depthFunc(512);break;case kT:n.depthFunc(519);break;case zT:n.depthFunc(513);break;case Av:n.depthFunc(515);break;case WT:n.depthFunc(514);break;case VT:n.depthFunc(518);break;case JT:n.depthFunc(516);break;case jT:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);ke=Ie}},setLocked:function(Ie){oe=Ie},setClear:function(Ie){Qe!==Ie&&(n.clearDepth(Ie),Qe=Ie)},reset:function(){oe=!1,Ve=null,ke=null,Qe=null}}}function o(){let oe=!1,Ve=null,ke=null,Qe=null,Ie=null,rt=null,It=null,Ht=null,Kn=null;return{setTest:function(he){oe||(he?Oe(2960):ze(2960))},setMask:function(he){Ve!==he&&!oe&&(n.stencilMask(he),Ve=he)},setFunc:function(he,Ue,at){(ke!==he||Qe!==Ue||Ie!==at)&&(n.stencilFunc(he,Ue,at),ke=he,Qe=Ue,Ie=at)},setOp:function(he,Ue,at){(rt!==he||It!==Ue||Ht!==at)&&(n.stencilOp(he,Ue,at),rt=he,It=Ue,Ht=at)},setLocked:function(he){oe=he},setClear:function(he){Kn!==he&&(n.clearStencil(he),Kn=he)},reset:function(){oe=!1,Ve=null,ke=null,Qe=null,Ie=null,rt=null,It=null,Ht=null,Kn=null}}}const l=new i,c=new s,h=new o;let v={},p=null,m={},x=null,A=!1,E=null,M=null,w=null,_=null,C=null,b=null,I=null,B=!1,H=null,D=null,O=null,ee=null,q=null;const fe=n.getParameter(35661);let ne=!1,te=0;const $=n.getParameter(7938);$.indexOf("WebGL")!==-1?(te=parseFloat(/^WebGL (\d)/.exec($)[1]),ne=te>=1):$.indexOf("OpenGL ES")!==-1&&(te=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),ne=te>=2);let le=null,_e={};const Be=new on(0,0,n.canvas.width,n.canvas.height),Ce=new on(0,0,n.canvas.width,n.canvas.height);function He(oe,Ve,ke){const Qe=new Uint8Array(4),Ie=n.createTexture();n.bindTexture(oe,Ie),n.texParameteri(oe,10241,9728),n.texParameteri(oe,10240,9728);for(let rt=0;rt<ke;rt++)n.texImage2D(Ve+rt,0,6408,1,1,0,6408,5121,Qe);return Ie}const ue={};ue[3553]=He(3553,3553,1),ue[34067]=He(34067,34069,6),l.setClear(0,0,0,1),c.setClear(1),h.setClear(0),Oe(2929),c.setFunc(Av),se(!1),j(q_),Oe(2884),K(ia);function Oe(oe){v[oe]!==!0&&(n.enable(oe),v[oe]=!0)}function ze(oe){v[oe]!==!1&&(n.disable(oe),v[oe]=!1)}function Ee(oe){oe!==p&&(n.bindFramebuffer(36160,oe),p=oe)}function F(oe,Ve){Ve===null&&p!==null&&(Ve=p),m[oe]!==Ve&&(n.bindFramebuffer(oe,Ve),m[oe]=Ve)}function G(oe){return x!==oe?(n.useProgram(oe),x=oe,!0):!1}const X={[Mu]:32774,[LT]:32778,[BT]:32779};if(r)X[rw]=32775,X[iw]=32776;else{const oe=e.get("EXT_blend_minmax");oe!==null&&(X[rw]=oe.MIN_EXT,X[iw]=oe.MAX_EXT)}const V={[RT]:0,[PT]:1,[IT]:768,[sw]:770,[HT]:776,[NT]:774,[DT]:772,[FT]:769,[ow]:771,[GT]:775,[OT]:773};function K(oe,Ve,ke,Qe,Ie,rt,It,Ht){if(oe===ia){A===!0&&(ze(3042),A=!1);return}if(A===!1&&(Oe(3042),A=!0),oe!==bT){if(oe!==E||Ht!==B){if((M!==Mu||C!==Mu)&&(n.blendEquation(32774),M=Mu,C=Mu),Ht)switch(oe){case Bf:n.blendFuncSeparate(1,771,1,771);break;case ew:n.blendFunc(1,1);break;case tw:n.blendFuncSeparate(0,0,769,771);break;case nw:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",oe);break}else switch(oe){case Bf:n.blendFuncSeparate(770,771,1,771);break;case ew:n.blendFunc(770,1);break;case tw:n.blendFunc(0,769);break;case nw:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",oe);break}w=null,_=null,b=null,I=null,E=oe,B=Ht}return}Ie=Ie||Ve,rt=rt||ke,It=It||Qe,(Ve!==M||Ie!==C)&&(n.blendEquationSeparate(X[Ve],X[Ie]),M=Ve,C=Ie),(ke!==w||Qe!==_||rt!==b||It!==I)&&(n.blendFuncSeparate(V[ke],V[Qe],V[rt],V[It]),w=ke,_=Qe,b=rt,I=It),E=oe,B=null}function Z(oe,Ve){oe.side===Au?ze(2884):Oe(2884);let ke=oe.side===ur;Ve&&(ke=!ke),se(ke),oe.blending===Bf&&oe.transparent===!1?K(ia):K(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha,oe.premultipliedAlpha),c.setFunc(oe.depthFunc),c.setTest(oe.depthTest),c.setMask(oe.depthWrite),l.setMask(oe.colorWrite);const Qe=oe.stencilWrite;h.setTest(Qe),Qe&&(h.setMask(oe.stencilWriteMask),h.setFunc(oe.stencilFunc,oe.stencilRef,oe.stencilFuncMask),h.setOp(oe.stencilFail,oe.stencilZFail,oe.stencilZPass)),ae(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits),oe.alphaToCoverage===!0?Oe(32926):ze(32926)}function se(oe){H!==oe&&(oe?n.frontFace(2304):n.frontFace(2305),H=oe)}function j(oe){oe!==TT?(Oe(2884),oe!==D&&(oe===q_?n.cullFace(1029):oe===CT?n.cullFace(1028):n.cullFace(1032))):ze(2884),D=oe}function re(oe){oe!==O&&(ne&&n.lineWidth(oe),O=oe)}function ae(oe,Ve,ke){oe?(Oe(32823),(ee!==Ve||q!==ke)&&(n.polygonOffset(Ve,ke),ee=Ve,q=ke)):ze(32823)}function ye(oe){oe?Oe(3089):ze(3089)}function ge(oe){oe===void 0&&(oe=33984+fe-1),le!==oe&&(n.activeTexture(oe),le=oe)}function z(oe,Ve){le===null&&ge();let ke=_e[le];ke===void 0&&(ke={type:void 0,texture:void 0},_e[le]=ke),(ke.type!==oe||ke.texture!==Ve)&&(n.bindTexture(oe,Ve||ue[oe]),ke.type=oe,ke.texture=Ve)}function W(){const oe=_e[le];oe!==void 0&&oe.type!==void 0&&(n.bindTexture(oe.type,null),oe.type=void 0,oe.texture=void 0)}function ve(){try{n.compressedTexImage2D.apply(n,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Ae(){try{n.texImage2D.apply(n,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Ne(){try{n.texImage3D.apply(n,arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function We(oe){Be.equals(oe)===!1&&(n.scissor(oe.x,oe.y,oe.z,oe.w),Be.copy(oe))}function Ye(oe){Ce.equals(oe)===!1&&(n.viewport(oe.x,oe.y,oe.z,oe.w),Ce.copy(oe))}function tt(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),v={},le=null,_e={},p=null,m={},x=null,A=!1,E=null,M=null,w=null,_=null,C=null,b=null,I=null,B=!1,H=null,D=null,O=null,ee=null,q=null,Be.set(0,0,n.canvas.width,n.canvas.height),Ce.set(0,0,n.canvas.width,n.canvas.height),l.reset(),c.reset(),h.reset()}return{buffers:{color:l,depth:c,stencil:h},enable:Oe,disable:ze,bindFramebuffer:F,bindXRFramebuffer:Ee,useProgram:G,setBlending:K,setMaterial:Z,setFlipSided:se,setCullFace:j,setLineWidth:re,setPolygonOffset:ae,setScissorTest:ye,activeTexture:ge,bindTexture:z,unbindTexture:W,compressedTexImage2D:ve,texImage2D:Ae,texImage3D:Ne,scissor:We,viewport:Ye,reset:tt}}function EU(n,e,t,r,i,s,o){const l=i.isWebGL2,c=i.maxTextures,h=i.maxCubemapSize,v=i.maxTextureSize,p=i.maxSamples,m=new WeakMap;let x,A=!1;try{A=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function E(z,W){return A?new OffscreenCanvas(z,W):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function M(z,W,ve,Ae){let Ne=1;if((z.width>Ae||z.height>Ae)&&(Ne=Ae/Math.max(z.width,z.height)),Ne<1||W===!0)if(typeof HTMLImageElement!="undefined"&&z instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&z instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&z instanceof ImageBitmap){const We=W?vt.floorPowerOfTwo:Math.floor,Ye=We(Ne*z.width),tt=We(Ne*z.height);x===void 0&&(x=E(Ye,tt));const oe=ve?E(Ye,tt):x;return oe.width=Ye,oe.height=tt,oe.getContext("2d").drawImage(z,0,0,Ye,tt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+z.width+"x"+z.height+") to ("+Ye+"x"+tt+")."),oe}else return"data"in z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+z.width+"x"+z.height+")."),z;return z}function w(z){return vt.isPowerOfTwo(z.width)&&vt.isPowerOfTwo(z.height)}function _(z){return l?!1:z.wrapS!==zr||z.wrapT!==zr||z.minFilter!==Un&&z.minFilter!==An}function C(z,W){return z.generateMipmaps&&W&&z.minFilter!==Un&&z.minFilter!==An}function b(z,W,ve,Ae){n.generateMipmap(z);const Ne=r.get(W);Ne.__maxMipLevel=Math.log2(Math.max(ve,Ae))}function I(z,W,ve){if(l===!1)return W;if(z!==null){if(n[z]!==void 0)return n[z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+z+"'")}let Ae=W;return W===6403&&(ve===5126&&(Ae=33326),ve===5131&&(Ae=33325),ve===5121&&(Ae=33321)),W===6407&&(ve===5126&&(Ae=34837),ve===5131&&(Ae=34843),ve===5121&&(Ae=32849)),W===6408&&(ve===5126&&(Ae=34836),ve===5131&&(Ae=34842),ve===5121&&(Ae=32856)),(Ae===33325||Ae===33326||Ae===34842||Ae===34836)&&e.get("EXT_color_buffer_float"),Ae}function B(z){return z===Un||z===Pf||z===If?9728:9729}function H(z){const W=z.target;W.removeEventListener("dispose",H),O(W),W.isVideoTexture&&m.delete(W),o.memory.textures--}function D(z){const W=z.target;W.removeEventListener("dispose",D),ee(W),o.memory.textures--}function O(z){const W=r.get(z);W.__webglInit!==void 0&&(n.deleteTexture(W.__webglTexture),r.remove(z))}function ee(z){const W=z.texture,ve=r.get(z),Ae=r.get(W);if(!!z){if(Ae.__webglTexture!==void 0&&n.deleteTexture(Ae.__webglTexture),z.depthTexture&&z.depthTexture.dispose(),z.isWebGLCubeRenderTarget)for(let Ne=0;Ne<6;Ne++)n.deleteFramebuffer(ve.__webglFramebuffer[Ne]),ve.__webglDepthbuffer&&n.deleteRenderbuffer(ve.__webglDepthbuffer[Ne]);else n.deleteFramebuffer(ve.__webglFramebuffer),ve.__webglDepthbuffer&&n.deleteRenderbuffer(ve.__webglDepthbuffer),ve.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ve.__webglMultisampledFramebuffer),ve.__webglColorRenderbuffer&&n.deleteRenderbuffer(ve.__webglColorRenderbuffer),ve.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ve.__webglDepthRenderbuffer);r.remove(W),r.remove(z)}}let q=0;function fe(){q=0}function ne(){const z=q;return z>=c&&console.warn("THREE.WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+c),q+=1,z}function te(z,W){const ve=r.get(z);if(z.isVideoTexture&&j(z),z.version>0&&ve.__version!==z.version){const Ae=z.image;if(Ae===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Ae.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Oe(ve,z,W);return}}t.activeTexture(33984+W),t.bindTexture(3553,ve.__webglTexture)}function $(z,W){const ve=r.get(z);if(z.version>0&&ve.__version!==z.version){Oe(ve,z,W);return}t.activeTexture(33984+W),t.bindTexture(35866,ve.__webglTexture)}function le(z,W){const ve=r.get(z);if(z.version>0&&ve.__version!==z.version){Oe(ve,z,W);return}t.activeTexture(33984+W),t.bindTexture(32879,ve.__webglTexture)}function _e(z,W){const ve=r.get(z);if(z.version>0&&ve.__version!==z.version){ze(ve,z,W);return}t.activeTexture(33984+W),t.bindTexture(34067,ve.__webglTexture)}const Be={[Os]:10497,[zr]:33071,[Su]:33648},Ce={[Un]:9728,[Pf]:9984,[If]:9986,[An]:9729,[up]:9985,[lo]:9987};function He(z,W,ve){if(ve?(n.texParameteri(z,10242,Be[W.wrapS]),n.texParameteri(z,10243,Be[W.wrapT]),(z===32879||z===35866)&&n.texParameteri(z,32882,Be[W.wrapR]),n.texParameteri(z,10240,Ce[W.magFilter]),n.texParameteri(z,10241,Ce[W.minFilter])):(n.texParameteri(z,10242,33071),n.texParameteri(z,10243,33071),(z===32879||z===35866)&&n.texParameteri(z,32882,33071),(W.wrapS!==zr||W.wrapT!==zr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(z,10240,B(W.magFilter)),n.texParameteri(z,10241,B(W.minFilter)),W.minFilter!==Un&&W.minFilter!==An&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Ae=e.get("EXT_texture_filter_anisotropic");if(W.type===gs&&e.has("OES_texture_float_linear")===!1||l===!1&&W.type===tl&&e.has("OES_texture_half_float_linear")===!1)return;(W.anisotropy>1||r.get(W).__currentAnisotropy)&&(n.texParameterf(z,Ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,i.getMaxAnisotropy())),r.get(W).__currentAnisotropy=W.anisotropy)}}function ue(z,W){z.__webglInit===void 0&&(z.__webglInit=!0,W.addEventListener("dispose",H),z.__webglTexture=n.createTexture(),o.memory.textures++)}function Oe(z,W,ve){let Ae=3553;W.isDataTexture2DArray&&(Ae=35866),W.isDataTexture3D&&(Ae=32879),ue(z,W),t.activeTexture(33984+ve),t.bindTexture(Ae,z.__webglTexture),n.pixelStorei(37440,W.flipY),n.pixelStorei(37441,W.premultiplyAlpha),n.pixelStorei(3317,W.unpackAlignment),n.pixelStorei(37443,0);const Ne=_(W)&&w(W.image)===!1,We=M(W.image,Ne,!1,v),Ye=w(We)||l,tt=s.convert(W.format);let oe=s.convert(W.type),Ve=I(W.internalFormat,tt,oe);He(Ae,W,Ye);let ke;const Qe=W.mipmaps;if(W.isDepthTexture)Ve=6402,l?W.type===gs?Ve=36012:W.type===fp?Ve=33190:W.type===Ff?Ve=35056:Ve=33189:W.type===gs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),W.format===Tu&&Ve===6402&&W.type!==cp&&W.type!==fp&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),W.type=cp,oe=s.convert(W.type)),W.format===Df&&Ve===6402&&(Ve=34041,W.type!==Ff&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),W.type=Ff,oe=s.convert(W.type))),t.texImage2D(3553,0,Ve,We.width,We.height,0,tt,oe,null);else if(W.isDataTexture)if(Qe.length>0&&Ye){for(let Ie=0,rt=Qe.length;Ie<rt;Ie++)ke=Qe[Ie],t.texImage2D(3553,Ie,Ve,ke.width,ke.height,0,tt,oe,ke.data);W.generateMipmaps=!1,z.__maxMipLevel=Qe.length-1}else t.texImage2D(3553,0,Ve,We.width,We.height,0,tt,oe,We.data),z.__maxMipLevel=0;else if(W.isCompressedTexture){for(let Ie=0,rt=Qe.length;Ie<rt;Ie++)ke=Qe[Ie],W.format!==qi&&W.format!==vs?tt!==null?t.compressedTexImage2D(3553,Ie,Ve,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,Ie,Ve,ke.width,ke.height,0,tt,oe,ke.data);z.__maxMipLevel=Qe.length-1}else if(W.isDataTexture2DArray)t.texImage3D(35866,0,Ve,We.width,We.height,We.depth,0,tt,oe,We.data),z.__maxMipLevel=0;else if(W.isDataTexture3D)t.texImage3D(32879,0,Ve,We.width,We.height,We.depth,0,tt,oe,We.data),z.__maxMipLevel=0;else if(Qe.length>0&&Ye){for(let Ie=0,rt=Qe.length;Ie<rt;Ie++)ke=Qe[Ie],t.texImage2D(3553,Ie,Ve,tt,oe,ke);W.generateMipmaps=!1,z.__maxMipLevel=Qe.length-1}else t.texImage2D(3553,0,Ve,tt,oe,We),z.__maxMipLevel=0;C(W,Ye)&&b(Ae,W,We.width,We.height),z.__version=W.version,W.onUpdate&&W.onUpdate(W)}function ze(z,W,ve){if(W.image.length!==6)return;ue(z,W),t.activeTexture(33984+ve),t.bindTexture(34067,z.__webglTexture),n.pixelStorei(37440,W.flipY),n.pixelStorei(37441,W.premultiplyAlpha),n.pixelStorei(3317,W.unpackAlignment),n.pixelStorei(37443,0);const Ae=W&&(W.isCompressedTexture||W.image[0].isCompressedTexture),Ne=W.image[0]&&W.image[0].isDataTexture,We=[];for(let Ie=0;Ie<6;Ie++)!Ae&&!Ne?We[Ie]=M(W.image[Ie],!1,!0,h):We[Ie]=Ne?W.image[Ie].image:W.image[Ie];const Ye=We[0],tt=w(Ye)||l,oe=s.convert(W.format),Ve=s.convert(W.type),ke=I(W.internalFormat,oe,Ve);He(34067,W,tt);let Qe;if(Ae){for(let Ie=0;Ie<6;Ie++){Qe=We[Ie].mipmaps;for(let rt=0;rt<Qe.length;rt++){const It=Qe[rt];W.format!==qi&&W.format!==vs?oe!==null?t.compressedTexImage2D(34069+Ie,rt,ke,It.width,It.height,0,It.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+Ie,rt,ke,It.width,It.height,0,oe,Ve,It.data)}}z.__maxMipLevel=Qe.length-1}else{Qe=W.mipmaps;for(let Ie=0;Ie<6;Ie++)if(Ne){t.texImage2D(34069+Ie,0,ke,We[Ie].width,We[Ie].height,0,oe,Ve,We[Ie].data);for(let rt=0;rt<Qe.length;rt++){const Ht=Qe[rt].image[Ie].image;t.texImage2D(34069+Ie,rt+1,ke,Ht.width,Ht.height,0,oe,Ve,Ht.data)}}else{t.texImage2D(34069+Ie,0,ke,oe,Ve,We[Ie]);for(let rt=0;rt<Qe.length;rt++){const It=Qe[rt];t.texImage2D(34069+Ie,rt+1,ke,oe,Ve,It.image[Ie])}}z.__maxMipLevel=Qe.length}C(W,tt)&&b(34067,W,Ye.width,Ye.height),z.__version=W.version,W.onUpdate&&W.onUpdate(W)}function Ee(z,W,ve,Ae){const Ne=W.texture,We=s.convert(Ne.format),Ye=s.convert(Ne.type),tt=I(Ne.internalFormat,We,Ye);Ae===32879||Ae===35866?t.texImage3D(Ae,0,tt,W.width,W.height,W.depth,0,We,Ye,null):t.texImage2D(Ae,0,tt,W.width,W.height,0,We,Ye,null),t.bindFramebuffer(36160,z),n.framebufferTexture2D(36160,ve,Ae,r.get(Ne).__webglTexture,0),t.bindFramebuffer(36160,null)}function F(z,W,ve){if(n.bindRenderbuffer(36161,z),W.depthBuffer&&!W.stencilBuffer){let Ae=33189;if(ve){const Ne=W.depthTexture;Ne&&Ne.isDepthTexture&&(Ne.type===gs?Ae=36012:Ne.type===fp&&(Ae=33190));const We=se(W);n.renderbufferStorageMultisample(36161,We,Ae,W.width,W.height)}else n.renderbufferStorage(36161,Ae,W.width,W.height);n.framebufferRenderbuffer(36160,36096,36161,z)}else if(W.depthBuffer&&W.stencilBuffer){if(ve){const Ae=se(W);n.renderbufferStorageMultisample(36161,Ae,35056,W.width,W.height)}else n.renderbufferStorage(36161,34041,W.width,W.height);n.framebufferRenderbuffer(36160,33306,36161,z)}else{const Ae=W.texture,Ne=s.convert(Ae.format),We=s.convert(Ae.type),Ye=I(Ae.internalFormat,Ne,We);if(ve){const tt=se(W);n.renderbufferStorageMultisample(36161,tt,Ye,W.width,W.height)}else n.renderbufferStorage(36161,Ye,W.width,W.height)}n.bindRenderbuffer(36161,null)}function G(z,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,z),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),te(W.depthTexture,0);const Ae=r.get(W.depthTexture).__webglTexture;if(W.depthTexture.format===Tu)n.framebufferTexture2D(36160,36096,3553,Ae,0);else if(W.depthTexture.format===Df)n.framebufferTexture2D(36160,33306,3553,Ae,0);else throw new Error("Unknown depthTexture format")}function X(z){const W=r.get(z),ve=z.isWebGLCubeRenderTarget===!0;if(z.depthTexture){if(ve)throw new Error("target.depthTexture not supported in Cube render targets");G(W.__webglFramebuffer,z)}else if(ve){W.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)t.bindFramebuffer(36160,W.__webglFramebuffer[Ae]),W.__webglDepthbuffer[Ae]=n.createRenderbuffer(),F(W.__webglDepthbuffer[Ae],z,!1)}else t.bindFramebuffer(36160,W.__webglFramebuffer),W.__webglDepthbuffer=n.createRenderbuffer(),F(W.__webglDepthbuffer,z,!1);t.bindFramebuffer(36160,null)}function V(z){const W=z.texture,ve=r.get(z),Ae=r.get(W);z.addEventListener("dispose",D),Ae.__webglTexture=n.createTexture(),Ae.__version=W.version,o.memory.textures++;const Ne=z.isWebGLCubeRenderTarget===!0,We=z.isWebGLMultisampleRenderTarget===!0,Ye=W.isDataTexture3D||W.isDataTexture2DArray,tt=w(z)||l;if(l&&W.format===vs&&(W.type===gs||W.type===tl)&&(W.format=qi,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Ne){ve.__webglFramebuffer=[];for(let oe=0;oe<6;oe++)ve.__webglFramebuffer[oe]=n.createFramebuffer()}else if(ve.__webglFramebuffer=n.createFramebuffer(),We)if(l){ve.__webglMultisampledFramebuffer=n.createFramebuffer(),ve.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,ve.__webglColorRenderbuffer);const oe=s.convert(W.format),Ve=s.convert(W.type),ke=I(W.internalFormat,oe,Ve),Qe=se(z);n.renderbufferStorageMultisample(36161,Qe,ke,z.width,z.height),t.bindFramebuffer(36160,ve.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,ve.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),z.depthBuffer&&(ve.__webglDepthRenderbuffer=n.createRenderbuffer(),F(ve.__webglDepthRenderbuffer,z,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Ne){t.bindTexture(34067,Ae.__webglTexture),He(34067,W,tt);for(let oe=0;oe<6;oe++)Ee(ve.__webglFramebuffer[oe],z,36064,34069+oe);C(W,tt)&&b(34067,W,z.width,z.height),t.bindTexture(34067,null)}else{let oe=3553;Ye&&(l?oe=W.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(oe,Ae.__webglTexture),He(oe,W,tt),Ee(ve.__webglFramebuffer,z,36064,oe),C(W,tt)&&b(3553,W,z.width,z.height),t.bindTexture(3553,null)}z.depthBuffer&&X(z)}function K(z){const W=z.texture,ve=w(z)||l;if(C(W,ve)){const Ae=z.isWebGLCubeRenderTarget?34067:3553,Ne=r.get(W).__webglTexture;t.bindTexture(Ae,Ne),b(Ae,W,z.width,z.height),t.bindTexture(Ae,null)}}function Z(z){if(z.isWebGLMultisampleRenderTarget)if(l){const W=r.get(z);t.bindFramebuffer(36008,W.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,W.__webglFramebuffer);const ve=z.width,Ae=z.height;let Ne=16384;z.depthBuffer&&(Ne|=256),z.stencilBuffer&&(Ne|=1024),n.blitFramebuffer(0,0,ve,Ae,0,0,ve,Ae,Ne,9728),t.bindFramebuffer(36160,W.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function se(z){return l&&z.isWebGLMultisampleRenderTarget?Math.min(p,z.samples):0}function j(z){const W=o.render.frame;m.get(z)!==W&&(m.set(z,W),z.update())}let re=!1,ae=!1;function ye(z,W){z&&z.isWebGLRenderTarget&&(re===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),re=!0),z=z.texture),te(z,W)}function ge(z,W){z&&z.isWebGLCubeRenderTarget&&(ae===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),ae=!0),z=z.texture),_e(z,W)}this.allocateTextureUnit=ne,this.resetTextureUnits=fe,this.setTexture2D=te,this.setTexture2DArray=$,this.setTexture3D=le,this.setTextureCube=_e,this.setupRenderTarget=V,this.updateRenderTargetMipmap=K,this.updateMultisampleRenderTarget=Z,this.safeSetTexture2D=ye,this.safeSetTextureCube=ge}function Nb(n,e,t){const r=t.isWebGL2;function i(s){let o;if(s===uo)return 5121;if(s===nC)return 32819;if(s===rC)return 32820;if(s===iC)return 33635;if(s===$T)return 5120;if(s===eC)return 5122;if(s===cp)return 5123;if(s===tC)return 5124;if(s===fp)return 5125;if(s===gs)return 5126;if(s===tl)return r?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===sC)return 6406;if(s===vs)return 6407;if(s===qi)return 6408;if(s===oC)return 6409;if(s===aC)return 6410;if(s===Tu)return 6402;if(s===Df)return 34041;if(s===lC)return 6403;if(s===uC)return 36244;if(s===cC)return 33319;if(s===fC)return 33320;if(s===dC)return 36248;if(s===hC)return 36249;if(s===uw||s===cw||s===fw||s===dw)if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===uw)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===cw)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===fw)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===dw)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===hw||s===pw||s===mw||s===gw)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===hw)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===pw)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===mw)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===gw)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===pC)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===vw||s===yw)&&(o=e.get("WEBGL_compressed_texture_etc"),o!==null)){if(s===vw)return o.COMPRESSED_RGB8_ETC2;if(s===yw)return o.COMPRESSED_RGBA8_ETC2_EAC}if(s===mC||s===gC||s===vC||s===yC||s===xC||s===_C||s===wC||s===AC||s===MC||s===EC||s===SC||s===TC||s===CC||s===bC||s===BC||s===RC||s===PC||s===IC||s===FC||s===DC||s===OC||s===NC||s===GC||s===HC||s===UC||s===kC||s===zC||s===WC)return o=e.get("WEBGL_compressed_texture_astc"),o!==null?s:null;if(s===LC)return o=e.get("EXT_texture_compression_bptc"),o!==null?s:null;if(s===Ff)return r?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}class Zw extends mn{constructor(e=[]){super();this.cameras=e}}Zw.prototype.isArrayCamera=!0;class $i extends mt{constructor(){super();this.type="Group"}}$i.prototype.isGroup=!0;function Rp(){this._targetRay=null,this._grip=null,this._hand=null}Object.assign(Rp.prototype,{constructor:Rp,getHandSpace:function(){return this._hand===null&&(this._hand=new $i,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new $i,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new $i,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(n){return this._targetRay!==null&&this._targetRay.dispatchEvent(n),this._grip!==null&&this._grip.dispatchEvent(n),this._hand!==null&&this._hand.dispatchEvent(n),this},disconnect:function(n){return this.dispatchEvent({type:"disconnected",data:n}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(n,e,t){let r=null,i=null,s=null;const o=this._targetRay,l=this._grip,c=this._hand;if(n&&e.session.visibilityState!=="visible-blurred")if(o!==null&&(r=e.getPose(n.targetRaySpace,t),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),c&&n.hand){s=!0;for(const A of n.hand.values()){const E=e.getJointPose(A,t);if(c.joints[A.jointName]===void 0){const w=new $i;w.matrixAutoUpdate=!1,w.visible=!1,c.joints[A.jointName]=w,c.add(w)}const M=c.joints[A.jointName];E!==null&&(M.matrix.fromArray(E.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.jointRadius=E.radius),M.visible=E!==null}const h=c.joints["index-finger-tip"],v=c.joints["thumb-tip"],p=h.position.distanceTo(v.position),m=.02,x=.005;c.inputState.pinching&&p>m+x?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!c.inputState.pinching&&p<=m-x&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}else l!==null&&n.gripSpace&&(i=e.getPose(n.gripSpace,t),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale)));return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=i!==null),c!==null&&(c.visible=s!==null),this}});function Gb(n,e){const t=this,r=n.state;let i=null,s=1,o=null,l="local-floor",c=null;const h=[],v=new Map,p=new mn;p.layers.enable(1),p.viewport=new on;const m=new mn;m.layers.enable(2),m.viewport=new on;const x=[p,m],A=new Zw;A.layers.enable(1),A.layers.enable(2);let E=null,M=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let fe=h[q];return fe===void 0&&(fe=new Rp,h[q]=fe),fe.getTargetRaySpace()},this.getControllerGrip=function(q){let fe=h[q];return fe===void 0&&(fe=new Rp,h[q]=fe),fe.getGripSpace()},this.getHand=function(q){let fe=h[q];return fe===void 0&&(fe=new Rp,h[q]=fe),fe.getHandSpace()};function w(q){const fe=v.get(q.inputSource);fe&&fe.dispatchEvent({type:q.type,data:q.inputSource})}function _(){v.forEach(function(q,fe){q.disconnect(fe)}),v.clear(),E=null,M=null,r.bindXRFramebuffer(null),n.setRenderTarget(n.getRenderTarget()),ee.stop(),t.isPresenting=!1,t.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(q){s=q,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){l=q,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return i},this.setSession=async function(q){if(i=q,i!==null){i.addEventListener("select",w),i.addEventListener("selectstart",w),i.addEventListener("selectend",w),i.addEventListener("squeeze",w),i.addEventListener("squeezestart",w),i.addEventListener("squeezeend",w),i.addEventListener("end",_),i.addEventListener("inputsourceschange",C);const fe=e.getContextAttributes();fe.xrCompatible!==!0&&await e.makeXRCompatible();const ne={antialias:fe.antialias,alpha:fe.alpha,depth:fe.depth,stencil:fe.stencil,framebufferScaleFactor:s},te=new XRWebGLLayer(i,e,ne);i.updateRenderState({baseLayer:te}),o=await i.requestReferenceSpace(l),ee.setContext(i),ee.start(),t.isPresenting=!0,t.dispatchEvent({type:"sessionstart"})}};function C(q){const fe=i.inputSources;for(let ne=0;ne<h.length;ne++)v.set(fe[ne],h[ne]);for(let ne=0;ne<q.removed.length;ne++){const te=q.removed[ne],$=v.get(te);$&&($.dispatchEvent({type:"disconnected",data:te}),v.delete(te))}for(let ne=0;ne<q.added.length;ne++){const te=q.added[ne],$=v.get(te);$&&$.dispatchEvent({type:"connected",data:te})}}const b=new U,I=new U;function B(q,fe,ne){b.setFromMatrixPosition(fe.matrixWorld),I.setFromMatrixPosition(ne.matrixWorld);const te=b.distanceTo(I),$=fe.projectionMatrix.elements,le=ne.projectionMatrix.elements,_e=$[14]/($[10]-1),Be=$[14]/($[10]+1),Ce=($[9]+1)/$[5],He=($[9]-1)/$[5],ue=($[8]-1)/$[0],Oe=(le[8]+1)/le[0],ze=_e*ue,Ee=_e*Oe,F=te/(-ue+Oe),G=F*-ue;fe.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(G),q.translateZ(F),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert();const X=_e+F,V=Be+F,K=ze-G,Z=Ee+(te-G),se=Ce*Be/V*X,j=He*Be/V*X;q.projectionMatrix.makePerspective(K,Z,se,j,X,V)}function H(q,fe){fe===null?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(fe.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.getCamera=function(q){A.near=m.near=p.near=q.near,A.far=m.far=p.far=q.far,(E!==A.near||M!==A.far)&&(i.updateRenderState({depthNear:A.near,depthFar:A.far}),E=A.near,M=A.far);const fe=q.parent,ne=A.cameras;H(A,fe);for(let $=0;$<ne.length;$++)H(ne[$],fe);q.matrixWorld.copy(A.matrixWorld),q.matrix.copy(A.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale);const te=q.children;for(let $=0,le=te.length;$<le;$++)te[$].updateMatrixWorld(!0);return ne.length===2?B(A,p,m):A.projectionMatrix.copy(p.projectionMatrix),A};let D=null;function O(q,fe){if(c=fe.getViewerPose(o),c!==null){const te=c.views,$=i.renderState.baseLayer;r.bindXRFramebuffer($.framebuffer);let le=!1;te.length!==A.cameras.length&&(A.cameras.length=0,le=!0);for(let _e=0;_e<te.length;_e++){const Be=te[_e],Ce=$.getViewport(Be),He=x[_e];He.matrix.fromArray(Be.transform.matrix),He.projectionMatrix.fromArray(Be.projectionMatrix),He.viewport.set(Ce.x,Ce.y,Ce.width,Ce.height),_e===0&&A.matrix.copy(He.matrix),le===!0&&A.cameras.push(He)}}const ne=i.inputSources;for(let te=0;te<h.length;te++){const $=h[te],le=ne[te];$.update(le,fe,o)}D&&D(q,fe)}const ee=new pb;ee.setAnimationLoop(O),this.setAnimationLoop=function(q){D=q},this.dispose=function(){}}Object.assign(Gb.prototype,co.prototype);function SU(n){function e(w,_){w.fogColor.value.copy(_.color),_.isFog?(w.fogNear.value=_.near,w.fogFar.value=_.far):_.isFogExp2&&(w.fogDensity.value=_.density)}function t(w,_,C,b){_.isMeshBasicMaterial?r(w,_):_.isMeshLambertMaterial?(r(w,_),c(w,_)):_.isMeshToonMaterial?(r(w,_),v(w,_)):_.isMeshPhongMaterial?(r(w,_),h(w,_)):_.isMeshStandardMaterial?(r(w,_),_.isMeshPhysicalMaterial?m(w,_):p(w,_)):_.isMeshMatcapMaterial?(r(w,_),x(w,_)):_.isMeshDepthMaterial?(r(w,_),A(w,_)):_.isMeshDistanceMaterial?(r(w,_),E(w,_)):_.isMeshNormalMaterial?(r(w,_),M(w,_)):_.isLineBasicMaterial?(i(w,_),_.isLineDashedMaterial&&s(w,_)):_.isPointsMaterial?o(w,_,C,b):_.isSpriteMaterial?l(w,_):_.isShadowMaterial?(w.color.value.copy(_.color),w.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function r(w,_){w.opacity.value=_.opacity,_.color&&w.diffuse.value.copy(_.color),_.emissive&&w.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(w.map.value=_.map),_.alphaMap&&(w.alphaMap.value=_.alphaMap),_.specularMap&&(w.specularMap.value=_.specularMap);const C=n.get(_).envMap;if(C){w.envMap.value=C,w.flipEnvMap.value=C.isCubeTexture&&C._needsFlipEnvMap?-1:1,w.reflectivity.value=_.reflectivity,w.refractionRatio.value=_.refractionRatio;const B=n.get(C).__maxMipLevel;B!==void 0&&(w.maxMipLevel.value=B)}_.lightMap&&(w.lightMap.value=_.lightMap,w.lightMapIntensity.value=_.lightMapIntensity),_.aoMap&&(w.aoMap.value=_.aoMap,w.aoMapIntensity.value=_.aoMapIntensity);let b;_.map?b=_.map:_.specularMap?b=_.specularMap:_.displacementMap?b=_.displacementMap:_.normalMap?b=_.normalMap:_.bumpMap?b=_.bumpMap:_.roughnessMap?b=_.roughnessMap:_.metalnessMap?b=_.metalnessMap:_.alphaMap?b=_.alphaMap:_.emissiveMap?b=_.emissiveMap:_.clearcoatMap?b=_.clearcoatMap:_.clearcoatNormalMap?b=_.clearcoatNormalMap:_.clearcoatRoughnessMap&&(b=_.clearcoatRoughnessMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),w.uvTransform.value.copy(b.matrix));let I;_.aoMap?I=_.aoMap:_.lightMap&&(I=_.lightMap),I!==void 0&&(I.isWebGLRenderTarget&&(I=I.texture),I.matrixAutoUpdate===!0&&I.updateMatrix(),w.uv2Transform.value.copy(I.matrix))}function i(w,_){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity}function s(w,_){w.dashSize.value=_.dashSize,w.totalSize.value=_.dashSize+_.gapSize,w.scale.value=_.scale}function o(w,_,C,b){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,w.size.value=_.size*C,w.scale.value=b*.5,_.map&&(w.map.value=_.map),_.alphaMap&&(w.alphaMap.value=_.alphaMap);let I;_.map?I=_.map:_.alphaMap&&(I=_.alphaMap),I!==void 0&&(I.matrixAutoUpdate===!0&&I.updateMatrix(),w.uvTransform.value.copy(I.matrix))}function l(w,_){w.diffuse.value.copy(_.color),w.opacity.value=_.opacity,w.rotation.value=_.rotation,_.map&&(w.map.value=_.map),_.alphaMap&&(w.alphaMap.value=_.alphaMap);let C;_.map?C=_.map:_.alphaMap&&(C=_.alphaMap),C!==void 0&&(C.matrixAutoUpdate===!0&&C.updateMatrix(),w.uvTransform.value.copy(C.matrix))}function c(w,_){_.emissiveMap&&(w.emissiveMap.value=_.emissiveMap)}function h(w,_){w.specular.value.copy(_.specular),w.shininess.value=Math.max(_.shininess,1e-4),_.emissiveMap&&(w.emissiveMap.value=_.emissiveMap),_.bumpMap&&(w.bumpMap.value=_.bumpMap,w.bumpScale.value=_.bumpScale,_.side===ur&&(w.bumpScale.value*=-1)),_.normalMap&&(w.normalMap.value=_.normalMap,w.normalScale.value.copy(_.normalScale),_.side===ur&&w.normalScale.value.negate()),_.displacementMap&&(w.displacementMap.value=_.displacementMap,w.displacementScale.value=_.displacementScale,w.displacementBias.value=_.displacementBias)}function v(w,_){_.gradientMap&&(w.gradientMap.value=_.gradientMap),_.emissiveMap&&(w.emissiveMap.value=_.emissiveMap),_.bumpMap&&(w.bumpMap.value=_.bumpMap,w.bumpScale.value=_.bumpScale,_.side===ur&&(w.bumpScale.value*=-1)),_.normalMap&&(w.normalMap.value=_.normalMap,w.normalScale.value.copy(_.normalScale),_.side===ur&&w.normalScale.value.negate()),_.displacementMap&&(w.displacementMap.value=_.displacementMap,w.displacementScale.value=_.displacementScale,w.displacementBias.value=_.displacementBias)}function p(w,_){w.roughness.value=_.roughness,w.metalness.value=_.metalness,_.roughnessMap&&(w.roughnessMap.value=_.roughnessMap),_.metalnessMap&&(w.metalnessMap.value=_.metalnessMap),_.emissiveMap&&(w.emissiveMap.value=_.emissiveMap),_.bumpMap&&(w.bumpMap.value=_.bumpMap,w.bumpScale.value=_.bumpScale,_.side===ur&&(w.bumpScale.value*=-1)),_.normalMap&&(w.normalMap.value=_.normalMap,w.normalScale.value.copy(_.normalScale),_.side===ur&&w.normalScale.value.negate()),_.displacementMap&&(w.displacementMap.value=_.displacementMap,w.displacementScale.value=_.displacementScale,w.displacementBias.value=_.displacementBias),n.get(_).envMap&&(w.envMapIntensity.value=_.envMapIntensity)}function m(w,_){p(w,_),w.reflectivity.value=_.reflectivity,w.clearcoat.value=_.clearcoat,w.clearcoatRoughness.value=_.clearcoatRoughness,_.sheen&&w.sheen.value.copy(_.sheen),_.clearcoatMap&&(w.clearcoatMap.value=_.clearcoatMap),_.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap),_.clearcoatNormalMap&&(w.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),w.clearcoatNormalMap.value=_.clearcoatNormalMap,_.side===ur&&w.clearcoatNormalScale.value.negate()),w.transmission.value=_.transmission,_.transmissionMap&&(w.transmissionMap.value=_.transmissionMap)}function x(w,_){_.matcap&&(w.matcap.value=_.matcap),_.bumpMap&&(w.bumpMap.value=_.bumpMap,w.bumpScale.value=_.bumpScale,_.side===ur&&(w.bumpScale.value*=-1)),_.normalMap&&(w.normalMap.value=_.normalMap,w.normalScale.value.copy(_.normalScale),_.side===ur&&w.normalScale.value.negate()),_.displacementMap&&(w.displacementMap.value=_.displacementMap,w.displacementScale.value=_.displacementScale,w.displacementBias.value=_.displacementBias)}function A(w,_){_.displacementMap&&(w.displacementMap.value=_.displacementMap,w.displacementScale.value=_.displacementScale,w.displacementBias.value=_.displacementBias)}function E(w,_){_.displacementMap&&(w.displacementMap.value=_.displacementMap,w.displacementScale.value=_.displacementScale,w.displacementBias.value=_.displacementBias),w.referencePosition.value.copy(_.referencePosition),w.nearDistance.value=_.nearDistance,w.farDistance.value=_.farDistance}function M(w,_){_.bumpMap&&(w.bumpMap.value=_.bumpMap,w.bumpScale.value=_.bumpScale,_.side===ur&&(w.bumpScale.value*=-1)),_.normalMap&&(w.normalMap.value=_.normalMap,w.normalScale.value.copy(_.normalScale),_.side===ur&&w.normalScale.value.negate()),_.displacementMap&&(w.displacementMap.value=_.displacementMap,w.displacementScale.value=_.displacementScale,w.displacementBias.value=_.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function TU(){const n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.style.display="block",n}function dn(n){n=n||{};const e=n.canvas!==void 0?n.canvas:TU(),t=n.context!==void 0?n.context:null,r=n.alpha!==void 0?n.alpha:!1,i=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,l=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,c=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,h=n.powerPreference!==void 0?n.powerPreference:"default",v=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let p=null,m=null;const x=[],A=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Wr,this.physicallyCorrectLights=!1,this.toneMapping=Eu,this.toneMappingExposure=1;const E=this;let M=!1,w=0,_=0,C=null,b=-1,I=null;const B=new on,H=new on;let D=null,O=e.width,ee=e.height,q=1,fe=null,ne=null;const te=new on(0,0,O,ee),$=new on(0,0,O,ee);let le=!1;const _e=new Cp;let Be=!1,Ce=!1;const He=new lt,ue=new U,Oe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ze(){return C===null?q:1}let Ee=t;function F(J,Se){for(let we=0;we<J.length;we++){const Re=J[we],Ke=e.getContext(Re,Se);if(Ke!==null)return Ke}return null}try{const J={alpha:r,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:v};if(e.addEventListener("webglcontextlost",rt,!1),e.addEventListener("webglcontextrestored",It,!1),Ee===null){const Se=["webgl2","webgl","experimental-webgl"];if(E.isWebGL1Renderer===!0&&Se.shift(),Ee=F(Se,J),Ee===null)throw F(Se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Ee.getShaderPrecisionFormat===void 0&&(Ee.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(J){throw console.error("THREE.WebGLRenderer: "+J.message),J}let G,X,V,K,Z,se,j,re,ae,ye,ge,z,W,ve,Ae,Ne,We,Ye,tt,oe,Ve,ke;function Qe(){G=new QG(Ee),X=new KG(Ee,G,n),G.init(X),Ve=new Nb(Ee,G,X),V=new MU(Ee,G,X),K=new eH(Ee),Z=new fU,se=new EU(Ee,G,V,Z,X,Ve,K),j=new qG(E),re=new MO(Ee,X),ke=new jG(Ee,G,re,X),ae=new ZG(Ee,re,K,ke),ye=new iH(Ee,ae,re,K),Ye=new rH(Ee),Ae=new YG(Z),ge=new cU(E,j,G,X,ke,Ae),z=new SU(Z),W=new pU(Z),ve=new _U(G,X),We=new JG(E,j,V,ye,l),Ne=new Ob(E,ye,X),tt=new XG(Ee,G,K,X),oe=new $G(Ee,G,K,X),K.programs=ge.programs,E.capabilities=X,E.extensions=G,E.properties=Z,E.renderLists=W,E.shadowMap=Ne,E.state=V,E.info=K}Qe();const Ie=new Gb(E,Ee);this.xr=Ie,this.getContext=function(){return Ee},this.getContextAttributes=function(){return Ee.getContextAttributes()},this.forceContextLoss=function(){const J=G.get("WEBGL_lose_context");J&&J.loseContext()},this.forceContextRestore=function(){const J=G.get("WEBGL_lose_context");J&&J.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(J){J!==void 0&&(q=J,this.setSize(O,ee,!1))},this.getSize=function(J){return J===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),J=new Pe),J.set(O,ee)},this.setSize=function(J,Se,we){if(Ie.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}O=J,ee=Se,e.width=Math.floor(J*q),e.height=Math.floor(Se*q),we!==!1&&(e.style.width=J+"px",e.style.height=Se+"px"),this.setViewport(0,0,J,Se)},this.getDrawingBufferSize=function(J){return J===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),J=new Pe),J.set(O*q,ee*q).floor()},this.setDrawingBufferSize=function(J,Se,we){O=J,ee=Se,q=we,e.width=Math.floor(J*we),e.height=Math.floor(Se*we),this.setViewport(0,0,J,Se)},this.getCurrentViewport=function(J){return J===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),J=new on),J.copy(B)},this.getViewport=function(J){return J.copy(te)},this.setViewport=function(J,Se,we,Re){J.isVector4?te.set(J.x,J.y,J.z,J.w):te.set(J,Se,we,Re),V.viewport(B.copy(te).multiplyScalar(q).floor())},this.getScissor=function(J){return J.copy($)},this.setScissor=function(J,Se,we,Re){J.isVector4?$.set(J.x,J.y,J.z,J.w):$.set(J,Se,we,Re),V.scissor(H.copy($).multiplyScalar(q).floor())},this.getScissorTest=function(){return le},this.setScissorTest=function(J){V.setScissorTest(le=J)},this.setOpaqueSort=function(J){fe=J},this.setTransparentSort=function(J){ne=J},this.getClearColor=function(J){return J===void 0&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),J=new je),J.copy(We.getClearColor())},this.setClearColor=function(){We.setClearColor.apply(We,arguments)},this.getClearAlpha=function(){return We.getClearAlpha()},this.setClearAlpha=function(){We.setClearAlpha.apply(We,arguments)},this.clear=function(J,Se,we){let Re=0;(J===void 0||J)&&(Re|=16384),(Se===void 0||Se)&&(Re|=256),(we===void 0||we)&&(Re|=1024),Ee.clear(Re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",rt,!1),e.removeEventListener("webglcontextrestored",It,!1),W.dispose(),ve.dispose(),Z.dispose(),j.dispose(),ye.dispose(),ke.dispose(),Ie.dispose(),Ie.removeEventListener("sessionstart",an),Ie.removeEventListener("sessionend",gn),Dn.stop()};function rt(J){J.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function It(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const J=K.autoReset,Se=Ne.enabled,we=Ne.autoUpdate,Re=Ne.needsUpdate,Ke=Ne.type;Qe(),K.autoReset=J,Ne.enabled=Se,Ne.autoUpdate=we,Ne.needsUpdate=Re,Ne.type=Ke}function Ht(J){const Se=J.target;Se.removeEventListener("dispose",Ht),Kn(Se)}function Kn(J){he(J),Z.remove(J)}function he(J){const Se=Z.get(J).programs;Se!==void 0&&Se.forEach(function(we){ge.releaseProgram(we)})}function Ue(J,Se){J.render(function(we){E.renderBufferImmediate(we,Se)})}this.renderBufferImmediate=function(J,Se){ke.initAttributes();const we=Z.get(J);J.hasPositions&&!we.position&&(we.position=Ee.createBuffer()),J.hasNormals&&!we.normal&&(we.normal=Ee.createBuffer()),J.hasUvs&&!we.uv&&(we.uv=Ee.createBuffer()),J.hasColors&&!we.color&&(we.color=Ee.createBuffer());const Re=Se.getAttributes();J.hasPositions&&(Ee.bindBuffer(34962,we.position),Ee.bufferData(34962,J.positionArray,35048),ke.enableAttribute(Re.position),Ee.vertexAttribPointer(Re.position,3,5126,!1,0,0)),J.hasNormals&&(Ee.bindBuffer(34962,we.normal),Ee.bufferData(34962,J.normalArray,35048),ke.enableAttribute(Re.normal),Ee.vertexAttribPointer(Re.normal,3,5126,!1,0,0)),J.hasUvs&&(Ee.bindBuffer(34962,we.uv),Ee.bufferData(34962,J.uvArray,35048),ke.enableAttribute(Re.uv),Ee.vertexAttribPointer(Re.uv,2,5126,!1,0,0)),J.hasColors&&(Ee.bindBuffer(34962,we.color),Ee.bufferData(34962,J.colorArray,35048),ke.enableAttribute(Re.color),Ee.vertexAttribPointer(Re.color,3,5126,!1,0,0)),ke.disableUnusedAttributes(),Ee.drawArrays(4,0,J.count),J.count=0},this.renderBufferDirect=function(J,Se,we,Re,Ke,kt){Se===null&&(Se=Oe);const At=Ke.isMesh&&Ke.matrixWorld.determinant()<0,Bt=ns(J,Se,Re,Ke);V.setMaterial(Re,At);let Kt=we.index;const Mt=we.attributes.position;if(Kt===null){if(Mt===void 0||Mt.count===0)return}else if(Kt.count===0)return;let Vt=1;Re.wireframe===!0&&(Kt=ae.getWireframeAttribute(we),Vt=2),(Re.morphTargets||Re.morphNormals)&&Ye.update(Ke,we,Re,Bt),ke.setup(Ke,Re,Bt,we,Kt);let Et,Yt=tt;Kt!==null&&(Et=re.get(Kt),Yt=oe,Yt.setIndex(Et));const jr=Kt!==null?Kt.count:Mt.count,dr=we.drawRange.start*Vt,ki=we.drawRange.count*Vt,vn=kt!==null?kt.start*Vt:0,zi=kt!==null?kt.count*Vt:1/0,yn=Math.max(dr,vn),xo=Math.min(jr,dr+ki,vn+zi)-1,En=Math.max(0,xo-yn+1);if(En!==0){if(Ke.isMesh)Re.wireframe===!0?(V.setLineWidth(Re.wireframeLinewidth*ze()),Yt.setMode(1)):Yt.setMode(4);else if(Ke.isLine){let ar=Re.linewidth;ar===void 0&&(ar=1),V.setLineWidth(ar*ze()),Ke.isLineSegments?Yt.setMode(1):Ke.isLineLoop?Yt.setMode(2):Yt.setMode(3)}else Ke.isPoints?Yt.setMode(0):Ke.isSprite&&Yt.setMode(4);if(Ke.isInstancedMesh)Yt.renderInstances(yn,En,Ke.count);else if(we.isInstancedBufferGeometry){const ar=Math.min(we.instanceCount,we._maxInstanceCount);Yt.renderInstances(yn,En,ar)}else Yt.render(yn,En)}},this.compile=function(J,Se){m=ve.get(J),m.init(),J.traverseVisible(function(we){we.isLight&&we.layers.test(Se.layers)&&(m.pushLight(we),we.castShadow&&m.pushShadow(we))}),m.setupLights(),J.traverse(function(we){const Re=we.material;if(Re)if(Array.isArray(Re))for(let Ke=0;Ke<Re.length;Ke++){const kt=Re[Ke];xs(kt,J,we)}else xs(Re,J,we)})};let at=null;function Ut(J){at&&at(J)}function an(){Dn.stop()}function gn(){Dn.start()}const Dn=new pb;Dn.setAnimationLoop(Ut),typeof window!="undefined"&&Dn.setContext(window),this.setAnimationLoop=function(J){at=J,Ie.setAnimationLoop(J),J===null?Dn.stop():Dn.start()},Ie.addEventListener("sessionstart",an),Ie.addEventListener("sessionend",gn),this.render=function(J,Se){let we,Re;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),we=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Re=arguments[3]),Se!==void 0&&Se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(M===!0)return;J.autoUpdate===!0&&J.updateMatrixWorld(),Se.parent===null&&Se.updateMatrixWorld(),Ie.enabled===!0&&Ie.isPresenting===!0&&(Se=Ie.getCamera(Se)),J.isScene===!0&&J.onBeforeRender(E,J,Se,we||C),m=ve.get(J,A.length),m.init(),A.push(m),He.multiplyMatrices(Se.projectionMatrix,Se.matrixWorldInverse),_e.setFromProjectionMatrix(He),Ce=this.localClippingEnabled,Be=Ae.init(this.clippingPlanes,Ce,Se),p=W.get(J,x.length),p.init(),x.push(p),Ui(J,Se,0,E.sortObjects),p.finish(),E.sortObjects===!0&&p.sort(fe,ne),Be===!0&&Ae.beginShadows();const Ke=m.state.shadowsArray;Ne.render(Ke,J,Se),m.setupLights(),m.setupLightsView(Se),Be===!0&&Ae.endShadows(),this.info.autoReset===!0&&this.info.reset(),we!==void 0&&this.setRenderTarget(we),We.render(p,J,Se,Re);const kt=p.opaque,At=p.transparent;kt.length>0&&Mn(kt,J,Se),At.length>0&&Mn(At,J,Se),C!==null&&(se.updateRenderTargetMipmap(C),se.updateMultisampleRenderTarget(C)),J.isScene===!0&&J.onAfterRender(E,J,Se),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),ke.resetDefaultState(),b=-1,I=null,A.pop(),A.length>0?m=A[A.length-1]:m=null,x.pop(),x.length>0?p=x[x.length-1]:p=null};function Ui(J,Se,we,Re){if(J.visible===!1)return;if(J.layers.test(Se.layers)){if(J.isGroup)we=J.renderOrder;else if(J.isLOD)J.autoUpdate===!0&&J.update(Se);else if(J.isLight)m.pushLight(J),J.castShadow&&m.pushShadow(J);else if(J.isSprite){if(!J.frustumCulled||_e.intersectsSprite(J)){Re&&ue.setFromMatrixPosition(J.matrixWorld).applyMatrix4(He);const At=ye.update(J),Bt=J.material;Bt.visible&&p.push(J,At,Bt,we,ue.z,null)}}else if(J.isImmediateRenderObject)Re&&ue.setFromMatrixPosition(J.matrixWorld).applyMatrix4(He),p.push(J,null,J.material,we,ue.z,null);else if((J.isMesh||J.isLine||J.isPoints)&&(J.isSkinnedMesh&&J.skeleton.frame!==K.render.frame&&(J.skeleton.update(),J.skeleton.frame=K.render.frame),!J.frustumCulled||_e.intersectsObject(J))){Re&&ue.setFromMatrixPosition(J.matrixWorld).applyMatrix4(He);const At=ye.update(J),Bt=J.material;if(Array.isArray(Bt)){const Kt=At.groups;for(let Mt=0,Vt=Kt.length;Mt<Vt;Mt++){const Et=Kt[Mt],Yt=Bt[Et.materialIndex];Yt&&Yt.visible&&p.push(J,At,Yt,we,ue.z,Et)}}else Bt.visible&&p.push(J,At,Bt,we,ue.z,null)}}const kt=J.children;for(let At=0,Bt=kt.length;At<Bt;At++)Ui(kt[At],Se,we,Re)}function Mn(J,Se,we){const Re=Se.isScene===!0?Se.overrideMaterial:null;for(let Ke=0,kt=J.length;Ke<kt;Ke++){const At=J[Ke],Bt=At.object,Kt=At.geometry,Mt=Re===null?At.material:Re,Vt=At.group;if(we.isArrayCamera){const Et=we.cameras;for(let Yt=0,jr=Et.length;Yt<jr;Yt++){const dr=Et[Yt];Bt.layers.test(dr.layers)&&(V.viewport(B.copy(dr.viewport)),m.setupLightsView(dr),or(Bt,Se,dr,Kt,Mt,Vt))}}else or(Bt,Se,we,Kt,Mt,Vt)}}function or(J,Se,we,Re,Ke,kt){if(J.onBeforeRender(E,Se,we,Re,Ke,kt),J.modelViewMatrix.multiplyMatrices(we.matrixWorldInverse,J.matrixWorld),J.normalMatrix.getNormalMatrix(J.modelViewMatrix),J.isImmediateRenderObject){const At=ns(we,Se,Ke,J);V.setMaterial(Ke),ke.reset(),Ue(J,At)}else E.renderBufferDirect(we,Se,Re,Ke,J,kt);J.onAfterRender(E,Se,we,Re,Ke,kt)}function xs(J,Se,we){Se.isScene!==!0&&(Se=Oe);const Re=Z.get(J),Ke=m.state.lights,kt=m.state.shadowsArray,At=Ke.state.version,Bt=ge.getParameters(J,Ke.state,kt,Se,we),Kt=ge.getProgramCacheKey(Bt);let Mt=Re.programs;Re.environment=J.isMeshStandardMaterial?Se.environment:null,Re.fog=Se.fog,Re.envMap=j.get(J.envMap||Re.environment),Mt===void 0&&(J.addEventListener("dispose",Ht),Mt=new Map,Re.programs=Mt);let Vt=Mt.get(Kt);if(Vt!==void 0){if(Re.currentProgram===Vt&&Re.lightsStateVersion===At)return js(J,Bt),Vt}else Bt.uniforms=ge.getUniforms(J),J.onBeforeCompile(Bt,E),Vt=ge.acquireProgram(Bt,Kt),Mt.set(Kt,Vt),Re.uniforms=Bt.uniforms;const Et=Re.uniforms;(!J.isShaderMaterial&&!J.isRawShaderMaterial||J.clipping===!0)&&(Et.clippingPlanes=Ae.uniform),js(J,Bt),Re.needsLights=wl(J),Re.lightsStateVersion=At,Re.needsLights&&(Et.ambientLightColor.value=Ke.state.ambient,Et.lightProbe.value=Ke.state.probe,Et.directionalLights.value=Ke.state.directional,Et.directionalLightShadows.value=Ke.state.directionalShadow,Et.spotLights.value=Ke.state.spot,Et.spotLightShadows.value=Ke.state.spotShadow,Et.rectAreaLights.value=Ke.state.rectArea,Et.ltc_1.value=Ke.state.rectAreaLTC1,Et.ltc_2.value=Ke.state.rectAreaLTC2,Et.pointLights.value=Ke.state.point,Et.pointLightShadows.value=Ke.state.pointShadow,Et.hemisphereLights.value=Ke.state.hemi,Et.directionalShadowMap.value=Ke.state.directionalShadowMap,Et.directionalShadowMatrix.value=Ke.state.directionalShadowMatrix,Et.spotShadowMap.value=Ke.state.spotShadowMap,Et.spotShadowMatrix.value=Ke.state.spotShadowMatrix,Et.pointShadowMap.value=Ke.state.pointShadowMap,Et.pointShadowMatrix.value=Ke.state.pointShadowMatrix);const Yt=Vt.getUniforms(),jr=cl.seqWithValue(Yt.seq,Et);return Re.currentProgram=Vt,Re.uniformsList=jr,Vt}function js(J,Se){const we=Z.get(J);we.outputEncoding=Se.outputEncoding,we.instancing=Se.instancing,we.numClippingPlanes=Se.numClippingPlanes,we.numIntersection=Se.numClipIntersection,we.vertexAlphas=Se.vertexAlphas}function ns(J,Se,we,Re){Se.isScene!==!0&&(Se=Oe),se.resetTextureUnits();const Ke=Se.fog,kt=we.isMeshStandardMaterial?Se.environment:null,At=C===null?E.outputEncoding:C.texture.encoding,Bt=j.get(we.envMap||kt),Kt=we.vertexColors===!0&&Re.geometry.attributes.color&&Re.geometry.attributes.color.itemSize===4,Mt=Z.get(we),Vt=m.state.lights;if(Be===!0&&(Ce===!0||J!==I)){const yn=J===I&&we.id===b;Ae.setState(we,J,yn)}let Et=!1;we.version===Mt.__version?(Mt.needsLights&&Mt.lightsStateVersion!==Vt.state.version||Mt.outputEncoding!==At||Re.isInstancedMesh&&Mt.instancing===!1||!Re.isInstancedMesh&&Mt.instancing===!0||Mt.envMap!==Bt||we.fog&&Mt.fog!==Ke||Mt.numClippingPlanes!==void 0&&(Mt.numClippingPlanes!==Ae.numPlanes||Mt.numIntersection!==Ae.numIntersection)||Mt.vertexAlphas!==Kt)&&(Et=!0):(Et=!0,Mt.__version=we.version);let Yt=Mt.currentProgram;Et===!0&&(Yt=xs(we,Se,Re));let jr=!1,dr=!1,ki=!1;const vn=Yt.getUniforms(),zi=Mt.uniforms;if(V.useProgram(Yt.program)&&(jr=!0,dr=!0,ki=!0),we.id!==b&&(b=we.id,dr=!0),jr||I!==J){if(vn.setValue(Ee,"projectionMatrix",J.projectionMatrix),X.logarithmicDepthBuffer&&vn.setValue(Ee,"logDepthBufFC",2/(Math.log(J.far+1)/Math.LN2)),I!==J&&(I=J,dr=!0,ki=!0),we.isShaderMaterial||we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshStandardMaterial||we.envMap){const yn=vn.map.cameraPosition;yn!==void 0&&yn.setValue(Ee,ue.setFromMatrixPosition(J.matrixWorld))}(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial)&&vn.setValue(Ee,"isOrthographic",J.isOrthographicCamera===!0),(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial||we.isShadowMaterial||we.skinning)&&vn.setValue(Ee,"viewMatrix",J.matrixWorldInverse)}if(we.skinning){vn.setOptional(Ee,Re,"bindMatrix"),vn.setOptional(Ee,Re,"bindMatrixInverse");const yn=Re.skeleton;if(yn){const xo=yn.bones;if(X.floatVertexTextures){if(yn.boneTexture===null){let En=Math.sqrt(xo.length*4);En=vt.ceilPowerOfTwo(En),En=Math.max(En,4);const ar=new Float32Array(En*En*4);ar.set(yn.boneMatrices);const en=new Zf(ar,En,En,qi,gs);yn.boneMatrices=ar,yn.boneTexture=en,yn.boneTextureSize=En}vn.setValue(Ee,"boneTexture",yn.boneTexture,se),vn.setValue(Ee,"boneTextureSize",yn.boneTextureSize)}else vn.setOptional(Ee,yn,"boneMatrices")}}return(dr||Mt.receiveShadow!==Re.receiveShadow)&&(Mt.receiveShadow=Re.receiveShadow,vn.setValue(Ee,"receiveShadow",Re.receiveShadow)),dr&&(vn.setValue(Ee,"toneMappingExposure",E.toneMappingExposure),Mt.needsLights&&_l(zi,ki),Ke&&we.fog&&z.refreshFogUniforms(zi,Ke),z.refreshMaterialUniforms(zi,we,q,ee),cl.upload(Ee,Mt.uniformsList,zi,se)),we.isShaderMaterial&&we.uniformsNeedUpdate===!0&&(cl.upload(Ee,Mt.uniformsList,zi,se),we.uniformsNeedUpdate=!1),we.isSpriteMaterial&&vn.setValue(Ee,"center",Re.center),vn.setValue(Ee,"modelViewMatrix",Re.modelViewMatrix),vn.setValue(Ee,"normalMatrix",Re.normalMatrix),vn.setValue(Ee,"modelMatrix",Re.matrixWorld),Yt}function _l(J,Se){J.ambientLightColor.needsUpdate=Se,J.lightProbe.needsUpdate=Se,J.directionalLights.needsUpdate=Se,J.directionalLightShadows.needsUpdate=Se,J.pointLights.needsUpdate=Se,J.pointLightShadows.needsUpdate=Se,J.spotLights.needsUpdate=Se,J.spotLightShadows.needsUpdate=Se,J.rectAreaLights.needsUpdate=Se,J.hemisphereLights.needsUpdate=Se}function wl(J){return J.isMeshLambertMaterial||J.isMeshToonMaterial||J.isMeshPhongMaterial||J.isMeshStandardMaterial||J.isShadowMaterial||J.isShaderMaterial&&J.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return C},this.setRenderTarget=function(J,Se=0,we=0){C=J,w=Se,_=we,J&&Z.get(J).__webglFramebuffer===void 0&&se.setupRenderTarget(J);let Re=null,Ke=!1,kt=!1;if(J){const At=J.texture;(At.isDataTexture3D||At.isDataTexture2DArray)&&(kt=!0);const Bt=Z.get(J).__webglFramebuffer;J.isWebGLCubeRenderTarget?(Re=Bt[Se],Ke=!0):J.isWebGLMultisampleRenderTarget?Re=Z.get(J).__webglMultisampledFramebuffer:Re=Bt,B.copy(J.viewport),H.copy(J.scissor),D=J.scissorTest}else B.copy(te).multiplyScalar(q).floor(),H.copy($).multiplyScalar(q).floor(),D=le;if(V.bindFramebuffer(36160,Re),V.viewport(B),V.scissor(H),V.setScissorTest(D),Ke){const At=Z.get(J.texture);Ee.framebufferTexture2D(36160,36064,34069+Se,At.__webglTexture,we)}else if(kt){const At=Z.get(J.texture),Bt=Se||0;Ee.framebufferTextureLayer(36160,36064,At.__webglTexture,we||0,Bt)}},this.readRenderTargetPixels=function(J,Se,we,Re,Ke,kt,At){if(!(J&&J.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Bt=Z.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&At!==void 0&&(Bt=Bt[At]),Bt){V.bindFramebuffer(36160,Bt);try{const Kt=J.texture,Mt=Kt.format,Vt=Kt.type;if(Mt!==qi&&Ve.convert(Mt)!==Ee.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Et=Vt===tl&&(G.has("EXT_color_buffer_half_float")||X.isWebGL2&&G.has("EXT_color_buffer_float"));if(Vt!==uo&&Ve.convert(Vt)!==Ee.getParameter(35738)&&!(Vt===gs&&(X.isWebGL2||G.has("OES_texture_float")||G.has("WEBGL_color_buffer_float")))&&!Et){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ee.checkFramebufferStatus(36160)===36053?Se>=0&&Se<=J.width-Re&&we>=0&&we<=J.height-Ke&&Ee.readPixels(Se,we,Re,Ke,Ve.convert(Mt),Ve.convert(Vt),kt):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Kt=C!==null?Z.get(C).__webglFramebuffer:null;V.bindFramebuffer(36160,Kt)}}},this.copyFramebufferToTexture=function(J,Se,we=0){const Re=Math.pow(2,-we),Ke=Math.floor(Se.image.width*Re),kt=Math.floor(Se.image.height*Re),At=Ve.convert(Se.format);se.setTexture2D(Se,0),Ee.copyTexImage2D(3553,we,At,J.x,J.y,Ke,kt,0),V.unbindTexture()},this.copyTextureToTexture=function(J,Se,we,Re=0){const Ke=Se.image.width,kt=Se.image.height,At=Ve.convert(we.format),Bt=Ve.convert(we.type);se.setTexture2D(we,0),Ee.pixelStorei(37440,we.flipY),Ee.pixelStorei(37441,we.premultiplyAlpha),Ee.pixelStorei(3317,we.unpackAlignment),Se.isDataTexture?Ee.texSubImage2D(3553,Re,J.x,J.y,Ke,kt,At,Bt,Se.image.data):Se.isCompressedTexture?Ee.compressedTexSubImage2D(3553,Re,J.x,J.y,Se.mipmaps[0].width,Se.mipmaps[0].height,At,Se.mipmaps[0].data):Ee.texSubImage2D(3553,Re,J.x,J.y,At,Bt,Se.image),Re===0&&we.generateMipmaps&&Ee.generateMipmap(3553),V.unbindTexture()},this.copyTextureToTexture3D=function(J,Se,we,Re,Ke=0){if(E.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const{width:kt,height:At,data:Bt}=we.image,Kt=Ve.convert(Re.format),Mt=Ve.convert(Re.type);let Vt;if(Re.isDataTexture3D)se.setTexture3D(Re,0),Vt=32879;else if(Re.isDataTexture2DArray)se.setTexture2DArray(Re,0),Vt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Ee.pixelStorei(37440,Re.flipY),Ee.pixelStorei(37441,Re.premultiplyAlpha),Ee.pixelStorei(3317,Re.unpackAlignment);const Et=Ee.getParameter(3314),Yt=Ee.getParameter(32878),jr=Ee.getParameter(3316),dr=Ee.getParameter(3315),ki=Ee.getParameter(32877);Ee.pixelStorei(3314,kt),Ee.pixelStorei(32878,At),Ee.pixelStorei(3316,J.min.x),Ee.pixelStorei(3315,J.min.y),Ee.pixelStorei(32877,J.min.z),Ee.texSubImage3D(Vt,Ke,Se.x,Se.y,Se.z,J.max.x-J.min.x+1,J.max.y-J.min.y+1,J.max.z-J.min.z+1,Kt,Mt,Bt),Ee.pixelStorei(3314,Et),Ee.pixelStorei(32878,Yt),Ee.pixelStorei(3316,jr),Ee.pixelStorei(3315,dr),Ee.pixelStorei(32877,ki),Ke===0&&Re.generateMipmaps&&Ee.generateMipmap(Vt),V.unbindTexture()},this.initTexture=function(J){se.setTexture2D(J,0),V.unbindTexture()},this.resetState=function(){w=0,_=0,C=null,V.reset(),ke.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Hb extends dn{}Hb.prototype.isWebGL1Renderer=!0;class Pp{constructor(e,t=25e-5){this.name="",this.color=new je(e),this.density=t}clone(){return new Pp(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Pp.prototype.isFogExp2=!0;class Ip{constructor(e,t=1,r=1e3){this.name="",this.color=new je(e),this.near=t,this.far=r}clone(){return new Ip(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Ip.prototype.isFog=!0;class Fp extends mt{constructor(){super();this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.background!==null&&(t.object.background=this.background.toJSON(e)),this.environment!==null&&(t.object.environment=this.environment.toJSON(e)),this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}Fp.prototype.isScene=!0;function li(n,e){this.array=n,this.stride=e,this.count=n!==void 0?n.length/e:0,this.usage=Of,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=vt.generateUUID()}Object.defineProperty(li.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});Object.assign(li.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(n){return this.usage=n,this},copy:function(n){return this.array=new n.array.constructor(n.array),this.count=n.count,this.stride=n.stride,this.usage=n.usage,this},copyAt:function(n,e,t){n*=this.stride,t*=e.stride;for(let r=0,i=this.stride;r<i;r++)this.array[n+r]=e.array[t+r];return this},set:function(n,e=0){return this.array.set(n,e),this},clone:function(n){n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vt.generateUUID()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(n.arrayBuffers[this.array.buffer._uuid]),t=new li(e,this.stride);return t.setUsage(this.usage),t},onUpload:function(n){return this.onUploadCallback=n,this},toJSON:function(n){return n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vt.generateUUID()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const ir=new U;function mo(n,e,t,r){this.name="",this.data=n,this.itemSize=e,this.offset=t,this.normalized=r===!0}Object.defineProperties(mo.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(n){this.data.needsUpdate=n}}});Object.assign(mo.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(n){for(let e=0,t=this.data.count;e<t;e++)ir.x=this.getX(e),ir.y=this.getY(e),ir.z=this.getZ(e),ir.applyMatrix4(n),this.setXYZ(e,ir.x,ir.y,ir.z);return this},applyNormalMatrix:function(n){for(let e=0,t=this.count;e<t;e++)ir.x=this.getX(e),ir.y=this.getY(e),ir.z=this.getZ(e),ir.applyNormalMatrix(n),this.setXYZ(e,ir.x,ir.y,ir.z);return this},transformDirection:function(n){for(let e=0,t=this.count;e<t;e++)ir.x=this.getX(e),ir.y=this.getY(e),ir.z=this.getZ(e),ir.transformDirection(n),this.setXYZ(e,ir.x,ir.y,ir.z);return this},setX:function(n,e){return this.data.array[n*this.data.stride+this.offset]=e,this},setY:function(n,e){return this.data.array[n*this.data.stride+this.offset+1]=e,this},setZ:function(n,e){return this.data.array[n*this.data.stride+this.offset+2]=e,this},setW:function(n,e){return this.data.array[n*this.data.stride+this.offset+3]=e,this},getX:function(n){return this.data.array[n*this.data.stride+this.offset]},getY:function(n){return this.data.array[n*this.data.stride+this.offset+1]},getZ:function(n){return this.data.array[n*this.data.stride+this.offset+2]},getW:function(n){return this.data.array[n*this.data.stride+this.offset+3]},setXY:function(n,e,t){return n=n*this.data.stride+this.offset,this.data.array[n+0]=e,this.data.array[n+1]=t,this},setXYZ:function(n,e,t,r){return n=n*this.data.stride+this.offset,this.data.array[n+0]=e,this.data.array[n+1]=t,this.data.array[n+2]=r,this},setXYZW:function(n,e,t,r,i){return n=n*this.data.stride+this.offset,this.data.array[n+0]=e,this.data.array[n+1]=t,this.data.array[n+2]=r,this.data.array[n+3]=i,this},clone:function(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const r=t*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)e.push(this.data.array[r+i])}return new dt(new this.array.constructor(e),this.itemSize,this.normalized)}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.clone(n)),new mo(n.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const r=t*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)e.push(this.data.array[r+i])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.toJSON(n)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});class Zv extends fn{constructor(e){super();this.type="SpriteMaterial",this.color=new je(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}Zv.prototype.isSpriteMaterial=!0;let td;const Dp=new U,nd=new U,rd=new U,id=new Pe,Op=new Pe,Ub=new lt,$v=new U,Np=new U,ey=new U,kb=new Pe,$w=new Pe,zb=new Pe;class ty extends mt{constructor(e){super();if(this.type="Sprite",td===void 0){td=new ut;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new li(t,5);td.setIndex([0,1,2,0,2,3]),td.setAttribute("position",new mo(r,3,0,!1)),td.setAttribute("uv",new mo(r,2,3,!1))}this.geometry=td,this.material=e!==void 0?e:new Zv,this.center=new Pe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),nd.setFromMatrixScale(this.matrixWorld),Ub.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),rd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&nd.multiplyScalar(-rd.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;ny($v.set(-.5,-.5,0),rd,o,nd,i,s),ny(Np.set(.5,-.5,0),rd,o,nd,i,s),ny(ey.set(.5,.5,0),rd,o,nd,i,s),kb.set(0,0),$w.set(1,0),zb.set(1,1);let l=e.ray.intersectTriangle($v,Np,ey,!1,Dp);if(l===null&&(ny(Np.set(-.5,.5,0),rd,o,nd,i,s),$w.set(0,1),l=e.ray.intersectTriangle($v,ey,Np,!1,Dp),l===null))return;const c=e.ray.origin.distanceTo(Dp);c<e.near||c>e.far||t.push({distance:c,point:Dp.clone(),uv:rr.getUV(Dp,$v,Np,ey,kb,$w,zb,new Pe),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}ty.prototype.isSprite=!0;function ny(n,e,t,r,i,s){id.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Op.x=s*id.x-i*id.y,Op.y=i*id.x+s*id.y):Op.copy(id),n.copy(e),n.x+=Op.x,n.y+=Op.y,n.applyMatrix4(Ub)}const ry=new U,Wb=new U;class Vb extends mt{constructor(){super();this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i&&!(e<t[r].distance);r++);return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){ry.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(ry);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){ry.setFromMatrixPosition(e.matrixWorld),Wb.setFromMatrixPosition(this.matrixWorld);const r=ry.distanceTo(Wb)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s&&r>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}const Jb=new U,jb=new on,Xb=new on,CU=new U,Kb=new lt;function Gu(n,e){pn.call(this,n,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new lt,this.bindMatrixInverse=new lt}Gu.prototype=Object.assign(Object.create(pn.prototype),{constructor:Gu,isSkinnedMesh:!0,copy:function(n){return pn.prototype.copy.call(this,n),this.bindMode=n.bindMode,this.bindMatrix.copy(n.bindMatrix),this.bindMatrixInverse.copy(n.bindMatrixInverse),this.skeleton=n.skeleton,this},bind:function(n,e){this.skeleton=n,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const n=new on,e=this.geometry.attributes.skinWeight;for(let t=0,r=e.count;t<r;t++){n.x=e.getX(t),n.y=e.getY(t),n.z=e.getZ(t),n.w=e.getW(t);const i=1/n.manhattanLength();i!==1/0?n.multiplyScalar(i):n.set(1,0,0,0),e.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(n){pn.prototype.updateMatrixWorld.call(this,n),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(n,e){const t=this.skeleton,r=this.geometry;jb.fromBufferAttribute(r.attributes.skinIndex,n),Xb.fromBufferAttribute(r.attributes.skinWeight,n),Jb.fromBufferAttribute(r.attributes.position,n).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let i=0;i<4;i++){const s=Xb.getComponent(i);if(s!==0){const o=jb.getComponent(i);Kb.multiplyMatrices(t.bones[o].matrixWorld,t.boneInverses[o]),e.addScaledVector(CU.copy(Jb).applyMatrix4(Kb),s)}}return e.applyMatrix4(this.bindMatrixInverse)}});function Hu(){mt.call(this),this.type="Bone"}Hu.prototype=Object.assign(Object.create(mt.prototype),{constructor:Hu,isBone:!0});const Yb=new lt,bU=new lt;class sd{constructor(e=[],t=[]){this.uuid=vt.generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new lt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new lt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:bU;Yb.multiplyMatrices(l,t[s]),Yb.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new sd(this.bones,this.boneInverses)}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Hu),this.bones.push(o),this.boneInverses.push(new lt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const l=r[i];e.boneInverses.push(l.toArray())}return e}}const qb=new lt,Qb=new lt,iy=[],Gp=new pn;function sy(n,e,t){pn.call(this,n,e),this.instanceMatrix=new dt(new Float32Array(t*16),16),this.instanceColor=null,this.count=t,this.frustumCulled=!1}sy.prototype=Object.assign(Object.create(pn.prototype),{constructor:sy,isInstancedMesh:!0,copy:function(n){return pn.prototype.copy.call(this,n),this.instanceMatrix.copy(n.instanceMatrix),n.instanceColor!==null&&(this.instanceColor=n.instanceColor.clone()),this.count=n.count,this},getColorAt:function(n,e){e.fromArray(this.instanceColor.array,n*3)},getMatrixAt:function(n,e){e.fromArray(this.instanceMatrix.array,n*16)},raycast:function(n,e){const t=this.matrixWorld,r=this.count;if(Gp.geometry=this.geometry,Gp.material=this.material,Gp.material!==void 0)for(let i=0;i<r;i++){this.getMatrixAt(i,qb),Qb.multiplyMatrices(t,qb),Gp.matrixWorld=Qb,Gp.raycast(n,iy);for(let s=0,o=iy.length;s<o;s++){const l=iy[s];l.instanceId=i,l.object=this,e.push(l)}iy.length=0}},setColorAt:function(n,e){this.instanceColor===null&&(this.instanceColor=new dt(new Float32Array(this.count*3),3)),e.toArray(this.instanceColor.array,n*3)},setMatrixAt:function(n,e){e.toArray(this.instanceMatrix.array,n*16)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});class fr extends fn{constructor(e){super();this.type="LineBasicMaterial",this.color=new je(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this}}fr.prototype.isLineBasicMaterial=!0;const Zb=new U,$b=new U,eL=new lt,eA=new sl,oy=new fo;function es(n=new ut,e=new fr){mt.call(this),this.type="Line",this.geometry=n,this.material=e,this.updateMorphTargets()}es.prototype=Object.assign(Object.create(mt.prototype),{constructor:es,isLine:!0,copy:function(n){return mt.prototype.copy.call(this,n),this.material=n.material,this.geometry=n.geometry,this},computeLineDistances:function(){const n=this.geometry;if(n.isBufferGeometry)if(n.index===null){const e=n.attributes.position,t=[0];for(let r=1,i=e.count;r<i;r++)Zb.fromBufferAttribute(e,r-1),$b.fromBufferAttribute(e,r),t[r]=t[r-1],t[r]+=Zb.distanceTo($b);n.setAttribute("lineDistance",new st(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else n.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(n,e){const t=this.geometry,r=this.matrixWorld,i=n.params.Line.threshold,s=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),oy.copy(t.boundingSphere),oy.applyMatrix4(r),oy.radius+=i,n.ray.intersectsSphere(oy)===!1)return;eL.copy(r).invert(),eA.copy(n.ray).applyMatrix4(eL);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=new U,h=new U,v=new U,p=new U,m=this.isLineSegments?2:1;if(t.isBufferGeometry){const x=t.index,E=t.attributes.position;if(x!==null){const M=Math.max(0,s.start),w=Math.min(x.count,s.start+s.count);for(let _=M,C=w-1;_<C;_+=m){const b=x.getX(_),I=x.getX(_+1);if(c.fromBufferAttribute(E,b),h.fromBufferAttribute(E,I),eA.distanceSqToSegment(c,h,p,v)>l)continue;p.applyMatrix4(this.matrixWorld);const H=n.ray.origin.distanceTo(p);H<n.near||H>n.far||e.push({distance:H,point:v.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const M=Math.max(0,s.start),w=Math.min(E.count,s.start+s.count);for(let _=M,C=w-1;_<C;_+=m){if(c.fromBufferAttribute(E,_),h.fromBufferAttribute(E,_+1),eA.distanceSqToSegment(c,h,p,v)>l)continue;p.applyMatrix4(this.matrixWorld);const I=n.ray.origin.distanceTo(p);I<n.near||I>n.far||e.push({distance:I,point:v.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else t.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const n=this.geometry;if(n.isBufferGeometry){const e=n.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{const e=n.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const tL=new U,nL=new U;function Jr(n,e){es.call(this,n,e),this.type="LineSegments"}Jr.prototype=Object.assign(Object.create(es.prototype),{constructor:Jr,isLineSegments:!0,computeLineDistances:function(){const n=this.geometry;if(n.isBufferGeometry)if(n.index===null){const e=n.attributes.position,t=[];for(let r=0,i=e.count;r<i;r+=2)tL.fromBufferAttribute(e,r),nL.fromBufferAttribute(e,r+1),t[r]=r===0?0:t[r-1],t[r+1]=t[r]+tL.distanceTo(nL);n.setAttribute("lineDistance",new st(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else n.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});class Hp extends es{constructor(e,t){super(e,t);this.type="LineLoop"}}Hp.prototype.isLineLoop=!0;class ha extends fn{constructor(e){super();this.type="PointsMaterial",this.color=new je(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this}}ha.prototype.isPointsMaterial=!0;const rL=new lt,tA=new sl,ay=new fo,ly=new U;function fl(n=new ut,e=new ha){mt.call(this),this.type="Points",this.geometry=n,this.material=e,this.updateMorphTargets()}fl.prototype=Object.assign(Object.create(mt.prototype),{constructor:fl,isPoints:!0,copy:function(n){return mt.prototype.copy.call(this,n),this.material=n.material,this.geometry=n.geometry,this},raycast:function(n,e){const t=this.geometry,r=this.matrixWorld,i=n.params.Points.threshold,s=t.drawRange;if(t.boundingSphere===null&&t.computeBoundingSphere(),ay.copy(t.boundingSphere),ay.applyMatrix4(r),ay.radius+=i,n.ray.intersectsSphere(ay)===!1)return;rL.copy(r).invert(),tA.copy(n.ray).applyMatrix4(rL);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o;if(t.isBufferGeometry){const c=t.index,v=t.attributes.position;if(c!==null){const p=Math.max(0,s.start),m=Math.min(c.count,s.start+s.count);for(let x=p,A=m;x<A;x++){const E=c.getX(x);ly.fromBufferAttribute(v,E),iL(ly,E,l,r,n,e,this)}}else{const p=Math.max(0,s.start),m=Math.min(v.count,s.start+s.count);for(let x=p,A=m;x<A;x++)ly.fromBufferAttribute(v,x),iL(ly,x,l,r,n,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const n=this.geometry;if(n.isBufferGeometry){const e=n.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{const e=n.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function iL(n,e,t,r,i,s,o){const l=tA.distanceSqToPoint(n);if(l<t){const c=new U;tA.closestPointToPoint(n,c),c.applyMatrix4(r);const h=i.ray.origin.distanceTo(c);if(h<i.near||h>i.far)return;s.push({distance:h,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,object:o})}}class sL extends nr{constructor(e,t,r,i,s,o,l,c,h){super(e,t,r,i,s,o,l,c,h);this.format=l!==void 0?l:vs,this.minFilter=o!==void 0?o:An,this.magFilter=s!==void 0?s:An,this.generateMipmaps=!1;const v=this;function p(){v.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}sL.prototype.isVideoTexture=!0;class nA extends nr{constructor(e,t,r,i,s,o,l,c,h,v,p,m){super(null,o,l,c,h,v,i,s,p,m);this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}nA.prototype.isCompressedTexture=!0;class rA extends nr{constructor(e,t,r,i,s,o,l,c,h){super(e,t,r,i,s,o,l,c,h);this.needsUpdate=!0}}rA.prototype.isCanvasTexture=!0;class oL extends nr{constructor(e,t,r,i,s,o,l,c,h,v){if(v=v!==void 0?v:Tu,v!==Tu&&v!==Df)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&v===Tu&&(r=cp),r===void 0&&v===Df&&(r=Ff);super(null,i,s,o,l,c,v,r,h);this.image={width:e,height:t},this.magFilter=l!==void 0?l:Un,this.minFilter=c!==void 0?c:Un,this.flipY=!1,this.generateMipmaps=!1}}oL.prototype.isDepthTexture=!0;class uy extends ut{constructor(e=1,t=8,r=0,i=Math.PI*2){super();this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],l=[],c=[],h=new U,v=new Pe;o.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let p=0,m=3;p<=t;p++,m+=3){const x=r+p/t*i;h.x=e*Math.cos(x),h.y=e*Math.sin(x),o.push(h.x,h.y,h.z),l.push(0,0,1),v.x=(o[m]/e+1)/2,v.y=(o[m+1]/e+1)/2,c.push(v.x,v.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new st(o,3)),this.setAttribute("normal",new st(l,3)),this.setAttribute("uv",new st(c,2))}}class od extends ut{constructor(e=1,t=1,r=1,i=8,s=1,o=!1,l=0,c=Math.PI*2){super();this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c};const h=this;i=Math.floor(i),s=Math.floor(s);const v=[],p=[],m=[],x=[];let A=0;const E=[],M=r/2;let w=0;_(),o===!1&&(e>0&&C(!0),t>0&&C(!1)),this.setIndex(v),this.setAttribute("position",new st(p,3)),this.setAttribute("normal",new st(m,3)),this.setAttribute("uv",new st(x,2));function _(){const b=new U,I=new U;let B=0;const H=(t-e)/r;for(let D=0;D<=s;D++){const O=[],ee=D/s,q=ee*(t-e)+e;for(let fe=0;fe<=i;fe++){const ne=fe/i,te=ne*c+l,$=Math.sin(te),le=Math.cos(te);I.x=q*$,I.y=-ee*r+M,I.z=q*le,p.push(I.x,I.y,I.z),b.set($,H,le).normalize(),m.push(b.x,b.y,b.z),x.push(ne,1-ee),O.push(A++)}E.push(O)}for(let D=0;D<i;D++)for(let O=0;O<s;O++){const ee=E[O][D],q=E[O+1][D],fe=E[O+1][D+1],ne=E[O][D+1];v.push(ee,q,ne),v.push(q,fe,ne),B+=6}h.addGroup(w,B,0),w+=B}function C(b){const I=A,B=new Pe,H=new U;let D=0;const O=b===!0?e:t,ee=b===!0?1:-1;for(let fe=1;fe<=i;fe++)p.push(0,M*ee,0),m.push(0,ee,0),x.push(.5,.5),A++;const q=A;for(let fe=0;fe<=i;fe++){const te=fe/i*c+l,$=Math.cos(te),le=Math.sin(te);H.x=O*le,H.y=M*ee,H.z=O*$,p.push(H.x,H.y,H.z),m.push(0,ee,0),B.x=$*.5+.5,B.y=le*.5*ee+.5,x.push(B.x,B.y),A++}for(let fe=0;fe<i;fe++){const ne=I+fe,te=q+fe;b===!0?v.push(te,te+1,ne):v.push(te+1,te,ne),D+=3}h.addGroup(w,D,b===!0?1:2),w+=D}}}class cy extends od{constructor(e=1,t=1,r=8,i=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,r,i,s,o,l);this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:l}}}class dl extends ut{constructor(e,t,r=1,i=0){super();this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];l(i),h(r),v(),this.setAttribute("position",new st(s,3)),this.setAttribute("normal",new st(s.slice(),3)),this.setAttribute("uv",new st(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function l(_){const C=new U,b=new U,I=new U;for(let B=0;B<t.length;B+=3)x(t[B+0],C),x(t[B+1],b),x(t[B+2],I),c(C,b,I,_)}function c(_,C,b,I){const B=I+1,H=[];for(let D=0;D<=B;D++){H[D]=[];const O=_.clone().lerp(b,D/B),ee=C.clone().lerp(b,D/B),q=B-D;for(let fe=0;fe<=q;fe++)fe===0&&D===B?H[D][fe]=O:H[D][fe]=O.clone().lerp(ee,fe/q)}for(let D=0;D<B;D++)for(let O=0;O<2*(B-D)-1;O++){const ee=Math.floor(O/2);O%2==0?(m(H[D][ee+1]),m(H[D+1][ee]),m(H[D][ee])):(m(H[D][ee+1]),m(H[D+1][ee+1]),m(H[D+1][ee]))}}function h(_){const C=new U;for(let b=0;b<s.length;b+=3)C.x=s[b+0],C.y=s[b+1],C.z=s[b+2],C.normalize().multiplyScalar(_),s[b+0]=C.x,s[b+1]=C.y,s[b+2]=C.z}function v(){const _=new U;for(let C=0;C<s.length;C+=3){_.x=s[C+0],_.y=s[C+1],_.z=s[C+2];const b=M(_)/2/Math.PI+.5,I=w(_)/Math.PI+.5;o.push(b,1-I)}A(),p()}function p(){for(let _=0;_<o.length;_+=6){const C=o[_+0],b=o[_+2],I=o[_+4],B=Math.max(C,b,I),H=Math.min(C,b,I);B>.9&&H<.1&&(C<.2&&(o[_+0]+=1),b<.2&&(o[_+2]+=1),I<.2&&(o[_+4]+=1))}}function m(_){s.push(_.x,_.y,_.z)}function x(_,C){const b=_*3;C.x=e[b+0],C.y=e[b+1],C.z=e[b+2]}function A(){const _=new U,C=new U,b=new U,I=new U,B=new Pe,H=new Pe,D=new Pe;for(let O=0,ee=0;O<s.length;O+=9,ee+=6){_.set(s[O+0],s[O+1],s[O+2]),C.set(s[O+3],s[O+4],s[O+5]),b.set(s[O+6],s[O+7],s[O+8]),B.set(o[ee+0],o[ee+1]),H.set(o[ee+2],o[ee+3]),D.set(o[ee+4],o[ee+5]),I.copy(_).add(C).add(b).divideScalar(3);const q=M(I);E(B,ee+0,_,q),E(H,ee+2,C,q),E(D,ee+4,b,q)}}function E(_,C,b,I){I<0&&_.x===1&&(o[C]=_.x-1),b.x===0&&b.z===0&&(o[C]=I/2/Math.PI+.5)}function M(_){return Math.atan2(_.z,-_.x)}function w(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}}class fy extends dl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t);this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}}const dy=new U,hy=new U,iA=new U,py=new rr;class sA extends ut{constructor(e,t){super();if(this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=t!==void 0?t:1,e.isGeometry===!0){console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return}const i=Math.pow(10,4),s=Math.cos(vt.DEG2RAD*t),o=e.getIndex(),l=e.getAttribute("position"),c=o?o.count:l.count,h=[0,0,0],v=["a","b","c"],p=new Array(3),m={},x=[];for(let A=0;A<c;A+=3){o?(h[0]=o.getX(A),h[1]=o.getX(A+1),h[2]=o.getX(A+2)):(h[0]=A,h[1]=A+1,h[2]=A+2);const{a:E,b:M,c:w}=py;if(E.fromBufferAttribute(l,h[0]),M.fromBufferAttribute(l,h[1]),w.fromBufferAttribute(l,h[2]),py.getNormal(iA),p[0]=`${Math.round(E.x*i)},${Math.round(E.y*i)},${Math.round(E.z*i)}`,p[1]=`${Math.round(M.x*i)},${Math.round(M.y*i)},${Math.round(M.z*i)}`,p[2]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let _=0;_<3;_++){const C=(_+1)%3,b=p[_],I=p[C],B=py[v[_]],H=py[v[C]],D=`${b}_${I}`,O=`${I}_${b}`;O in m&&m[O]?(iA.dot(m[O].normal)<=s&&(x.push(B.x,B.y,B.z),x.push(H.x,H.y,H.z)),m[O]=null):D in m||(m[D]={index0:h[_],index1:h[C],normal:iA.clone()})}}for(const A in m)if(m[A]){const{index0:E,index1:M}=m[A];dy.fromBufferAttribute(l,E),hy.fromBufferAttribute(l,M),x.push(dy.x,dy.y,dy.z),x.push(hy.x,hy.y,hy.z)}this.setAttribute("position",new st(x,3))}}const LU={triangulate:function(n,e,t){t=t||2;const r=e&&e.length,i=r?e[0]*t:n.length;let s=aL(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,c,h,v,p,m,x;if(r&&(s=FU(n,e,s,t)),n.length>80*t){l=h=n[0],c=v=n[1];for(let A=t;A<i;A+=t)p=n[A],m=n[A+1],p<l&&(l=p),m<c&&(c=m),p>h&&(h=p),m>v&&(v=m);x=Math.max(h-l,v-c),x=x!==0?1/x:0}return Up(s,o,t,l,c,x),o}};function aL(n,e,t,r,i){let s,o;if(i===JU(n,e,t,r)>0)for(s=e;s<t;s+=r)o=cL(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=cL(s,n[s],n[s+1],o);return o&&my(o,o.next)&&(zp(o),o=o.next),o}function hl(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(my(t,t.next)||kn(t.prev,t,t.next)===0)){if(zp(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Up(n,e,t,r,i,s,o){if(!n)return;!o&&s&&HU(n,r,i,s);let l=n,c,h;for(;n.prev!==n.next;){if(c=n.prev,h=n.next,s?RU(n,r,i,s):BU(n)){e.push(c.i/t),e.push(n.i/t),e.push(h.i/t),zp(n),n=h.next,l=h.next;continue}if(n=h,n===l){o?o===1?(n=PU(hl(n),e,t),Up(n,e,t,r,i,s,2)):o===2&&IU(n,e,t,r,i,s):Up(hl(n),e,t,r,i,s,1);break}}}function BU(n){const e=n.prev,t=n,r=n.next;if(kn(e,t,r)>=0)return!1;let i=n.next.next;for(;i!==n.prev;){if(ad(e.x,e.y,t.x,t.y,r.x,r.y,i.x,i.y)&&kn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function RU(n,e,t,r){const i=n.prev,s=n,o=n.next;if(kn(i,s,o)>=0)return!1;const l=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,c=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,h=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,v=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,p=oA(l,c,e,t,r),m=oA(h,v,e,t,r);let x=n.prevZ,A=n.nextZ;for(;x&&x.z>=p&&A&&A.z<=m;){if(x!==n.prev&&x!==n.next&&ad(i.x,i.y,s.x,s.y,o.x,o.y,x.x,x.y)&&kn(x.prev,x,x.next)>=0||(x=x.prevZ,A!==n.prev&&A!==n.next&&ad(i.x,i.y,s.x,s.y,o.x,o.y,A.x,A.y)&&kn(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;x&&x.z>=p;){if(x!==n.prev&&x!==n.next&&ad(i.x,i.y,s.x,s.y,o.x,o.y,x.x,x.y)&&kn(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;A&&A.z<=m;){if(A!==n.prev&&A!==n.next&&ad(i.x,i.y,s.x,s.y,o.x,o.y,A.x,A.y)&&kn(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function PU(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!my(i,s)&&lL(i,r,r.next,s)&&kp(i,s)&&kp(s,i)&&(e.push(i.i/t),e.push(r.i/t),e.push(s.i/t),zp(r),zp(r.next),r=n=s),r=r.next}while(r!==n);return hl(r)}function IU(n,e,t,r,i,s){let o=n;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&zU(o,l)){let c=uL(o,l);o=hl(o,o.next),c=hl(c,c.next),Up(o,e,t,r,i,s),Up(c,e,t,r,i,s);return}l=l.next}o=o.next}while(o!==n)}function FU(n,e,t,r){const i=[];let s,o,l,c,h;for(s=0,o=e.length;s<o;s++)l=e[s]*r,c=s<o-1?e[s+1]*r:n.length,h=aL(n,l,c,r,!1),h===h.next&&(h.steiner=!0),i.push(kU(h));for(i.sort(DU),s=0;s<i.length;s++)OU(i[s],t),t=hl(t,t.next);return t}function DU(n,e){return n.x-e.x}function OU(n,e){if(e=NU(n,e),e){const t=uL(e,n);hl(e,e.next),hl(t,t.next)}}function NU(n,e){let t=e;const r=n.x,i=n.y;let s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const m=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=r&&m>s){if(s=m,m===r){if(i===t.y)return t;if(i===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(r===s)return o;const l=o,c=o.x,h=o.y;let v=1/0,p;t=o;do r>=t.x&&t.x>=c&&r!==t.x&&ad(i<h?r:s,i,c,h,i<h?s:r,i,t.x,t.y)&&(p=Math.abs(i-t.y)/(r-t.x),kp(t,n)&&(p<v||p===v&&(t.x>o.x||t.x===o.x&&GU(o,t)))&&(o=t,v=p)),t=t.next;while(t!==l);return o}function GU(n,e){return kn(n.prev,n,e.prev)<0&&kn(e.next,n,n.next)<0}function HU(n,e,t,r){let i=n;do i.z===null&&(i.z=oA(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,UU(i)}function UU(n){let e,t,r,i,s,o,l,c,h=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,l=0,e=0;e<h&&(l++,r=r.nextZ,!!r);e++);for(c=h;l>0||c>0&&r;)l!==0&&(c===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,l--):(i=r,r=r.nextZ,c--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,h*=2}while(o>1);return n}function oA(n,e,t,r,i){return n=32767*(n-t)*i,e=32767*(e-r)*i,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function kU(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function ad(n,e,t,r,i,s,o,l){return(i-o)*(e-l)-(n-o)*(s-l)>=0&&(n-o)*(r-l)-(t-o)*(e-l)>=0&&(t-o)*(s-l)-(i-o)*(r-l)>=0}function zU(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!WU(n,e)&&(kp(n,e)&&kp(e,n)&&VU(n,e)&&(kn(n.prev,n,e.prev)||kn(n,e.prev,e))||my(n,e)&&kn(n.prev,n,n.next)>0&&kn(e.prev,e,e.next)>0)}function kn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function my(n,e){return n.x===e.x&&n.y===e.y}function lL(n,e,t,r){const i=vy(kn(n,e,t)),s=vy(kn(n,e,r)),o=vy(kn(t,r,n)),l=vy(kn(t,r,e));return!!(i!==s&&o!==l||i===0&&gy(n,t,e)||s===0&&gy(n,r,e)||o===0&&gy(t,n,r)||l===0&&gy(t,e,r))}function gy(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function vy(n){return n>0?1:n<0?-1:0}function WU(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&lL(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function kp(n,e){return kn(n.prev,n,n.next)<0?kn(n,e,n.next)>=0&&kn(n,n.prev,e)>=0:kn(n,e,n.prev)<0||kn(n,n.next,e)<0}function VU(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function uL(n,e){const t=new aA(n.i,n.x,n.y),r=new aA(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function cL(n,e,t,r){const i=new aA(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function zp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function aA(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function JU(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}const pa={area:function(n){const e=n.length;let t=0;for(let r=e-1,i=0;i<e;r=i++)t+=n[r].x*n[i].y-n[i].x*n[r].y;return t*.5},isClockWise:function(n){return pa.area(n)<0},triangulateShape:function(n,e){const t=[],r=[],i=[];fL(n),dL(t,n);let s=n.length;e.forEach(fL);for(let l=0;l<e.length;l++)r.push(s),s+=e[l].length,dL(t,e[l]);const o=LU.triangulate(t,r);for(let l=0;l<o.length;l+=3)i.push(o.slice(l,l+3));return i}};function fL(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function dL(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class ma extends ut{constructor(e,t){super();this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let l=0,c=e.length;l<c;l++){const h=e[l];o(h)}this.setAttribute("position",new st(i,3)),this.setAttribute("uv",new st(s,2)),this.computeVertexNormals();function o(l){const c=[],h=t.curveSegments!==void 0?t.curveSegments:12,v=t.steps!==void 0?t.steps:1;let p=t.depth!==void 0?t.depth:100,m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:6,A=t.bevelSize!==void 0?t.bevelSize:x-2,E=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const w=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:jU;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),p=t.amount);let C,b=!1,I,B,H,D;w&&(C=w.getSpacedPoints(v),b=!0,m=!1,I=w.computeFrenetFrames(v,!1),B=new U,H=new U,D=new U),m||(M=0,x=0,A=0,E=0);const O=l.extractPoints(h);let ee=O.shape;const q=O.holes;if(!pa.isClockWise(ee)){ee=ee.reverse();for(let j=0,re=q.length;j<re;j++){const ae=q[j];pa.isClockWise(ae)&&(q[j]=ae.reverse())}}const ne=pa.triangulateShape(ee,q),te=ee;for(let j=0,re=q.length;j<re;j++){const ae=q[j];ee=ee.concat(ae)}function $(j,re,ae){return re||console.error("THREE.ExtrudeGeometry: vec does not exist"),re.clone().multiplyScalar(ae).add(j)}const le=ee.length,_e=ne.length;function Be(j,re,ae){let ye,ge,z;const W=j.x-re.x,ve=j.y-re.y,Ae=ae.x-j.x,Ne=ae.y-j.y,We=W*W+ve*ve,Ye=W*Ne-ve*Ae;if(Math.abs(Ye)>Number.EPSILON){const tt=Math.sqrt(We),oe=Math.sqrt(Ae*Ae+Ne*Ne),Ve=re.x-ve/tt,ke=re.y+W/tt,Qe=ae.x-Ne/oe,Ie=ae.y+Ae/oe,rt=((Qe-Ve)*Ne-(Ie-ke)*Ae)/(W*Ne-ve*Ae);ye=Ve+W*rt-j.x,ge=ke+ve*rt-j.y;const It=ye*ye+ge*ge;if(It<=2)return new Pe(ye,ge);z=Math.sqrt(It/2)}else{let tt=!1;W>Number.EPSILON?Ae>Number.EPSILON&&(tt=!0):W<-Number.EPSILON?Ae<-Number.EPSILON&&(tt=!0):Math.sign(ve)===Math.sign(Ne)&&(tt=!0),tt?(ye=-ve,ge=W,z=Math.sqrt(We)):(ye=W,ge=ve,z=Math.sqrt(We/2))}return new Pe(ye/z,ge/z)}const Ce=[];for(let j=0,re=te.length,ae=re-1,ye=j+1;j<re;j++,ae++,ye++)ae===re&&(ae=0),ye===re&&(ye=0),Ce[j]=Be(te[j],te[ae],te[ye]);const He=[];let ue,Oe=Ce.concat();for(let j=0,re=q.length;j<re;j++){const ae=q[j];ue=[];for(let ye=0,ge=ae.length,z=ge-1,W=ye+1;ye<ge;ye++,z++,W++)z===ge&&(z=0),W===ge&&(W=0),ue[ye]=Be(ae[ye],ae[z],ae[W]);He.push(ue),Oe=Oe.concat(ue)}for(let j=0;j<M;j++){const re=j/M,ae=x*Math.cos(re*Math.PI/2),ye=A*Math.sin(re*Math.PI/2)+E;for(let ge=0,z=te.length;ge<z;ge++){const W=$(te[ge],Ce[ge],ye);X(W.x,W.y,-ae)}for(let ge=0,z=q.length;ge<z;ge++){const W=q[ge];ue=He[ge];for(let ve=0,Ae=W.length;ve<Ae;ve++){const Ne=$(W[ve],ue[ve],ye);X(Ne.x,Ne.y,-ae)}}}const ze=A+E;for(let j=0;j<le;j++){const re=m?$(ee[j],Oe[j],ze):ee[j];b?(H.copy(I.normals[0]).multiplyScalar(re.x),B.copy(I.binormals[0]).multiplyScalar(re.y),D.copy(C[0]).add(H).add(B),X(D.x,D.y,D.z)):X(re.x,re.y,0)}for(let j=1;j<=v;j++)for(let re=0;re<le;re++){const ae=m?$(ee[re],Oe[re],ze):ee[re];b?(H.copy(I.normals[j]).multiplyScalar(ae.x),B.copy(I.binormals[j]).multiplyScalar(ae.y),D.copy(C[j]).add(H).add(B),X(D.x,D.y,D.z)):X(ae.x,ae.y,p/v*j)}for(let j=M-1;j>=0;j--){const re=j/M,ae=x*Math.cos(re*Math.PI/2),ye=A*Math.sin(re*Math.PI/2)+E;for(let ge=0,z=te.length;ge<z;ge++){const W=$(te[ge],Ce[ge],ye);X(W.x,W.y,p+ae)}for(let ge=0,z=q.length;ge<z;ge++){const W=q[ge];ue=He[ge];for(let ve=0,Ae=W.length;ve<Ae;ve++){const Ne=$(W[ve],ue[ve],ye);b?X(Ne.x,Ne.y+C[v-1].y,C[v-1].x+ae):X(Ne.x,Ne.y,p+ae)}}}Ee(),F();function Ee(){const j=i.length/3;if(m){let re=0,ae=le*re;for(let ye=0;ye<_e;ye++){const ge=ne[ye];V(ge[2]+ae,ge[1]+ae,ge[0]+ae)}re=v+M*2,ae=le*re;for(let ye=0;ye<_e;ye++){const ge=ne[ye];V(ge[0]+ae,ge[1]+ae,ge[2]+ae)}}else{for(let re=0;re<_e;re++){const ae=ne[re];V(ae[2],ae[1],ae[0])}for(let re=0;re<_e;re++){const ae=ne[re];V(ae[0]+le*v,ae[1]+le*v,ae[2]+le*v)}}r.addGroup(j,i.length/3-j,0)}function F(){const j=i.length/3;let re=0;G(te,re),re+=te.length;for(let ae=0,ye=q.length;ae<ye;ae++){const ge=q[ae];G(ge,re),re+=ge.length}r.addGroup(j,i.length/3-j,1)}function G(j,re){let ae=j.length;for(;--ae>=0;){const ye=ae;let ge=ae-1;ge<0&&(ge=j.length-1);for(let z=0,W=v+M*2;z<W;z++){const ve=le*z,Ae=le*(z+1),Ne=re+ye+ve,We=re+ge+ve,Ye=re+ge+Ae,tt=re+ye+Ae;K(Ne,We,Ye,tt)}}}function X(j,re,ae){c.push(j),c.push(re),c.push(ae)}function V(j,re,ae){Z(j),Z(re),Z(ae);const ye=i.length/3,ge=_.generateTopUV(r,i,ye-3,ye-2,ye-1);se(ge[0]),se(ge[1]),se(ge[2])}function K(j,re,ae,ye){Z(j),Z(re),Z(ye),Z(re),Z(ae),Z(ye);const ge=i.length/3,z=_.generateSideWallUV(r,i,ge-6,ge-3,ge-2,ge-1);se(z[0]),se(z[1]),se(z[3]),se(z[1]),se(z[2]),se(z[3])}function Z(j){i.push(c[j*3+0]),i.push(c[j*3+1]),i.push(c[j*3+2])}function se(j){s.push(j.x),s.push(j.y)}}}toJSON(){const e=ut.prototype.toJSON.call(this),t=this.parameters.shapes,r=this.parameters.options;return XU(t,r,e)}}const jU={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],l=e[r*3],c=e[r*3+1],h=e[i*3],v=e[i*3+1];return[new Pe(s,o),new Pe(l,c),new Pe(h,v)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],l=e[t*3+1],c=e[t*3+2],h=e[r*3],v=e[r*3+1],p=e[r*3+2],m=e[i*3],x=e[i*3+1],A=e[i*3+2],E=e[s*3],M=e[s*3+1],w=e[s*3+2];return Math.abs(l-v)<.01?[new Pe(o,1-c),new Pe(h,1-p),new Pe(m,1-A),new Pe(E,1-w)]:[new Pe(l,1-c),new Pe(v,1-p),new Pe(x,1-A),new Pe(M,1-w)]}};function XU(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class yy extends dl{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t);this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}}class xy extends ut{constructor(e,t=12,r=0,i=Math.PI*2){super();this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=vt.clamp(i,0,Math.PI*2);const s=[],o=[],l=[],c=1/t,h=new U,v=new Pe;for(let p=0;p<=t;p++){const m=r+p*c*i,x=Math.sin(m),A=Math.cos(m);for(let E=0;E<=e.length-1;E++)h.x=e[E].x*x,h.y=e[E].y,h.z=e[E].x*A,o.push(h.x,h.y,h.z),v.x=p/t,v.y=E/(e.length-1),l.push(v.x,v.y)}for(let p=0;p<t;p++)for(let m=0;m<e.length-1;m++){const x=m+p*e.length,A=x,E=x+e.length,M=x+e.length+1,w=x+1;s.push(A,E,w),s.push(E,M,w)}if(this.setIndex(s),this.setAttribute("position",new st(o,3)),this.setAttribute("uv",new st(l,2)),this.computeVertexNormals(),i===Math.PI*2){const p=this.attributes.normal.array,m=new U,x=new U,A=new U,E=t*e.length*3;for(let M=0,w=0;M<e.length;M++,w+=3)m.x=p[w+0],m.y=p[w+1],m.z=p[w+2],x.x=p[E+w+0],x.y=p[E+w+1],x.z=p[E+w+2],A.addVectors(m,x).normalize(),p[w+0]=p[E+w+0]=A.x,p[w+1]=p[E+w+1]=A.y,p[w+2]=p[E+w+2]=A.z}}}class Wp extends dl{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t);this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}}function Uu(n,e,t){ut.call(this),this.type="ParametricGeometry",this.parameters={func:n,slices:e,stacks:t};const r=[],i=[],s=[],o=[],l=1e-5,c=new U,h=new U,v=new U,p=new U,m=new U;n.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const x=e+1;for(let A=0;A<=t;A++){const E=A/t;for(let M=0;M<=e;M++){const w=M/e;n(w,E,h),i.push(h.x,h.y,h.z),w-l>=0?(n(w-l,E,v),p.subVectors(h,v)):(n(w+l,E,v),p.subVectors(v,h)),E-l>=0?(n(w,E-l,v),m.subVectors(h,v)):(n(w,E+l,v),m.subVectors(v,h)),c.crossVectors(p,m).normalize(),s.push(c.x,c.y,c.z),o.push(w,E)}}for(let A=0;A<t;A++)for(let E=0;E<e;E++){const M=A*x+E,w=A*x+E+1,_=(A+1)*x+E+1,C=(A+1)*x+E;r.push(M,w,C),r.push(w,_,C)}this.setIndex(r),this.setAttribute("position",new st(i,3)),this.setAttribute("normal",new st(s,3)),this.setAttribute("uv",new st(o,2))}Uu.prototype=Object.create(ut.prototype);Uu.prototype.constructor=Uu;class _y extends ut{constructor(e=.5,t=1,r=8,i=1,s=0,o=Math.PI*2){super();this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const l=[],c=[],h=[],v=[];let p=e;const m=(t-e)/i,x=new U,A=new Pe;for(let E=0;E<=i;E++){for(let M=0;M<=r;M++){const w=s+M/r*o;x.x=p*Math.cos(w),x.y=p*Math.sin(w),c.push(x.x,x.y,x.z),h.push(0,0,1),A.x=(x.x/t+1)/2,A.y=(x.y/t+1)/2,v.push(A.x,A.y)}p+=m}for(let E=0;E<i;E++){const M=E*(r+1);for(let w=0;w<r;w++){const _=w+M,C=_,b=_+r+1,I=_+r+2,B=_+1;l.push(C,b,B),l.push(b,I,B)}}this.setIndex(l),this.setAttribute("position",new st(c,3)),this.setAttribute("normal",new st(h,3)),this.setAttribute("uv",new st(v,2))}}class Vp extends ut{constructor(e,t=12){super();this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let l=0,c=0;if(Array.isArray(e)===!1)h(e);else for(let v=0;v<e.length;v++)h(e[v]),this.addGroup(l,c,v),l+=c,c=0;this.setIndex(r),this.setAttribute("position",new st(i,3)),this.setAttribute("normal",new st(s,3)),this.setAttribute("uv",new st(o,2));function h(v){const p=i.length/3,m=v.extractPoints(t);let x=m.shape;const A=m.holes;pa.isClockWise(x)===!1&&(x=x.reverse());for(let M=0,w=A.length;M<w;M++){const _=A[M];pa.isClockWise(_)===!0&&(A[M]=_.reverse())}const E=pa.triangulateShape(x,A);for(let M=0,w=A.length;M<w;M++){const _=A[M];x=x.concat(_)}for(let M=0,w=x.length;M<w;M++){const _=x[M];i.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let M=0,w=E.length;M<w;M++){const _=E[M],C=_[0]+p,b=_[1]+p,I=_[2]+p;r.push(C,b,I),c+=3}}}toJSON(){const e=ut.prototype.toJSON.call(this),t=this.parameters.shapes;return KU(t,e)}}function KU(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Jp extends ut{constructor(e=1,t=8,r=6,i=0,s=Math.PI*2,o=0,l=Math.PI){super();this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const c=Math.min(o+l,Math.PI);let h=0;const v=[],p=new U,m=new U,x=[],A=[],E=[],M=[];for(let w=0;w<=r;w++){const _=[],C=w/r;let b=0;w==0&&o==0?b=.5/t:w==r&&c==Math.PI&&(b=-.5/t);for(let I=0;I<=t;I++){const B=I/t;p.x=-e*Math.cos(i+B*s)*Math.sin(o+C*l),p.y=e*Math.cos(o+C*l),p.z=e*Math.sin(i+B*s)*Math.sin(o+C*l),A.push(p.x,p.y,p.z),m.copy(p).normalize(),E.push(m.x,m.y,m.z),M.push(B+b,1-C),_.push(h++)}v.push(_)}for(let w=0;w<r;w++)for(let _=0;_<t;_++){const C=v[w][_+1],b=v[w][_],I=v[w+1][_],B=v[w+1][_+1];(w!==0||o>0)&&x.push(C,b,B),(w!==r-1||c<Math.PI)&&x.push(b,I,B)}this.setIndex(x),this.setAttribute("position",new st(A,3)),this.setAttribute("normal",new st(E,3)),this.setAttribute("uv",new st(M,2))}}class wy extends dl{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t);this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}}class Ay extends ma{constructor(e,t={}){const r=t.font;if(!(r&&r.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ut;const i=r.generateShapes(e,t.size);t.depth=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1);super(i,t);this.type="TextGeometry"}}class My extends ut{constructor(e=1,t=.4,r=8,i=6,s=Math.PI*2){super();this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],l=[],c=[],h=[],v=new U,p=new U,m=new U;for(let x=0;x<=r;x++)for(let A=0;A<=i;A++){const E=A/i*s,M=x/r*Math.PI*2;p.x=(e+t*Math.cos(M))*Math.cos(E),p.y=(e+t*Math.cos(M))*Math.sin(E),p.z=t*Math.sin(M),l.push(p.x,p.y,p.z),v.x=e*Math.cos(E),v.y=e*Math.sin(E),m.subVectors(p,v).normalize(),c.push(m.x,m.y,m.z),h.push(A/i),h.push(x/r)}for(let x=1;x<=r;x++)for(let A=1;A<=i;A++){const E=(i+1)*x+A-1,M=(i+1)*(x-1)+A-1,w=(i+1)*(x-1)+A,_=(i+1)*x+A;o.push(E,M,_),o.push(M,w,_)}this.setIndex(o),this.setAttribute("position",new st(l,3)),this.setAttribute("normal",new st(c,3)),this.setAttribute("uv",new st(h,2))}}class Ey extends ut{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super();this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const l=[],c=[],h=[],v=[],p=new U,m=new U,x=new U,A=new U,E=new U,M=new U,w=new U;for(let C=0;C<=r;++C){const b=C/r*s*Math.PI*2;_(b,s,o,e,x),_(b+.01,s,o,e,A),M.subVectors(A,x),w.addVectors(A,x),E.crossVectors(M,w),w.crossVectors(E,M),E.normalize(),w.normalize();for(let I=0;I<=i;++I){const B=I/i*Math.PI*2,H=-t*Math.cos(B),D=t*Math.sin(B);p.x=x.x+(H*w.x+D*E.x),p.y=x.y+(H*w.y+D*E.y),p.z=x.z+(H*w.z+D*E.z),c.push(p.x,p.y,p.z),m.subVectors(p,x).normalize(),h.push(m.x,m.y,m.z),v.push(C/r),v.push(I/i)}}for(let C=1;C<=r;C++)for(let b=1;b<=i;b++){const I=(i+1)*(C-1)+(b-1),B=(i+1)*C+(b-1),H=(i+1)*C+b,D=(i+1)*(C-1)+b;l.push(I,B,D),l.push(B,H,D)}this.setIndex(l),this.setAttribute("position",new st(c,3)),this.setAttribute("normal",new st(h,3)),this.setAttribute("uv",new st(v,2));function _(C,b,I,B,H){const D=Math.cos(C),O=Math.sin(C),ee=I/b*C,q=Math.cos(ee);H.x=B*(2+q)*.5*D,H.y=B*(2+q)*O*.5,H.z=B*Math.sin(ee)*.5}}}class Sy extends ut{constructor(e,t=64,r=1,i=8,s=!1){super();this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new U,c=new U,h=new Pe;let v=new U;const p=[],m=[],x=[],A=[];E(),this.setIndex(A),this.setAttribute("position",new st(p,3)),this.setAttribute("normal",new st(m,3)),this.setAttribute("uv",new st(x,2));function E(){for(let C=0;C<t;C++)M(C);M(s===!1?t:0),_(),w()}function M(C){v=e.getPointAt(C/t,v);const b=o.normals[C],I=o.binormals[C];for(let B=0;B<=i;B++){const H=B/i*Math.PI*2,D=Math.sin(H),O=-Math.cos(H);c.x=O*b.x+D*I.x,c.y=O*b.y+D*I.y,c.z=O*b.z+D*I.z,c.normalize(),m.push(c.x,c.y,c.z),l.x=v.x+r*c.x,l.y=v.y+r*c.y,l.z=v.z+r*c.z,p.push(l.x,l.y,l.z)}}function w(){for(let C=1;C<=t;C++)for(let b=1;b<=i;b++){const I=(i+1)*(C-1)+(b-1),B=(i+1)*C+(b-1),H=(i+1)*C+b,D=(i+1)*(C-1)+b;A.push(I,B,D),A.push(B,H,D)}}function _(){for(let C=0;C<=t;C++)for(let b=0;b<=i;b++)h.x=C/t,h.y=b/i,x.push(h.x,h.y)}}toJSON(){const e=ut.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e}}class lA extends ut{constructor(e){super();if(this.type="WireframeGeometry",e.isGeometry===!0){console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return}const t=[],r=[0,0],i={},s=new U;if(e.index!==null){const o=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let h=0,v=c.length;h<v;++h){const p=c[h],m=p.start,x=p.count;for(let A=m,E=m+x;A<E;A+=3)for(let M=0;M<3;M++){const w=l.getX(A+M),_=l.getX(A+(M+1)%3);r[0]=Math.min(w,_),r[1]=Math.max(w,_);const C=r[0]+","+r[1];i[C]===void 0&&(i[C]={index1:r[0],index2:r[1]})}}for(const h in i){const v=i[h];s.fromBufferAttribute(o,v.index1),t.push(s.x,s.y,s.z),s.fromBufferAttribute(o,v.index2),t.push(s.x,s.y,s.z)}}else{const o=e.attributes.position;for(let l=0,c=o.count/3;l<c;l++)for(let h=0;h<3;h++){const v=3*l+h;s.fromBufferAttribute(o,v),t.push(s.x,s.y,s.z);const p=3*l+(h+1)%3;s.fromBufferAttribute(o,p),t.push(s.x,s.y,s.z)}}this.setAttribute("position",new st(t,3))}}var _i=Object.freeze({__proto__:null,BoxGeometry:Nu,BoxBufferGeometry:Nu,CircleGeometry:uy,CircleBufferGeometry:uy,ConeGeometry:cy,ConeBufferGeometry:cy,CylinderGeometry:od,CylinderBufferGeometry:od,DodecahedronGeometry:fy,DodecahedronBufferGeometry:fy,EdgesGeometry:sA,ExtrudeGeometry:ma,ExtrudeBufferGeometry:ma,IcosahedronGeometry:yy,IcosahedronBufferGeometry:yy,LatheGeometry:xy,LatheBufferGeometry:xy,OctahedronGeometry:Wp,OctahedronBufferGeometry:Wp,ParametricGeometry:Uu,ParametricBufferGeometry:Uu,PlaneGeometry:bp,PlaneBufferGeometry:bp,PolyhedronGeometry:dl,PolyhedronBufferGeometry:dl,RingGeometry:_y,RingBufferGeometry:_y,ShapeGeometry:Vp,ShapeBufferGeometry:Vp,SphereGeometry:Jp,SphereBufferGeometry:Jp,TetrahedronGeometry:wy,TetrahedronBufferGeometry:wy,TextGeometry:Ay,TextBufferGeometry:Ay,TorusGeometry:My,TorusBufferGeometry:My,TorusKnotGeometry:Ey,TorusKnotBufferGeometry:Ey,TubeGeometry:Sy,TubeBufferGeometry:Sy,WireframeGeometry:lA});class uA extends fn{constructor(e){super();this.type="ShadowMaterial",this.color=new je(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}uA.prototype.isShadowMaterial=!0;class ld extends Hi{constructor(e){super(e);this.type="RawShaderMaterial"}}ld.prototype.isRawShaderMaterial=!0;function Br(n){fn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new je(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=oa,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(n)}Br.prototype=Object.create(fn.prototype);Br.prototype.constructor=Br;Br.prototype.isMeshStandardMaterial=!0;Br.prototype.copy=function(n){return fn.prototype.copy.call(this,n),this.defines={STANDARD:""},this.color.copy(n.color),this.roughness=n.roughness,this.metalness=n.metalness,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.roughnessMap=n.roughnessMap,this.metalnessMap=n.metalnessMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapIntensity=n.envMapIntensity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this.flatShading=n.flatShading,this.vertexTangents=n.vertexTangents,this};function wi(n){Br.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Pe(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=vt.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(n)}wi.prototype=Object.create(Br.prototype);wi.prototype.constructor=wi;wi.prototype.isMeshPhysicalMaterial=!0;wi.prototype.copy=function(n){return Br.prototype.copy.call(this,n),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=n.clearcoat,this.clearcoatMap=n.clearcoatMap,this.clearcoatRoughness=n.clearcoatRoughness,this.clearcoatRoughnessMap=n.clearcoatRoughnessMap,this.clearcoatNormalMap=n.clearcoatNormalMap,this.clearcoatNormalScale.copy(n.clearcoatNormalScale),this.reflectivity=n.reflectivity,n.sheen?this.sheen=(this.sheen||new je).copy(n.sheen):this.sheen=null,this.transmission=n.transmission,this.transmissionMap=n.transmissionMap,this};class cA extends fn{constructor(e){super();this.type="MeshPhongMaterial",this.color=new je(16777215),this.specular=new je(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=oa,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=sp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}cA.prototype.isMeshPhongMaterial=!0;class fA extends fn{constructor(e){super();this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new je(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=oa,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}fA.prototype.isMeshToonMaterial=!0;class dA extends fn{constructor(e){super();this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=oa,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}dA.prototype.isMeshNormalMaterial=!0;class hA extends fn{constructor(e){super();this.type="MeshLambertMaterial",this.color=new je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=sp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}hA.prototype.isMeshLambertMaterial=!0;class pA extends fn{constructor(e){super();this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new je(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=oa,this.normalScale=new Pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}pA.prototype.isMeshMatcapMaterial=!0;class mA extends fr{constructor(e){super();this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}mA.prototype.isLineDashedMaterial=!0;var YU=Object.freeze({__proto__:null,ShadowMaterial:uA,SpriteMaterial:Zv,RawShaderMaterial:ld,ShaderMaterial:Hi,PointsMaterial:ha,MeshPhysicalMaterial:wi,MeshStandardMaterial:Br,MeshPhongMaterial:cA,MeshToonMaterial:fA,MeshNormalMaterial:dA,MeshLambertMaterial:hA,MeshDepthMaterial:qv,MeshDistanceMaterial:Qv,MeshBasicMaterial:_r,MeshMatcapMaterial:pA,LineDashedMaterial:mA,LineBasicMaterial:fr,Material:fn});const Bn={arraySlice:function(n,e,t){return Bn.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r},sortedArray:function(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const l=t[s]*e;for(let c=0;c!==e;++c)i[o++]=n[l+c]}return i},flattenJSON:function(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)},subclip:function(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const h=s.tracks[c],v=h.getValueSize(),p=[],m=[];for(let x=0;x<h.times.length;++x){const A=h.times[x]*i;if(!(A<t||A>=r)){p.push(h.times[x]);for(let E=0;E<v;++E)m.push(h.values[x*v+E])}}p.length!==0&&(h.times=Bn.convertArray(p,h.times.constructor),h.values=Bn.convertArray(m,h.values.constructor),o.push(h))}s.tracks=o;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const l=t.tracks[o],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const h=n.tracks.find(function(w){return w.name===l.name&&w.ValueTypeName===c});if(h===void 0)continue;let v=0;const p=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=p/3);let m=0;const x=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=x/3);const A=l.times.length-1;let E;if(s<=l.times[0]){const w=v,_=p-v;E=Bn.arraySlice(l.values,w,_)}else if(s>=l.times[A]){const w=A*p+v,_=w+p-v;E=Bn.arraySlice(l.values,w,_)}else{const w=l.createInterpolant(),_=v,C=p-v;w.evaluate(s),E=Bn.arraySlice(w.resultBuffer,_,C)}c==="quaternion"&&new cr().fromArray(E).normalize().conjugate().toArray(E);const M=h.times.length;for(let w=0;w<M;++w){const _=w*x+m;if(c==="quaternion")cr.multiplyQuaternionsFlat(h.values,_,E,0,h.values,_);else{const C=x-m*2;for(let b=0;b<C;++b)h.values[_+b]-=E[b]}}}return n.blendMode=xw,n}};function ui(n,e,t,r){this.parameterPositions=n,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new e.constructor(t),this.sampleValues=e,this.valueSize=t}Object.assign(ui.prototype,{evaluate:function(n){const e=this.parameterPositions;let t=this._cachedIndex,r=e[t],i=e[t-1];e:{t:{let s;n:{r:if(!(n<r)){for(let o=t+2;;){if(r===void 0){if(n<i)break r;return t=e.length,this._cachedIndex=t,this.afterEnd_(t-1,n,i)}if(t===o)break;if(i=r,r=e[++t],n<r)break t}s=e.length;break n}if(!(n>=i)){const o=e[1];n<o&&(t=2,i=o);for(let l=t-2;;){if(i===void 0)return this._cachedIndex=0,this.beforeStart_(0,n,r);if(t===l)break;if(r=i,i=e[--t-1],n>=i)break t}s=t,t=0;break n}break e}for(;t<s;){const o=t+s>>>1;n<e[o]?s=o:t=o+1}if(r=e[t],i=e[t-1],i===void 0)return this._cachedIndex=0,this.beforeStart_(0,n,r);if(r===void 0)return t=e.length,this._cachedIndex=t,this.afterEnd_(t-1,i,n)}this._cachedIndex=t,this.intervalChanged_(t,i,r)}return this.interpolate_(t,i,n,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(n){const e=this.resultBuffer,t=this.sampleValues,r=this.valueSize,i=n*r;for(let s=0;s!==r;++s)e[s]=t[i+s];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(ui.prototype,{beforeStart_:ui.prototype.copySampleValue_,afterEnd_:ui.prototype.copySampleValue_});function Ty(n,e,t,r){ui.call(this,n,e,t,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}Ty.prototype=Object.assign(Object.create(ui.prototype),{constructor:Ty,DefaultSettings_:{endingStart:bu,endingEnd:bu},intervalChanged_:function(n,e,t){const r=this.parameterPositions;let i=n-2,s=n+1,o=r[i],l=r[s];if(o===void 0)switch(this.getSettings_().endingStart){case Lu:i=n,o=2*e-t;break;case dp:i=r.length-2,o=e+r[i]-r[i+1];break;default:i=n,o=t}if(l===void 0)switch(this.getSettings_().endingEnd){case Lu:s=n,l=2*t-e;break;case dp:s=1,l=t+r[1]-r[0];break;default:s=n-1,l=e}const c=(t-e)*.5,h=this.valueSize;this._weightPrev=c/(e-o),this._weightNext=c/(l-t),this._offsetPrev=i*h,this._offsetNext=s*h},interpolate_:function(n,e,t,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=n*o,c=l-o,h=this._offsetPrev,v=this._offsetNext,p=this._weightPrev,m=this._weightNext,x=(t-e)/(r-e),A=x*x,E=A*x,M=-p*E+2*p*A-p*x,w=(1+p)*E+(-1.5-2*p)*A+(-.5+p)*x+1,_=(-1-m)*E+(1.5+m)*A+.5*x,C=m*E-m*A;for(let b=0;b!==o;++b)i[b]=M*s[h+b]+w*s[c+b]+_*s[l+b]+C*s[v+b];return i}});function jp(n,e,t,r){ui.call(this,n,e,t,r)}jp.prototype=Object.assign(Object.create(ui.prototype),{constructor:jp,interpolate_:function(n,e,t,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=n*o,c=l-o,h=(t-e)/(r-e),v=1-h;for(let p=0;p!==o;++p)i[p]=s[c+p]*v+s[l+p]*h;return i}});function Cy(n,e,t,r){ui.call(this,n,e,t,r)}Cy.prototype=Object.assign(Object.create(ui.prototype),{constructor:Cy,interpolate_:function(n){return this.copySampleValue_(n-1)}});class zs{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Bn.convertArray(t,this.TimeBufferType),this.values=Bn.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Bn.convertArray(e.times,Array),values:Bn.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Cy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new jp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ty(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Cu:t=this.InterpolantFactoryMethodDiscrete;break;case sa:t=this.InterpolantFactoryMethodLinear;break;case Tv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Cu;case this.InterpolantFactoryMethodLinear:return sa;case this.InterpolantFactoryMethodSmooth:return Tv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=Bn.arraySlice(r,s,o),this.values=Bn.arraySlice(this.values,s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const c=r[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),e=!1;break}o=c}if(i!==void 0&&Bn.isTypedArray(i))for(let l=0,c=i.length;l!==c;++l){const h=i[l];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,h),e=!1;break}}return e}optimize(){const e=Bn.arraySlice(this.times),t=Bn.arraySlice(this.values),r=this.getValueSize(),i=this.getInterpolation()===Tv,s=e.length-1;let o=1;for(let l=1;l<s;++l){let c=!1;const h=e[l],v=e[l+1];if(h!==v&&(l!==1||h!==e[0]))if(i)c=!0;else{const p=l*r,m=p-r,x=p+r;for(let A=0;A!==r;++A){const E=t[p+A];if(E!==t[m+A]||E!==t[x+A]){c=!0;break}}}if(c){if(l!==o){e[o]=e[l];const p=l*r,m=o*r;for(let x=0;x!==r;++x)t[m+x]=t[p+x]}++o}}if(s>0){e[o]=e[s];for(let l=s*r,c=o*r,h=0;h!==r;++h)t[c+h]=t[l+h];++o}return o!==e.length?(this.times=Bn.arraySlice(e,0,o),this.values=Bn.arraySlice(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Bn.arraySlice(this.times,0),t=Bn.arraySlice(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}zs.prototype.TimeBufferType=Float32Array;zs.prototype.ValueBufferType=Float32Array;zs.prototype.DefaultInterpolation=sa;class ku extends zs{}ku.prototype.ValueTypeName="bool";ku.prototype.ValueBufferType=Array;ku.prototype.DefaultInterpolation=Cu;ku.prototype.InterpolantFactoryMethodLinear=void 0;ku.prototype.InterpolantFactoryMethodSmooth=void 0;class gA extends zs{}gA.prototype.ValueTypeName="color";class zu extends zs{}zu.prototype.ValueTypeName="number";function by(n,e,t,r){ui.call(this,n,e,t,r)}by.prototype=Object.assign(Object.create(ui.prototype),{constructor:by,interpolate_:function(n,e,t,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(t-e)/(r-e);let c=n*o;for(let h=c+o;c!==h;c+=4)cr.slerpFlat(i,0,s,c-o,s,c,l);return i}});class pl extends zs{InterpolantFactoryMethodLinear(e){return new by(this.times,this.values,this.getValueSize(),e)}}pl.prototype.ValueTypeName="quaternion";pl.prototype.DefaultInterpolation=sa;pl.prototype.InterpolantFactoryMethodSmooth=void 0;class Wu extends zs{}Wu.prototype.ValueTypeName="string";Wu.prototype.ValueBufferType=Array;Wu.prototype.DefaultInterpolation=Cu;Wu.prototype.InterpolantFactoryMethodLinear=void 0;Wu.prototype.InterpolantFactoryMethodSmooth=void 0;class Vu extends zs{}Vu.prototype.ValueTypeName="vector";class Ju{constructor(e,t=-1,r,i=Cv){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=vt.generateUUID(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,l=r.length;o!==l;++o)t.push(QU(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(zs.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let l=0;l<s;l++){let c=[],h=[];c.push((l+s-1)%s,l,(l+1)%s),h.push(0,1,0);const v=Bn.getKeyframeOrder(c);c=Bn.sortedArray(c,1,v),h=Bn.sortedArray(h,1,v),!i&&c[0]===0&&(c.push(s),h.push(h[0])),o.push(new zu(".morphTargetInfluences["+t[l].name+"]",c,h).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const h=e[l],v=h.name.match(s);if(v&&v.length>1){const p=v[1];let m=i[p];m||(i[p]=m=[]),m.push(h)}}const o=[];for(const l in i)o.push(this.CreateFromMorphTargetSequence(l,i[l],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(p,m,x,A,E){if(x.length!==0){const M=[],w=[];Bn.flattenJSON(x,M,w,A),M.length!==0&&E.push(new p(m,M,w))}},i=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let c=e.length||-1;const h=e.hierarchy||[];for(let p=0;p<h.length;p++){const m=h[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const x={};let A;for(A=0;A<m.length;A++)if(m[A].morphTargets)for(let E=0;E<m[A].morphTargets.length;E++)x[m[A].morphTargets[E]]=-1;for(const E in x){const M=[],w=[];for(let _=0;_!==m[A].morphTargets.length;++_){const C=m[A];M.push(C.time),w.push(C.morphTarget===E?1:0)}i.push(new zu(".morphTargetInfluence["+E+"]",M,w))}c=x.length*(o||1)}else{const x=".bones["+t[p].name+"]";r(Vu,x+".position",m,"pos",i),r(pl,x+".quaternion",m,"rot",i),r(Vu,x+".scale",m,"scl",i)}}return i.length===0?null:new this(s,c,i,l)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function qU(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zu;case"vector":case"vector2":case"vector3":case"vector4":return Vu;case"color":return gA;case"quaternion":return pl;case"bool":case"boolean":return ku;case"string":return Wu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function QU(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=qU(n.type);if(n.times===void 0){const t=[],r=[];Bn.flattenJSON(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ju={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};function vA(n,e,t){const r=this;let i=!1,s=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=n,this.onProgress=e,this.onError=t,this.itemStart=function(h){o++,i===!1&&r.onStart!==void 0&&r.onStart(h,s,o),i=!0},this.itemEnd=function(h){s++,r.onProgress!==void 0&&r.onProgress(h,s,o),s===o&&(i=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,v){return c.push(h,v),this},this.removeHandler=function(h){const v=c.indexOf(h);return v!==-1&&c.splice(v,2),this},this.getHandler=function(h){for(let v=0,p=c.length;v<p;v+=2){const m=c[v],x=c[v+1];if(m.global&&(m.lastIndex=0),m.test(h))return x}return null}}const hL=new vA;function Cn(n){this.manager=n!==void 0?n:hL,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Cn.prototype,{load:function(){},loadAsync:function(n,e){const t=this;return new Promise(function(r,i){t.load(n,r,e,i)})},parse:function(){},setCrossOrigin:function(n){return this.crossOrigin=n,this},setWithCredentials:function(n){return this.withCredentials=n,this},setPath:function(n){return this.path=n,this},setResourcePath:function(n){return this.resourcePath=n,this},setRequestHeader:function(n){return this.requestHeader=n,this}});const Ws={};function Rr(n){Cn.call(this,n)}Rr.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Rr,load:function(n,e,t,r){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const i=this,s=ju.get(n);if(s!==void 0)return i.manager.itemStart(n),setTimeout(function(){e&&e(s),i.manager.itemEnd(n)},0),s;if(Ws[n]!==void 0){Ws[n].push({onLoad:e,onProgress:t,onError:r});return}const o=/^data:(.*?)(;base64)?,(.*)$/,l=n.match(o);let c;if(l){const h=l[1],v=!!l[2];let p=l[3];p=decodeURIComponent(p),v&&(p=atob(p));try{let m;const x=(this.responseType||"").toLowerCase();switch(x){case"arraybuffer":case"blob":const A=new Uint8Array(p.length);for(let M=0;M<p.length;M++)A[M]=p.charCodeAt(M);x==="blob"?m=new Blob([A.buffer],{type:h}):m=A.buffer;break;case"document":m=new DOMParser().parseFromString(p,h);break;case"json":m=JSON.parse(p);break;default:m=p;break}setTimeout(function(){e&&e(m),i.manager.itemEnd(n)},0)}catch(m){setTimeout(function(){r&&r(m),i.manager.itemError(n),i.manager.itemEnd(n)},0)}}else{Ws[n]=[],Ws[n].push({onLoad:e,onProgress:t,onError:r}),c=new XMLHttpRequest,c.open("GET",n,!0),c.addEventListener("load",function(h){const v=this.response,p=Ws[n];if(delete Ws[n],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),ju.add(n,v);for(let m=0,x=p.length;m<x;m++){const A=p[m];A.onLoad&&A.onLoad(v)}i.manager.itemEnd(n)}else{for(let m=0,x=p.length;m<x;m++){const A=p[m];A.onError&&A.onError(h)}i.manager.itemError(n),i.manager.itemEnd(n)}},!1),c.addEventListener("progress",function(h){const v=Ws[n];for(let p=0,m=v.length;p<m;p++){const x=v[p];x.onProgress&&x.onProgress(h)}},!1),c.addEventListener("error",function(h){const v=Ws[n];delete Ws[n];for(let p=0,m=v.length;p<m;p++){const x=v[p];x.onError&&x.onError(h)}i.manager.itemError(n),i.manager.itemEnd(n)},!1),c.addEventListener("abort",function(h){const v=Ws[n];delete Ws[n];for(let p=0,m=v.length;p<m;p++){const x=v[p];x.onError&&x.onError(h)}i.manager.itemError(n),i.manager.itemEnd(n)},!1),this.responseType!==void 0&&(c.responseType=this.responseType),this.withCredentials!==void 0&&(c.withCredentials=this.withCredentials),c.overrideMimeType&&c.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const h in this.requestHeader)c.setRequestHeader(h,this.requestHeader[h]);c.send(null)}return i.manager.itemStart(n),c},setResponseType:function(n){return this.responseType=n,this},setMimeType:function(n){return this.mimeType=n,this}});class ZU extends Cn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Rr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Ju.parse(e[r]);t.push(i)}return t}}function yA(n){Cn.call(this,n)}yA.prototype=Object.assign(Object.create(Cn.prototype),{constructor:yA,load:function(n,e,t,r){const i=this,s=[],o=new nA,l=new Rr(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(i.withCredentials);let c=0;function h(v){l.load(n[v],function(p){const m=i.parse(p,!0);s[v]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(o.minFilter=An),o.image=s,o.format=m.format,o.needsUpdate=!0,e&&e(o))},t,r)}if(Array.isArray(n))for(let v=0,p=n.length;v<p;++v)h(v);else l.load(n,function(v){const p=i.parse(v,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let x=0;x<m;x++){s[x]={mipmaps:[]};for(let A=0;A<p.mipmapCount;A++)s[x].mipmaps.push(p.mipmaps[x*p.mipmapCount+A]),s[x].format=p.format,s[x].width=p.width,s[x].height=p.height}o.image=s}else o.image.width=p.width,o.image.height=p.height,o.mipmaps=p.mipmaps;p.mipmapCount===1&&(o.minFilter=An),o.format=p.format,o.needsUpdate=!0,e&&e(o)},t,r);return o}});class Ly extends Cn{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ju.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=document.createElementNS("http://www.w3.org/1999/xhtml","img");function c(){l.removeEventListener("load",c,!1),l.removeEventListener("error",h,!1),ju.add(e,this),t&&t(this),s.manager.itemEnd(e)}function h(v){l.removeEventListener("load",c,!1),l.removeEventListener("error",h,!1),i&&i(v),s.manager.itemError(e),s.manager.itemEnd(e)}return l.addEventListener("load",c,!1),l.addEventListener("error",h,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class xA extends Cn{constructor(e){super(e)}load(e,t,r,i){const s=new Qf,o=new Ly(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function c(h){o.load(e[h],function(v){s.images[h]=v,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let h=0;h<e.length;++h)c(h);return s}}function Xp(n){Cn.call(this,n)}Xp.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Xp,load:function(n,e,t,r){const i=this,s=new Zf,o=new Rr(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(n,function(l){const c=i.parse(l);!c||(c.image!==void 0?s.image=c.image:c.data!==void 0&&(s.image.width=c.width,s.image.height=c.height,s.image.data=c.data),s.wrapS=c.wrapS!==void 0?c.wrapS:zr,s.wrapT=c.wrapT!==void 0?c.wrapT:zr,s.magFilter=c.magFilter!==void 0?c.magFilter:An,s.minFilter=c.minFilter!==void 0?c.minFilter:An,s.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(s.encoding=c.encoding),c.flipY!==void 0&&(s.flipY=c.flipY),c.format!==void 0&&(s.format=c.format),c.type!==void 0&&(s.type=c.type),c.mipmaps!==void 0&&(s.mipmaps=c.mipmaps,s.minFilter=lo),c.mipmapCount===1&&(s.minFilter=An),c.generateMipmaps!==void 0&&(s.generateMipmaps=c.generateMipmaps),s.needsUpdate=!0,e&&e(s,c))},t,r),s}});function ud(n){Cn.call(this,n)}ud.prototype=Object.assign(Object.create(Cn.prototype),{constructor:ud,load:function(n,e,t,r){const i=new nr,s=new Ly(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(n,function(o){i.image=o;const l=n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0;i.format=l?vs:qi,i.needsUpdate=!0,e!==void 0&&e(i)},t,r),i}});function Ai(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Ai.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(n,e){const t=this.getUtoTmapping(n);return this.getPoint(t,e)},getPoints:function(n=5){const e=[];for(let t=0;t<=n;t++)e.push(this.getPoint(t/n));return e},getSpacedPoints:function(n=5){const e=[];for(let t=0;t<=n;t++)e.push(this.getPointAt(t/n));return e},getLength:function(){const n=this.getLengths();return n[n.length-1]},getLengths:function(n){if(n===void 0&&(n=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let t,r=this.getPoint(0),i=0;e.push(0);for(let s=1;s<=n;s++)t=this.getPoint(s/n),i+=t.distanceTo(r),e.push(i),r=t;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(n,e){const t=this.getLengths();let r=0;const i=t.length;let s;e?s=e:s=n*t[i-1];let o=0,l=i-1,c;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),c=t[r]-s,c<0)o=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,t[r]===s)return r/(i-1);const h=t[r],p=t[r+1]-h,m=(s-h)/p;return(r+m)/(i-1)},getTangent:function(n,e){const t=1e-4;let r=n-t,i=n+t;r<0&&(r=0),i>1&&(i=1);const s=this.getPoint(r),o=this.getPoint(i),l=e||(s.isVector2?new Pe:new U);return l.copy(o).sub(s).normalize(),l},getTangentAt:function(n,e){const t=this.getUtoTmapping(n);return this.getTangent(t,e)},computeFrenetFrames:function(n,e){const t=new U,r=[],i=[],s=[],o=new U,l=new lt;for(let m=0;m<=n;m++){const x=m/n;r[m]=this.getTangentAt(x,new U),r[m].normalize()}i[0]=new U,s[0]=new U;let c=Number.MAX_VALUE;const h=Math.abs(r[0].x),v=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=c&&(c=h,t.set(1,0,0)),v<=c&&(c=v,t.set(0,1,0)),p<=c&&t.set(0,0,1),o.crossVectors(r[0],t).normalize(),i[0].crossVectors(r[0],o),s[0].crossVectors(r[0],i[0]);for(let m=1;m<=n;m++){if(i[m]=i[m-1].clone(),s[m]=s[m-1].clone(),o.crossVectors(r[m-1],r[m]),o.length()>Number.EPSILON){o.normalize();const x=Math.acos(vt.clamp(r[m-1].dot(r[m]),-1,1));i[m].applyMatrix4(l.makeRotationAxis(o,x))}s[m].crossVectors(r[m],i[m])}if(e===!0){let m=Math.acos(vt.clamp(i[0].dot(i[n]),-1,1));m/=n,r[0].dot(o.crossVectors(i[0],i[n]))>0&&(m=-m);for(let x=1;x<=n;x++)i[x].applyMatrix4(l.makeRotationAxis(r[x],m*x)),s[x].crossVectors(r[x],i[x])}return{tangents:r,normals:i,binormals:s}},clone:function(){return new this.constructor().copy(this)},copy:function(n){return this.arcLengthDivisions=n.arcLengthDivisions,this},toJSON:function(){const n={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return n.arcLengthDivisions=this.arcLengthDivisions,n.type=this.type,n},fromJSON:function(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}});class Kp extends Ai{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,l=!1,c=0){super();this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=c}getPoint(e,t){const r=t||new Pe,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),h=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const v=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=c-this.aX,x=h-this.aY;c=m*v-x*p+this.aX,h=m*p+x*v+this.aY}return r.set(c,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Kp.prototype.isEllipseCurve=!0;class _A extends Kp{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o);this.type="ArcCurve"}}_A.prototype.isArcCurve=!0;function wA(){let n=0,e=0,t=0,r=0;function i(s,o,l,c){n=s,e=l,t=-3*s+3*o-2*l-c,r=2*s-2*o+l+c}return{initCatmullRom:function(s,o,l,c,h){i(o,l,h*(l-s),h*(c-o))},initNonuniformCatmullRom:function(s,o,l,c,h,v,p){let m=(o-s)/h-(l-s)/(h+v)+(l-o)/v,x=(l-o)/v-(c-o)/(v+p)+(c-l)/p;m*=v,x*=v,i(o,l,m,x)},calc:function(s){const o=s*s,l=o*s;return n+e*s+t*o+r*l}}}const By=new U,AA=new wA,MA=new wA,EA=new wA;class SA extends Ai{constructor(e=[],t=!1,r="centripetal",i=.5){super();this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new U){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let h,v;this.closed||l>0?h=i[(l-1)%s]:(By.subVectors(i[0],i[1]).add(i[0]),h=By);const p=i[l%s],m=i[(l+1)%s];if(this.closed||l+2<s?v=i[(l+2)%s]:(By.subVectors(i[s-1],i[s-2]).add(i[s-1]),v=By),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let A=Math.pow(h.distanceToSquared(p),x),E=Math.pow(p.distanceToSquared(m),x),M=Math.pow(m.distanceToSquared(v),x);E<1e-4&&(E=1),A<1e-4&&(A=E),M<1e-4&&(M=E),AA.initNonuniformCatmullRom(h.x,p.x,m.x,v.x,A,E,M),MA.initNonuniformCatmullRom(h.y,p.y,m.y,v.y,A,E,M),EA.initNonuniformCatmullRom(h.z,p.z,m.z,v.z,A,E,M)}else this.curveType==="catmullrom"&&(AA.initCatmullRom(h.x,p.x,m.x,v.x,this.tension),MA.initCatmullRom(h.y,p.y,m.y,v.y,this.tension),EA.initCatmullRom(h.z,p.z,m.z,v.z,this.tension));return r.set(AA.calc(c),MA.calc(c),EA.calc(c)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new U().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}SA.prototype.isCatmullRomCurve3=!0;function pL(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,l=n*n,c=n*l;return(2*t-2*r+s+o)*c+(-3*t+3*r-2*s-o)*l+s*n+t}function $U(n,e){const t=1-n;return t*t*e}function ek(n,e){return 2*(1-n)*n*e}function tk(n,e){return n*n*e}function Yp(n,e,t,r){return $U(n,e)+ek(n,t)+tk(n,r)}function nk(n,e){const t=1-n;return t*t*t*e}function rk(n,e){const t=1-n;return 3*t*t*n*e}function ik(n,e){return 3*(1-n)*n*n*e}function sk(n,e){return n*n*n*e}function qp(n,e,t,r,i){return nk(n,e)+rk(n,t)+ik(n,r)+sk(n,i)}class Ry extends Ai{constructor(e=new Pe,t=new Pe,r=new Pe,i=new Pe){super();this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Pe){const r=t,i=this.v0,s=this.v1,o=this.v2,l=this.v3;return r.set(qp(e,i.x,s.x,o.x,l.x),qp(e,i.y,s.y,o.y,l.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Ry.prototype.isCubicBezierCurve=!0;class TA extends Ai{constructor(e=new U,t=new U,r=new U,i=new U){super();this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new U){const r=t,i=this.v0,s=this.v1,o=this.v2,l=this.v3;return r.set(qp(e,i.x,s.x,o.x,l.x),qp(e,i.y,s.y,o.y,l.y),qp(e,i.z,s.z,o.z,l.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}TA.prototype.isCubicBezierCurve3=!0;class Qp extends Ai{constructor(e=new Pe,t=new Pe){super();this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Pe){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new Pe;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Qp.prototype.isLineCurve=!0;class mL extends Ai{constructor(e=new U,t=new U){super();this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new U){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Py extends Ai{constructor(e=new Pe,t=new Pe,r=new Pe){super();this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Pe){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Yp(e,i.x,s.x,o.x),Yp(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Py.prototype.isQuadraticBezierCurve=!0;class CA extends Ai{constructor(e=new U,t=new U,r=new U){super();this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new U){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Yp(e,i.x,s.x,o.x),Yp(e,i.y,s.y,o.y),Yp(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}CA.prototype.isQuadraticBezierCurve3=!0;class Iy extends Ai{constructor(e=[]){super();this.type="SplineCurve",this.points=e}getPoint(e,t=new Pe){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),l=s-o,c=i[o===0?o:o-1],h=i[o],v=i[o>i.length-2?i.length-1:o+1],p=i[o>i.length-3?i.length-1:o+2];return r.set(pL(l,c.x,h.x,v.x,p.x),pL(l,c.y,h.y,v.y,p.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Pe().fromArray(i))}return this}}Iy.prototype.isSplineCurve=!0;var bA=Object.freeze({__proto__:null,ArcCurve:_A,CatmullRomCurve3:SA,CubicBezierCurve:Ry,CubicBezierCurve3:TA,EllipseCurve:Kp,LineCurve:Qp,LineCurve3:mL,QuadraticBezierCurve:Py,QuadraticBezierCurve3:CA,SplineCurve:Iy});class gL extends Ai{constructor(){super();this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Qp(t,e))}getPoint(e){const t=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=t){const s=r[i]-t,o=this.curves[i],l=o.getLength(),c=l===0?0:1-s/l;return o.getPointAt(c)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],l=o&&o.isEllipseCurve?e*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,c=o.getPoints(l);for(let h=0;h<c.length;h++){const v=c[h];r&&r.equals(v)||(t.push(v),r=v)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new bA[i.type]().fromJSON(i))}return this}}class Zp extends gL{constructor(e){super();this.type="Path",this.currentPoint=new Pe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new Qp(this.currentPoint.clone(),new Pe(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new Py(this.currentPoint.clone(),new Pe(e,t),new Pe(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const l=new Ry(this.currentPoint.clone(),new Pe(e,t),new Pe(r,i),new Pe(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new Iy(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,l,c){const h=this.currentPoint.x,v=this.currentPoint.y;return this.absellipse(e+h,t+v,r,i,s,o,l,c),this}absellipse(e,t,r,i,s,o,l,c){const h=new Kp(e,t,r,i,s,o,l,c);if(this.curves.length>0){const p=h.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(h);const v=h.getPoint(1);return this.currentPoint.copy(v),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ml extends Zp{constructor(e){super(e);this.uuid=vt.generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Zp().fromJSON(i))}return this}}class Vs extends mt{constructor(e,t=1){super();this.type="Light",this.color=new je(e),this.intensity=t}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}Vs.prototype.isLight=!0;class LA extends Vs{constructor(e,t,r){super(e,r);this.type="HemisphereLight",this.position.copy(mt.DefaultUp),this.updateMatrix(),this.groundColor=new je(t)}copy(e){return Vs.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}LA.prototype.isHemisphereLight=!0;const vL=new lt,yL=new U,xL=new U;class BA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Pe(512,512),this.map=null,this.mapPass=null,this.matrix=new lt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cp,this._frameExtents=new Pe(1,1),this._viewportCount=1,this._viewports=[new on(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;yL.setFromMatrixPosition(e.matrixWorld),t.position.copy(yL),xL.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(xL),t.updateMatrixWorld(),vL.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vL),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class _L extends BA{constructor(){super(new mn(50,1,.5,500));this.focus=1}updateMatrices(e){const t=this.camera,r=vt.RAD2DEG*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}_L.prototype.isSpotLightShadow=!0;class $p extends Vs{constructor(e,t,r=0,i=Math.PI/3,s=0,o=1){super(e,t);this.type="SpotLight",this.position.copy(mt.DefaultUp),this.updateMatrix(),this.target=new mt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.shadow=new _L}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}$p.prototype.isSpotLight=!0;const wL=new lt,em=new U,RA=new U;class AL extends BA{constructor(){super(new mn(90,1,.5,500));this._frameExtents=new Pe(4,2),this._viewportCount=6,this._viewports=[new on(2,1,1,1),new on(0,1,1,1),new on(3,1,1,1),new on(1,1,1,1),new on(3,0,1,1),new on(1,0,1,1)],this._cubeDirections=[new U(1,0,0),new U(-1,0,0),new U(0,0,1),new U(0,0,-1),new U(0,1,0),new U(0,-1,0)],this._cubeUps=[new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,0,1),new U(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),em.setFromMatrixPosition(e.matrixWorld),r.position.copy(em),RA.copy(r.position),RA.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(RA),r.updateMatrixWorld(),i.makeTranslation(-em.x,-em.y,-em.z),wL.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wL)}}AL.prototype.isPointLightShadow=!0;class tm extends Vs{constructor(e,t,r=0,i=1){super(e,t);this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new AL}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}tm.prototype.isPointLight=!0;class Js extends po{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super();this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,l=i+t,c=i-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,o=s+h*this.view.width,l-=v*this.view.offsetY,c=l-v*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,c,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=mt.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}Js.prototype.isOrthographicCamera=!0;class ML extends BA{constructor(){super(new Js(-5,5,5,-5,.5,500))}}ML.prototype.isDirectionalLightShadow=!0;class nm extends Vs{constructor(e,t){super(e,t);this.type="DirectionalLight",this.position.copy(mt.DefaultUp),this.updateMatrix(),this.target=new mt,this.shadow=new ML}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}nm.prototype.isDirectionalLight=!0;class PA extends Vs{constructor(e,t){super(e,t);this.type="AmbientLight"}}PA.prototype.isAmbientLight=!0;class IA extends Vs{constructor(e,t,r=10,i=10){super(e,t);this.type="RectAreaLight",this.width=r,this.height=i}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}IA.prototype.isRectAreaLight=!0;class FA{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new U)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}FA.prototype.isSphericalHarmonics3=!0;class rm extends Vs{constructor(e=new FA,t=1){super(void 0,t);this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}rm.prototype.isLightProbe=!0;class EL extends Cn{constructor(e){super(e);this.textures={}}load(e,t,r,i){const s=this,o=new Rr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=new YU[e.type];if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=new je().setHex(e.sheen)),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.skinning!==void 0&&(i.skinning=e.skinning),e.morphTargets!==void 0&&(i.morphTargets=e.morphTargets),e.morphNormals!==void 0&&(i.morphNormals=e.morphNormals),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.vertexTangents!==void 0&&(i.vertexTangents=e.vertexTangents),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new je().setHex(o.value);break;case"v2":i.uniforms[s].value=new Pe().fromArray(o.value);break;case"v3":i.uniforms[s].value=new U().fromArray(o.value);break;case"v4":i.uniforms[s].value=new on().fromArray(o.value);break;case"m3":i.uniforms[s].value=new xr().fromArray(o.value);break;case"m4":i.uniforms[s].value=new lt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.shading!==void 0&&(i.flatShading=e.shading===1),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Pe().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Pe().fromArray(e.clearcoatNormalScale)),e.transmission!==void 0&&(i.transmission=e.transmission),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),i}setTextures(e){return this.textures=e,this}}const ts={decodeText:function(n){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}},extractUrlBase:function(n){const e=n.lastIndexOf("/");return e===-1?"./":n.substr(0,e+1)}};function im(){ut.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}im.prototype=Object.assign(Object.create(ut.prototype),{constructor:im,isInstancedBufferGeometry:!0,copy:function(n){return ut.prototype.copy.call(this,n),this.instanceCount=n.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const n=ut.prototype.toJSON.call(this);return n.instanceCount=this.instanceCount,n.isInstancedBufferGeometry=!0,n}});function Fy(n,e,t,r){typeof t=="number"&&(r=t,t=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),dt.call(this,n,e,t),this.meshPerAttribute=r||1}Fy.prototype=Object.assign(Object.create(dt.prototype),{constructor:Fy,isInstancedBufferAttribute:!0,copy:function(n){return dt.prototype.copy.call(this,n),this.meshPerAttribute=n.meshPerAttribute,this},toJSON:function(){const n=dt.prototype.toJSON.call(this);return n.meshPerAttribute=this.meshPerAttribute,n.isInstancedBufferAttribute=!0,n}});class SL extends Cn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Rr(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(x,A){if(t[A]!==void 0)return t[A];const M=x.interleavedBuffers[A],w=s(x,M.buffer),_=Sp(M.type,w),C=new li(_,M.stride);return C.uuid=M.uuid,t[A]=C,C}function s(x,A){if(r[A]!==void 0)return r[A];const M=x.arrayBuffers[A],w=new Uint32Array(M).buffer;return r[A]=w,w}const o=e.isInstancedBufferGeometry?new im:new ut,l=e.data.index;if(l!==void 0){const x=Sp(l.type,l.array);o.setIndex(new dt(x,1))}const c=e.data.attributes;for(const x in c){const A=c[x];let E;if(A.isInterleavedBufferAttribute){const M=i(e.data,A.data);E=new mo(M,A.itemSize,A.offset,A.normalized)}else{const M=Sp(A.type,A.array),w=A.isInstancedBufferAttribute?Fy:dt;E=new w(M,A.itemSize,A.normalized)}A.name!==void 0&&(E.name=A.name),A.usage!==void 0&&E.setUsage(A.usage),A.updateRange!==void 0&&(E.updateRange.offset=A.updateRange.offset,E.updateRange.count=A.updateRange.count),o.setAttribute(x,E)}const h=e.data.morphAttributes;if(h)for(const x in h){const A=h[x],E=[];for(let M=0,w=A.length;M<w;M++){const _=A[M];let C;if(_.isInterleavedBufferAttribute){const b=i(e.data,_.data);C=new mo(b,_.itemSize,_.offset,_.normalized)}else{const b=Sp(_.type,_.array);C=new dt(b,_.itemSize,_.normalized)}_.name!==void 0&&(C.name=_.name),E.push(C)}o.morphAttributes[x]=E}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let x=0,A=p.length;x!==A;++x){const E=p[x];o.addGroup(E.start,E.count,E.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const x=new U;m.center!==void 0&&x.fromArray(m.center),o.boundingSphere=new fo(x,m.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class ok extends Cn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?ts.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new Rr(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let h=null;try{h=JSON.parse(c)}catch(p){i!==void 0&&i(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const v=h.metadata;if(v===void 0||v.type===void 0||v.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(h,t)},r,i)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(h)}),l=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,c,r),v=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,v),t!==void 0){let p=!1;for(const m in o)if(o[m]instanceof HTMLImageElement){p=!0;break}p===!1&&t(h)}return h}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new ml().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new sd().fromJSON(e[s],i);r[l.uuid]=l}return r}parseGeometries(e,t){const r={};let i;if(e!==void 0){const s=new SL;for(let o=0,l=e.length;o<l;o++){let c;const h=e[o];switch(h.type){case"PlaneGeometry":case"PlaneBufferGeometry":c=new _i[h.type](h.width,h.height,h.widthSegments,h.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":c=new _i[h.type](h.width,h.height,h.depth,h.widthSegments,h.heightSegments,h.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":c=new _i[h.type](h.radius,h.segments,h.thetaStart,h.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":c=new _i[h.type](h.radiusTop,h.radiusBottom,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":c=new _i[h.type](h.radius,h.height,h.radialSegments,h.heightSegments,h.openEnded,h.thetaStart,h.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":c=new _i[h.type](h.radius,h.widthSegments,h.heightSegments,h.phiStart,h.phiLength,h.thetaStart,h.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":c=new _i[h.type](h.radius,h.detail);break;case"RingGeometry":case"RingBufferGeometry":c=new _i[h.type](h.innerRadius,h.outerRadius,h.thetaSegments,h.phiSegments,h.thetaStart,h.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":c=new _i[h.type](h.radius,h.tube,h.radialSegments,h.tubularSegments,h.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":c=new _i[h.type](h.radius,h.tube,h.tubularSegments,h.radialSegments,h.p,h.q);break;case"TubeGeometry":case"TubeBufferGeometry":c=new _i[h.type](new bA[h.path.type]().fromJSON(h.path),h.tubularSegments,h.radius,h.radialSegments,h.closed);break;case"LatheGeometry":case"LatheBufferGeometry":c=new _i[h.type](h.points,h.segments,h.phiStart,h.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":c=new _i[h.type](h.vertices,h.indices,h.radius,h.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":i=[];for(let p=0,m=h.shapes.length;p<m;p++){const x=t[h.shapes[p]];i.push(x)}c=new _i[h.type](i,h.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":i=[];for(let p=0,m=h.shapes.length;p<m;p++){const x=t[h.shapes[p]];i.push(x)}const v=h.options.extrudePath;v!==void 0&&(h.options.extrudePath=new bA[v.type]().fromJSON(v)),c=new _i[h.type](i,h.options);break;case"BufferGeometry":case"InstancedBufferGeometry":c=s.parse(h);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+h.type+'"');continue}c.uuid=h.uuid,h.name!==void 0&&(c.name=h.name),c.isBufferGeometry===!0&&h.userData!==void 0&&(c.userData=h.userData),r[h.uuid]=c}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new EL;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const c=e[o];if(c.type==="MultiMaterial"){const h=[];for(let v=0;v<c.materials.length;v++){const p=c.materials[v];r[p.uuid]===void 0&&(r[p.uuid]=s.parse(p)),h.push(r[p.uuid])}i[c.uuid]=h}else r[c.uuid]===void 0&&(r[c.uuid]=s.parse(c)),i[c.uuid]=r[c.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Ju.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(c){return r.manager.itemStart(c),s.load(c,function(){r.manager.itemEnd(c)},void 0,function(){r.manager.itemError(c),r.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const h=c,v=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:r.resourcePath+h;return o(v)}else return c.data?{data:Sp(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new vA(t);s=new Ly(c),s.setCrossOrigin(this.crossOrigin);for(let h=0,v=e.length;h<v;h++){const p=e[h],m=p.url;if(Array.isArray(m)){i[p.uuid]=[];for(let x=0,A=m.length;x<A;x++){const E=m[x],M=l(E);M!==null&&(M instanceof HTMLImageElement?i[p.uuid].push(M):i[p.uuid].push(new Zf(M.data,M.width,M.height)))}}else{const x=l(p.url);x!==null&&(i[p.uuid]=x)}}}return i}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);let c;const h=t[l.image];Array.isArray(h)?(c=new Qf(h),h.length===6&&(c.needsUpdate=!0)):(h&&h.data?c=new Zf(h.data,h.width,h.height):c=new nr(h),h&&(c.needsUpdate=!0)),c.uuid=l.uuid,l.name!==void 0&&(c.name=l.name),l.mapping!==void 0&&(c.mapping=r(l.mapping,ak)),l.offset!==void 0&&c.offset.fromArray(l.offset),l.repeat!==void 0&&c.repeat.fromArray(l.repeat),l.center!==void 0&&c.center.fromArray(l.center),l.rotation!==void 0&&(c.rotation=l.rotation),l.wrap!==void 0&&(c.wrapS=r(l.wrap[0],TL),c.wrapT=r(l.wrap[1],TL)),l.format!==void 0&&(c.format=l.format),l.type!==void 0&&(c.type=l.type),l.encoding!==void 0&&(c.encoding=l.encoding),l.minFilter!==void 0&&(c.minFilter=r(l.minFilter,CL)),l.magFilter!==void 0&&(c.magFilter=r(l.magFilter,CL)),l.anisotropy!==void 0&&(c.anisotropy=l.anisotropy),l.flipY!==void 0&&(c.flipY=l.flipY),l.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(c.unpackAlignment=l.unpackAlignment),i[l.uuid]=c}return i}parseObject(e,t,r,i){let s;function o(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function l(v){if(v!==void 0){if(Array.isArray(v)){const p=[];for(let m=0,x=v.length;m<x;m++){const A=v[m];r[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),p.push(r[A])}return p}return r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),r[v]}}let c,h;switch(e.type){case"Scene":s=new Fp,e.background!==void 0&&Number.isInteger(e.background)&&(s.background=new je(e.background)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new Ip(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new Pp(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":s=new mn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Js(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new PA(e.color,e.intensity);break;case"DirectionalLight":s=new nm(e.color,e.intensity);break;case"PointLight":s=new tm(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new IA(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new $p(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new LA(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new rm().fromJSON(e);break;case"SkinnedMesh":c=o(e.geometry),h=l(e.material),s=new Gu(c,h),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":c=o(e.geometry),h=l(e.material),s=new pn(c,h);break;case"InstancedMesh":c=o(e.geometry),h=l(e.material);const v=e.count,p=e.instanceMatrix,m=e.instanceColor;s=new sy(c,h,v),s.instanceMatrix=new dt(new Float32Array(p.array),16),m!==void 0&&(s.instanceColor=new dt(new Float32Array(m.array),m.itemSize));break;case"LOD":s=new Vb;break;case"Line":s=new es(o(e.geometry),l(e.material));break;case"LineLoop":s=new Hp(o(e.geometry),l(e.material));break;case"LineSegments":s=new Jr(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new fl(o(e.geometry),l(e.material));break;case"Sprite":s=new ty(l(e.material));break;case"Group":s=new $i;break;case"Bone":s=new Hu;break;default:s=new mt}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let p=0;p<v.length;p++)s.add(this.parseObject(v[p],t,r,i))}if(e.animations!==void 0){const v=e.animations;for(let p=0;p<v.length;p++){const m=v[p];s.animations.push(i[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const v=e.levels;for(let p=0;p<v.length;p++){const m=v[p],x=s.getObjectByProperty("uuid",m.object);x!==void 0&&s.addLevel(x,m.distance)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const ak={UVMapping:Mv,CubeReflectionMapping:op,CubeRefractionMapping:ap,EquirectangularReflectionMapping:Ev,EquirectangularRefractionMapping:Sv,CubeUVReflectionMapping:Rf,CubeUVRefractionMapping:lp},TL={RepeatWrapping:Os,ClampToEdgeWrapping:zr,MirroredRepeatWrapping:Su},CL={NearestFilter:Un,NearestMipmapNearestFilter:Pf,NearestMipmapLinearFilter:If,LinearFilter:An,LinearMipmapNearestFilter:up,LinearMipmapLinearFilter:lo};function sm(n){typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Cn.call(this,n),this.options={premultiplyAlpha:"none"}}sm.prototype=Object.assign(Object.create(Cn.prototype),{constructor:sm,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(n,e,t,r){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const i=this,s=ju.get(n);if(s!==void 0)return i.manager.itemStart(n),setTimeout(function(){e&&e(s),i.manager.itemEnd(n)},0),s;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(n,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(l){ju.add(n,l),e&&e(l),i.manager.itemEnd(n)}).catch(function(l){r&&r(l),i.manager.itemError(n),i.manager.itemEnd(n)}),i.manager.itemStart(n)}});class bL{constructor(){this.type="ShapePath",this.color=new je,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Zp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function r(_){const C=[];for(let b=0,I=_.length;b<I;b++){const B=_[b],H=new ml;H.curves=B.curves,C.push(H)}return C}function i(_,C){const b=C.length;let I=!1;for(let B=b-1,H=0;H<b;B=H++){let D=C[B],O=C[H],ee=O.x-D.x,q=O.y-D.y;if(Math.abs(q)>Number.EPSILON){if(q<0&&(D=C[H],ee=-ee,O=C[B],q=-q),_.y<D.y||_.y>O.y)continue;if(_.y===D.y){if(_.x===D.x)return!0}else{const fe=q*(_.x-D.x)-ee*(_.y-D.y);if(fe===0)return!0;if(fe<0)continue;I=!I}}else{if(_.y!==D.y)continue;if(O.x<=_.x&&_.x<=D.x||D.x<=_.x&&_.x<=O.x)return!0}}return I}const s=pa.isClockWise,o=this.subPaths;if(o.length===0)return[];if(t===!0)return r(o);let l,c,h;const v=[];if(o.length===1)return c=o[0],h=new ml,h.curves=c.curves,v.push(h),v;let p=!s(o[0].getPoints());p=e?!p:p;const m=[],x=[];let A=[],E=0,M;x[E]=void 0,A[E]=[];for(let _=0,C=o.length;_<C;_++)c=o[_],M=c.getPoints(),l=s(M),l=e?!l:l,l?(!p&&x[E]&&E++,x[E]={s:new ml,p:M},x[E].s.curves=c.curves,p&&E++,A[E]=[]):A[E].push({h:c,p:M[0]});if(!x[0])return r(o);if(x.length>1){let _=!1;const C=[];for(let b=0,I=x.length;b<I;b++)m[b]=[];for(let b=0,I=x.length;b<I;b++){const B=A[b];for(let H=0;H<B.length;H++){const D=B[H];let O=!0;for(let ee=0;ee<x.length;ee++)i(D.p,x[ee].p)&&(b!==ee&&C.push({froms:b,tos:ee,hole:H}),O?(O=!1,m[ee].push(D)):_=!0);O&&m[b].push(D)}}C.length>0&&(_||(A=m))}let w;for(let _=0,C=x.length;_<C;_++){h=x[_].s,v.push(h),w=A[_];for(let b=0,I=w.length;b<I;b++)h.holes.push(w[b].h)}return v}}class DA{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){const r=[],i=lk(e,t,this.data);for(let s=0,o=i.length;s<o;s++)Array.prototype.push.apply(r,i[s].toShapes());return r}}function lk(n,e,t){const r=Array.from(n),i=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*i,o=[];let l=0,c=0;for(let h=0;h<r.length;h++){const v=r[h];if(v===`
`)l=0,c-=s;else{const p=uk(v,i,l,c,t);l+=p.offsetX,o.push(p.path)}}return o}function uk(n,e,t,r,i){const s=i.glyphs[n]||i.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+i.familyName+".");return}const o=new bL;let l,c,h,v,p,m,x,A;if(s.o){const E=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let M=0,w=E.length;M<w;)switch(E[M++]){case"m":l=E[M++]*e+t,c=E[M++]*e+r,o.moveTo(l,c);break;case"l":l=E[M++]*e+t,c=E[M++]*e+r,o.lineTo(l,c);break;case"q":h=E[M++]*e+t,v=E[M++]*e+r,p=E[M++]*e+t,m=E[M++]*e+r,o.quadraticCurveTo(p,m,h,v);break;case"b":h=E[M++]*e+t,v=E[M++]*e+r,p=E[M++]*e+t,m=E[M++]*e+r,x=E[M++]*e+t,A=E[M++]*e+r,o.bezierCurveTo(p,m,x,A,h,v);break}}return{offsetX:s.ha*e,path:o}}DA.prototype.isFont=!0;class ck extends Cn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Rr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let c;try{c=JSON.parse(l)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),c=JSON.parse(l.substring(65,l.length-2))}const h=s.parse(c);t&&t(h)},r,i)}parse(e){return new DA(e)}}let Dy;const OA={getContext:function(){return Dy===void 0&&(Dy=new(window.AudioContext||window.webkitAudioContext)),Dy},setContext:function(n){Dy=n}};class LL extends Cn{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Rr(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);OA.getContext().decodeAudioData(c,function(v){t(v)})}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},r,i)}}class BL extends rm{constructor(e,t,r=1){super(void 0,r);const i=new je().set(e),s=new je().set(t),o=new U(i.r,i.g,i.b),l=new U(s.r,s.g,s.b),c=Math.sqrt(Math.PI),h=c*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(l).multiplyScalar(c),this.sh.coefficients[1].copy(o).sub(l).multiplyScalar(h)}}BL.prototype.isHemisphereLightProbe=!0;class RL extends rm{constructor(e,t=1){super(void 0,t);const r=new je().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}RL.prototype.isAmbientLightProbe=!0;const PL=new lt,IL=new lt;class fk{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new mn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new mn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const i=e.projectionMatrix.clone(),s=t.eyeSep/2,o=s*t.near/t.focus,l=t.near*Math.tan(vt.DEG2RAD*t.fov*.5)/t.zoom;let c,h;IL.elements[12]=-s,PL.elements[12]=s,c=-l*t.aspect+o,h=l*t.aspect+o,i.elements[0]=2*t.near/(h-c),i.elements[8]=(h+c)/(h-c),this.cameraL.projectionMatrix.copy(i),c=-l*t.aspect-o,h=l*t.aspect-o,i.elements[0]=2*t.near/(h-c),i.elements[8]=(h+c)/(h-c),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(IL),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(PL)}}class NA{constructor(e){this.autoStart=e!==void 0?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=FL(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=FL();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function FL(){return(typeof performance=="undefined"?Date:performance).now()}const Xu=new U,DL=new cr,dk=new U,Ku=new U;class hk extends mt{constructor(){super();this.type="AudioListener",this.context=OA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new NA}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Xu,DL,dk),Ku.set(0,0,-1).applyQuaternion(DL),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Xu.x,i),t.positionY.linearRampToValueAtTime(Xu.y,i),t.positionZ.linearRampToValueAtTime(Xu.z,i),t.forwardX.linearRampToValueAtTime(Ku.x,i),t.forwardY.linearRampToValueAtTime(Ku.y,i),t.forwardZ.linearRampToValueAtTime(Ku.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Xu.x,Xu.y,Xu.z),t.setOrientation(Ku.x,Ku.y,Ku.z,r.x,r.y,r.z)}}class GA extends mt{constructor(e){super();this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Yu=new U,OL=new cr,pk=new U,qu=new U;class mk extends GA{constructor(e){super(e);this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Yu,OL,pk),qu.set(0,0,1).applyQuaternion(OL);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Yu.x,r),t.positionY.linearRampToValueAtTime(Yu.y,r),t.positionZ.linearRampToValueAtTime(Yu.z,r),t.orientationX.linearRampToValueAtTime(qu.x,r),t.orientationY.linearRampToValueAtTime(qu.y,r),t.orientationZ.linearRampToValueAtTime(qu.z,r)}else t.setPosition(Yu.x,Yu.y,Yu.z),t.setOrientation(qu.x,qu.y,qu.z)}}class NL{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class GL{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==i;++l)r[s+l]=r[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(r,s,0,l,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(r,i,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let c=t,h=t+t;c!==h;++c)if(r[c]!==r[c+t]){l.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){cr.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;cr.multiplyQuaternionsFlat(e,o,e,t,e,r),cr.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]*o+e[r+l]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[r+o]*i}}}const HA="\\[\\]\\.:\\/",gk=new RegExp("["+HA+"]","g"),UA="[^"+HA+"]",vk="[^"+HA.replace("\\.","")+"]",yk=/((?:WC+[\/:])*)/.source.replace("WC",UA),xk=/(WCOD+)?/.source.replace("WCOD",vk),_k=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",UA),wk=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",UA),Ak=new RegExp("^"+yk+xk+_k+wk+"$"),Mk=["material","materials","bones"];function HL(n,e,t){const r=t||Pr.parseTrackName(e);this._targetGroup=n,this._bindings=n.subscribe_(e,r)}Object.assign(HL.prototype,{getValue:function(n,e){this.bind();const t=this._targetGroup.nCachedObjects_,r=this._bindings[t];r!==void 0&&r.getValue(n,e)},setValue:function(n,e){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=t.length;r!==i;++r)t[r].setValue(n,e)},bind:function(){const n=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=n.length;e!==t;++e)n[e].bind()},unbind:function(){const n=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=n.length;e!==t;++e)n[e].unbind()}});function Pr(n,e,t){this.path=e,this.parsedPath=t||Pr.parseTrackName(e),this.node=Pr.findNode(n,this.parsedPath.nodeName)||n,this.rootNode=n}Object.assign(Pr,{Composite:HL,create:function(n,e,t){return n&&n.isAnimationObjectGroup?new Pr.Composite(n,e,t):new Pr(n,e,t)},sanitizeNodeName:function(n){return n.replace(/\s/g,"_").replace(gk,"")},parseTrackName:function(n){const e=Ak.exec(n);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+n);const t={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=t.nodeName&&t.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const i=t.nodeName.substring(r+1);Mk.indexOf(i)!==-1&&(t.nodeName=t.nodeName.substring(0,r),t.objectName=i)}if(t.propertyName===null||t.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return t},findNode:function(n,e){if(!e||e===""||e==="."||e===-1||e===n.name||e===n.uuid)return n;if(n.skeleton){const t=n.skeleton.getBoneByName(e);if(t!==void 0)return t}if(n.children){const t=function(i){for(let s=0;s<i.length;s++){const o=i[s];if(o.name===e||o.uuid===e)return o;const l=t(o.children);if(l)return l}return null},r=t(n.children);if(r)return r}return null}});Object.assign(Pr.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]},function(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let n=this.node;const e=this.parsedPath,t=e.objectName,r=e.propertyName;let i=e.propertyIndex;if(n||(n=Pr.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(t){let c=e.objectIndex;switch(t){case"materials":if(!n.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}n=n.material.materials;break;case"bones":if(!n.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}n=n.skeleton.bones;for(let h=0;h<n.length;h++)if(n[h].name===c){c=h;break}break;default:if(n[t]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}n=n[t]}if(c!==void 0){if(n[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);return}n=n[c]}}const s=n[r];if(s===void 0){const c=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",n);return}let o=this.Versioning.None;this.targetObject=n,n.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:n.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(i!==void 0){if(r==="morphTargetInfluences"){if(!n.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(n.geometry.isBufferGeometry){if(!n.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}n.morphTargetDictionary[i]!==void 0&&(i=n.morphTargetDictionary[i])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(Pr.prototype,{_getValue_unbound:Pr.prototype.getValue,_setValue_unbound:Pr.prototype.setValue});class UL{constructor(){this.uuid=vt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let l,c=e.length,h=this.nCachedObjects_;for(let v=0,p=arguments.length;v!==p;++v){const m=arguments[v],x=m.uuid;let A=t[x];if(A===void 0){A=c++,t[x]=A,e.push(m);for(let E=0,M=o;E!==M;++E)s[E].push(new Pr(m,r[E],i[E]))}else if(A<h){l=e[A];const E=--h,M=e[E];t[M.uuid]=A,e[A]=M,t[x]=E,e[E]=m;for(let w=0,_=o;w!==_;++w){const C=s[w],b=C[E];let I=C[A];C[A]=b,I===void 0&&(I=new Pr(m,r[w],i[w])),C[E]=I}}else e[A]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const c=arguments[o],h=c.uuid,v=t[h];if(v!==void 0&&v>=s){const p=s++,m=e[p];t[m.uuid]=v,e[v]=m,t[h]=p,e[p]=c;for(let x=0,A=i;x!==A;++x){const E=r[x],M=E[p],w=E[v];E[v]=M,E[p]=w}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,c=arguments.length;l!==c;++l){const h=arguments[l],v=h.uuid,p=t[v];if(p!==void 0)if(delete t[v],p<s){const m=--s,x=e[m],A=--o,E=e[A];t[x.uuid]=p,e[p]=x,t[E.uuid]=m,e[m]=E,e.pop();for(let M=0,w=i;M!==w;++M){const _=r[M],C=_[m],b=_[A];_[p]=C,_[m]=b,_.pop()}}else{const m=--o,x=e[m];m>0&&(t[x.uuid]=p),e[p]=x,e.pop();for(let A=0,E=i;A!==E;++A){const M=r[A];M[p]=M[m],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,l=this._parsedPaths,c=this._objects,h=c.length,v=this.nCachedObjects_,p=new Array(h);i=s.length,r[e]=i,o.push(e),l.push(t),s.push(p);for(let m=v,x=c.length;m!==x;++m){const A=c[m];p[m]=new Pr(A,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,c=o[l],h=e[l];t[h]=r,o[r]=c,o.pop(),s[r]=s[l],s.pop(),i[r]=i[l],i.pop()}}}UL.prototype.isAnimationObjectGroup=!0;class Ek{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,l=new Array(o),c={endingStart:bu,endingEnd:bu};for(let h=0;h!==o;++h){const v=s[h].createInterpolant(null);l[h]=v,v.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=JC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,l=i/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=i._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,h=l.sampleValues;return c[0]=s,c[1]=s+r,h[0]=e/o,h[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*r;if(c<0||r===0)return;this._startTime=null,t=r*c}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case xw:for(let v=0,p=c.length;v!==p;++v)c[v].evaluate(o),h[v].accumulateAdditive(l);break;case Cv:default:for(let v=0,p=c.length;v!==p;++v)c[v].evaluate(o),h[v].accumulate(i,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;r!==null&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===jC;if(e===0)return s===-1?i:o&&(s&1)==1?t-i:i;if(r===VC){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const l=Math.floor(i/t);i-=t*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const h=e<0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=i;if(o&&(s&1)==1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Lu,i.endingEnd=Lu):(e?i.endingStart=this.zeroSlopeAtStart?Lu:bu:i.endingStart=dp,t?i.endingEnd=this.zeroSlopeAtEnd?Lu:bu:i.endingEnd=dp)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,c[0]=t,l[1]=s+e,c[1]=r,this}}class kL extends co{constructor(e){super();this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,l=e._interpolants,c=r.uuid,h=this._bindingsByRootAndName;let v=h[c];v===void 0&&(v={},h[c]=v);for(let p=0;p!==s;++p){const m=i[p],x=m.name;let A=v[x];if(A!==void 0)o[p]=A;else{if(A=o[p],A!==void 0){A._cacheIndex===null&&(++A.referenceCount,this._addInactiveBinding(A,c,x));continue}const E=t&&t._propertyBindings[p].binding.parsedPath;A=new GL(Pr.create(r,x,E),m.ValueTypeName,m.getValueSize()),++A.referenceCount,this._addInactiveBinding(A,c,x),o[p]=A}l[p].resultBuffer=A.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++==0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount==0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],c=l.knownActions,h=c[c.length-1],v=e._byClipCacheIndex;h._byClipCacheIndex=v,c[v]=h,c.pop(),e._byClipCacheIndex=null;const p=l.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount==0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,l=o[i],c=t[t.length-1],h=e._cacheIndex;c._cacheIndex=h,t[h]=c,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new jp(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Ju.findByName(i,e):e;const l=o!==null?o.uuid:e,c=this._actionsByClip[l];let h=null;if(r===void 0&&(o!==null?r=o.blendMode:r=Cv),c!==void 0){const p=c.actionByRoot[s];if(p!==void 0&&p.blendMode===r)return p;h=c.knownActions[0],o===null&&(o=h._clip)}if(o===null)return null;const v=new Ek(this,o,t,r);return this._bindAction(v,h),this._addInactiveAction(v,l,s),v}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Ju.findByName(r,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let h=0;h!==r;++h)t[h]._update(i,e,s,o);const l=this._bindings,c=this._nActiveBindings;for(let h=0;h!==c;++h)l[h].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let l=0,c=o.length;l!==c;++l){const h=o[l];this._deactivateAction(h);const v=h._cacheIndex,p=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,p._cacheIndex=v,t[v]=p,t.pop(),this._removeInactiveBindingsForAction(h)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const l=r[o].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}kL.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Oy{constructor(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Oy(this.value.clone===void 0?this.value:this.value.clone())}}function kA(n,e,t){li.call(this,n,e),this.meshPerAttribute=t||1}kA.prototype=Object.assign(Object.create(li.prototype),{constructor:kA,isInstancedInterleavedBuffer:!0,copy:function(n){return li.prototype.copy.call(this,n),this.meshPerAttribute=n.meshPerAttribute,this},clone:function(n){const e=li.prototype.clone.call(this,n);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(n){const e=li.prototype.toJSON.call(this,n);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}});function zA(n,e,t,r,i){this.buffer=n,this.type=e,this.itemSize=t,this.elementSize=r,this.count=i,this.version=0}Object.defineProperty(zA.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});Object.assign(zA.prototype,{isGLBufferAttribute:!0,setBuffer:function(n){return this.buffer=n,this},setType:function(n,e){return this.type=n,this.elementSize=e,this},setItemSize:function(n){return this.itemSize=n,this},setCount:function(n){return this.count=n,this}});function Ny(n,e,t=0,r=1/0){this.ray=new sl(n,e),this.near=t,this.far=r,this.camera=null,this.layers=new zf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function zL(n,e){return n.distance-e.distance}function WA(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)WA(i[s],e,t,!0)}}Object.assign(Ny.prototype,{set:function(n,e){this.ray.set(n,e)},setFromCamera:function(n,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(n.x,n.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(n.x,n.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)},intersectObject:function(n,e=!1,t=[]){return WA(n,this,t,e),t.sort(zL),t},intersectObjects:function(n,e=!1,t=[]){for(let r=0,i=n.length;r<i;r++)WA(n[r],this,t,e);return t.sort(zL),t}});class VA{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(vt.clamp(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Sk{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const WL=new Pe;class cd{constructor(e=new Pe(1/0,1/0),t=new Pe(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=WL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Pe),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Pe),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Pe),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Pe),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return WL.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}cd.prototype.isBox2=!0;const VL=new U,Gy=new U;class JL{constructor(e=new U,t=new U){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new U),e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),e=new U),e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return t===void 0&&(console.warn("THREE.Line3: .at() target is now required"),t=new U),this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){VL.subVectors(e,this.start),Gy.subVectors(this.end,this.start);const r=Gy.dot(Gy);let s=Gy.dot(VL)/r;return t&&(s=vt.clamp(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return r===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),r=new U),this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}function om(n){mt.call(this),this.material=n,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}om.prototype=Object.create(mt.prototype);om.prototype.constructor=om;om.prototype.isImmediateRenderObject=!0;const jL=new U;class Tk extends mt{constructor(e,t){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const r=new ut,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,c=32;o<c;o++,l++){const h=o/c*Math.PI*2,v=l/c*Math.PI*2;i.push(Math.cos(h),Math.sin(h),1,Math.cos(v),Math.sin(v),1)}r.setAttribute("position",new st(i,3));const s=new fr({fog:!1,toneMapped:!1});this.cone=new Jr(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),jL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(jL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const gl=new U,Hy=new lt,JA=new lt;class XL extends Jr{constructor(e){const t=KL(e),r=new ut,i=[],s=[],o=new je(0,0,1),l=new je(0,1,0);for(let h=0;h<t.length;h++){const v=t[h];v.parent&&v.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}r.setAttribute("position",new st(i,3)),r.setAttribute("color",new st(s,3));const c=new fr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,c);this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");JA.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(Hy.multiplyMatrices(JA,l.matrixWorld),gl.setFromMatrixPosition(Hy),i.setXYZ(o,gl.x,gl.y,gl.z),Hy.multiplyMatrices(JA,l.parent.matrixWorld),gl.setFromMatrixPosition(Hy),i.setXYZ(o+1,gl.x,gl.y,gl.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function KL(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,KL(n.children[t]));return e}class Ck extends pn{constructor(e,t,r){const i=new Jp(t,4,2),s=new _r({wireframe:!0,fog:!1,toneMapped:!1});super(i,s);this.light=e,this.light.updateMatrixWorld(),this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const bk=new U,YL=new je,qL=new je;class Lk extends mt{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;const i=new Wp(t);i.rotateY(Math.PI*.5),this.material=new _r({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new dt(o,3)),this.add(new pn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");YL.copy(this.light.color),qL.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?YL:qL;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}e.lookAt(bk.setFromMatrixPosition(this.light.matrixWorld).negate())}}class QL extends Jr{constructor(e=10,t=10,r=4473924,i=8947848){r=new je(r),i=new je(i);const s=t/2,o=e/t,l=e/2,c=[],h=[];for(let m=0,x=0,A=-l;m<=t;m++,A+=o){c.push(-l,0,A,l,0,A),c.push(A,0,-l,A,0,l);const E=m===s?r:i;E.toArray(h,x),x+=3,E.toArray(h,x),x+=3,E.toArray(h,x),x+=3,E.toArray(h,x),x+=3}const v=new ut;v.setAttribute("position",new st(c,3)),v.setAttribute("color",new st(h,3));const p=new fr({vertexColors:!0,toneMapped:!1});super(v,p);this.type="GridHelper"}}class Bk extends Jr{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new je(s),o=new je(o);const l=[],c=[];for(let p=0;p<=t;p++){const m=p/t*(Math.PI*2),x=Math.sin(m)*e,A=Math.cos(m)*e;l.push(0,0,0),l.push(x,0,A);const E=p&1?s:o;c.push(E.r,E.g,E.b),c.push(E.r,E.g,E.b)}for(let p=0;p<=r;p++){const m=p&1?s:o,x=e-e/r*p;for(let A=0;A<i;A++){let E=A/i*(Math.PI*2),M=Math.sin(E)*x,w=Math.cos(E)*x;l.push(M,0,w),c.push(m.r,m.g,m.b),E=(A+1)/i*(Math.PI*2),M=Math.sin(E)*x,w=Math.cos(E)*x,l.push(M,0,w),c.push(m.r,m.g,m.b)}}const h=new ut;h.setAttribute("position",new st(l,3)),h.setAttribute("color",new st(c,3));const v=new fr({vertexColors:!0,toneMapped:!1});super(h,v);this.type="PolarGridHelper"}}const ZL=new U,Uy=new U,$L=new U;class Rk extends mt{constructor(e,t,r){super();this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,t===void 0&&(t=1);let i=new ut;i.setAttribute("position",new st([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new fr({fog:!1,toneMapped:!1});this.lightPlane=new es(i,s),this.add(this.lightPlane),i=new ut,i.setAttribute("position",new st([0,0,0,0,0,1],3)),this.targetLine=new es(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){ZL.setFromMatrixPosition(this.light.matrixWorld),Uy.setFromMatrixPosition(this.light.target.matrixWorld),$L.subVectors(Uy,ZL),this.lightPlane.lookAt(Uy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Uy),this.targetLine.scale.z=$L.length()}}const ky=new U,jn=new po;class Pk extends Jr{constructor(e){const t=new ut,r=new fr({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={},l=new je(16755200),c=new je(16711680),h=new je(43775),v=new je(16777215),p=new je(3355443);m("n1","n2",l),m("n2","n4",l),m("n4","n3",l),m("n3","n1",l),m("f1","f2",l),m("f2","f4",l),m("f4","f3",l),m("f3","f1",l),m("n1","f1",l),m("n2","f2",l),m("n3","f3",l),m("n4","f4",l),m("p","n1",c),m("p","n2",c),m("p","n3",c),m("p","n4",c),m("u1","u2",h),m("u2","u3",h),m("u3","u1",h),m("c","t",v),m("p","c",p),m("cn1","cn2",p),m("cn3","cn4",p),m("cf1","cf2",p),m("cf3","cf4",p);function m(A,E,M){x(A,M),x(E,M)}function x(A,E){i.push(0,0,0),s.push(E.r,E.g,E.b),o[A]===void 0&&(o[A]=[]),o[A].push(i.length/3-1)}t.setAttribute("position",new st(i,3)),t.setAttribute("color",new st(s,3));super(t,r);this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;jn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),sr("c",t,e,jn,0,0,-1),sr("t",t,e,jn,0,0,1),sr("n1",t,e,jn,-r,-i,-1),sr("n2",t,e,jn,r,-i,-1),sr("n3",t,e,jn,-r,i,-1),sr("n4",t,e,jn,r,i,-1),sr("f1",t,e,jn,-r,-i,1),sr("f2",t,e,jn,r,-i,1),sr("f3",t,e,jn,-r,i,1),sr("f4",t,e,jn,r,i,1),sr("u1",t,e,jn,r*.7,i*1.1,-1),sr("u2",t,e,jn,-r*.7,i*1.1,-1),sr("u3",t,e,jn,0,i*2,-1),sr("cf1",t,e,jn,-r,0,1),sr("cf2",t,e,jn,r,0,1),sr("cf3",t,e,jn,0,-i,1),sr("cf4",t,e,jn,0,i,1),sr("cn1",t,e,jn,-r,0,-1),sr("cn2",t,e,jn,r,0,-1),sr("cn3",t,e,jn,0,-i,-1),sr("cn4",t,e,jn,0,i,-1),e.getAttribute("position").needsUpdate=!0}}function sr(n,e,t,r,i,s,o){ky.set(i,s,o).unproject(r);const l=e[n];if(l!==void 0){const c=t.getAttribute("position");for(let h=0,v=l.length;h<v;h++)c.setXYZ(l[h],ky.x,ky.y,ky.z)}}const zy=new si;class eB extends Jr{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new ut;s.setIndex(new dt(r,1)),s.setAttribute("position",new dt(i,3));super(s,new fr({color:t,toneMapped:!1}));this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&zy.setFromObject(this.object),zy.isEmpty())return;const t=zy.min,r=zy.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return Jr.prototype.copy.call(this,e),this.object=e.object,this}}class Ik extends Jr{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new ut;s.setIndex(new dt(r,1)),s.setAttribute("position",new st(i,3));super(s,new fr({color:t,toneMapped:!1}));this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class Fk extends es{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new ut;o.setAttribute("position",new st(s,3)),o.computeBoundingSphere();super(o,new fr({color:i,toneMapped:!1}));this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],c=new ut;c.setAttribute("position",new st(l,3)),c.computeBoundingSphere(),this.add(new pn(c,new _r({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?ur:el,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const tB=new U;let Wy,jA;class Dk extends mt{constructor(e=new U(0,0,1),t=new U(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super();this.type="ArrowHelper",Wy===void 0&&(Wy=new ut,Wy.setAttribute("position",new st([0,0,0,0,1,0],3)),jA=new od(0,.5,1,5,1),jA.translate(0,-.5,0)),this.position.copy(t),this.line=new es(Wy,new fr({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new pn(jA,new _r({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{tB.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(tB,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class nB extends Jr{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new ut;i.setAttribute("position",new st(t,3)),i.setAttribute("color",new st(r,3));const s=new fr({vertexColors:!0,toneMapped:!1});super(i,s);this.type="AxesHelper"}}const rB=new Float32Array(1),Ok=new Int32Array(rB.buffer),Vy={toHalfFloat:function(n){rB[0]=n;const e=Ok[0];let t=e>>16&32768,r=e>>12&2047;const i=e>>23&255;return i<103?t:i>142?(t|=31744,t|=(i==255?0:1)&&e&8388607,t):i<113?(r|=2048,t|=(r>>114-i)+(r>>113-i&1),t):(t|=i-112<<10|r>>1,t+=r&1,t)}},fd=4,vl=8,go=Math.pow(2,vl),iB=[.125,.215,.35,.446,.526,.582],sB=vl-fd+1+iB.length,dd=20,vo={[Wr]:0,[ys]:1,[pp]:2,[ww]:3,[Aw]:4,[Mw]:5,[bv]:6},Qu=new _r({side:ur,depthWrite:!1,depthTest:!1}),Nk=new pn(new Nu,Qu),XA=new Js,{_lodPlanes:am,_sizeLods:oB,_sigmas:Jy}=Hk(),aB=new je;let KA=null;const Zu=(1+Math.sqrt(5))/2,hd=1/Zu,lB=[new U(1,1,1),new U(-1,1,1),new U(1,1,-1),new U(-1,1,-1),new U(0,Zu,hd),new U(0,Zu,-hd),new U(hd,0,Zu),new U(-hd,0,Zu),new U(Zu,hd,0),new U(-Zu,hd,0)];function uB(n){const e=Math.max(n.r,n.g,n.b),t=Math.min(Math.max(Math.ceil(Math.log2(e)),-128),127);return n.multiplyScalar(Math.pow(2,-t)),(t+128)/255}class cB{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=Uk(dd),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){KA=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=hB(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=dB(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<am.length;e++)am[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(KA),e.scissorTest=!1,jy(e,0,0,e.width,e.height)}_fromTexture(e){KA=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:Un,minFilter:Un,generateMipmaps:!1,type:uo,format:lw,encoding:Gk(e)?e.encoding:pp,depthBuffer:!1},r=fB(t);return r.depthBuffer=!e,this._pingPongRenderTarget=fB(t),r}_compileMaterial(e){const t=new pn(am[0],e);this._renderer.compile(t,XA)}_sceneToCubeUV(e,t,r,i){const s=90,o=1,l=new mn(s,o,t,r),c=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],v=this._renderer,p=v.autoClear,m=v.outputEncoding,x=v.toneMapping;v.getClearColor(aB),v.toneMapping=Eu,v.outputEncoding=Wr,v.autoClear=!1;let A=!1;const E=e.background;if(E){if(E.isColor){Qu.color.copy(E).convertSRGBToLinear(),e.background=null;const M=uB(Qu.color);Qu.opacity=M,A=!0}}else{Qu.color.copy(aB).convertSRGBToLinear();const M=uB(Qu.color);Qu.opacity=M,A=!0}for(let M=0;M<6;M++){const w=M%3;w==0?(l.up.set(0,c[M],0),l.lookAt(h[M],0,0)):w==1?(l.up.set(0,0,c[M]),l.lookAt(0,h[M],0)):(l.up.set(0,c[M],0),l.lookAt(0,0,h[M])),jy(i,w*go,M>2?go:0,go,go),v.setRenderTarget(i),A&&v.render(Nk,l),v.render(e,l)}v.toneMapping=x,v.outputEncoding=m,v.autoClear=p}_textureToCubeUV(e,t){const r=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=hB()):this._equirectShader==null&&(this._equirectShader=dB());const i=e.isCubeTexture?this._cubemapShader:this._equirectShader,s=new pn(am[0],i),o=i.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=vo[e.encoding],o.outputEncoding.value=vo[t.texture.encoding],jy(t,0,0,3*go,2*go),r.setRenderTarget(t),r.render(s,XA)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<sB;i++){const s=Math.sqrt(Jy[i]*Jy[i]-Jy[i-1]*Jy[i-1]),o=lB[(i-1)%lB.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,l){const c=this._renderer,h=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const v=3,p=new pn(am[i],h),m=h.uniforms,x=oB[r]-1,A=isFinite(s)?Math.PI/(2*x):2*Math.PI/(2*dd-1),E=s/A,M=isFinite(s)?1+Math.floor(v*E):dd;M>dd&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${dd}`);const w=[];let _=0;for(let B=0;B<dd;++B){const H=B/E,D=Math.exp(-H*H/2);w.push(D),B==0?_+=D:B<M&&(_+=2*D)}for(let B=0;B<w.length;B++)w[B]=w[B]/_;m.envMap.value=e.texture,m.samples.value=M,m.weights.value=w,m.latitudinal.value=o==="latitudinal",l&&(m.poleAxis.value=l),m.dTheta.value=A,m.mipInt.value=vl-r,m.inputEncoding.value=vo[e.texture.encoding],m.outputEncoding.value=vo[e.texture.encoding];const C=oB[i],b=3*Math.max(0,go-2*C),I=(i===0?0:2*go)+2*C*(i>vl-fd?i-vl+fd:0);jy(t,b,I,3*C,2*C),c.setRenderTarget(t),c.render(p,XA)}}function Gk(n){return n===void 0||n.type!==uo?!1:n.encoding===Wr||n.encoding===ys||n.encoding===bv}function Hk(){const n=[],e=[],t=[];let r=vl;for(let i=0;i<sB;i++){const s=Math.pow(2,r);e.push(s);let o=1/s;i>vl-fd?o=iB[i-vl+fd-1]:i==0&&(o=0),t.push(o);const l=1/(s-1),c=-l/2,h=1+l/2,v=[c,c,h,c,h,h,c,c,h,h,c,h],p=6,m=6,x=3,A=2,E=1,M=new Float32Array(x*m*p),w=new Float32Array(A*m*p),_=new Float32Array(E*m*p);for(let b=0;b<p;b++){const I=b%3*2/3-1,B=b>2?0:-1,H=[I,B,0,I+2/3,B,0,I+2/3,B+1,0,I,B,0,I+2/3,B+1,0,I,B+1,0];M.set(H,x*m*b),w.set(v,A*m*b);const D=[b,b,b,b,b,b];_.set(D,E*m*b)}const C=new ut;C.setAttribute("position",new dt(M,x)),C.setAttribute("uv",new dt(w,A)),C.setAttribute("faceIndex",new dt(_,E)),n.push(C),r>fd&&r--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function fB(n){const e=new aa(3*go,3*go,n);return e.texture.mapping=Rf,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function jy(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function Uk(n){const e=new Float32Array(n),t=new U(0,1,0);return new ld({name:"SphericalGaussianBlur",defines:{n},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:vo[Wr]},outputEncoding:{value:vo[Wr]}},vertexShader:YA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${qA()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ia,depthTest:!1,depthWrite:!1})}function dB(){const n=new Pe(1,1);return new ld({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n},inputEncoding:{value:vo[Wr]},outputEncoding:{value:vo[Wr]}},vertexShader:YA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${qA()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ia,depthTest:!1,depthWrite:!1})}function hB(){return new ld({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:vo[Wr]},outputEncoding:{value:vo[Wr]}},vertexShader:YA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${qA()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ia,depthTest:!1,depthWrite:!1})}function YA(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function qA(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}const kk=0,zk=1,Wk=0,Vk=1,Jk=2;function jk(n){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),n}function Xk(n=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),n.isMultiMaterial=!0,n.materials=n,n.clone=function(){return n.slice()},n}function Kk(n,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new fl(n,e)}function Yk(n){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ty(n)}function qk(n,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new fl(n,e)}function Qk(n){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ha(n)}function Zk(n){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ha(n)}function $k(n){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ha(n)}function ez(n,e,t){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new U(n,e,t)}function tz(n,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new dt(n,e).setUsage(Bu)}function nz(n,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new yp(n,e)}function rz(n,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new xp(n,e)}function iz(n,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new _p(n,e)}function sz(n,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new wp(n,e)}function oz(n,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Du(n,e)}function az(n,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Ap(n,e)}function lz(n,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ou(n,e)}function uz(n,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new st(n,e)}function cz(n,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ep(n,e)}Ai.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Ai.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};Zp.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)};function fz(n){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new nB(n)}function dz(n,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new eB(n,e)}function hz(n,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Jr(new sA(n.geometry),new fr({color:e!==void 0?e:16777215}))}QL.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};XL.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};function pz(n,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Jr(new lA(n.geometry),new fr({color:e!==void 0?e:16777215}))}Cn.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ts.extractUrlBase(n)};Cn.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};function mz(n){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Rr(n)}function gz(n){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Xp(n)}cd.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)};cd.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()};cd.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};cd.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)};si.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)};si.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};si.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};si.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};si.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)};fo.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Cp.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};JL.prototype.center=function(n){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(n)};vt.random16=function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()};vt.nearestPowerOfTwo=function(n){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),vt.floorPowerOfTwo(n)};vt.nextPowerOfTwo=function(n){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),vt.ceilPowerOfTwo(n)};xr.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};xr.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};xr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};xr.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};xr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};xr.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};lt.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)};lt.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};lt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new U().setFromMatrixColumn(this,3)};lt.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)};lt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};lt.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};lt.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};lt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};lt.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)};lt.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};lt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};lt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};lt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};lt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};lt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};lt.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};lt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};lt.prototype.makeFrustum=function(n,e,t,r,i,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,r,t,i,s)};lt.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};Gs.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};cr.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)};cr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};sl.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};sl.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)};sl.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};rr.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};rr.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)};rr.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)};rr.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)};rr.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)};rr.barycoordFromPoint=function(n,e,t,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),rr.getBarycoord(n,e,t,r,i)};rr.normal=function(n,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),rr.getNormal(n,e,t,r)};ml.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)};ml.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ma(this,n)};ml.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Vp(this,n)};Pe.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Pe.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};Pe.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};U.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};U.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};U.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)};U.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)};U.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)};U.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)};U.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};U.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};U.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};on.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};on.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};mt.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)};mt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};mt.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)};mt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};mt.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(mt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});pn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(pn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),XC},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Gu.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Ai.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(n){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=n}});mn.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(Vs.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(dt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Bu},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Bu)}}});dt.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?Bu:Of),this};dt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},dt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};ut.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)};ut.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new dt(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)};ut.prototype.addDrawCall=function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)};ut.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};ut.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};ut.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)};ut.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(ut.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(im.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(n){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=n}}});Object.defineProperties(Ny.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(n){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=n}}});Object.defineProperties(li.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Bu},set:function(n){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(n)}}});li.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?Bu:Of),this};li.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};ma.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};ma.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};ma.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Fp.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Oy.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this};Object.defineProperties(fn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new je}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===$_}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}}});Object.defineProperties(wi.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(n){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=n}}});Object.defineProperties(Hi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});dn.prototype.clearTarget=function(n,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,r)};dn.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)};dn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};dn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};dn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};dn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};dn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};dn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};dn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};dn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};dn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};dn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};dn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};dn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};dn.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)};dn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};dn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};dn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};dn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};dn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};dn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};dn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};dn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};dn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};dn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(dn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?ys:Wr}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Ob.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});function vz(n,e,t){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Kv(n,t)}Object.defineProperties(aa.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});GA.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new LL().load(n,function(r){e.setBuffer(r)}),this};NL.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};Xv.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};Xv.prototype.clear=function(n,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,r)};Ru.crossOrigin=void 0;Ru.loadTexture=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new ud;i.setCrossOrigin(this.crossOrigin);const s=i.load(n,t,void 0,r);return e&&(s.mapping=e),s};Ru.loadTextureCube=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new xA;i.setCrossOrigin(this.crossOrigin);const s=i.load(n,t,void 0,r);return e&&(s.mapping=e),s};Ru.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Ru.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};function yz(){console.error("THREE.CanvasRenderer has been removed")}function xz(){console.error("THREE.JSONLoader has been removed.")}const _z={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function wz(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Y_}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Y_);var Az=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",ACESFilmicToneMapping:aw,AddEquation:Mu,AddOperation:KT,AdditiveAnimationBlendMode:xw,AdditiveBlending:ew,AlphaFormat:sC,AlwaysDepth:kT,AlwaysStencilFunc:ZC,AmbientLight:PA,AmbientLightProbe:RL,AnimationClip:Ju,AnimationLoader:ZU,AnimationMixer:kL,AnimationObjectGroup:UL,AnimationUtils:Bn,ArcCurve:_A,ArrayCamera:Zw,ArrowHelper:Dk,Audio:GA,AudioAnalyser:NL,AudioContext:OA,AudioListener:hk,AudioLoader:LL,AxesHelper:nB,AxisHelper:fz,BackSide:ur,BasicDepthPacking:YC,BasicShadowMap:ID,BinaryTextureLoader:gz,Bone:Hu,BooleanKeyframeTrack:ku,BoundingBoxHelper:dz,Box2:cd,Box3:si,Box3Helper:Ik,BoxBufferGeometry:Nu,BoxGeometry:Nu,BoxHelper:eB,BufferAttribute:dt,BufferGeometry:ut,BufferGeometryLoader:SL,ByteType:$T,Cache:ju,Camera:po,CameraHelper:Pk,CanvasRenderer:yz,CanvasTexture:rA,CatmullRomCurve3:SA,CineonToneMapping:QT,CircleBufferGeometry:uy,CircleGeometry:uy,ClampToEdgeWrapping:zr,Clock:NA,Color:je,ColorKeyframeTrack:gA,CompressedTexture:nA,CompressedTextureLoader:yA,ConeBufferGeometry:cy,ConeGeometry:cy,CubeCamera:Xv,CubeReflectionMapping:op,CubeRefractionMapping:ap,CubeTexture:Qf,CubeTextureLoader:xA,CubeUVReflectionMapping:Rf,CubeUVRefractionMapping:lp,CubicBezierCurve:Ry,CubicBezierCurve3:TA,CubicInterpolant:Ty,CullFaceBack:q_,CullFaceFront:CT,CullFaceFrontBack:PD,CullFaceNone:TT,Curve:Ai,CurvePath:gL,CustomBlending:bT,CustomToneMapping:ZT,CylinderBufferGeometry:od,CylinderGeometry:od,Cylindrical:Sk,DataTexture:Zf,DataTexture2DArray:Kw,DataTexture3D:Yw,DataTextureLoader:Xp,DataUtils:Vy,DecrementStencilOp:zD,DecrementWrapStencilOp:VD,DefaultLoadingManager:hL,DepthFormat:Tu,DepthStencilFormat:Df,DepthTexture:oL,DirectionalLight:nm,DirectionalLightHelper:Rk,DiscreteInterpolant:Cy,DodecahedronBufferGeometry:fy,DodecahedronGeometry:fy,DoubleSide:Au,DstAlphaFactor:DT,DstColorFactor:NT,DynamicBufferAttribute:tz,DynamicCopyUsage:iO,DynamicDrawUsage:Bu,DynamicReadUsage:tO,EdgesGeometry:sA,EdgesHelper:hz,EllipseCurve:Kp,EqualDepth:WT,EqualStencilFunc:KD,EquirectangularReflectionMapping:Ev,EquirectangularRefractionMapping:Sv,Euler:Fu,EventDispatcher:co,ExtrudeBufferGeometry:ma,ExtrudeGeometry:ma,FaceColors:Vk,FileLoader:Rr,FlatShading:$_,Float16BufferAttribute:Mp,Float32Attribute:uz,Float32BufferAttribute:st,Float64Attribute:cz,Float64BufferAttribute:Ep,FloatType:gs,Fog:Ip,FogExp2:Pp,Font:DA,FontLoader:ck,FrontSide:el,Frustum:Cp,GLBufferAttribute:zA,GLSL1:oO,GLSL3:Ew,GammaEncoding:bv,GreaterDepth:JT,GreaterEqualDepth:VT,GreaterEqualStencilFunc:ZD,GreaterStencilFunc:qD,GridHelper:QL,Group:$i,HalfFloatType:tl,HemisphereLight:LA,HemisphereLightHelper:Lk,HemisphereLightProbe:BL,IcosahedronBufferGeometry:yy,IcosahedronGeometry:yy,ImageBitmapLoader:sm,ImageLoader:Ly,ImageUtils:Ru,ImmediateRenderObject:om,IncrementStencilOp:kD,IncrementWrapStencilOp:WD,InstancedBufferAttribute:Fy,InstancedBufferGeometry:im,InstancedInterleavedBuffer:kA,InstancedMesh:sy,Int16Attribute:sz,Int16BufferAttribute:wp,Int32Attribute:az,Int32BufferAttribute:Ap,Int8Attribute:nz,Int8BufferAttribute:yp,IntType:tC,InterleavedBuffer:li,InterleavedBufferAttribute:mo,Interpolant:ui,InterpolateDiscrete:Cu,InterpolateLinear:sa,InterpolateSmooth:Tv,InvertStencilOp:JD,JSONLoader:xz,KeepStencilOp:Lv,KeyframeTrack:zs,LOD:Vb,LatheBufferGeometry:xy,LatheGeometry:xy,Layers:zf,LensFlare:wz,LessDepth:zT,LessEqualDepth:Av,LessEqualStencilFunc:YD,LessStencilFunc:XD,Light:Vs,LightProbe:rm,Line:es,Line3:JL,LineBasicMaterial:fr,LineCurve:Qp,LineCurve3:mL,LineDashedMaterial:mA,LineLoop:Hp,LinePieces:zk,LineSegments:Jr,LineStrip:kk,LinearEncoding:Wr,LinearFilter:An,LinearInterpolant:jp,LinearMipMapLinearFilter:GD,LinearMipMapNearestFilter:ND,LinearMipmapLinearFilter:lo,LinearMipmapNearestFilter:up,LinearToneMapping:YT,Loader:Cn,LoaderUtils:ts,LoadingManager:vA,LogLuvEncoding:KC,LoopOnce:VC,LoopPingPong:jC,LoopRepeat:JC,LuminanceAlphaFormat:aC,LuminanceFormat:oC,MOUSE:_u,Material:fn,MaterialLoader:EL,Math:vt,MathUtils:vt,Matrix3:xr,Matrix4:lt,MaxEquation:iw,Mesh:pn,MeshBasicMaterial:_r,MeshDepthMaterial:qv,MeshDistanceMaterial:Qv,MeshFaceMaterial:jk,MeshLambertMaterial:hA,MeshMatcapMaterial:pA,MeshNormalMaterial:dA,MeshPhongMaterial:cA,MeshPhysicalMaterial:wi,MeshStandardMaterial:Br,MeshToonMaterial:fA,MinEquation:rw,MirroredRepeatWrapping:Su,MixOperation:XT,MultiMaterial:Xk,MultiplyBlending:nw,MultiplyOperation:sp,NearestFilter:Un,NearestMipMapLinearFilter:OD,NearestMipMapNearestFilter:DD,NearestMipmapLinearFilter:If,NearestMipmapNearestFilter:Pf,NeverDepth:UT,NeverStencilFunc:jD,NoBlending:ia,NoColors:Wk,NoToneMapping:Eu,NormalAnimationBlendMode:Cv,NormalBlending:Bf,NotEqualDepth:jT,NotEqualStencilFunc:QD,NumberKeyframeTrack:zu,Object3D:mt,ObjectLoader:ok,ObjectSpaceNormalMap:QC,OctahedronBufferGeometry:Wp,OctahedronGeometry:Wp,OneFactor:PT,OneMinusDstAlphaFactor:OT,OneMinusDstColorFactor:GT,OneMinusSrcAlphaFactor:ow,OneMinusSrcColorFactor:FT,OrthographicCamera:Js,PCFShadowMap:Q_,PCFSoftShadowMap:Z_,PMREMGenerator:cB,ParametricBufferGeometry:Uu,ParametricGeometry:Uu,Particle:Yk,ParticleBasicMaterial:Zk,ParticleSystem:qk,ParticleSystemMaterial:$k,Path:Zp,PerspectiveCamera:mn,Plane:Gs,PlaneBufferGeometry:bp,PlaneGeometry:bp,PlaneHelper:Fk,PointCloud:Kk,PointCloudMaterial:Qk,PointLight:tm,PointLightHelper:Ck,Points:fl,PointsMaterial:ha,PolarGridHelper:Bk,PolyhedronBufferGeometry:dl,PolyhedronGeometry:dl,PositionalAudio:mk,PropertyBinding:Pr,PropertyMixer:GL,QuadraticBezierCurve:Py,QuadraticBezierCurve3:CA,Quaternion:cr,QuaternionKeyframeTrack:pl,QuaternionLinearInterpolant:by,REVISION:Y_,RGBADepthPacking:qC,RGBAFormat:qi,RGBAIntegerFormat:hC,RGBA_ASTC_10x10_Format:TC,RGBA_ASTC_10x5_Format:MC,RGBA_ASTC_10x6_Format:EC,RGBA_ASTC_10x8_Format:SC,RGBA_ASTC_12x10_Format:CC,RGBA_ASTC_12x12_Format:bC,RGBA_ASTC_4x4_Format:mC,RGBA_ASTC_5x4_Format:gC,RGBA_ASTC_5x5_Format:vC,RGBA_ASTC_6x5_Format:yC,RGBA_ASTC_6x6_Format:xC,RGBA_ASTC_8x5_Format:_C,RGBA_ASTC_8x6_Format:wC,RGBA_ASTC_8x8_Format:AC,RGBA_BPTC_Format:LC,RGBA_ETC2_EAC_Format:yw,RGBA_PVRTC_2BPPV1_Format:gw,RGBA_PVRTC_4BPPV1_Format:mw,RGBA_S3TC_DXT1_Format:cw,RGBA_S3TC_DXT3_Format:fw,RGBA_S3TC_DXT5_Format:dw,RGBDEncoding:Mw,RGBEEncoding:pp,RGBEFormat:lw,RGBFormat:vs,RGBIntegerFormat:dC,RGBM16Encoding:Aw,RGBM7Encoding:ww,RGB_ETC1_Format:pC,RGB_ETC2_Format:vw,RGB_PVRTC_2BPPV1_Format:pw,RGB_PVRTC_4BPPV1_Format:hw,RGB_S3TC_DXT1_Format:uw,RGFormat:cC,RGIntegerFormat:fC,RawShaderMaterial:ld,Ray:sl,Raycaster:Ny,RectAreaLight:IA,RedFormat:lC,RedIntegerFormat:uC,ReinhardToneMapping:qT,RepeatWrapping:Os,ReplaceStencilOp:UD,ReverseSubtractEquation:BT,RingBufferGeometry:_y,RingGeometry:_y,SRGB8_ALPHA8_ASTC_10x10_Format:kC,SRGB8_ALPHA8_ASTC_10x5_Format:GC,SRGB8_ALPHA8_ASTC_10x6_Format:HC,SRGB8_ALPHA8_ASTC_10x8_Format:UC,SRGB8_ALPHA8_ASTC_12x10_Format:zC,SRGB8_ALPHA8_ASTC_12x12_Format:WC,SRGB8_ALPHA8_ASTC_4x4_Format:BC,SRGB8_ALPHA8_ASTC_5x4_Format:RC,SRGB8_ALPHA8_ASTC_5x5_Format:PC,SRGB8_ALPHA8_ASTC_6x5_Format:IC,SRGB8_ALPHA8_ASTC_6x6_Format:FC,SRGB8_ALPHA8_ASTC_8x5_Format:DC,SRGB8_ALPHA8_ASTC_8x6_Format:OC,SRGB8_ALPHA8_ASTC_8x8_Format:NC,Scene:Fp,SceneUtils:_z,ShaderChunk:Gt,ShaderLib:ks,ShaderMaterial:Hi,ShadowMaterial:uA,Shape:ml,ShapeBufferGeometry:Vp,ShapeGeometry:Vp,ShapePath:bL,ShapeUtils:pa,ShortType:eC,Skeleton:sd,SkeletonHelper:XL,SkinnedMesh:Gu,SmoothShading:FD,Sphere:fo,SphereBufferGeometry:Jp,SphereGeometry:Jp,Spherical:VA,SphericalHarmonics3:FA,SplineCurve:Iy,SpotLight:$p,SpotLightHelper:Tk,Sprite:ty,SpriteMaterial:Zv,SrcAlphaFactor:sw,SrcAlphaSaturateFactor:HT,SrcColorFactor:IT,StaticCopyUsage:rO,StaticDrawUsage:Of,StaticReadUsage:eO,StereoCamera:fk,StreamCopyUsage:sO,StreamDrawUsage:$D,StreamReadUsage:nO,StringKeyframeTrack:Wu,SubtractEquation:LT,SubtractiveBlending:tw,TOUCH:wu,TangentSpaceNormalMap:oa,TetrahedronBufferGeometry:wy,TetrahedronGeometry:wy,TextBufferGeometry:Ay,TextGeometry:Ay,Texture:nr,TextureLoader:ud,TorusBufferGeometry:My,TorusGeometry:My,TorusKnotBufferGeometry:Ey,TorusKnotGeometry:Ey,Triangle:rr,TriangleFanDrawMode:hp,TriangleStripDrawMode:_w,TrianglesDrawMode:XC,TubeBufferGeometry:Sy,TubeGeometry:Sy,UVMapping:Mv,Uint16Attribute:oz,Uint16BufferAttribute:Du,Uint32Attribute:lz,Uint32BufferAttribute:Ou,Uint8Attribute:rz,Uint8BufferAttribute:xp,Uint8ClampedAttribute:iz,Uint8ClampedBufferAttribute:_p,Uniform:Oy,UniformsLib:qe,UniformsUtils:hb,UnsignedByteType:uo,UnsignedInt248Type:Ff,UnsignedIntType:fp,UnsignedShort4444Type:nC,UnsignedShort5551Type:rC,UnsignedShort565Type:iC,UnsignedShortType:cp,VSMShadowMap:Lf,Vector2:Pe,Vector3:U,Vector4:on,VectorKeyframeTrack:Vu,Vertex:ez,VertexColors:Jk,VideoTexture:sL,WebGL1Renderer:Hb,WebGLCubeRenderTarget:Kv,WebGLMultisampleRenderTarget:$C,WebGLRenderTarget:aa,WebGLRenderTargetCube:vz,WebGLRenderer:dn,WebGLUtils:Nb,WireframeGeometry:lA,WireframeHelper:pz,WrapAroundEnding:dp,XHRLoader:mz,ZeroCurvatureEnding:bu,ZeroFactor:RT,ZeroSlopeEnding:Lu,ZeroStencilOp:HD,sRGBEncoding:ys});function Mz(n){let e;const t=new Set,r=(h,v)=>{const p=typeof h=="function"?h(e):h;if(p!==e){const m=e;e=v?p:Object.assign({},e,p),t.forEach(x=>x(e,m))}},i=()=>e,s=(h,v=i,p=Object.is)=>{let m=v(e);function x(){const A=v(e);if(!p(m,A)){const E=m;h(m=A,E)}}return t.add(x),()=>t.delete(x)},c={setState:r,getState:i,subscribe:(h,v,p)=>v||p?s(h,v,p):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=n(r,i,c),c}const Ez=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),pB=Ez?Tt.exports.useEffect:Tt.exports.useLayoutEffect;function Sz(n){const e=typeof n=="function"?Mz(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=Tt.exports.useReducer(E=>E+1,0),o=e.getState(),l=Tt.exports.useRef(o),c=Tt.exports.useRef(r),h=Tt.exports.useRef(i),v=Tt.exports.useRef(!1),p=Tt.exports.useRef();p.current===void 0&&(p.current=r(o));let m,x=!1;(l.current!==o||c.current!==r||h.current!==i||v.current)&&(m=r(o),x=!i(p.current,m)),pB(()=>{x&&(p.current=m),l.current=o,c.current=r,h.current=i,v.current=!1});const A=Tt.exports.useRef(o);return pB(()=>{const E=()=>{try{const w=e.getState(),_=c.current(w);h.current(p.current,_)||(l.current=w,p.current=_,s())}catch{v.current=!0,s()}},M=e.subscribe(E);return e.getState()!==A.current&&E(),M},[]),x?m:p.current};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}function Tz(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(e,t[r])||!Object.is(n[t[r]],e[t[r]]))return!1;return!0}var mB={exports:{}},gB={exports:{}};/** @license React v0.26.2
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){n.exports=function(t){var r={},i=z0,s=Tt.exports,o=$c.exports;function l(u){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+u,g=1;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h=60103,v=60106,p=60107,m=60108,x=60114,A=60109,E=60110,M=60112,w=60113,_=60120,C=60115,b=60116,I=60121,B=60129,H=60130,D=60131;if(typeof Symbol=="function"&&Symbol.for){var O=Symbol.for;h=O("react.element"),v=O("react.portal"),p=O("react.fragment"),m=O("react.strict_mode"),x=O("react.profiler"),A=O("react.provider"),E=O("react.context"),M=O("react.forward_ref"),w=O("react.suspense"),_=O("react.suspense_list"),C=O("react.memo"),b=O("react.lazy"),I=O("react.block"),O("react.scope"),B=O("react.debug_trace_mode"),H=O("react.offscreen"),D=O("react.legacy_hidden")}var ee=typeof Symbol=="function"&&Symbol.iterator;function q(u){return u===null||typeof u!="object"?null:(u=ee&&u[ee]||u["@@iterator"],typeof u=="function"?u:null)}function fe(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case p:return"Fragment";case v:return"Portal";case x:return"Profiler";case m:return"StrictMode";case w:return"Suspense";case _:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case E:return(u.displayName||"Context")+".Consumer";case A:return(u._context.displayName||"Context")+".Provider";case M:var f=u.render;return f=f.displayName||f.name||"",u.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case C:return fe(u.type);case I:return fe(u._render);case b:f=u._payload,u=u._init;try{return fe(u(f))}catch{}}return null}function ne(u){var f=u,g=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&1026)!=0&&(g=f.return),u=f.return;while(u)}return f.tag===3?g:null}function te(u){if(ne(u)!==u)throw Error(l(188))}function $(u){var f=u.alternate;if(!f){if(f=ne(u),f===null)throw Error(l(188));return f!==u?null:u}for(var g=u,S=f;;){var L=g.return;if(L===null)break;var P=L.alternate;if(P===null){if(S=L.return,S!==null){g=S;continue}break}if(L.child===P.child){for(P=L.child;P;){if(P===g)return te(L),u;if(P===S)return te(L),f;P=P.sibling}throw Error(l(188))}if(g.return!==S.return)g=L,S=P;else{for(var Y=!1,ce=L.child;ce;){if(ce===g){Y=!0,g=L,S=P;break}if(ce===S){Y=!0,S=L,g=P;break}ce=ce.sibling}if(!Y){for(ce=P.child;ce;){if(ce===g){Y=!0,g=P,S=L;break}if(ce===S){Y=!0,S=P,g=L;break}ce=ce.sibling}if(!Y)throw Error(l(189))}}if(g.alternate!==S)throw Error(l(190))}if(g.tag!==3)throw Error(l(188));return g.stateNode.current===g?u:f}function le(u){if(u=$(u),!u)return null;for(var f=u;;){if(f.tag===5||f.tag===6)return f;if(f.child)f.child.return=f,f=f.child;else{if(f===u)break;for(;!f.sibling;){if(!f.return||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}}return null}function _e(u){if(u=$(u),!u)return null;for(var f=u;;){if(f.tag===5||f.tag===6)return f;if(f.child&&f.tag!==4)f.child.return=f,f=f.child;else{if(f===u)break;for(;!f.sibling;){if(!f.return||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}}return null}function Be(u,f){for(var g=u.alternate;f!==null;){if(f===u||f===g)return!0;f=f.return}return!1}var Ce=t.getPublicInstance,He=t.getRootHostContext,ue=t.getChildHostContext,Oe=t.prepareForCommit,ze=t.resetAfterCommit,Ee=t.createInstance,F=t.appendInitialChild,G=t.finalizeInitialChildren,X=t.prepareUpdate,V=t.shouldSetTextContent,K=t.createTextInstance,Z=t.scheduleTimeout,se=t.cancelTimeout,j=t.noTimeout,re=t.isPrimaryRenderer,ae=t.supportsMutation,ye=t.supportsPersistence,ge=t.supportsHydration,z=t.getInstanceFromNode,W=t.makeOpaqueHydratingObject,ve=t.makeClientId,Ae=t.beforeActiveInstanceBlur,Ne=t.afterActiveInstanceBlur,We=t.preparePortalMount,Ye=t.supportsTestSelectors,tt=t.findFiberRoot,oe=t.getBoundingRect,Ve=t.getTextContent,ke=t.isHiddenSubtree,Qe=t.matchAccessibilityRole,Ie=t.setFocusIfFocusable,rt=t.setupIntersectionObserver,It=t.appendChild,Ht=t.appendChildToContainer,Kn=t.commitTextUpdate,he=t.commitMount,Ue=t.commitUpdate,at=t.insertBefore,Ut=t.insertInContainerBefore,an=t.removeChild,gn=t.removeChildFromContainer,Dn=t.resetTextContent,Ui=t.hideInstance,Mn=t.hideTextInstance,or=t.unhideInstance,xs=t.unhideTextInstance,js=t.clearContainer,ns=t.cloneInstance,_l=t.createContainerChildSet,wl=t.appendChildToContainerChildSet,J=t.finalizeContainerChildren,Se=t.replaceContainerChildren,we=t.cloneHiddenInstance,Re=t.cloneHiddenTextInstance,Ke=t.canHydrateInstance,kt=t.canHydrateTextInstance,At=t.isSuspenseInstancePending,Bt=t.isSuspenseInstanceFallback,Kt=t.getNextHydratableSibling,Mt=t.getFirstHydratableChild,Vt=t.hydrateInstance,Et=t.hydrateTextInstance,Yt=t.getNextHydratableInstanceAfterSuspenseInstance,jr=t.commitHydratedContainer,dr=t.commitHydratedSuspenseInstance,ki;function vn(u){if(ki===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);ki=f&&f[1]||""}return`
`+ki+u}var zi=!1;function yn(u,f){if(!u||zi)return"";zi=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Te){var S=Te}Reflect.construct(u,[],f)}else{try{f.call()}catch(Te){S=Te}u.call(f.prototype)}else{try{throw Error()}catch(Te){S=Te}u()}}catch(Te){if(Te&&S&&typeof Te.stack=="string"){for(var L=Te.stack.split(`
`),P=S.stack.split(`
`),Y=L.length-1,ce=P.length-1;1<=Y&&0<=ce&&L[Y]!==P[ce];)ce--;for(;1<=Y&&0<=ce;Y--,ce--)if(L[Y]!==P[ce]){if(Y!==1||ce!==1)do if(Y--,ce--,0>ce||L[Y]!==P[ce])return`
`+L[Y].replace(" at new "," at ");while(1<=Y&&0<=ce);break}}}finally{zi=!1,Error.prepareStackTrace=g}return(u=u?u.displayName||u.name:"")?vn(u):""}var xo=[],En=-1;function ar(u){return{current:u}}function en(u){0>En||(u.current=xo[En],xo[En]=null,En--)}function Rn(u,f){En++,xo[En]=u.current,u.current=f}var Xs={},wr=ar(Xs),Ir=ar(!1),Ks=Xs;function _o(u,f){var g=u.type.contextTypes;if(!g)return Xs;var S=u.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===f)return S.__reactInternalMemoizedMaskedChildContext;var L={},P;for(P in g)L[P]=f[P];return S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=f,u.__reactInternalMemoizedMaskedChildContext=L),L}function Xr(u){return u=u.childContextTypes,u!=null}function ec(){en(Ir),en(wr)}function pm(u,f,g){if(wr.current!==Xs)throw Error(l(168));Rn(wr,f),Rn(Ir,g)}function mm(u,f,g){var S=u.stateNode;if(u=f.childContextTypes,typeof S.getChildContext!="function")return g;S=S.getChildContext();for(var L in S)if(!(L in u))throw Error(l(108,fe(f)||"Unknown",L));return i({},g,S)}function Al(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Xs,Ks=wr.current,Rn(wr,u),Rn(Ir,Ir.current),!0}function gd(u,f,g){var S=u.stateNode;if(!S)throw Error(l(169));g?(u=mm(u,f,Ks),S.__reactInternalMemoizedMergedChildContext=u,en(Ir),en(wr),Rn(wr,u)):en(Ir),Rn(Ir,g)}var tc=null,_s=null,Qy=o.unstable_now;Qy();var Ml=0,tn=8;function Ys(u){if((1&u)!=0)return tn=15,1;if((2&u)!=0)return tn=14,2;if((4&u)!=0)return tn=13,4;var f=24&u;return f!==0?(tn=12,f):(u&32)!=0?(tn=11,32):(f=192&u,f!==0?(tn=10,f):(u&256)!=0?(tn=9,256):(f=3584&u,f!==0?(tn=8,f):(u&4096)!=0?(tn=7,4096):(f=4186112&u,f!==0?(tn=6,f):(f=62914560&u,f!==0?(tn=5,f):u&67108864?(tn=4,67108864):(u&134217728)!=0?(tn=3,134217728):(f=805306368&u,f!==0?(tn=2,f):(1073741824&u)!=0?(tn=1,1073741824):(tn=8,u))))))}function Zy(u){switch(u){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function gm(u){switch(u){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(l(358,u))}}function va(u,f){var g=u.pendingLanes;if(g===0)return tn=0;var S=0,L=0,P=u.expiredLanes,Y=u.suspendedLanes,ce=u.pingedLanes;if(P!==0)S=P,L=tn=15;else if(P=g&134217727,P!==0){var Te=P&~Y;Te!==0?(S=Ys(Te),L=tn):(ce&=P,ce!==0&&(S=Ys(ce),L=tn))}else P=g&~Y,P!==0?(S=Ys(P),L=tn):ce!==0&&(S=Ys(ce),L=tn);if(S===0)return 0;if(S=31-ci(S),S=g&((0>S?0:1<<S)<<1)-1,f!==0&&f!==S&&(f&Y)==0){if(Ys(f),L<=tn)return f;tn=L}if(f=u.entangledLanes,f!==0)for(u=u.entanglements,f&=S;0<f;)g=31-ci(f),L=1<<g,S|=u[g],f&=~L;return S}function nc(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function rc(u,f){switch(u){case 15:return 1;case 14:return 2;case 12:return u=wo(24&~f),u===0?rc(10,f):u;case 10:return u=wo(192&~f),u===0?rc(8,f):u;case 8:return u=wo(3584&~f),u===0&&(u=wo(4186112&~f),u===0&&(u=512)),u;case 2:return f=wo(805306368&~f),f===0&&(f=268435456),f}throw Error(l(358,u))}function wo(u){return u&-u}function El(u){for(var f=[],g=0;31>g;g++)f.push(u);return f}function ya(u,f,g){u.pendingLanes|=f;var S=f-1;u.suspendedLanes&=S,u.pingedLanes&=S,u=u.eventTimes,f=31-ci(f),u[f]=g}var ci=Math.clz32?Math.clz32:$y,vm=Math.log,ym=Math.LN2;function $y(u){return u===0?32:31-(vm(u)/ym|0)|0}var xm=o.unstable_runWithPriority,ic=o.unstable_scheduleCallback,sc=o.unstable_cancelCallback,_m=o.unstable_shouldYield,wm=o.unstable_requestPaint,vd=o.unstable_now,e0=o.unstable_getCurrentPriorityLevel,Sl=o.unstable_ImmediatePriority,Am=o.unstable_UserBlockingPriority,Mm=o.unstable_NormalPriority,Em=o.unstable_LowPriority,Sm=o.unstable_IdlePriority,Tl={},t0=wm!==void 0?wm:function(){},ws=null,oc=null,yd=!1,Tm=vd(),Rt=1e4>Tm?vd:function(){return vd()-Tm};function qt(){switch(e0()){case Sl:return 99;case Am:return 98;case Mm:return 97;case Em:return 96;case Sm:return 95;default:throw Error(l(332))}}function Cm(u){switch(u){case 99:return Sl;case 98:return Am;case 97:return Mm;case 96:return Em;case 95:return Sm;default:throw Error(l(332))}}function As(u,f){return u=Cm(u),xm(u,f)}function Cl(u,f,g){return u=Cm(u),ic(u,f,g)}function Mi(){if(oc!==null){var u=oc;oc=null,sc(u)}bm()}function bm(){if(!yd&&ws!==null){yd=!0;var u=0;try{var f=ws;As(99,function(){for(;u<f.length;u++){var g=f[u];do g=g(!0);while(g!==null)}}),ws=null}catch(g){throw ws!==null&&(ws=ws.slice(u+1)),ic(Sl,Mi),g}finally{yd=!1}}}var n0=c.ReactCurrentBatchConfig;function Lm(u,f){return u===f&&(u!==0||1/u==1/f)||u!==u&&f!==f}var Ei=typeof Object.is=="function"?Object.is:Lm,hr=Object.prototype.hasOwnProperty;function xa(u,f){if(Ei(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var g=Object.keys(u),S=Object.keys(f);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++)if(!hr.call(f,g[S])||!Ei(u[g[S]],f[g[S]]))return!1;return!0}function Ao(u){switch(u.tag){case 5:return vn(u.type);case 16:return vn("Lazy");case 13:return vn("Suspense");case 19:return vn("SuspenseList");case 0:case 2:case 15:return u=yn(u.type,!1),u;case 11:return u=yn(u.type.render,!1),u;case 22:return u=yn(u.type._render,!1),u;case 1:return u=yn(u.type,!0),u;default:return""}}function Si(u,f){if(u&&u.defaultProps){f=i({},f),u=u.defaultProps;for(var g in u)f[g]===void 0&&(f[g]=u[g]);return f}return f}var _a=ar(null),Fr=null,Mo=null,bl=null;function ac(){bl=Mo=Fr=null}function xd(u,f){u=u.type._context,re?(Rn(_a,u._currentValue),u._currentValue=f):(Rn(_a,u._currentValue2),u._currentValue2=f)}function lc(u){var f=_a.current;en(_a),u=u.type._context,re?u._currentValue=f:u._currentValue2=f}function _d(u,f){for(;u!==null;){var g=u.alternate;if((u.childLanes&f)===f){if(g===null||(g.childLanes&f)===f)break;g.childLanes|=f}else u.childLanes|=f,g!==null&&(g.childLanes|=f);u=u.return}}function lr(u,f){Fr=u,bl=Mo=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&f)!=0&&(Li=!0),u.firstContext=null)}function Ti(u,f){if(bl!==u&&f!==!1&&f!==0)if((typeof f!="number"||f===1073741823)&&(bl=u,f=1073741823),f={context:u,observedBits:f,next:null},Mo===null){if(Fr===null)throw Error(l(308));Mo=f,Fr.dependencies={lanes:0,firstContext:f,responders:null}}else Mo=Mo.next=f;return re?u._currentValue:u._currentValue2}var Yn=!1;function wd(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Ad(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Dr(u,f){return{eventTime:u,lane:f,tag:0,payload:null,callback:null,next:null}}function Wi(u,f){if(u=u.updateQueue,u!==null){u=u.shared;var g=u.pending;g===null?f.next=f:(f.next=g.next,g.next=f),u.pending=f}}function uc(u,f){var g=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var L=null,P=null;if(g=g.firstBaseUpdate,g!==null){do{var Y={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};P===null?L=P=Y:P=P.next=Y,g=g.next}while(g!==null);P===null?L=P=f:P=P.next=f}else L=P=f;g={baseState:S.baseState,firstBaseUpdate:L,lastBaseUpdate:P,shared:S.shared,effects:S.effects},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=f:u.next=f,g.lastBaseUpdate=f}function nn(u,f,g,S){var L=u.updateQueue;Yn=!1;var P=L.firstBaseUpdate,Y=L.lastBaseUpdate,ce=L.shared.pending;if(ce!==null){L.shared.pending=null;var Te=ce,Xe=Te.next;Te.next=null,Y===null?P=Xe:Y.next=Xe,Y=Te;var ft=u.alternate;if(ft!==null){ft=ft.updateQueue;var pt=ft.lastBaseUpdate;pt!==Y&&(pt===null?ft.firstBaseUpdate=Xe:pt.next=Xe,ft.lastBaseUpdate=Te)}}if(P!==null){pt=L.baseState,Y=0,ft=Xe=Te=null;do{ce=P.lane;var et=P.eventTime;if((S&ce)===ce){ft!==null&&(ft=ft.next={eventTime:et,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var Jt=u,wn=P;switch(ce=f,et=g,wn.tag){case 1:if(Jt=wn.payload,typeof Jt=="function"){pt=Jt.call(et,pt,ce);break e}pt=Jt;break e;case 3:Jt.flags=Jt.flags&-4097|64;case 0:if(Jt=wn.payload,ce=typeof Jt=="function"?Jt.call(et,pt,ce):Jt,ce==null)break e;pt=i({},pt,ce);break e;case 2:Yn=!0}}P.callback!==null&&(u.flags|=32,ce=L.effects,ce===null?L.effects=[P]:ce.push(P))}else et={eventTime:et,lane:ce,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ft===null?(Xe=ft=et,Te=pt):ft=ft.next=et,Y|=ce;if(P=P.next,P===null){if(ce=L.shared.pending,ce===null)break;P=ce.next,ce.next=null,L.lastBaseUpdate=ce,L.shared.pending=null}}while(1);ft===null&&(Te=pt),L.baseState=Te,L.firstBaseUpdate=Xe,L.lastBaseUpdate=ft,Xl|=Y,u.lanes=Y,u.memoizedState=pt}}function Ms(u,f,g){if(u=f.effects,f.effects=null,u!==null)for(f=0;f<u.length;f++){var S=u[f],L=S.callback;if(L!==null){if(S.callback=null,S=g,typeof L!="function")throw Error(l(191,L));L.call(S)}}}var cc=new s.Component().refs;function fc(u,f,g,S){f=u.memoizedState,g=g(S,f),g=g==null?f:i({},f,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var wa={isMounted:function(u){return(u=u._reactInternals)?ne(u)===u:!1},enqueueSetState:function(u,f,g){u=u._reactInternals;var S=Gr(),L=gr(u),P=Dr(S,L);P.payload=f,g!=null&&(P.callback=g),Wi(u,P),Vi(u,L,S)},enqueueReplaceState:function(u,f,g){u=u._reactInternals;var S=Gr(),L=gr(u),P=Dr(S,L);P.tag=1,P.payload=f,g!=null&&(P.callback=g),Wi(u,P),Vi(u,L,S)},enqueueForceUpdate:function(u,f){u=u._reactInternals;var g=Gr(),S=gr(u),L=Dr(g,S);L.tag=2,f!=null&&(L.callback=f),Wi(u,L),Vi(u,S,g)}};function Bm(u,f,g,S,L,P,Y){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,P,Y):f.prototype&&f.prototype.isPureReactComponent?!xa(g,S)||!xa(L,P):!0}function Rm(u,f,g){var S=!1,L=Xs,P=f.contextType;return typeof P=="object"&&P!==null?P=Ti(P):(L=Xr(f)?Ks:wr.current,S=f.contextTypes,P=(S=S!=null)?_o(u,L):Xs),f=new f(g,P),u.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=wa,u.stateNode=f,f._reactInternals=u,S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=L,u.__reactInternalMemoizedMaskedChildContext=P),f}function Pm(u,f,g,S){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,S),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,S),f.state!==u&&wa.enqueueReplaceState(f,f.state,null)}function dc(u,f,g,S){var L=u.stateNode;L.props=g,L.state=u.memoizedState,L.refs=cc,wd(u);var P=f.contextType;typeof P=="object"&&P!==null?L.context=Ti(P):(P=Xr(f)?Ks:wr.current,L.context=_o(u,P)),nn(u,g,L,S),L.state=u.memoizedState,P=f.getDerivedStateFromProps,typeof P=="function"&&(fc(u,f,P,g),L.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(f=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),f!==L.state&&wa.enqueueReplaceState(L,L.state,null),nn(u,g,L,S),L.state=u.memoizedState),typeof L.componentDidMount=="function"&&(u.flags|=4)}var Eo=Array.isArray;function rs(u,f,g){if(u=g.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(l(309));var S=g.stateNode}if(!S)throw Error(l(147,u));var L=""+u;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===L?f.ref:(f=function(P){var Y=S.refs;Y===cc&&(Y=S.refs={}),P===null?delete Y[L]:Y[L]=P},f._stringRef=L,f)}if(typeof u!="string")throw Error(l(284));if(!g._owner)throw Error(l(290,u))}return u}function hc(u,f){if(u.type!=="textarea")throw Error(l(31,Object.prototype.toString.call(f)==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":f))}function Md(u){function f(xe,pe){if(u){var Le=xe.lastEffect;Le!==null?(Le.nextEffect=pe,xe.lastEffect=pe):xe.firstEffect=xe.lastEffect=pe,pe.nextEffect=null,pe.flags=8}}function g(xe,pe){if(!u)return null;for(;pe!==null;)f(xe,pe),pe=pe.sibling;return null}function S(xe,pe){for(xe=new Map;pe!==null;)pe.key!==null?xe.set(pe.key,pe):xe.set(pe.index,pe),pe=pe.sibling;return xe}function L(xe,pe){return xe=St(xe,pe),xe.index=0,xe.sibling=null,xe}function P(xe,pe,Le){return xe.index=Le,u?(Le=xe.alternate,Le!==null?(Le=Le.index,Le<pe?(xe.flags=2,pe):Le):(xe.flags=2,pe)):pe}function Y(xe){return u&&xe.alternate===null&&(xe.flags=2),xe}function ce(xe,pe,Le,$e){return pe===null||pe.tag!==6?(pe=Jc(Le,xe.mode,$e),pe.return=xe,pe):(pe=L(pe,Le),pe.return=xe,pe)}function Te(xe,pe,Le,$e){return pe!==null&&pe.elementType===Le.type?($e=L(pe,Le.props),$e.ref=rs(xe,pe,Le),$e.return=xe,$e):($e=Vc(Le.type,Le.key,Le.props,null,xe.mode,$e),$e.ref=rs(xe,pe,Le),$e.return=xe,$e)}function Xe(xe,pe,Le,$e){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==Le.containerInfo||pe.stateNode.implementation!==Le.implementation?(pe=rh(Le,xe.mode,$e),pe.return=xe,pe):(pe=L(pe,Le.children||[]),pe.return=xe,pe)}function ft(xe,pe,Le,$e,ht){return pe===null||pe.tag!==7?(pe=Pa(Le,xe.mode,$e,ht),pe.return=xe,pe):(pe=L(pe,Le),pe.return=xe,pe)}function pt(xe,pe,Le){if(typeof pe=="string"||typeof pe=="number")return pe=Jc(""+pe,xe.mode,Le),pe.return=xe,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case h:return Le=Vc(pe.type,pe.key,pe.props,null,xe.mode,Le),Le.ref=rs(xe,null,pe),Le.return=xe,Le;case v:return pe=rh(pe,xe.mode,Le),pe.return=xe,pe}if(Eo(pe)||q(pe))return pe=Pa(pe,xe.mode,Le,null),pe.return=xe,pe;hc(xe,pe)}return null}function et(xe,pe,Le,$e){var ht=pe!==null?pe.key:null;if(typeof Le=="string"||typeof Le=="number")return ht!==null?null:ce(xe,pe,""+Le,$e);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case h:return Le.key===ht?Le.type===p?ft(xe,pe,Le.props.children,$e,ht):Te(xe,pe,Le,$e):null;case v:return Le.key===ht?Xe(xe,pe,Le,$e):null}if(Eo(Le)||q(Le))return ht!==null?null:ft(xe,pe,Le,$e,null);hc(xe,Le)}return null}function Jt(xe,pe,Le,$e,ht){if(typeof $e=="string"||typeof $e=="number")return xe=xe.get(Le)||null,ce(pe,xe,""+$e,ht);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case h:return xe=xe.get($e.key===null?Le:$e.key)||null,$e.type===p?ft(pe,xe,$e.props.children,ht,$e.key):Te(pe,xe,$e,ht);case v:return xe=xe.get($e.key===null?Le:$e.key)||null,Xe(pe,xe,$e,ht)}if(Eo($e)||q($e))return xe=xe.get(Le)||null,ft(pe,xe,$e,ht,null);hc(pe,$e)}return null}function wn(xe,pe,Le,$e){for(var ht=null,un=null,bt=pe,Zt=pe=0,Gn=null;bt!==null&&Zt<Le.length;Zt++){bt.index>Zt?(Gn=bt,bt=null):Gn=bt.sibling;var wt=et(xe,bt,Le[Zt],$e);if(wt===null){bt===null&&(bt=Gn);break}u&&bt&&wt.alternate===null&&f(xe,bt),pe=P(wt,pe,Zt),un===null?ht=wt:un.sibling=wt,un=wt,bt=Gn}if(Zt===Le.length)return g(xe,bt),ht;if(bt===null){for(;Zt<Le.length;Zt++)bt=pt(xe,Le[Zt],$e),bt!==null&&(pe=P(bt,pe,Zt),un===null?ht=bt:un.sibling=bt,un=bt);return ht}for(bt=S(xe,bt);Zt<Le.length;Zt++)Gn=Jt(bt,xe,Zt,Le[Zt],$e),Gn!==null&&(u&&Gn.alternate!==null&&bt.delete(Gn.key===null?Zt:Gn.key),pe=P(Gn,pe,Zt),un===null?ht=Gn:un.sibling=Gn,un=Gn);return u&&bt.forEach(function(vr){return f(xe,vr)}),ht}function pi(xe,pe,Le,$e){var ht=q(Le);if(typeof ht!="function")throw Error(l(150));if(Le=ht.call(Le),Le==null)throw Error(l(151));for(var un=ht=null,bt=pe,Zt=pe=0,Gn=null,wt=Le.next();bt!==null&&!wt.done;Zt++,wt=Le.next()){bt.index>Zt?(Gn=bt,bt=null):Gn=bt.sibling;var vr=et(xe,bt,wt.value,$e);if(vr===null){bt===null&&(bt=Gn);break}u&&bt&&vr.alternate===null&&f(xe,bt),pe=P(vr,pe,Zt),un===null?ht=vr:un.sibling=vr,un=vr,bt=Gn}if(wt.done)return g(xe,bt),ht;if(bt===null){for(;!wt.done;Zt++,wt=Le.next())wt=pt(xe,wt.value,$e),wt!==null&&(pe=P(wt,pe,Zt),un===null?ht=wt:un.sibling=wt,un=wt);return ht}for(bt=S(xe,bt);!wt.done;Zt++,wt=Le.next())wt=Jt(bt,xe,Zt,wt.value,$e),wt!==null&&(u&&wt.alternate!==null&&bt.delete(wt.key===null?Zt:wt.key),pe=P(wt,pe,Zt),un===null?ht=wt:un.sibling=wt,un=wt);return u&&bt.forEach(function(m0){return f(xe,m0)}),ht}return function(xe,pe,Le,$e){var ht=typeof Le=="object"&&Le!==null&&Le.type===p&&Le.key===null;ht&&(Le=Le.props.children);var un=typeof Le=="object"&&Le!==null;if(un)switch(Le.$$typeof){case h:e:{for(un=Le.key,ht=pe;ht!==null;){if(ht.key===un){switch(ht.tag){case 7:if(Le.type===p){g(xe,ht.sibling),pe=L(ht,Le.props.children),pe.return=xe,xe=pe;break e}break;default:if(ht.elementType===Le.type){g(xe,ht.sibling),pe=L(ht,Le.props),pe.ref=rs(xe,ht,Le),pe.return=xe,xe=pe;break e}}g(xe,ht);break}else f(xe,ht);ht=ht.sibling}Le.type===p?(pe=Pa(Le.props.children,xe.mode,$e,Le.key),pe.return=xe,xe=pe):($e=Vc(Le.type,Le.key,Le.props,null,xe.mode,$e),$e.ref=rs(xe,pe,Le),$e.return=xe,xe=$e)}return Y(xe);case v:e:{for(ht=Le.key;pe!==null;){if(pe.key===ht)if(pe.tag===4&&pe.stateNode.containerInfo===Le.containerInfo&&pe.stateNode.implementation===Le.implementation){g(xe,pe.sibling),pe=L(pe,Le.children||[]),pe.return=xe,xe=pe;break e}else{g(xe,pe);break}else f(xe,pe);pe=pe.sibling}pe=rh(Le,xe.mode,$e),pe.return=xe,xe=pe}return Y(xe)}if(typeof Le=="string"||typeof Le=="number")return Le=""+Le,pe!==null&&pe.tag===6?(g(xe,pe.sibling),pe=L(pe,Le),pe.return=xe,xe=pe):(g(xe,pe),pe=Jc(Le,xe.mode,$e),pe.return=xe,xe=pe),Y(xe);if(Eo(Le))return wn(xe,pe,Le,$e);if(q(Le))return pi(xe,pe,Le,$e);if(un&&hc(xe,Le),typeof Le=="undefined"&&!ht)switch(xe.tag){case 1:case 22:case 0:case 11:case 15:throw Error(l(152,fe(xe.type)||"Component"))}return g(xe,pe)}}var Ll=Md(!0),pc=Md(!1),So={},fi=ar(So),Bl=ar(So),qs=ar(So);function Ci(u){if(u===So)throw Error(l(174));return u}function Ed(u,f){Rn(qs,f),Rn(Bl,u),Rn(fi,So),u=He(f),en(fi),Rn(fi,u)}function To(){en(fi),en(Bl),en(qs)}function Kr(u){var f=Ci(qs.current),g=Ci(fi.current);f=ue(g,u.type,f),g!==f&&(Rn(Bl,u),Rn(fi,f))}function Rl(u){Bl.current===u&&(en(fi),en(Bl))}var hn=ar(0);function Pl(u){for(var f=u;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||At(g)||Bt(g)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&64)!=0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var is=null,Co=null,ss=!1;function Im(u,f){var g=Zr(5,null,null,0);g.elementType="DELETED",g.type="DELETED",g.stateNode=f,g.return=u,g.flags=8,u.lastEffect!==null?(u.lastEffect.nextEffect=g,u.lastEffect=g):u.firstEffect=u.lastEffect=g}function Fm(u,f){switch(u.tag){case 5:return f=Ke(f,u.type,u.pendingProps),f!==null?(u.stateNode=f,!0):!1;case 6:return f=kt(f,u.pendingProps),f!==null?(u.stateNode=f,!0):!1;case 13:return!1;default:return!1}}function Sd(u){if(ss){var f=Co;if(f){var g=f;if(!Fm(u,f)){if(f=Kt(g),!f||!Fm(u,f)){u.flags=u.flags&-1025|2,ss=!1,is=u;return}Im(is,g)}is=u,Co=Mt(f)}else u.flags=u.flags&-1025|2,ss=!1,is=u}}function bo(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;is=u}function mc(u){if(!ge||u!==is)return!1;if(!ss)return bo(u),ss=!0,!1;var f=u.type;if(u.tag!==5||f!=="head"&&f!=="body"&&!V(f,u.memoizedProps))for(f=Co;f;)Im(u,f),f=Kt(f);if(bo(u),u.tag===13){if(!ge)throw Error(l(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(l(317));Co=Yt(u)}else Co=is?Kt(u.stateNode):null;return!0}function Td(){ge&&(Co=is=null,ss=!1)}var Qs=[];function gc(){for(var u=0;u<Qs.length;u++){var f=Qs[u];re?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}Qs.length=0}var bi=c.ReactCurrentDispatcher,Or=c.ReactCurrentBatchConfig,Il=0,On=null,Ar=null,Pn=null,Yr=!1,Aa=!1;function qr(){throw Error(l(321))}function Cd(u,f){if(f===null)return!1;for(var g=0;g<f.length&&g<u.length;g++)if(!Ei(u[g],f[g]))return!1;return!0}function bd(u,f,g,S,L,P){if(Il=P,On=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,bi.current=u===null||u.memoizedState===null?r0:_c,u=g(S,L),Aa){P=0;do{if(Aa=!1,!(25>P))throw Error(l(301));P+=1,Pn=Ar=null,f.updateQueue=null,bi.current=Zs,u=g(S,L)}while(Aa)}if(bi.current=xc,f=Ar!==null&&Ar.next!==null,Il=0,Pn=Ar=On=null,Yr=!1,f)throw Error(l(300));return u}function Lo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?On.memoizedState=Pn=u:Pn=Pn.next=u,Pn}function Bo(){if(Ar===null){var u=On.alternate;u=u!==null?u.memoizedState:null}else u=Ar.next;var f=Pn===null?On.memoizedState:Pn.next;if(f!==null)Pn=f,Ar=u;else{if(u===null)throw Error(l(310));Ar=u,u={memoizedState:Ar.memoizedState,baseState:Ar.baseState,baseQueue:Ar.baseQueue,queue:Ar.queue,next:null},Pn===null?On.memoizedState=Pn=u:Pn=Pn.next=u}return Pn}function Nr(u,f){return typeof f=="function"?f(u):f}function de(u){var f=Bo(),g=f.queue;if(g===null)throw Error(l(311));g.lastRenderedReducer=u;var S=Ar,L=S.baseQueue,P=g.pending;if(P!==null){if(L!==null){var Y=L.next;L.next=P.next,P.next=Y}S.baseQueue=L=P,g.pending=null}if(L!==null){L=L.next,S=S.baseState;var ce=Y=P=null,Te=L;do{var Xe=Te.lane;if((Il&Xe)===Xe)ce!==null&&(ce=ce.next={lane:0,action:Te.action,eagerReducer:Te.eagerReducer,eagerState:Te.eagerState,next:null}),S=Te.eagerReducer===u?Te.eagerState:u(S,Te.action);else{var ft={lane:Xe,action:Te.action,eagerReducer:Te.eagerReducer,eagerState:Te.eagerState,next:null};ce===null?(Y=ce=ft,P=S):ce=ce.next=ft,On.lanes|=Xe,Xl|=Xe}Te=Te.next}while(Te!==null&&Te!==L);ce===null?P=S:ce.next=Y,Ei(S,f.memoizedState)||(Li=!0),f.memoizedState=S,f.baseState=P,f.baseQueue=ce,g.lastRenderedState=S}return[f.memoizedState,g.dispatch]}function be(u){var f=Bo(),g=f.queue;if(g===null)throw Error(l(311));g.lastRenderedReducer=u;var S=g.dispatch,L=g.pending,P=f.memoizedState;if(L!==null){g.pending=null;var Y=L=L.next;do P=u(P,Y.action),Y=Y.next;while(Y!==L);Ei(P,f.memoizedState)||(Li=!0),f.memoizedState=P,f.baseQueue===null&&(f.baseState=P),g.lastRenderedState=P}return[P,S]}function Me(u,f,g){var S=f._getVersion;S=S(f._source);var L=re?f._workInProgressVersionPrimary:f._workInProgressVersionSecondary;if(L!==null?u=L===S:(u=u.mutableReadLanes,(u=(Il&u)===u)&&(re?f._workInProgressVersionPrimary=S:f._workInProgressVersionSecondary=S,Qs.push(f))),u)return g(f._source);throw Qs.push(f),Error(l(350))}function nt(u,f,g,S){var L=_n;if(L===null)throw Error(l(349));var P=f._getVersion,Y=P(f._source),ce=bi.current,Te=ce.useState(function(){return Me(L,f,g)}),Xe=Te[1],ft=Te[0];Te=Pn;var pt=u.memoizedState,et=pt.refs,Jt=et.getSnapshot,wn=pt.source;pt=pt.subscribe;var pi=On;return u.memoizedState={refs:et,source:f,subscribe:S},ce.useEffect(function(){et.getSnapshot=g,et.setSnapshot=Xe;var xe=P(f._source);if(!Ei(Y,xe)){xe=g(f._source),Ei(ft,xe)||(Xe(xe),xe=gr(pi),L.mutableReadLanes|=xe&L.pendingLanes),xe=L.mutableReadLanes,L.entangledLanes|=xe;for(var pe=L.entanglements,Le=xe;0<Le;){var $e=31-ci(Le),ht=1<<$e;pe[$e]|=xe,Le&=~ht}}},[g,f,S]),ce.useEffect(function(){return S(f._source,function(){var xe=et.getSnapshot,pe=et.setSnapshot;try{pe(xe(f._source));var Le=gr(pi);L.mutableReadLanes|=Le&L.pendingLanes}catch($e){pe(function(){throw $e})}})},[f,S]),Ei(Jt,g)&&Ei(wn,f)&&Ei(pt,S)||(u={pending:null,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:ft},u.dispatch=Xe=Rd.bind(null,On,u),Te.queue=u,Te.baseQueue=null,ft=Me(L,f,g),Te.memoizedState=Te.baseState=ft),ft}function Ct(u,f,g){var S=Bo();return nt(S,u,f,g)}function zt(u){var f=Lo();return typeof u=="function"&&(u=u()),f.memoizedState=f.baseState=u,u=f.queue={pending:null,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:u},u=u.dispatch=Rd.bind(null,On,u),[f.memoizedState,u]}function In(u,f,g,S){return u={tag:u,create:f,destroy:g,deps:S,next:null},f=On.updateQueue,f===null?(f={lastEffect:null},On.updateQueue=f,f.lastEffect=u.next=u):(g=f.lastEffect,g===null?f.lastEffect=u.next=u:(S=g.next,g.next=u,u.next=S,f.lastEffect=u)),u}function rn(u){var f=Lo();return u={current:u},f.memoizedState=u}function Ma(){return Bo().memoizedState}function Ld(u,f,g,S){var L=Lo();On.flags|=u,L.memoizedState=In(1|f,g,void 0,S===void 0?null:S)}function Qr(u,f,g,S){var L=Bo();S=S===void 0?null:S;var P=void 0;if(Ar!==null){var Y=Ar.memoizedState;if(P=Y.destroy,S!==null&&Cd(S,Y.deps)){In(f,g,P,S);return}}On.flags|=u,L.memoizedState=In(1|f,g,P,S)}function Fl(u,f){return Ld(516,4,u,f)}function vc(u,f){return Qr(516,4,u,f)}function Ro(u,f){return Qr(4,2,u,f)}function Dl(u,f){if(typeof f=="function")return u=u(),f(u),function(){f(null)};if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function Ol(u,f,g){return g=g!=null?g.concat([u]):null,Qr(4,2,Dl.bind(null,f,u),g)}function Qt(){}function Dm(u,f){var g=Bo();f=f===void 0?null:f;var S=g.memoizedState;return S!==null&&f!==null&&Cd(f,S[1])?S[0]:(g.memoizedState=[u,f],u)}function Bd(u,f){var g=Bo();f=f===void 0?null:f;var S=g.memoizedState;return S!==null&&f!==null&&Cd(f,S[1])?S[0]:(u=u(),g.memoizedState=[u,f],u)}function yc(u,f){var g=qt();As(98>g?98:g,function(){u(!0)}),As(97<g?97:g,function(){var S=Or.transition;Or.transition=1;try{u(!1),f()}finally{Or.transition=S}})}function Rd(u,f,g){var S=Gr(),L=gr(u),P={lane:L,action:g,eagerReducer:null,eagerState:null,next:null},Y=f.pending;if(Y===null?P.next=P:(P.next=Y.next,Y.next=P),f.pending=P,Y=u.alternate,u===On||Y!==null&&Y===On)Aa=Yr=!0;else{if(u.lanes===0&&(Y===null||Y.lanes===0)&&(Y=f.lastRenderedReducer,Y!==null))try{var ce=f.lastRenderedState,Te=Y(ce,g);if(P.eagerReducer=Y,P.eagerState=Te,Ei(Te,ce))return}catch{}finally{}Vi(u,L,S)}}var xc={readContext:Ti,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useLayoutEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr,useDeferredValue:qr,useTransition:qr,useMutableSource:qr,useOpaqueIdentifier:qr,unstable_isNewReconciler:!1},r0={readContext:Ti,useCallback:function(u,f){return Lo().memoizedState=[u,f===void 0?null:f],u},useContext:Ti,useEffect:Fl,useImperativeHandle:function(u,f,g){return g=g!=null?g.concat([u]):null,Ld(4,2,Dl.bind(null,f,u),g)},useLayoutEffect:function(u,f){return Ld(4,2,u,f)},useMemo:function(u,f){var g=Lo();return f=f===void 0?null:f,u=u(),g.memoizedState=[u,f],u},useReducer:function(u,f,g){var S=Lo();return f=g!==void 0?g(f):f,S.memoizedState=S.baseState=f,u=S.queue={pending:null,dispatch:null,lastRenderedReducer:u,lastRenderedState:f},u=u.dispatch=Rd.bind(null,On,u),[S.memoizedState,u]},useRef:rn,useState:zt,useDebugValue:Qt,useDeferredValue:function(u){var f=zt(u),g=f[0],S=f[1];return Fl(function(){var L=Or.transition;Or.transition=1;try{S(u)}finally{Or.transition=L}},[u]),g},useTransition:function(){var u=zt(!1),f=u[0];return u=yc.bind(null,u[1]),rn(u),[u,f]},useMutableSource:function(u,f,g){var S=Lo();return S.memoizedState={refs:{getSnapshot:f,setSnapshot:null},source:u,subscribe:g},nt(S,u,f,g)},useOpaqueIdentifier:function(){if(ss){var u=!1,f=W(function(){throw u||(u=!0,g(ve())),Error(l(355))}),g=zt(f)[1];return(On.mode&2)==0&&(On.flags|=516,In(5,function(){g(ve())},void 0,null)),f}return f=ve(),zt(f),f},unstable_isNewReconciler:!1},_c={readContext:Ti,useCallback:Dm,useContext:Ti,useEffect:vc,useImperativeHandle:Ol,useLayoutEffect:Ro,useMemo:Bd,useReducer:de,useRef:Ma,useState:function(){return de(Nr)},useDebugValue:Qt,useDeferredValue:function(u){var f=de(Nr),g=f[0],S=f[1];return vc(function(){var L=Or.transition;Or.transition=1;try{S(u)}finally{Or.transition=L}},[u]),g},useTransition:function(){var u=de(Nr)[0];return[Ma().current,u]},useMutableSource:Ct,useOpaqueIdentifier:function(){return de(Nr)[0]},unstable_isNewReconciler:!1},Zs={readContext:Ti,useCallback:Dm,useContext:Ti,useEffect:vc,useImperativeHandle:Ol,useLayoutEffect:Ro,useMemo:Bd,useReducer:be,useRef:Ma,useState:function(){return be(Nr)},useDebugValue:Qt,useDeferredValue:function(u){var f=be(Nr),g=f[0],S=f[1];return vc(function(){var L=Or.transition;Or.transition=1;try{S(u)}finally{Or.transition=L}},[u]),g},useTransition:function(){var u=be(Nr)[0];return[Ma().current,u]},useMutableSource:Ct,useOpaqueIdentifier:function(){return be(Nr)[0]},unstable_isNewReconciler:!1},wc=c.ReactCurrentOwner,Li=!1;function pr(u,f,g,S){f.child=u===null?pc(f,null,g,S):Ll(f,u.child,g,S)}function Pd(u,f,g,S,L){g=g.render;var P=f.ref;return lr(f,L),S=bd(u,f,g,S,P,L),u!==null&&!Li?(f.updateQueue=u.updateQueue,f.flags&=-517,u.lanes&=~L,ln(u,f,L)):(f.flags|=1,pr(u,f,S,L),f.child)}function Id(u,f,g,S,L,P){if(u===null){var Y=g.type;return typeof Y=="function"&&!th(Y)&&Y.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(f.tag=15,f.type=Y,Nl(u,f,Y,S,L,P)):(u=Vc(g.type,null,S,f,f.mode,P),u.ref=f.ref,u.return=f,f.child=u)}return Y=u.child,(L&P)==0&&(L=Y.memoizedProps,g=g.compare,g=g!==null?g:xa,g(L,S)&&u.ref===f.ref)?ln(u,f,P):(f.flags|=1,u=St(Y,S),u.ref=f.ref,u.return=f,f.child=u)}function Nl(u,f,g,S,L,P){if(u!==null&&xa(u.memoizedProps,S)&&u.ref===f.ref)if(Li=!1,(P&L)!=0)(u.flags&16384)!=0&&(Li=!0);else return f.lanes=u.lanes,ln(u,f,P);return Es(u,f,g,S,P)}function Ac(u,f,g){var S=f.pendingProps,L=S.children,P=u!==null?u.memoizedState:null;if(S.mode==="hidden"||S.mode==="unstable-defer-without-hiding")if((f.mode&4)==0)f.memoizedState={baseLanes:0},Ra(f,g);else if((g&1073741824)!=0)f.memoizedState={baseLanes:0},Ra(f,P!==null?P.baseLanes:g);else return u=P!==null?P.baseLanes|g:g,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:u},Ra(f,u),null;else P!==null?(S=P.baseLanes|g,f.memoizedState=null):S=g,Ra(f,S);return pr(u,f,L,g),f.child}function Ea(u,f){var g=f.ref;(u===null&&g!==null||u!==null&&u.ref!==g)&&(f.flags|=128)}function Es(u,f,g,S,L){var P=Xr(g)?Ks:wr.current;return P=_o(f,P),lr(f,L),g=bd(u,f,g,S,P,L),u!==null&&!Li?(f.updateQueue=u.updateQueue,f.flags&=-517,u.lanes&=~L,ln(u,f,L)):(f.flags|=1,pr(u,f,g,L),f.child)}function Gl(u,f,g,S,L){if(Xr(g)){var P=!0;Al(f)}else P=!1;if(lr(f,L),f.stateNode===null)u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),Rm(f,g,S),dc(f,g,S,L),S=!0;else if(u===null){var Y=f.stateNode,ce=f.memoizedProps;Y.props=ce;var Te=Y.context,Xe=g.contextType;typeof Xe=="object"&&Xe!==null?Xe=Ti(Xe):(Xe=Xr(g)?Ks:wr.current,Xe=_o(f,Xe));var ft=g.getDerivedStateFromProps,pt=typeof ft=="function"||typeof Y.getSnapshotBeforeUpdate=="function";pt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ce!==S||Te!==Xe)&&Pm(f,Y,S,Xe),Yn=!1;var et=f.memoizedState;Y.state=et,nn(f,S,Y,L),Te=f.memoizedState,ce!==S||et!==Te||Ir.current||Yn?(typeof ft=="function"&&(fc(f,g,ft,S),Te=f.memoizedState),(ce=Yn||Bm(f,g,ce,S,et,Te,Xe))?(pt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(f.flags|=4)):(typeof Y.componentDidMount=="function"&&(f.flags|=4),f.memoizedProps=S,f.memoizedState=Te),Y.props=S,Y.state=Te,Y.context=Xe,S=ce):(typeof Y.componentDidMount=="function"&&(f.flags|=4),S=!1)}else{Y=f.stateNode,Ad(u,f),ce=f.memoizedProps,Xe=f.type===f.elementType?ce:Si(f.type,ce),Y.props=Xe,pt=f.pendingProps,et=Y.context,Te=g.contextType,typeof Te=="object"&&Te!==null?Te=Ti(Te):(Te=Xr(g)?Ks:wr.current,Te=_o(f,Te));var Jt=g.getDerivedStateFromProps;(ft=typeof Jt=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ce!==pt||et!==Te)&&Pm(f,Y,S,Te),Yn=!1,et=f.memoizedState,Y.state=et,nn(f,S,Y,L);var wn=f.memoizedState;ce!==pt||et!==wn||Ir.current||Yn?(typeof Jt=="function"&&(fc(f,g,Jt,S),wn=f.memoizedState),(Xe=Yn||Bm(f,g,Xe,S,et,wn,Te))?(ft||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(S,wn,Te),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(S,wn,Te)),typeof Y.componentDidUpdate=="function"&&(f.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(f.flags|=256)):(typeof Y.componentDidUpdate!="function"||ce===u.memoizedProps&&et===u.memoizedState||(f.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ce===u.memoizedProps&&et===u.memoizedState||(f.flags|=256),f.memoizedProps=S,f.memoizedState=wn),Y.props=S,Y.state=wn,Y.context=Te,S=Xe):(typeof Y.componentDidUpdate!="function"||ce===u.memoizedProps&&et===u.memoizedState||(f.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ce===u.memoizedProps&&et===u.memoizedState||(f.flags|=256),S=!1)}return Fd(u,f,g,S,P,L)}function Fd(u,f,g,S,L,P){Ea(u,f);var Y=(f.flags&64)!=0;if(!S&&!Y)return L&&gd(f,g,!1),ln(u,f,P);S=f.stateNode,wc.current=f;var ce=Y&&typeof g.getDerivedStateFromError!="function"?null:S.render();return f.flags|=1,u!==null&&Y?(f.child=Ll(f,u.child,null,P),f.child=Ll(f,null,ce,P)):pr(u,f,ce,P),f.memoizedState=S.state,L&&gd(f,g,!0),f.child}function Om(u){var f=u.stateNode;f.pendingContext?pm(u,f.pendingContext,f.pendingContext!==f.context):f.context&&pm(u,f.context,!1),Ed(u,f.containerInfo)}var Mc={dehydrated:null,retryLane:0};function Hl(u,f,g){var S=f.pendingProps,L=hn.current,P=!1,Y;return(Y=(f.flags&64)!=0)||(Y=u!==null&&u.memoizedState===null?!1:(L&2)!=0),Y?(P=!0,f.flags&=-65):u!==null&&u.memoizedState===null||S.fallback===void 0||S.unstable_avoidThisFallback===!0||(L|=1),Rn(hn,L&1),u===null?(S.fallback!==void 0&&Sd(f),u=S.children,L=S.fallback,P?(u=Ul(f,u,L,g),f.child.memoizedState={baseLanes:g},f.memoizedState=Mc,u):typeof S.unstable_expectedLoadTime=="number"?(u=Ul(f,u,L,g),f.child.memoizedState={baseLanes:g},f.memoizedState=Mc,f.lanes=33554432,u):(g=Wo({mode:"visible",children:u},f.mode,g,null),g.return=f,f.child=g)):u.memoizedState!==null?P?(S=Nm(u,f,S.children,S.fallback,g),P=f.child,L=u.child.memoizedState,P.memoizedState=L===null?{baseLanes:g}:{baseLanes:L.baseLanes|g},P.childLanes=u.childLanes&~g,f.memoizedState=Mc,S):(g=Ec(u,f,S.children,g),f.memoizedState=null,g):P?(S=Nm(u,f,S.children,S.fallback,g),P=f.child,L=u.child.memoizedState,P.memoizedState=L===null?{baseLanes:g}:{baseLanes:L.baseLanes|g},P.childLanes=u.childLanes&~g,f.memoizedState=Mc,S):(g=Ec(u,f,S.children,g),f.memoizedState=null,g)}function Ul(u,f,g,S){var L=u.mode,P=u.child;return f={mode:"hidden",children:f},(L&2)==0&&P!==null?(P.childLanes=0,P.pendingProps=f):P=Wo(f,L,0,null),g=Pa(g,L,S,null),P.return=u,g.return=u,P.sibling=g,u.child=P,g}function Ec(u,f,g,S){var L=u.child;return u=L.sibling,g=St(L,{mode:"visible",children:g}),(f.mode&2)==0&&(g.lanes=S),g.return=f,g.sibling=null,u!==null&&(u.nextEffect=null,u.flags=8,f.firstEffect=f.lastEffect=u),f.child=g}function Nm(u,f,g,S,L){var P=f.mode,Y=u.child;u=Y.sibling;var ce={mode:"hidden",children:g};return(P&2)==0&&f.child!==Y?(g=f.child,g.childLanes=0,g.pendingProps=ce,Y=g.lastEffect,Y!==null?(f.firstEffect=g.firstEffect,f.lastEffect=Y,Y.nextEffect=null):f.firstEffect=f.lastEffect=null):g=St(Y,ce),u!==null?S=St(u,S):(S=Pa(S,P,L,null),S.flags|=2),S.return=f,g.return=f,g.sibling=S,f.child=g,S}function Dd(u,f){u.lanes|=f;var g=u.alternate;g!==null&&(g.lanes|=f),_d(u.return,f)}function Od(u,f,g,S,L,P){var Y=u.memoizedState;Y===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:L,lastEffect:P}:(Y.isBackwards=f,Y.rendering=null,Y.renderingStartTime=0,Y.last=S,Y.tail=g,Y.tailMode=L,Y.lastEffect=P)}function Gm(u,f,g){var S=f.pendingProps,L=S.revealOrder,P=S.tail;if(pr(u,f,S.children,g),S=hn.current,(S&2)!=0)S=S&1|2,f.flags|=64;else{if(u!==null&&(u.flags&64)!=0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&Dd(u,g);else if(u.tag===19)Dd(u,g);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}if(Rn(hn,S),(f.mode&2)==0)f.memoizedState=null;else switch(L){case"forwards":for(g=f.child,L=null;g!==null;)u=g.alternate,u!==null&&Pl(u)===null&&(L=g),g=g.sibling;g=L,g===null?(L=f.child,f.child=null):(L=g.sibling,g.sibling=null),Od(f,!1,L,g,P,f.lastEffect);break;case"backwards":for(g=null,L=f.child,f.child=null;L!==null;){if(u=L.alternate,u!==null&&Pl(u)===null){f.child=L;break}u=L.sibling,L.sibling=g,g=L,L=u}Od(f,!0,g,null,P,f.lastEffect);break;case"together":Od(f,!1,null,null,void 0,f.lastEffect);break;default:f.memoizedState=null}return f.child}function ln(u,f,g){if(u!==null&&(f.dependencies=u.dependencies),Xl|=f.lanes,(g&f.childLanes)!=0){if(u!==null&&f.child!==u.child)throw Error(l(153));if(f.child!==null){for(u=f.child,g=St(u,u.pendingProps),f.child=g,g.return=f;u.sibling!==null;)u=u.sibling,g=g.sibling=St(u,u.pendingProps),g.return=f;g.sibling=null}return f.child}return null}function xn(u){u.flags|=4}var kl,zl,Wl,Sc;if(ae)kl=function(u,f){for(var g=f.child;g!==null;){if(g.tag===5||g.tag===6)F(u,g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},zl=function(){},Wl=function(u,f,g,S,L){if(u=u.memoizedProps,u!==S){var P=f.stateNode,Y=Ci(fi.current);g=X(P,g,u,S,L,Y),(f.updateQueue=g)&&xn(f)}},Sc=function(u,f,g,S){g!==S&&xn(f)};else if(ye){kl=function(u,f,g,S){for(var L=f.child;L!==null;){if(L.tag===5){var P=L.stateNode;g&&S&&(P=we(P,L.type,L.memoizedProps,L)),F(u,P)}else if(L.tag===6)P=L.stateNode,g&&S&&(P=Re(P,L.memoizedProps,L)),F(u,P);else if(L.tag!==4){if(L.tag===13&&(L.flags&4)!=0&&(P=L.memoizedState!==null)){var Y=L.child;if(Y!==null&&(Y.child!==null&&(Y.child.return=Y,kl(u,Y,!0,P)),P=Y.sibling,P!==null)){P.return=L,L=P;continue}}if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===f)break;for(;L.sibling===null;){if(L.return===null||L.return===f)return;L=L.return}L.sibling.return=L.return,L=L.sibling}};var Tc=function(u,f,g,S){for(var L=f.child;L!==null;){if(L.tag===5){var P=L.stateNode;g&&S&&(P=we(P,L.type,L.memoizedProps,L)),wl(u,P)}else if(L.tag===6)P=L.stateNode,g&&S&&(P=Re(P,L.memoizedProps,L)),wl(u,P);else if(L.tag!==4){if(L.tag===13&&(L.flags&4)!=0&&(P=L.memoizedState!==null)){var Y=L.child;if(Y!==null&&(Y.child!==null&&(Y.child.return=Y,Tc(u,Y,!0,P)),P=Y.sibling,P!==null)){P.return=L,L=P;continue}}if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===f)break;for(;L.sibling===null;){if(L.return===null||L.return===f)return;L=L.return}L.sibling.return=L.return,L=L.sibling}};zl=function(u){var f=u.stateNode;if(u.firstEffect!==null){var g=f.containerInfo,S=_l(g);Tc(S,u,!1,!1),f.pendingChildren=S,xn(u),J(g,S)}},Wl=function(u,f,g,S,L){var P=u.stateNode,Y=u.memoizedProps;if((u=f.firstEffect===null)&&Y===S)f.stateNode=P;else{var ce=f.stateNode,Te=Ci(fi.current),Xe=null;Y!==S&&(Xe=X(ce,g,Y,S,L,Te)),u&&Xe===null?f.stateNode=P:(P=ns(P,Xe,g,Y,S,f,u,ce),G(P,g,S,L,Te)&&xn(f),f.stateNode=P,u?xn(f):kl(P,f,!1,!1))}},Sc=function(u,f,g,S){g!==S?(u=Ci(qs.current),g=Ci(fi.current),f.stateNode=K(S,u,g,f),xn(f)):f.stateNode=u.stateNode}}else zl=function(){},Wl=function(){},Sc=function(){};function Ss(u,f){if(!ss)switch(u.tailMode){case"hidden":f=u.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function Nd(u,f,g){var S=f.pendingProps;switch(f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Xr(f.type)&&ec(),null;case 3:return To(),en(Ir),en(wr),gc(),S=f.stateNode,S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(u===null||u.child===null)&&(mc(f)?xn(f):S.hydrate||(f.flags|=256)),zl(f),null;case 5:Rl(f);var L=Ci(qs.current);if(g=f.type,u!==null&&f.stateNode!=null)Wl(u,f,g,S,L),u.ref!==f.ref&&(f.flags|=128);else{if(!S){if(f.stateNode===null)throw Error(l(166));return null}if(u=Ci(fi.current),mc(f)){if(!ge)throw Error(l(175));u=Vt(f.stateNode,f.type,f.memoizedProps,L,u,f),f.updateQueue=u,u!==null&&xn(f)}else{var P=Ee(g,S,L,u,f);kl(P,f,!1,!1),f.stateNode=P,G(P,g,S,L,u)&&xn(f)}f.ref!==null&&(f.flags|=128)}return null;case 6:if(u&&f.stateNode!=null)Sc(u,f,u.memoizedProps,S);else{if(typeof S!="string"&&f.stateNode===null)throw Error(l(166));if(u=Ci(qs.current),L=Ci(fi.current),mc(f)){if(!ge)throw Error(l(176));Et(f.stateNode,f.memoizedProps,f)&&xn(f)}else f.stateNode=K(S,u,L,f)}return null;case 13:return en(hn),S=f.memoizedState,(f.flags&64)!=0?(f.lanes=g,f):(S=S!==null,L=!1,u===null?f.memoizedProps.fallback!==void 0&&mc(f):L=u.memoizedState!==null,S&&!L&&(f.mode&2)!=0&&(u===null&&f.memoizedProps.unstable_avoidThisFallback!==!0||(hn.current&1)!=0?mr===0&&(mr=3):((mr===0||mr===3)&&(mr=4),_n===null||(Xl&134217727)==0&&(Ca&134217727)==0||zn(_n,Mr))),ye&&S&&(f.flags|=4),ae&&(S||L)&&(f.flags|=4),null);case 4:return To(),zl(f),u===null&&We(f.stateNode.containerInfo),null;case 10:return lc(f),null;case 17:return Xr(f.type)&&ec(),null;case 19:if(en(hn),S=f.memoizedState,S===null)return null;if(L=(f.flags&64)!=0,P=S.rendering,P===null)if(L)Ss(S,!1);else{if(mr!==0||u!==null&&(u.flags&64)!=0)for(u=f.child;u!==null;){if(P=Pl(u),P!==null){for(f.flags|=64,Ss(S,!1),u=P.updateQueue,u!==null&&(f.updateQueue=u,f.flags|=4),S.lastEffect===null&&(f.firstEffect=null),f.lastEffect=S.lastEffect,u=g,S=f.child;S!==null;)L=S,g=u,L.flags&=2,L.nextEffect=null,L.firstEffect=null,L.lastEffect=null,P=L.alternate,P===null?(L.childLanes=0,L.lanes=g,L.child=null,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=P.childLanes,L.lanes=P.lanes,L.child=P.child,L.memoizedProps=P.memoizedProps,L.memoizedState=P.memoizedState,L.updateQueue=P.updateQueue,L.type=P.type,g=P.dependencies,L.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),S=S.sibling;return Rn(hn,hn.current&1|2),f.child}u=u.sibling}S.tail!==null&&Rt()>Xd&&(f.flags|=64,L=!0,Ss(S,!1),f.lanes=33554432)}else{if(!L)if(u=Pl(P),u!==null){if(f.flags|=64,L=!0,u=u.updateQueue,u!==null&&(f.updateQueue=u,f.flags|=4),Ss(S,!0),S.tail===null&&S.tailMode==="hidden"&&!P.alternate&&!ss)return f=f.lastEffect=S.lastEffect,f!==null&&(f.nextEffect=null),null}else 2*Rt()-S.renderingStartTime>Xd&&g!==1073741824&&(f.flags|=64,L=!0,Ss(S,!1),f.lanes=33554432);S.isBackwards?(P.sibling=f.child,f.child=P):(u=S.last,u!==null?u.sibling=P:f.child=P,S.last=P)}return S.tail!==null?(u=S.tail,S.rendering=u,S.tail=u.sibling,S.lastEffect=f.lastEffect,S.renderingStartTime=Rt(),u.sibling=null,f=hn.current,Rn(hn,L?f&1|2:f&1),u):null;case 23:case 24:return qd(),u!==null&&u.memoizedState!==null!=(f.memoizedState!==null)&&S.mode!=="unstable-defer-without-hiding"&&(f.flags|=4),null}throw Error(l(156,f.tag))}function Sa(u){switch(u.tag){case 1:Xr(u.type)&&ec();var f=u.flags;return f&4096?(u.flags=f&-4097|64,u):null;case 3:if(To(),en(Ir),en(wr),gc(),f=u.flags,(f&64)!=0)throw Error(l(285));return u.flags=f&-4097|64,u;case 5:return Rl(u),null;case 13:return en(hn),f=u.flags,f&4096?(u.flags=f&-4097|64,u):null;case 19:return en(hn),null;case 4:return To(),null;case 10:return lc(u),null;case 23:case 24:return qd(),null;default:return null}}function Po(u,f){try{var g="",S=f;do g+=Ao(S),S=S.return;while(S);var L=g}catch(P){L=`
Error generating stack: `+P.message+`
`+P.stack}return{value:u,source:f,stack:L}}function Io(u,f){try{console.error(f.value)}catch(g){setTimeout(function(){throw g})}}var Cc=typeof WeakMap=="function"?WeakMap:Map;function Fo(u,f,g){g=Dr(-1,g),g.tag=3,g.payload={element:null};var S=f.value;return g.callback=function(){Ri||(Ri=!0,Yl=S),Io(u,f)},g}function Hm(u,f,g){g=Dr(-1,g),g.tag=3;var S=u.type.getDerivedStateFromError;if(typeof S=="function"){var L=f.value;g.payload=function(){return Io(u,f),S(L)}}var P=u.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(g.callback=function(){typeof S!="function"&&(Er===null?Er=new Set([this]):Er.add(this),Io(u,f));var Y=f.stack;this.componentDidCatch(f.value,{componentStack:Y!==null?Y:""})}),g}var i0=typeof WeakSet=="function"?WeakSet:Set;function Um(u){var f=u.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(g){Bs(u,g)}else f.current=null}function s0(u,f){switch(f.tag){case 0:case 11:case 15:case 22:return;case 1:if(f.flags&256&&u!==null){var g=u.memoizedProps,S=u.memoizedState;u=f.stateNode,f=u.getSnapshotBeforeUpdate(f.elementType===f.type?g:Si(f.type,g),S),u.__reactInternalSnapshotBeforeUpdate=f}return;case 3:ae&&f.flags&256&&js(f.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(l(163))}function km(u,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&u)===u){var S=g.destroy;g.destroy=void 0,S!==void 0&&S()}g=g.next}while(g!==f)}}function bc(u,f,g){switch(g.tag){case 0:case 11:case 15:case 22:if(f=g.updateQueue,f=f!==null?f.lastEffect:null,f!==null){u=f=f.next;do{if((u.tag&3)==3){var S=u.create;u.destroy=S()}u=u.next}while(u!==f)}if(f=g.updateQueue,f=f!==null?f.lastEffect:null,f!==null){u=f=f.next;do{var L=u;S=L.next,L=L.tag,(L&4)!=0&&(L&1)!=0&&(Gc(g,u),Xm(g,u)),u=S}while(u!==f)}return;case 1:u=g.stateNode,g.flags&4&&(f===null?u.componentDidMount():(S=g.elementType===g.type?f.memoizedProps:Si(g.type,f.memoizedProps),u.componentDidUpdate(S,f.memoizedState,u.__reactInternalSnapshotBeforeUpdate))),f=g.updateQueue,f!==null&&Ms(g,f,u);return;case 3:if(f=g.updateQueue,f!==null){if(u=null,g.child!==null)switch(g.child.tag){case 5:u=Ce(g.child.stateNode);break;case 1:u=g.child.stateNode}Ms(g,f,u)}return;case 5:u=g.stateNode,f===null&&g.flags&4&&he(u,g.type,g.memoizedProps,g);return;case 6:return;case 4:return;case 12:return;case 13:ge&&g.memoizedState===null&&(g=g.alternate,g!==null&&(g=g.memoizedState,g!==null&&(g=g.dehydrated,g!==null&&dr(g))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(l(163))}function Ta(u,f){if(ae)for(var g=u;;){if(g.tag===5){var S=g.stateNode;f?Ui(S):or(g.stateNode,g.memoizedProps)}else if(g.tag===6)S=g.stateNode,f?Mn(S):xs(S,g.memoizedProps);else if((g.tag!==23&&g.tag!==24||g.memoizedState===null||g===u)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return;g=g.return}g.sibling.return=g.return,g=g.sibling}}function Gd(u,f){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(tc,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:case 22:if(u=f.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var g=u=u.next;do{var S=g,L=S.destroy;if(S=S.tag,L!==void 0)if((S&4)!=0)Gc(f,g);else{S=f;try{L()}catch(P){Bs(S,P)}}g=g.next}while(g!==u)}break;case 1:if(Um(f),u=f.stateNode,typeof u.componentWillUnmount=="function")try{u.props=f.memoizedProps,u.state=f.memoizedState,u.componentWillUnmount()}catch(P){Bs(f,P)}break;case 5:Um(f);break;case 4:ae?zm(u,f):ye&&ye&&(f=f.stateNode.containerInfo,u=_l(f),Se(f,u))}}function N(u,f){for(var g=f;;)if(Gd(u,g),g.child===null||ae&&g.tag===4){if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else g.child.return=g,g=g.child}function Do(u){u.alternate=null,u.child=null,u.dependencies=null,u.firstEffect=null,u.lastEffect=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.return=null,u.updateQueue=null}function Vl(u){return u.tag===5||u.tag===3||u.tag===4}function di(u){if(ae){e:{for(var f=u.return;f!==null;){if(Vl(f))break e;f=f.return}throw Error(l(160))}var g=f;switch(f=g.stateNode,g.tag){case 5:var S=!1;break;case 3:f=f.containerInfo,S=!0;break;case 4:f=f.containerInfo,S=!0;break;default:throw Error(l(161))}g.flags&16&&(Dn(f),g.flags&=-17);e:t:for(g=u;;){for(;g.sibling===null;){if(g.return===null||Vl(g.return)){g=null;break e}g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue t;g.child.return=g,g=g.child}if(!(g.flags&2)){g=g.stateNode;break e}}S?Ot(u,g,f):Hd(u,g,f)}}function Ot(u,f,g){var S=u.tag,L=S===5||S===6;if(L)u=L?u.stateNode:u.stateNode.instance,f?Ut(g,u,f):Ht(g,u);else if(S!==4&&(u=u.child,u!==null))for(Ot(u,f,g),u=u.sibling;u!==null;)Ot(u,f,g),u=u.sibling}function Hd(u,f,g){var S=u.tag,L=S===5||S===6;if(L)u=L?u.stateNode:u.stateNode.instance,f?at(g,u,f):It(g,u);else if(S!==4&&(u=u.child,u!==null))for(Hd(u,f,g),u=u.sibling;u!==null;)Hd(u,f,g),u=u.sibling}function zm(u,f){for(var g=f,S=!1,L,P;;){if(!S){S=g.return;e:for(;;){if(S===null)throw Error(l(160));switch(L=S.stateNode,S.tag){case 5:P=!1;break e;case 3:L=L.containerInfo,P=!0;break e;case 4:L=L.containerInfo,P=!0;break e}S=S.return}S=!0}if(g.tag===5||g.tag===6)N(u,g),P?gn(L,g.stateNode):an(L,g.stateNode);else if(g.tag===4){if(g.child!==null){L=g.stateNode.containerInfo,P=!0,g.child.return=g,g=g.child;continue}}else if(Gd(u,g),g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return;g=g.return,g.tag===4&&(S=!1)}g.sibling.return=g.return,g=g.sibling}}function Ud(u,f){if(ae){switch(f.tag){case 0:case 11:case 14:case 15:case 22:km(3,f);return;case 1:return;case 5:var g=f.stateNode;if(g!=null){var S=f.memoizedProps;u=u!==null?u.memoizedProps:S;var L=f.type,P=f.updateQueue;f.updateQueue=null,P!==null&&Ue(g,P,L,u,S,f)}return;case 6:if(f.stateNode===null)throw Error(l(162));g=f.memoizedProps,Kn(f.stateNode,u!==null?u.memoizedProps:g,g);return;case 3:ge&&(f=f.stateNode,f.hydrate&&(f.hydrate=!1,jr(f.containerInfo)));return;case 12:return;case 13:$s(f),Lc(f);return;case 19:Lc(f);return;case 17:return;case 23:case 24:Ta(f,f.memoizedState!==null);return}throw Error(l(163))}switch(f.tag){case 0:case 11:case 14:case 15:case 22:km(3,f);return;case 12:return;case 13:$s(f),Lc(f);return;case 19:Lc(f);return;case 3:ge&&(g=f.stateNode,g.hydrate&&(g.hydrate=!1,jr(g.containerInfo)));break;case 23:case 24:return}e:if(ye){switch(f.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:f=f.stateNode,Se(f.containerInfo,f.pendingChildren);break e}throw Error(l(163))}}function $s(u){u.memoizedState!==null&&(ba=Rt(),ae&&Ta(u.child,!0))}function Lc(u){var f=u.updateQueue;if(f!==null){u.updateQueue=null;var g=u.stateNode;g===null&&(g=u.stateNode=new i0),f.forEach(function(S){var L=Ym.bind(null,u,S);g.has(S)||(g.add(S),S.then(L,L))})}}function o0(u,f){return u!==null&&(u=u.memoizedState,u===null||u.dehydrated!==null)?(f=f.memoizedState,f!==null&&f.dehydrated===null):!1}var Bc=0,Rc=1,Pc=2,Bi=3,Ic=4;if(typeof Symbol=="function"&&Symbol.for){var Jl=Symbol.for;Bc=Jl("selector.component"),Rc=Jl("selector.has_pseudo_class"),Pc=Jl("selector.role"),Bi=Jl("selector.test_id"),Ic=Jl("selector.text")}function kd(u){var f=z(u);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(l(364));return f}if(u=tt(u),u===null)throw Error(l(362));return u.stateNode.current}function zd(u,f){switch(f.$$typeof){case Bc:if(u.type===f.value)return!0;break;case Rc:e:{f=f.value,u=[u,0];for(var g=0;g<u.length;){var S=u[g++],L=u[g++],P=f[L];if(S.tag!==5||!ke(S)){for(;P!=null&&zd(S,P);)L++,P=f[L];if(L===f.length){f=!0;break e}else for(S=S.child;S!==null;)u.push(S,L),S=S.sibling}}f=!1}return f;case Pc:if(u.tag===5&&Qe(u.stateNode,f.value))return!0;break;case Ic:if((u.tag===5||u.tag===6)&&(u=Ve(u),u!==null&&0<=u.indexOf(f.value)))return!0;break;case Bi:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(l(365,f))}return!1}function Wd(u){switch(u.$$typeof){case Bc:return"<"+(fe(u.value)||"Unknown")+">";case Rc:return":has("+(Wd(u)||"")+")";case Pc:return'[role="'+u.value+'"]';case Ic:return'"'+u.value+'"';case Bi:return'[data-testname="'+u.value+'"]';default:throw Error(l(365,u))}}function os(u,f){var g=[];u=[u,0];for(var S=0;S<u.length;){var L=u[S++],P=u[S++],Y=f[P];if(L.tag!==5||!ke(L)){for(;Y!=null&&zd(L,Y);)P++,Y=f[P];if(P===f.length)g.push(L);else for(L=L.child;L!==null;)u.push(L,P),L=L.sibling}}return g}function Vd(u,f){if(!Ye)throw Error(l(363));u=kd(u),u=os(u,f),f=[],u=Array.from(u);for(var g=0;g<u.length;){var S=u[g++];if(S.tag===5)ke(S)||f.push(S.stateNode);else for(S=S.child;S!==null;)u.push(S),S=S.sibling}return f}var Fc=null;function a0(u){if(Fc===null)try{var f=("require"+Math.random()).slice(0,7);Fc=(n&&n[f]).call(n,"timers").setImmediate}catch{Fc=function(S){var L=new MessageChannel;L.port1.onmessage=S,L.port2.postMessage(void 0)}}return Fc(u)}var l0=Math.ceil,Dc=c.ReactCurrentDispatcher,Ts=c.ReactCurrentOwner,Jd=c.IsSomeRendererActing,gt=0,_n=null,qn=null,Mr=0,Oo=0,jd=ar(0),mr=0,jl=null,No=0,Xl=0,Ca=0,Kl=0,Go=null,ba=0,Xd=1/0;function Cs(){Xd=Rt()+500}var it=null,Ri=!1,Yl=null,Er=null,Qn=!1,ql=null,La=90,Oc=[],Ho=[],Sr=null,Ba=0,Kd=null,Uo=-1,bs=0,Ql=0,Nn=null,ko=!1;function Gr(){return(gt&48)!=0?Rt():Uo!==-1?Uo:Uo=Rt()}function gr(u){if(u=u.mode,(u&2)==0)return 1;if((u&4)==0)return qt()===99?1:2;if(bs===0&&(bs=No),n0.transition!==0){Ql!==0&&(Ql=Go!==null?Go.pendingLanes:0),u=bs;var f=4186112&~Ql;return f&=-f,f===0&&(u=4186112&~u,f=u&-u,f===0&&(f=8192)),f}return u=qt(),(gt&4)!=0&&u===98?u=rc(12,bs):(u=Zy(u),u=rc(u,bs)),u}function Vi(u,f,g){if(50<Ba)throw Ba=0,Kd=null,Error(l(185));if(u=zo(u,f),u===null)return null;ya(u,f,g),u===_n&&(Ca|=f,mr===4&&zn(u,Mr));var S=qt();f===1?(gt&8)!=0&&(gt&48)==0?Zl(u):(Zn(u,g),gt===0&&(Cs(),Mi())):((gt&4)==0||S!==98&&S!==99||(Sr===null?Sr=new Set([u]):Sr.add(u)),Zn(u,g)),Go=u}function zo(u,f){u.lanes|=f;var g=u.alternate;for(g!==null&&(g.lanes|=f),g=u,u=u.return;u!==null;)u.childLanes|=f,g=u.alternate,g!==null&&(g.childLanes|=f),g=u,u=u.return;return g.tag===3?g.stateNode:null}function Zn(u,f){for(var g=u.callbackNode,S=u.suspendedLanes,L=u.pingedLanes,P=u.expirationTimes,Y=u.pendingLanes;0<Y;){var ce=31-ci(Y),Te=1<<ce,Xe=P[ce];if(Xe===-1){if((Te&S)==0||(Te&L)!=0){Xe=f,Ys(Te);var ft=tn;P[ce]=10<=ft?Xe+250:6<=ft?Xe+5e3:-1}}else Xe<=f&&(u.expiredLanes|=Te);Y&=~Te}if(S=va(u,u===_n?Mr:0),f=tn,S===0)g!==null&&(g!==Tl&&sc(g),u.callbackNode=null,u.callbackPriority=0);else{if(g!==null){if(u.callbackPriority===f)return;g!==Tl&&sc(g)}f===15?(g=Zl.bind(null,u),ws===null?(ws=[g],oc=ic(Sl,bm)):ws.push(g),g=Tl):f===14?g=Cl(99,Zl.bind(null,u)):(g=gm(f),g=Cl(g,Yd.bind(null,u))),u.callbackPriority=f,u.callbackNode=g}}function Yd(u){if(Uo=-1,Ql=bs=0,(gt&48)!=0)throw Error(l(327));var f=u.callbackNode;if(Ls()&&u.callbackNode!==f)return null;var g=va(u,u===_n?Mr:0);if(g===0)return null;var S=g,L=gt;gt|=16;var P=Jm();(_n!==u||Mr!==S)&&(Cs(),as(u,S));do try{c0();break}catch(ce){Qd(u,ce)}while(1);if(ac(),Dc.current=P,gt=L,qn!==null?S=0:(_n=null,Mr=0,S=mr),(No&Ca)!=0)as(u,0);else if(S!==0){if(S===2&&(gt|=64,u.hydrate&&(u.hydrate=!1,js(u.containerInfo)),g=nc(u),g!==0&&(S=$l(u,g))),S===1)throw f=jl,as(u,0),zn(u,g),Zn(u,Rt()),f;switch(u.finishedWork=u.current.alternate,u.finishedLanes=g,S){case 0:case 1:throw Error(l(345));case 2:eo(u);break;case 3:if(zn(u,g),(g&62914560)===g&&(S=ba+500-Rt(),10<S)){if(va(u,0)!==0)break;if(L=u.suspendedLanes,(L&g)!==g){Gr(),u.pingedLanes|=u.suspendedLanes&L;break}u.timeoutHandle=Z(eo.bind(null,u),S);break}eo(u);break;case 4:if(zn(u,g),(g&4186112)===g)break;for(S=u.eventTimes,L=-1;0<g;){var Y=31-ci(g);P=1<<Y,Y=S[Y],Y>L&&(L=Y),g&=~P}if(g=L,g=Rt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*l0(g/1960))-g,10<g){u.timeoutHandle=Z(eo.bind(null,u),g);break}eo(u);break;case 5:eo(u);break;default:throw Error(l(329))}}return Zn(u,Rt()),u.callbackNode===f?Yd.bind(null,u):null}function zn(u,f){for(f&=~Kl,f&=~Ca,u.suspendedLanes|=f,u.pingedLanes&=~f,u=u.expirationTimes;0<f;){var g=31-ci(f),S=1<<g;u[g]=-1,f&=~S}}function Zl(u){if((gt&48)!=0)throw Error(l(327));if(Ls(),u===_n&&(u.expiredLanes&Mr)!=0){var f=Mr,g=$l(u,f);(No&Ca)!=0&&(f=va(u,f),g=$l(u,f))}else f=va(u,0),g=$l(u,f);if(u.tag!==0&&g===2&&(gt|=64,u.hydrate&&(u.hydrate=!1,js(u.containerInfo)),f=nc(u),f!==0&&(g=$l(u,f))),g===1)throw g=jl,as(u,0),zn(u,f),Zn(u,Rt()),g;return u.finishedWork=u.current.alternate,u.finishedLanes=f,eo(u),Zn(u,Rt()),null}function u0(){if(Sr!==null){var u=Sr;Sr=null,u.forEach(function(f){f.expiredLanes|=24&f.pendingLanes,Zn(f,Rt())})}Mi()}function Wm(u,f){var g=gt;gt|=1;try{return u(f)}finally{gt=g,gt===0&&(Cs(),Mi())}}function Vm(u,f){var g=gt;if((g&48)!=0)return u(f);gt|=1;try{if(u)return As(99,u.bind(null,f))}finally{gt=g,Mi()}}function Ra(u,f){Rn(jd,Oo),Oo|=f,No|=f}function qd(){Oo=jd.current,en(jd)}function as(u,f){u.finishedWork=null,u.finishedLanes=0;var g=u.timeoutHandle;if(g!==j&&(u.timeoutHandle=j,se(g)),qn!==null)for(g=qn.return;g!==null;){var S=g;switch(S.tag){case 1:S=S.type.childContextTypes,S!=null&&ec();break;case 3:To(),en(Ir),en(wr),gc();break;case 5:Rl(S);break;case 4:To();break;case 13:en(hn);break;case 19:en(hn);break;case 10:lc(S);break;case 23:case 24:qd()}g=g.return}_n=u,qn=St(u.current,null),Mr=Oo=No=f,mr=0,jl=null,Kl=Ca=Xl=0}function Qd(u,f){do{var g=qn;try{if(ac(),bi.current=xc,Yr){for(var S=On.memoizedState;S!==null;){var L=S.queue;L!==null&&(L.pending=null),S=S.next}Yr=!1}if(Il=0,Pn=Ar=On=null,Aa=!1,Ts.current=null,g===null||g.return===null){mr=1,jl=f,qn=null;break}e:{var P=u,Y=g.return,ce=g,Te=f;if(f=Mr,ce.flags|=2048,ce.firstEffect=ce.lastEffect=null,Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var Xe=Te;if((ce.mode&2)==0){var ft=ce.alternate;ft?(ce.updateQueue=ft.updateQueue,ce.memoizedState=ft.memoizedState,ce.lanes=ft.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var pt=(hn.current&1)!=0,et=Y;do{var Jt;if(Jt=et.tag===13){var wn=et.memoizedState;if(wn!==null)Jt=wn.dehydrated!==null;else{var pi=et.memoizedProps;Jt=pi.fallback===void 0?!1:pi.unstable_avoidThisFallback!==!0?!0:!pt}}if(Jt){var xe=et.updateQueue;if(xe===null){var pe=new Set;pe.add(Xe),et.updateQueue=pe}else xe.add(Xe);if((et.mode&2)==0){if(et.flags|=64,ce.flags|=16384,ce.flags&=-2981,ce.tag===1)if(ce.alternate===null)ce.tag=17;else{var Le=Dr(-1,1);Le.tag=2,Wi(ce,Le)}ce.lanes|=1;break e}Te=void 0,ce=f;var $e=P.pingCache;if($e===null?($e=P.pingCache=new Cc,Te=new Set,$e.set(Xe,Te)):(Te=$e.get(Xe),Te===void 0&&(Te=new Set,$e.set(Xe,Te))),!Te.has(ce)){Te.add(ce);var ht=Km.bind(null,P,Xe,ce);Xe.then(ht,ht)}et.flags|=4096,et.lanes=f;break e}et=et.return}while(et!==null);Te=Error((fe(ce.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}mr!==5&&(mr=2),Te=Po(Te,ce),et=Y;do{switch(et.tag){case 3:P=Te,et.flags|=4096,f&=-f,et.lanes|=f;var un=Fo(et,P,f);uc(et,un);break e;case 1:P=Te;var bt=et.type,Zt=et.stateNode;if((et.flags&64)==0&&(typeof bt.getDerivedStateFromError=="function"||Zt!==null&&typeof Zt.componentDidCatch=="function"&&(Er===null||!Er.has(Zt)))){et.flags|=4096,f&=-f,et.lanes|=f;var Gn=Hm(et,P,f);uc(et,Gn);break e}}et=et.return}while(et!==null)}Nc(g)}catch(wt){f=wt,qn===g&&g!==null&&(qn=g=g.return);continue}break}while(1)}function Jm(){var u=Dc.current;return Dc.current=xc,u===null?xc:u}function $l(u,f){var g=gt;gt|=16;var S=Jm();_n===u&&Mr===f||as(u,f);do try{eu();break}catch(L){Qd(u,L)}while(1);if(ac(),gt=g,Dc.current=S,qn!==null)throw Error(l(261));return _n=null,Mr=0,mr}function eu(){for(;qn!==null;)jm(qn)}function c0(){for(;qn!==null&&!_m();)jm(qn)}function jm(u){var f=tu(u.alternate,u,Oo);u.memoizedProps=u.pendingProps,f===null?Nc(u):qn=f,Ts.current=null}function Nc(u){var f=u;do{var g=f.alternate;if(u=f.return,(f.flags&2048)==0){if(g=Nd(g,f,Oo),g!==null){qn=g;return}if(g=f,g.tag!==24&&g.tag!==23||g.memoizedState===null||(Oo&1073741824)!=0||(g.mode&4)==0){for(var S=0,L=g.child;L!==null;)S|=L.lanes|L.childLanes,L=L.sibling;g.childLanes=S}u!==null&&(u.flags&2048)==0&&(u.firstEffect===null&&(u.firstEffect=f.firstEffect),f.lastEffect!==null&&(u.lastEffect!==null&&(u.lastEffect.nextEffect=f.firstEffect),u.lastEffect=f.lastEffect),1<f.flags&&(u.lastEffect!==null?u.lastEffect.nextEffect=f:u.firstEffect=f,u.lastEffect=f))}else{if(g=Sa(f),g!==null){g.flags&=2047,qn=g;return}u!==null&&(u.firstEffect=u.lastEffect=null,u.flags|=2048)}if(f=f.sibling,f!==null){qn=f;return}qn=f=u}while(f!==null);mr===0&&(mr=5)}function eo(u){var f=qt();return As(99,f0.bind(null,u,f)),null}function f0(u,f){do Ls();while(ql!==null);if((gt&48)!=0)throw Error(l(327));var g=u.finishedWork;if(g===null)return null;if(u.finishedWork=null,u.finishedLanes=0,g===u.current)throw Error(l(177));u.callbackNode=null;var S=g.lanes|g.childLanes,L=S,P=u.pendingLanes&~L;u.pendingLanes=L,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=L,u.mutableReadLanes&=L,u.entangledLanes&=L,L=u.entanglements;for(var Y=u.eventTimes,ce=u.expirationTimes;0<P;){var Te=31-ci(P),Xe=1<<Te;L[Te]=0,Y[Te]=-1,ce[Te]=-1,P&=~Xe}if(Sr!==null&&(S&24)==0&&Sr.has(u)&&Sr.delete(u),u===_n&&(qn=_n=null,Mr=0),1<g.flags?g.lastEffect!==null?(g.lastEffect.nextEffect=g,S=g.firstEffect):S=g:S=g.firstEffect,S!==null){L=gt,gt|=32,Ts.current=null,Nn=Oe(u.containerInfo),ko=!1,it=S;do try{d0()}catch(pe){if(it===null)throw Error(l(330));Bs(it,pe),it=it.nextEffect}while(it!==null);Nn=null,it=S;do try{for(Y=u;it!==null;){var ft=it.flags;if(ft&16&&ae&&Dn(it.stateNode),ft&128){var pt=it.alternate;if(pt!==null){var et=pt.ref;et!==null&&(typeof et=="function"?et(null):et.current=null)}}switch(ft&1038){case 2:di(it),it.flags&=-3;break;case 6:di(it),it.flags&=-3,Ud(it.alternate,it);break;case 1024:it.flags&=-1025;break;case 1028:it.flags&=-1025,Ud(it.alternate,it);break;case 4:Ud(it.alternate,it);break;case 8:ce=Y,P=it,ae?zm(ce,P):N(ce,P);var Jt=P.alternate;Do(P),Jt!==null&&Do(Jt)}it=it.nextEffect}}catch(pe){if(it===null)throw Error(l(330));Bs(it,pe),it=it.nextEffect}while(it!==null);ko&&Ne(),ze(u.containerInfo),u.current=g,it=S;do try{for(ft=u;it!==null;){var wn=it.flags;if(wn&36&&bc(ft,it.alternate,it),wn&128){pt=void 0;var pi=it.ref;if(pi!==null){var xe=it.stateNode;switch(it.tag){case 5:pt=Ce(xe);break;default:pt=xe}typeof pi=="function"?pi(pt):pi.current=pt}}it=it.nextEffect}}catch(pe){if(it===null)throw Error(l(330));Bs(it,pe),it=it.nextEffect}while(it!==null);it=null,t0(),gt=L}else u.current=g;if(Qn)Qn=!1,ql=u,La=f;else for(it=S;it!==null;)f=it.nextEffect,it.nextEffect=null,it.flags&8&&(wn=it,wn.sibling=null,wn.stateNode=null),it=f;if(S=u.pendingLanes,S===0&&(Er=null),S===1?u===Kd?Ba++:(Ba=0,Kd=u):Ba=0,g=g.stateNode,_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(tc,g,void 0,(g.current.flags&64)==64)}catch{}if(Zn(u,Rt()),Ri)throw Ri=!1,u=Yl,Yl=null,u;return(gt&8)!=0||Mi(),null}function d0(){for(;it!==null;){var u=it.alternate;ko||Nn===null||((it.flags&8)!=0?Be(it,Nn)&&(ko=!0,Ae()):it.tag===13&&o0(u,it)&&Be(it,Nn)&&(ko=!0,Ae()));var f=it.flags;(f&256)!=0&&s0(u,it),(f&512)==0||Qn||(Qn=!0,Cl(97,function(){return Ls(),null})),it=it.nextEffect}}function Ls(){if(La!==90){var u=97<La?97:La;return La=90,As(u,h0)}return!1}function Xm(u,f){Oc.push(f,u),Qn||(Qn=!0,Cl(97,function(){return Ls(),null}))}function Gc(u,f){Ho.push(f,u),Qn||(Qn=!0,Cl(97,function(){return Ls(),null}))}function h0(){if(ql===null)return!1;var u=ql;if(ql=null,(gt&48)!=0)throw Error(l(331));var f=gt;gt|=32;var g=Ho;Ho=[];for(var S=0;S<g.length;S+=2){var L=g[S],P=g[S+1],Y=L.destroy;if(L.destroy=void 0,typeof Y=="function")try{Y()}catch(Te){if(P===null)throw Error(l(330));Bs(P,Te)}}for(g=Oc,Oc=[],S=0;S<g.length;S+=2){L=g[S],P=g[S+1];try{var ce=L.create;L.destroy=ce()}catch(Te){if(P===null)throw Error(l(330));Bs(P,Te)}}for(ce=u.current.firstEffect;ce!==null;)u=ce.nextEffect,ce.nextEffect=null,ce.flags&8&&(ce.sibling=null,ce.stateNode=null),ce=u;return gt=f,Mi(),!0}function Hc(u,f,g){f=Po(g,f),f=Fo(u,f,1),Wi(u,f),f=Gr(),u=zo(u,1),u!==null&&(ya(u,1,f),Zn(u,f))}function Bs(u,f){if(u.tag===3)Hc(u,u,f);else for(var g=u.return;g!==null;){if(g.tag===3){Hc(g,u,f);break}else if(g.tag===1){var S=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Er===null||!Er.has(S))){u=Po(f,u);var L=Hm(g,u,1);if(Wi(g,L),L=Gr(),g=zo(g,1),g!==null)ya(g,1,L),Zn(g,L);else if(typeof S.componentDidCatch=="function"&&(Er===null||!Er.has(S)))try{S.componentDidCatch(f,u)}catch{}break}}g=g.return}}function Km(u,f,g){var S=u.pingCache;S!==null&&S.delete(f),f=Gr(),u.pingedLanes|=u.suspendedLanes&g,_n===u&&(Mr&g)===g&&(mr===4||mr===3&&(Mr&62914560)===Mr&&500>Rt()-ba?as(u,0):Kl|=g),Zn(u,f)}function Ym(u,f){var g=u.stateNode;g!==null&&g.delete(f),f=0,f===0&&(f=u.mode,(f&2)==0?f=1:(f&4)==0?f=qt()===99?1:2:(bs===0&&(bs=No),f=wo(62914560&~bs),f===0&&(f=4194304))),g=Gr(),u=zo(u,f),u!==null&&(ya(u,f,g),Zn(u,g))}var tu;tu=function(u,f,g){var S=f.lanes;if(u!==null)if(u.memoizedProps!==f.pendingProps||Ir.current)Li=!0;else if((g&S)!=0)Li=(u.flags&16384)!=0;else{switch(Li=!1,f.tag){case 3:Om(f),Td();break;case 5:Kr(f);break;case 1:Xr(f.type)&&Al(f);break;case 4:Ed(f,f.stateNode.containerInfo);break;case 10:xd(f,f.memoizedProps.value);break;case 13:if(f.memoizedState!==null)return(g&f.child.childLanes)!=0?Hl(u,f,g):(Rn(hn,hn.current&1),f=ln(u,f,g),f!==null?f.sibling:null);Rn(hn,hn.current&1);break;case 19:if(S=(g&f.childLanes)!=0,(u.flags&64)!=0){if(S)return Gm(u,f,g);f.flags|=64}var L=f.memoizedState;if(L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),Rn(hn,hn.current),S)break;return null;case 23:case 24:return f.lanes=0,Ac(u,f,g)}return ln(u,f,g)}else Li=!1;switch(f.lanes=0,f.tag){case 2:if(S=f.type,u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps,L=_o(f,wr.current),lr(f,g),L=bd(null,f,S,u,L,g),f.flags|=1,typeof L=="object"&&L!==null&&typeof L.render=="function"&&L.$$typeof===void 0){if(f.tag=1,f.memoizedState=null,f.updateQueue=null,Xr(S)){var P=!0;Al(f)}else P=!1;f.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,wd(f);var Y=S.getDerivedStateFromProps;typeof Y=="function"&&fc(f,S,Y,u),L.updater=wa,f.stateNode=L,L._reactInternals=f,dc(f,S,u,g),f=Fd(null,f,S,!0,P,g)}else f.tag=0,pr(null,f,L,g),f=f.child;return f;case 16:L=f.elementType;e:{switch(u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),u=f.pendingProps,P=L._init,L=P(L._payload),f.type=L,P=f.tag=nh(L),u=Si(L,u),P){case 0:f=Es(null,f,L,u,g);break e;case 1:f=Gl(null,f,L,u,g);break e;case 11:f=Pd(null,f,L,u,g);break e;case 14:f=Id(null,f,L,Si(L.type,u),S,g);break e}throw Error(l(306,L,""))}return f;case 0:return S=f.type,L=f.pendingProps,L=f.elementType===S?L:Si(S,L),Es(u,f,S,L,g);case 1:return S=f.type,L=f.pendingProps,L=f.elementType===S?L:Si(S,L),Gl(u,f,S,L,g);case 3:if(Om(f),S=f.updateQueue,u===null||S===null)throw Error(l(282));if(S=f.pendingProps,L=f.memoizedState,L=L!==null?L.element:null,Ad(u,f),nn(f,S,null,g),S=f.memoizedState.element,S===L)Td(),f=ln(u,f,g);else{if(L=f.stateNode,(P=L.hydrate)&&(ge?(Co=Mt(f.stateNode.containerInfo),is=f,P=ss=!0):P=!1),P){if(ge&&(u=L.mutableSourceEagerHydrationData,u!=null))for(L=0;L<u.length;L+=2)P=u[L],Y=u[L+1],re?P._workInProgressVersionPrimary=Y:P._workInProgressVersionSecondary=Y,Qs.push(P);for(g=pc(f,null,S,g),f.child=g;g;)g.flags=g.flags&-3|1024,g=g.sibling}else pr(u,f,S,g),Td();f=f.child}return f;case 5:return Kr(f),u===null&&Sd(f),S=f.type,L=f.pendingProps,P=u!==null?u.memoizedProps:null,Y=L.children,V(S,L)?Y=null:P!==null&&V(S,P)&&(f.flags|=16),Ea(u,f),pr(u,f,Y,g),f.child;case 6:return u===null&&Sd(f),null;case 13:return Hl(u,f,g);case 4:return Ed(f,f.stateNode.containerInfo),S=f.pendingProps,u===null?f.child=Ll(f,null,S,g):pr(u,f,S,g),f.child;case 11:return S=f.type,L=f.pendingProps,L=f.elementType===S?L:Si(S,L),Pd(u,f,S,L,g);case 7:return pr(u,f,f.pendingProps,g),f.child;case 8:return pr(u,f,f.pendingProps.children,g),f.child;case 12:return pr(u,f,f.pendingProps.children,g),f.child;case 10:e:{if(S=f.type._context,L=f.pendingProps,Y=f.memoizedProps,P=L.value,xd(f,P),Y!==null){var ce=Y.value;if(P=Ei(ce,P)?0:(typeof S._calculateChangedBits=="function"?S._calculateChangedBits(ce,P):1073741823)|0,P===0){if(Y.children===L.children&&!Ir.current){f=ln(u,f,g);break e}}else for(ce=f.child,ce!==null&&(ce.return=f);ce!==null;){var Te=ce.dependencies;if(Te!==null){Y=ce.child;for(var Xe=Te.firstContext;Xe!==null;){if(Xe.context===S&&(Xe.observedBits&P)!=0){ce.tag===1&&(Xe=Dr(-1,g&-g),Xe.tag=2,Wi(ce,Xe)),ce.lanes|=g,Xe=ce.alternate,Xe!==null&&(Xe.lanes|=g),_d(ce.return,g),Te.lanes|=g;break}Xe=Xe.next}}else Y=ce.tag===10&&ce.type===f.type?null:ce.child;if(Y!==null)Y.return=ce;else for(Y=ce;Y!==null;){if(Y===f){Y=null;break}if(ce=Y.sibling,ce!==null){ce.return=Y.return,Y=ce;break}Y=Y.return}ce=Y}}pr(u,f,L.children,g),f=f.child}return f;case 9:return L=f.type,P=f.pendingProps,S=P.children,lr(f,g),L=Ti(L,P.unstable_observedBits),S=S(L),f.flags|=1,pr(u,f,S,g),f.child;case 14:return L=f.type,P=Si(L,f.pendingProps),P=Si(L.type,P),Id(u,f,L,P,S,g);case 15:return Nl(u,f,f.type,f.pendingProps,S,g);case 17:return S=f.type,L=f.pendingProps,L=f.elementType===S?L:Si(S,L),u!==null&&(u.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,Xr(S)?(u=!0,Al(f)):u=!1,lr(f,g),Rm(f,S,L),dc(f,S,L,g),Fd(null,f,S,!0,u,g);case 19:return Gm(u,f,g);case 23:return Ac(u,f,g);case 24:return Ac(u,f,g)}throw Error(l(156,f.tag))};var Uc={current:!1},kc=o.unstable_flushAllWithoutAsserting,Zd=typeof kc=="function";function $d(){if(kc!==void 0)return kc();for(var u=!1;Ls();)u=!0;return u}function eh(u){try{$d(),a0(function(){$d()?eh(u):u()})}catch(f){u(f)}}var zc=0,Wc=!1;function qm(u,f,g,S){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(u,f,g,S){return new qm(u,f,g,S)}function th(u){return u=u.prototype,!(!u||!u.isReactComponent)}function nh(u){if(typeof u=="function")return th(u)?1:0;if(u!=null){if(u=u.$$typeof,u===M)return 11;if(u===C)return 14}return 2}function St(u,f){var g=u.alternate;return g===null?(g=Zr(u.tag,f,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=f,g.type=u.type,g.flags=0,g.nextEffect=null,g.firstEffect=null,g.lastEffect=null),g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,f=u.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g}function Vc(u,f,g,S,L,P){var Y=2;if(S=u,typeof u=="function")th(u)&&(Y=1);else if(typeof u=="string")Y=5;else e:switch(u){case p:return Pa(g.children,L,P,f);case B:Y=8,L|=16;break;case m:Y=8,L|=1;break;case x:return u=Zr(12,g,f,L|8),u.elementType=x,u.type=x,u.lanes=P,u;case w:return u=Zr(13,g,f,L),u.type=w,u.elementType=w,u.lanes=P,u;case _:return u=Zr(19,g,f,L),u.elementType=_,u.lanes=P,u;case H:return Wo(g,L,P,f);case D:return u=Zr(24,g,f,L),u.elementType=D,u.lanes=P,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case A:Y=10;break e;case E:Y=9;break e;case M:Y=11;break e;case C:Y=14;break e;case b:Y=16,S=null;break e;case I:Y=22;break e}throw Error(l(130,u==null?u:typeof u,""))}return f=Zr(Y,g,f,L),f.elementType=u,f.type=S,f.lanes=P,f}function Pa(u,f,g,S){return u=Zr(7,u,S,f),u.lanes=g,u}function Wo(u,f,g,S){return u=Zr(23,u,S,f),u.elementType=H,u.lanes=g,u}function Jc(u,f,g){return u=Zr(6,u,null,f),u.lanes=g,u}function rh(u,f,g){return f=Zr(4,u.children!==null?u.children:[],u.key,f),f.lanes=g,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}function p0(u,f,g){this.tag=f,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=j,this.pendingContext=this.context=null,this.hydrate=g,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=El(0),this.expirationTimes=El(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=El(0),ge&&(this.mutableSourceEagerHydrationData=null)}function hi(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(l(188)):Error(l(268,Object.keys(u)));return u=le(f),u===null?null:u.stateNode}function Qm(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<f?g:f}}function Vo(u,f){Qm(u,f),(u=u.alternate)&&Qm(u,f)}function ih(u){return u=le(u),u===null?null:u.stateNode}function Zm(){return null}return r.IsThisRendererActing=Uc,r.act=function(u){function f(){zc--,Jd.current=g,Uc.current=S}Wc===!1&&(Wc=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),zc++;var g=Jd.current,S=Uc.current;Jd.current=!0,Uc.current=!0;try{var L=Wm(u)}catch(P){throw f(),P}if(L!==null&&typeof L=="object"&&typeof L.then=="function")return{then:function(P,Y){L.then(function(){1<zc||Zd===!0&&g===!0?(f(),P()):eh(function(ce){f(),ce?Y(ce):P()})},function(ce){f(),Y(ce)})}};try{zc!==1||Zd!==!1&&g!==!1||$d(),f()}catch(P){throw f(),P}return{then:function(P){P()}}},r.attemptContinuousHydration=function(u){if(u.tag===13){var f=Gr();Vi(u,67108864,f),Vo(u,67108864)}},r.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var f=Gr(),g=gr(u);Vi(u,g,f),Vo(u,g)}},r.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var f=u.stateNode;if(f.hydrate){var g=Ys(f.pendingLanes);f.expiredLanes|=g&f.pendingLanes,Zn(f,Rt()),(gt&48)==0&&(Cs(),Mi())}break;case 13:var S=Gr();Vm(function(){return Vi(u,1,S)}),Vo(u,4)}},r.attemptUserBlockingHydration=function(u){if(u.tag===13){var f=Gr();Vi(u,4,f),Vo(u,4)}},r.batchedEventUpdates=function(u,f){var g=gt;gt|=2;try{return u(f)}finally{gt=g,gt===0&&(Cs(),Mi())}},r.batchedUpdates=Wm,r.createComponentSelector=function(u){return{$$typeof:Bc,value:u}},r.createContainer=function(u,f,g){return u=new p0(u,f,g),f=Zr(3,null,null,f===2?7:f===1?3:0),u.current=f,f.stateNode=u,wd(f),u},r.createHasPsuedoClassSelector=function(u){return{$$typeof:Rc,value:u}},r.createPortal=function(u,f,g){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:v,key:S==null?null:""+S,children:u,containerInfo:f,implementation:g}},r.createRoleSelector=function(u){return{$$typeof:Pc,value:u}},r.createTestNameSelector=function(u){return{$$typeof:Bi,value:u}},r.createTextSelector=function(u){return{$$typeof:Ic,value:u}},r.deferredUpdates=function(u){return As(97,u)},r.discreteUpdates=function(u,f,g,S,L){var P=gt;gt|=4;try{return As(98,u.bind(null,f,g,S,L))}finally{gt=P,gt===0&&(Cs(),Mi())}},r.findAllNodes=Vd,r.findBoundingRects=function(u,f){if(!Ye)throw Error(l(363));f=Vd(u,f),u=[];for(var g=0;g<f.length;g++)u.push(oe(f[g]));for(f=u.length-1;0<f;f--){g=u[f];for(var S=g.x,L=S+g.width,P=g.y,Y=P+g.height,ce=f-1;0<=ce;ce--)if(f!==ce){var Te=u[ce],Xe=Te.x,ft=Xe+Te.width,pt=Te.y,et=pt+Te.height;if(S>=Xe&&P>=pt&&L<=ft&&Y<=et){u.splice(f,1);break}else if(S!==Xe||g.width!==Te.width||et<P||pt>Y){if(!(P!==pt||g.height!==Te.height||ft<S||Xe>L)){Xe>S&&(Te.width+=Xe-S,Te.x=S),ft<L&&(Te.width=L-Xe),u.splice(f,1);break}}else{pt>P&&(Te.height+=pt-P,Te.y=P),et<Y&&(Te.height=Y-pt),u.splice(f,1);break}}}return u},r.findHostInstance=hi,r.findHostInstanceWithNoPortals=function(u){return u=_e(u),u===null?null:u.tag===20?u.stateNode.instance:u.stateNode},r.findHostInstanceWithWarning=function(u){return hi(u)},r.flushControlled=function(u){var f=gt;gt|=1;try{As(99,u)}finally{gt=f,gt===0&&(Cs(),Mi())}},r.flushDiscreteUpdates=function(){(gt&49)==0&&(u0(),Ls())},r.flushPassiveEffects=Ls,r.flushSync=Vm,r.focusWithin=function(u,f){if(!Ye)throw Error(l(363));for(u=kd(u),f=os(u,f),f=Array.from(f),u=0;u<f.length;){var g=f[u++];if(!ke(g)){if(g.tag===5&&Ie(g.stateNode))return!0;for(g=g.child;g!==null;)f.push(g),g=g.sibling}}return!1},r.getCurrentUpdateLanePriority=function(){return Ml},r.getFindAllNodesFailureDescription=function(u,f){if(!Ye)throw Error(l(363));var g=0,S=[];u=[kd(u),0];for(var L=0;L<u.length;){var P=u[L++],Y=u[L++],ce=f[Y];if((P.tag!==5||!ke(P))&&(zd(P,ce)&&(S.push(Wd(ce)),Y++,Y>g&&(g=Y)),Y<f.length))for(P=P.child;P!==null;)u.push(P,Y),P=P.sibling}if(g<f.length){for(u=[];g<f.length;g++)u.push(Wd(f[g]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},r.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return Ce(u.child.stateNode);default:return u.child.stateNode}},r.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:c.ReactCurrentDispatcher,findHostInstanceByFiber:ih,findFiberByHostInstance:u.findFiberByHostInstance||Zm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")u=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!f.isDisabled&&f.supportsFiber)try{tc=f.inject(u),_s=f}catch{}u=!0}return u},r.observeVisibleRects=function(u,f,g,S){if(!Ye)throw Error(l(363));u=Vd(u,f);var L=rt(u,g,S).disconnect;return{disconnect:function(){L()}}},r.registerMutableSourceForHydration=function(u,f){var g=f._getVersion;g=g(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,g]:u.mutableSourceEagerHydrationData.push(f,g)},r.runWithPriority=function(u,f){var g=Ml;try{return Ml=u,f()}finally{Ml=g}},r.shouldSuspend=function(){return!1},r.unbatchedUpdates=function(u,f){var g=gt;gt&=-2,gt|=8;try{return u(f)}finally{gt=g,gt===0&&(Cs(),Mi())}},r.updateContainer=function(u,f,g,S){var L=f.current,P=Gr(),Y=gr(L);e:if(g){g=g._reactInternals;t:{if(ne(g)!==g||g.tag!==1)throw Error(l(170));var ce=g;do{switch(ce.tag){case 3:ce=ce.stateNode.context;break t;case 1:if(Xr(ce.type)){ce=ce.stateNode.__reactInternalMemoizedMergedChildContext;break t}}ce=ce.return}while(ce!==null);throw Error(l(171))}if(g.tag===1){var Te=g.type;if(Xr(Te)){g=mm(g,Te,ce);break e}}g=ce}else g=Xs;return f.context===null?f.context=g:f.pendingContext=g,f=Dr(P,Y),f.payload={element:u},S=S===void 0?null:S,S!==null&&(f.callback=S),Wi(L,f),Vi(L,Y,P),Y},r}})(gB);mB.exports=gB.exports;var Cz=mB.exports,QA=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!=0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(i=r;i--!=0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=r;i--!=0;){var o=s[i];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t};const Xy=[];function vB(n,e,t,r=0,i=!1){for(const o of e)if(QA(t,o.args)){if(i)return;if(o.error)throw o.error;if(o.response)return o.response;throw o.promise}const s={args:t,promise:n(...t).then(o=>s.response=o!=null?o:!0).catch(o=>s.error=o!=null?o:"unknown error").then(()=>{r>0&&setTimeout(()=>{const o=e.indexOf(s);o!==-1&&e.splice(o,1)},r)})};if(e.push(s),!i)throw s.promise}function bz(n,...e){if(e===void 0||e.length===0)n.splice(0,n.length);else{const t=n.find(r=>QA(e,r.args));if(t){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}}function yo(n,...e){return vB(n,Xy,e,yo.lifespan)}yo.lifespan=0;yo.clear=(...n)=>bz(Xy,...n);yo.preload=(n,...e)=>void vB(n,Xy,e,yo.lifespan,!0);yo.peek=(...n)=>{var e;return(e=Xy.find(t=>QA(n,t.args)))==null?void 0:e.response};function ZA(n,e,t){var r,i,s,o,l;e==null&&(e=100);function c(){var v=Date.now()-o;v<e&&v>=0?r=setTimeout(c,e-v):(r=null,t||(l=n.apply(s,i),s=i=null))}var h=function(){s=this,i=arguments,o=Date.now();var v=t&&!r;return r||(r=setTimeout(c,e)),v&&(l=n.apply(s,i),s=i=null),l};return h.clear=function(){r&&(clearTimeout(r),r=null)},h.flush=function(){r&&(l=n.apply(s,i),s=i=null,clearTimeout(r),r=null)},h}ZA.debounce=ZA;var yB=ZA;function Lz({debounce:n,scroll:e,polyfill:t}={debounce:0,scroll:!1}){const r=t||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[i,s]=Tt.exports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=Tt.exports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:i}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,h=Tt.exports.useRef(!1);Tt.exports.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[v,p,m]=Tt.exports.useMemo(()=>{const M=()=>{if(!o.current.element)return;const{left:w,top:_,width:C,height:b,bottom:I,right:B,x:H,y:D}=o.current.element.getBoundingClientRect(),O={left:w,top:_,width:C,height:b,bottom:I,right:B,x:H,y:D};Object.freeze(O),h.current&&!Iz(o.current.lastBounds,O)&&s(o.current.lastBounds=O)};return[M,c?yB.debounce(M,c):M,l?yB.debounce(M,l):M]},[s,l,c]);function x(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",m,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null)}function A(){!o.current.element||(o.current.resizeObserver=new r(m),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(M=>M.addEventListener("scroll",m,{capture:!0,passive:!0})))}const E=M=>{!M||M===o.current.element||(x(),o.current.element=M,o.current.scrollContainers=xB(M),A())};return Rz(m,Boolean(e)),Bz(p),Tt.exports.useEffect(()=>{x(),A()},[e,m,p]),Tt.exports.useEffect(()=>x,[]),[E,i,v]}function Bz(n){Tt.exports.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Rz(n,e){Tt.exports.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function xB(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...xB(n.parentElement)]}const Pz=["x","y","top","bottom","left","right","width","height"],Iz=(n,e)=>Pz.every(t=>n[t]===e[t]),Xn={obj:n=>n===Object(n)&&!Xn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Xn.str(n)||Xn.num(n)||Xn.obj(n))return n===e;if(Xn.arr(n)&&n==e)return!0;let t;for(t in n)if(!(t in e))return!1;for(t in e)if(n[t]!==e[t])return!1;return Xn.und(t)?n===e:!0}};function $A(n){return(n.eventObject||n.object).uuid+"/"+n.index}function Fz(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)})}function Dz(n){const e=new U;function t(p){var m;const x=n.getState(),{raycaster:A,mouse:E,camera:M,size:w}=x,{offsetX:_,offsetY:C}=(m=A.computeOffsets==null?void 0:A.computeOffsets(p,x))!=null?m:p,{width:b,height:I}=w;E.set(_/b*2-1,-(C/I)*2+1),A.setFromCamera(E,M)}function r(p){const{internal:m}=n.getState(),x=p.offsetX-m.initialClick[0],A=p.offsetY-m.initialClick[1];return Math.round(Math.sqrt(x*x+A*A))}function i(p){return p.filter(m=>["Move","Over","Enter","Out","Leave"].some(x=>{var A;return(A=m.__r3f.handlers)==null?void 0:A["onPointer"+x]}))}function s(p){const m=n.getState(),{raycaster:x,internal:A}=m;if(!x.enabled)return[];const E=new Set,M=[],w=p?p(A.interaction):A.interaction;let _=x.intersectObjects(w,!0).filter(b=>{const I=$A(b);return E.has(I)?!1:(E.add(I),!0)});x.filter&&(_=x.filter(_,m));for(const b of _){let I=b.object;for(;I;){var C;((C=I.__r3f)==null?void 0:C.handlers)&&M.push(ei(cn({},b),{eventObject:I})),I=I.parent}}return M}function o(p,m){const{internal:x}=n.getState();return"pointerId"in m&&x.capturedMap.has(m.pointerId)&&p.push(...x.capturedMap.get(m.pointerId).values()),p}function l(p,m,x){const{raycaster:A,mouse:E,camera:M,internal:w}=n.getState();if(p.length){const _=e.set(E.x,E.y,0).unproject(M),C=m.type==="click"?r(m):0,b=B=>m.target.releasePointerCapture(B),I={stopped:!1};for(const B of p){const H=q=>{var fe,ne;return(fe=(ne=w.capturedMap.get(q))==null?void 0:ne.has(B.eventObject))!=null?fe:!1},D=q=>{w.capturedMap.has(q)?w.capturedMap.get(q).set(B.eventObject,B):w.capturedMap.set(q,new Map([[B.eventObject,B]])),m.target.setPointerCapture(q)};let O={};for(let q in Object.getPrototypeOf(m)){let fe=m[q];typeof fe!="function"&&(O[q]=fe)}let ee=ei(cn(cn({},B),O),{spaceX:E.x,spaceY:E.y,intersections:p,stopped:I.stopped,delta:C,unprojectedPoint:_,ray:A.ray,camera:M,stopPropagation:()=>{const q="pointerId"in m&&w.capturedMap.get(m.pointerId);if((!q||q.has(B.eventObject))&&(ee.stopped=I.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(fe=>fe.eventObject===B.eventObject))){const fe=p.slice(0,p.indexOf(B));c([...fe,B])}},target:{hasPointerCapture:H,setPointerCapture:D,releasePointerCapture:b},currentTarget:{hasPointerCapture:H,setPointerCapture:D,releasePointerCapture:b},sourceEvent:m,nativeEvent:m});if(x(ee),I.stopped===!0)break}}return p}function c(p){const{internal:m}=n.getState();Array.from(m.hovered.values()).forEach(x=>{if(!p.length||!p.find(A=>A.object===x.object&&A.index===x.index)){const E=x.eventObject.__r3f.handlers;if(m.hovered.delete($A(x)),E){const M=ei(cn({},x),{intersections:p||[]});E.onPointerOut==null||E.onPointerOut(M),E.onPointerLeave==null||E.onPointerLeave(M)}}})}const h=p=>{switch(p){case"onPointerLeave":case"onPointerCancel":return()=>c([]);case"onLostPointerCapture":return m=>{"pointerId"in m&&n.getState().internal.capturedMap.delete(m.pointerId),c([])}}return m=>{const{onPointerMissed:x,internal:A}=n.getState();t(m);const E=p==="onPointerMove",w=o(s(E?i:void 0),m);E&&c(w),l(w,m,_=>{const C=_.eventObject,b=C.__r3f.handlers;if(!!b)if(E){if(b.onPointerOver||b.onPointerEnter||b.onPointerOut||b.onPointerLeave){const I=$A(_),B=A.hovered.get(I);B?B.stopped&&_.stopPropagation():(A.hovered.set(I,_),b.onPointerOver==null||b.onPointerOver(_),b.onPointerEnter==null||b.onPointerEnter(_))}b.onPointerMove==null||b.onPointerMove(_)}else{const I=b==null?void 0:b[p];I&&(p!=="onClick"&&p!=="onContextMenu"&&p!=="onDoubleClick"||A.initialHits.includes(C))&&(I(_),v(m,A.interaction.filter(B=>B!==C)))}}),p==="onPointerDown"&&(A.initialClick=[m.offsetX,m.offsetY],A.initialHits=w.map(_=>_.eventObject)),(p==="onClick"||p==="onContextMenu"||p==="onDoubleClick")&&!w.length&&r(m)<=2&&(v(m,A.interaction),x&&x(m))}};function v(p,m){m.forEach(x=>{var A;return(A=x.__r3f.handlers)==null||A.onPointerMissed==null?void 0:A.onPointerMissed(p)})}return{handlePointer:h}}const Ky=n=>n&&!!n.getState,e1=(n,e)=>{var t,r;return{root:Ky(n)?n:(t=(r=n.__r3f)==null?void 0:r.root)!=null?t:e.__r3f.root,container:Ky(n)?n.getState().scene:n}},_B="__default",t1={},wB=["children","key","ref"];let Oz={};function n1(n,e){const t=n;return(e!=null&&e.instance||!t.__r3f)&&(t.__r3f=cn({root:null,memoizedProps:{},objects:[]},e)),n}function Nz(n){function e(p,m,x={},A=!1){var E,M,w;const _=(E=p==null?void 0:p.__r3f)!=null?E:{},C=_.root,b=(M=C==null||C.getState==null?void 0:C.getState())!=null?M:{},I=[],B=[],H={};let D=0;Object.entries(m).forEach(([te,$])=>{wB.indexOf(te)===-1&&(H[te]=$)}),_.memoizedProps&&_.memoizedProps.args&&(H.args=_.memoizedProps.args),_.memoizedProps&&_.memoizedProps.attach&&(H.attach=_.memoizedProps.attach),p.__r3f&&(p.__r3f.memoizedProps=H);let O=Object.keys(m);for(D=0;D<O.length;D++)Xn.equ(m[O[D]],x[O[D]])&&I.push(O[D]),Xn.fun(m[O[D]])&&/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(O[D])&&B.push(O[D]);const ee=[];if(A)for(O=Object.keys(x),D=0;D<O.length;D++)m.hasOwnProperty(O[D])||ee.push(O[D]);const q=[...I,...wB];(w=p.__r3f)!=null&&w.instance&&q.push("object");const fe=cn({},m);for(O=Object.keys(fe),D=0;D<O.length;D++)q.indexOf(O[D])>-1&&delete fe[O[D]];const ne=Object.entries(fe);for(D=0;D<ee.length;D++)ee[D]!=="children"&&ne.unshift([ee[D],_B+"remove"]);if(ne.length>0){if(ne.forEach(([te,$])=>{if(!B.includes(te)){let le=p,_e=le[te];if(te.includes("-")){const Be=te.split("-");if(_e=Be.reduce((Ce,He)=>Ce[He],p),!(_e&&_e.set)){const[Ce,...He]=Be.reverse();le=He.reverse().reduce((ue,Oe)=>ue[Oe],p),te=Ce}}if($===_B+"remove")if(_e&&_e.constructor)$=new _e.constructor(H.args);else if(le.constructor){const Be=new le.constructor(le.__r3f.memoizedProps.args);$=Be[_e],Be.dispose&&Be.dispose()}else $=0;if(_e&&_e.set&&(_e.copy||_e instanceof zf)){if(Array.isArray($))_e.fromArray?_e.fromArray($):_e.set(...$);else if(_e.copy&&$&&$.constructor&&_e.constructor.name===$.constructor.name)_e.copy($);else if($!==void 0){const Be=_e instanceof je;!Be&&_e.setScalar?_e.setScalar($):_e instanceof zf&&$ instanceof zf?_e.mask=$.mask:_e.set($),!b.linear&&Be&&_e.convertSRGBToLinear()}}else le[te]=$,!b.linear&&le[te]instanceof nr&&(le[te].encoding=ys);t(p)}}),A&&C&&p.raycast&&_.handlers){_.handlers=void 0;const te=b.internal.interaction.indexOf(p);te>-1&&b.internal.interaction.splice(te,1)}B.length&&(A&&C&&p.raycast&&b.internal.interaction.push(p),_.handlers=B.reduce((te,$)=>ei(cn({},te),{[$]:m[$]}),{})),p.parent&&r(p)}}function t(p){var m,x;const A=(m=p.__r3f)==null||(x=m.root)==null||x.getState==null?void 0:x.getState();A&&A.internal.frames===0&&A.invalidate()}function r(p){p.onUpdate==null||p.onUpdate(p)}function i(p,w,A,E,M){var _=w,{args:m=[]}=_,x=su(_,["args"]);let C=`${p[0].toUpperCase()}${p.slice(1)}`,b;if(!Ky(A)&&M){const I=B=>B.return?I(B.return):B.stateNode&&B.stateNode.containerInfo;A=I(M)}if(!A||!Ky(A))throw`No valid root for ${C}!`;if(p==="primitive"){if(x.object===void 0)throw"Primitives without 'object' are invalid!";const I=x.object;b=n1(I,{root:A,instance:!0})}else{const I=Oz[C]||Az[C];if(!I)throw`${C} is not part of the THREE namespace! Did you forget to extend? See: https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#using-3rd-party-objects-declaratively`;const B=Xn.arr(m);b=n1(B?new I(...m):new I(m),{root:A,memoizedProps:{args:B&&m.length===0?null:m}})}return C.endsWith("Geometry")?x=cn({attach:"geometry"},x):C.endsWith("Material")&&(x=cn({attach:"material"},x)),e(b,x,{}),b}function s(p,m){let x=!1;m&&(m.attachArray?(Xn.arr(p[m.attachArray])||(p[m.attachArray]=[]),p[m.attachArray].push(m)):m.attachObject?(Xn.obj(p[m.attachObject[0]])||(p[m.attachObject[0]]={}),p[m.attachObject[0]][m.attachObject[1]]=m):m.attach&&!Xn.fun(m.attach)?p[m.attach]=m:m.isObject3D&&(p.add(m),x=!0),x||(p.__r3f.objects.push(m),m.parent=p),r(m),t(m))}function o(p,m,x){let A=!1;if(m){if(m.attachArray){const E=p[m.attachArray];Xn.arr(E)||(p[m.attachArray]=[]),E.splice(E.indexOf(x),0,m)}else{if(m.attachObject||m.attach&&!Xn.fun(m.attach))return A=!0,s(p,m);if(m.isObject3D){m.parent=p,m.dispatchEvent({type:"added"});const E=p.children.filter(w=>w!==m),M=E.indexOf(x);p.children=[...E.slice(0,M),m,...E.slice(M)],A=!0}}A||(p.__r3f.objects.push(m),m.parent=p),r(m),t(m)}}function l(p,m,x=!1){p&&[...p].forEach(A=>c(m,A,x))}function c(p,m,x){if(m){var A;if(p.__r3f.objects){const C=p.__r3f.objects.length;p.__r3f.objects=p.__r3f.objects.filter(I=>I!==m),p.__r3f.objects.length<C&&(m.parent=null)}if(m.attachArray)p[m.attachArray]=p[m.attachArray].filter(C=>C!==m);else if(m.attachObject)delete p[m.attachObject[0]][m.attachObject[1]];else if(m.attach&&!Xn.fun(m.attach))p[m.attach]=null;else if(m.isObject3D){var E;p.remove(m),(E=m.__r3f)!=null&&E.root&&Fz(m.__r3f.root,m)}const w=(A=m.__r3f)==null?void 0:A.instance,_=x===void 0?m.dispose!==null&&!w:x;if(!w){var M;l((M=m.__r3f)==null?void 0:M.objects,m,_),l(m.children,m,_)}m.__r3f&&(delete m.__r3f.root,delete m.__r3f.objects,delete m.__r3f.handlers,delete m.__r3f.memoizedProps,w||delete m.__r3f),_&&m.dispose&&m.type!=="Scene"&&$c.exports.unstable_runWithPriority($c.exports.unstable_IdlePriority,()=>m.dispose()),t(p)}}function h(p,m,x,A){const E=p.parent;if(!E)return;const M=i(m,x,p.__r3f.root);p.children&&(p.children.forEach(w=>s(M,w)),p.children=[]),p.__r3f.objects.forEach(w=>s(M,w)),p.__r3f.objects=[],c(E,p),s(E,M),[A,A.alternate].forEach(w=>{w!==null&&(w.stateNode=M,w.ref&&(typeof w.ref=="function"?w.ref(M):w.ref.current=M))})}return{reconciler:Cz({now:$c.exports.unstable_now,createInstance:i,removeChild:c,appendChild:s,appendInitialChild:s,insertBefore:o,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:Xn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Xn.fun(clearTimeout)?clearTimeout:void 0,setTimeout:Xn.fun(setTimeout)?setTimeout:void 0,clearTimeout:Xn.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:(p,m)=>{const{container:x,root:A}=e1(p,m);x.__r3f.root=A,s(x,m)},removeChildFromContainer:(p,m)=>{const{container:x}=e1(p,m);c(x,m)},insertInContainerBefore:(p,m,x)=>{const{container:A}=e1(p,m);o(A,m,x)},commitUpdate(p,m,x,A,E,M){if(p.__r3f.instance&&E.object&&E.object!==p)h(p,x,E,M);else{const w=E,{args:C=[]}=w,b=su(w,["args"]),_=A,{args:I=[]}=_,B=su(_,["args"]);C.some((D,O)=>Xn.obj(D)?Object.entries(D).some(([ee,q])=>q!==I[O][ee]):D!==I[O])?h(p,x,E,M):e(p,b,B,!0)}},hideInstance(p){p.isObject3D&&(p.visible=!1,t(p))},unhideInstance(p,m){(p.isObject3D&&m.visible==null||m.visible)&&(p.visible=!0,t(p))},hideTextInstance(){throw new Error("Text is not allowed in the R3F tree.")},getPublicInstance(p){return p},getRootHostContext(p){return t1},getChildHostContext(p){return t1},createTextInstance(){},finalizeInitialChildren(p){return!!p.__r3f.handlers},commitMount(p){p.raycast&&p.__r3f.handlers&&p.__r3f.root.getState().internal.interaction.push(p)},prepareUpdate(){return t1},shouldDeprioritizeSubtree(){return!1},prepareForCommit(){return null},preparePortalMount(...p){},resetAfterCommit(){},shouldSetTextContent(){return!1},clearContainer(){return!1}}),applyProps:e}}const Gz=n=>n&&!!n.render,AB=n=>n&&n.isOrthographicCamera,r1=Tt.exports.createContext(null),Hz=(n,e,t,r)=>{const{gl:i,size:s,shadows:o=!1,linear:l=!1,flat:c=!1,vr:h=!1,orthographic:v=!1,frameloop:p="always",dpr:m=1,performance:x,clock:A=new NA,raycaster:E,camera:M,onPointerMissed:w}=r;o&&(i.shadowMap.enabled=!0,typeof o=="object"?Object.assign(i.shadowMap,o):i.shadowMap.type=Z_),l||(c||(i.toneMapping=aw),i.outputEncoding=ys),p==="never"&&(A.stop(),A.elapsedTime=0);const _=Sz((b,I)=>{const B=new Ny,Be=E||{},{params:H}=Be,D=su(Be,["params"]);n(B,ei(cn({enabled:!0},D),{params:cn(cn({},B.params),H)}),{});const O=M instanceof po,ee=O?M:v?new Js(0,0,0,0,.1,1e3):new mn(75,0,.1,1e3);O||(ee.position.z=5,M&&n(ee,M,{}),ee.lookAt(0,0,0));function q(Ce){return Array.isArray(Ce)?Math.min(Math.max(Ce[0],window.devicePixelRatio),Ce[1]):Ce}const fe=q(m),ne=new U,te=new U;function $(Ce=I().camera,He=te,ue=I().size){const{width:Oe,height:ze}=ue,Ee=Oe/ze,F=Ce.getWorldPosition(ne).distanceTo(He);if(AB(Ce))return{width:Oe/Ce.zoom,height:ze/Ce.zoom,factor:1,distance:F,aspect:Ee};{const G=Ce.fov*Math.PI/180,X=2*Math.tan(G/2)*F,V=X*(Oe/ze);return{width:V,height:X,factor:Oe/V,distance:F,aspect:Ee}}}let le;const _e=Ce=>b(He=>({performance:ei(cn({},He.performance),{current:Ce})}));return{gl:i,set:b,get:I,invalidate:()=>e(I()),advance:(Ce,He)=>t(Ce,He,I()),linear:l,flat:c,scene:n1(new Fp),camera:ee,raycaster:B,clock:A,mouse:new Pe,vr:h,frameloop:p,onPointerMissed:w,performance:ei(cn({current:1,min:.5,max:1,debounce:200},x),{regress:()=>{const Ce=I();le&&clearTimeout(le),Ce.performance.current!==Ce.performance.min&&_e(Ce.performance.min),le=setTimeout(()=>_e(I().performance.max),Ce.performance.debounce)}}),size:{width:0,height:0},viewport:{initialDpr:fe,dpr:fe,width:0,height:0,aspect:0,distance:0,factor:0,getCurrentViewport:$},setSize:(Ce,He)=>{const ue={width:Ce,height:He};b(Oe=>({size:ue,viewport:cn(cn({},Oe.viewport),$(ee,te,ue))}))},setDpr:Ce=>b(He=>({viewport:ei(cn({},He.viewport),{dpr:q(Ce)})})),events:{connected:!1},internal:{active:!1,priority:0,frames:0,lastProps:r,interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(Ce,He=0)=>(b(({internal:ue})=>({internal:ei(cn({},ue),{priority:ue.priority+(He?1:0),subscribers:[...ue.subscribers,{ref:Ce,priority:He}].sort((Oe,ze)=>Oe.priority-ze.priority)})})),()=>{b(({internal:ue})=>({internal:ei(cn({},ue),{priority:ue.priority-(He?1:0),subscribers:ue.subscribers.filter(Oe=>Oe.ref!==Ce)})}))})}}});_.subscribe(()=>{const{camera:b,size:I,viewport:B,internal:H}=_.getState();H.lastProps.camera instanceof po||(AB(b)?(b.left=I.width/-2,b.right=I.width/2,b.top=I.height/2,b.bottom=I.height/-2):b.aspect=I.width/I.height,b.updateProjectionMatrix(),b.updateMatrixWorld()),i.setPixelRatio(B.dpr),i.setSize(I.width,I.height)},b=>[b.viewport.dpr,b.size],Tz);const C=_.getState();return s&&C.setSize(s.width,s.height),_.subscribe(b=>e(b)),_};let yl,MB=[],EB=[],Uz=[];function lm(n,e){for(yl=0;yl<n.length;yl++)n[yl](e)}function i1(n,e){let t=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(t=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),yl=0;yl<e.internal.subscribers.length;yl++)e.internal.subscribers[yl].ref.current(e,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function kz(n){let e=!1,t;function r(o){if(e=!0,t=0,lm(MB,o),n.forEach(l=>{const c=l.store.getState();c.internal.active&&(c.frameloop==="always"||c.internal.frames>0)&&(t+=i1(o,c))}),lm(EB,o),t>0)return requestAnimationFrame(r);lm(Uz,o),e=!1}function i(o){if(!o)return n.forEach(l=>i(l.store.getState()));o.vr||!o.internal.active||o.frameloop==="never"||(o.internal.frames=Math.min(60,o.internal.frames+1),e||(e=!0,requestAnimationFrame(r)))}function s(o,l=!0,c){l&&lm(MB,o),c?i1(o,c):n.forEach(h=>i1(o,h.store.getState())),l&&lm(EB,o)}return{loop:r,invalidate:i,advance:s}}function zz(n){const{handlePointer:e}=Dz(n),t={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};return{connected:!1,handlers:Object.keys(t).reduce((r,i)=>ei(cn({},r),{[i]:e(i)}),{}),connect:r=>{var i;const{set:s,events:o}=n.getState();o.disconnect==null||o.disconnect(),s(l=>({events:ei(cn({},l.events),{connected:r})})),Object.entries((i=o==null?void 0:o.handlers)!=null?i:[]).forEach(([l,c])=>{const[h,v]=t[l];r.addEventListener(h,c,{passive:v})})},disconnect:()=>{const{set:r,events:i}=n.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([o,l])=>{if(i&&i.connected instanceof HTMLElement){const[c]=t[o];i.connected.removeEventListener(c,l)}}),r(o=>({events:ei(cn({},o.events),{connected:!1})}))}}}}const s1=typeof window!="undefined"?Tt.exports.useLayoutEffect:Tt.exports.useEffect;function Wz({set:n}){return s1(()=>(n(new Promise(()=>null)),()=>n(!1)),[]),null}class SB extends Tt.exports.Component{constructor(...e){super(...e);this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}SB.getDerivedStateFromError=()=>({error:!0});function F4(h){var v=h,{children:n,fallback:e,tabIndex:t,resize:r,id:i,style:s,className:o,events:l}=v,c=su(v,["children","fallback","tabIndex","resize","id","style","className","events"]);const[p,m]=Lz(cn({scroll:!0,debounce:{scroll:50,resize:0}},r)),x=Tt.exports.useRef(null),[A,E]=Tt.exports.useState(!1),[M,w]=Tt.exports.useState(!1);if(A)throw A;if(M)throw M;return s1(()=>{m.width>0&&m.height>0&&Yz(Tt.exports.createElement(SB,{set:w},Tt.exports.createElement(Tt.exports.Suspense,{fallback:Tt.exports.createElement(Wz,{set:E})},n)),x.current,ei(cn({},c),{size:m,events:l||zz}))},[m,n]),s1(()=>{const _=x.current;return()=>LB(_)},[]),Tt.exports.createElement("div",{ref:p,id:i,className:o,tabIndex:t,style:cn({position:"relative",width:"100%",height:"100%",overflow:"hidden"},s)},Tt.exports.createElement("canvas",{ref:x,style:{display:"block"}},e))}function pd(n=t=>t,e){const t=Tt.exports.useContext(r1);if(!t)throw"R3F hooks can only be used within the Canvas component!";return t(n,e)}function Vz(n,e=0){const{subscribe:t}=Tt.exports.useContext(r1).getState().internal,r=Tt.exports.useRef(n);return Tt.exports.useLayoutEffect(()=>void(r.current=n),[n]),Tt.exports.useLayoutEffect(()=>{const i=t(r,e);return()=>i()},[e,t]),null}function Jz(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function TB(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(s=>new Promise((o,l)=>i.load(s,c=>{c.scene&&Object.assign(c,Jz(c.scene)),o(c)},e,c=>l(`Could not load ${s}: ${c.message}`)))))}}function Yy(n,e,t,r){const i=Array.isArray(e)?e:[e],s=yo(TB(t,r),n,...i);return Array.isArray(e)?s:s[0]}Yy.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return yo.preload(TB(t),n,...r)};const um=new Map,CB=["legacy","blocking","concurrent"],{invalidate:jz,advance:bB}=kz(um),{reconciler:cm,applyProps:Xz}=Nz(),Kz=(n,e)=>Gz(n)?n:new dn(cn({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0},n));function Yz(n,e,c={}){var h=c,{gl:t,size:r,mode:i=CB[1],events:s,onCreated:o}=h,l=su(h,["gl","size","mode","events","onCreated"]);var v;if(!r){var p,m,x,A;r={width:(p=(m=e.parentElement)==null?void 0:m.clientWidth)!=null?p:0,height:(x=(A=e.parentElement)==null?void 0:A.clientHeight)!=null?x:0}}let E=um.get(e),M=E==null?void 0:E.fiber,w=E==null?void 0:E.store,_=(v=w)==null?void 0:v.getState();if(M&&_){const C=_.internal.lastProps;l.dpr!==void 0&&!Xn.equ(C.dpr,l.dpr)&&_.setDpr(l.dpr),r!==void 0&&!Xn.equ(C.size,r)&&_.setSize(r.width,r.height),l.linear!==C.linear&&(LB(e),M=void 0)}if(!M){const C=Kz(t,e);l.vr&&(C.xr.enabled=!0,C.setAnimationLoop(I=>bB(I,!0))),w=Hz(Xz,jz,bB,cn({gl:C,size:r},l));const b=w.getState();b.get,M=cm.createContainer(w,CB.indexOf(i),!1,null),um.set(e,{fiber:M,store:w}),s&&b.set({events:s(w)})}if(w&&M)return cm.updateContainer(Tt.exports.createElement(qz,{store:w,element:n,onCreated:o,target:e}),M,null,()=>{}),w;throw"Error creating root!"}function qz({store:n,element:e,onCreated:t,target:r}){return Tt.exports.useEffect(()=>{const i=n.getState();i.set(s=>({internal:ei(cn({},s.internal),{active:!0})})),i.events.connect==null||i.events.connect(r),t&&t(i)},[]),Tt.exports.createElement(r1.Provider,{value:n},e)}function LB(n,e){const t=um.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),cm.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{var s,o,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=i.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),Qz(i),um.delete(n),e&&e(n)},500)})}}function Qz(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const r in n){var e,t;(e=(t=r).dispose)==null||e.call(t),delete n[r]}}cm.act;cm.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:"17.0.2"});function o1(){return o1=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},o1.apply(this,arguments)}function Zz(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function D4(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function Ft(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const BB=(n,e)=>(n%e+e)%e;class $z extends co{constructor(e,t){super();Ft(this,"object",void 0),Ft(this,"domElement",void 0),Ft(this,"enabled",!0),Ft(this,"target",new U),Ft(this,"minDistance",0),Ft(this,"maxDistance",1/0),Ft(this,"minZoom",0),Ft(this,"maxZoom",1/0),Ft(this,"minPolarAngle",0),Ft(this,"maxPolarAngle",Math.PI),Ft(this,"minAzimuthAngle",-1/0),Ft(this,"maxAzimuthAngle",1/0),Ft(this,"enableDamping",!1),Ft(this,"dampingFactor",.05),Ft(this,"enableZoom",!0),Ft(this,"zoomSpeed",1),Ft(this,"enableRotate",!0),Ft(this,"rotateSpeed",1),Ft(this,"enablePan",!0),Ft(this,"panSpeed",1),Ft(this,"screenSpacePanning",!0),Ft(this,"keyPanSpeed",7),Ft(this,"autoRotate",!1),Ft(this,"autoRotateSpeed",2),Ft(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ft(this,"mouseButtons",{LEFT:_u.ROTATE,MIDDLE:_u.DOLLY,RIGHT:_u.PAN}),Ft(this,"touches",{ONE:wu.ROTATE,TWO:wu.DOLLY_PAN}),Ft(this,"target0",void 0),Ft(this,"position0",void 0),Ft(this,"zoom0",void 0),Ft(this,"_domElementKeyEvents",null),Ft(this,"getPolarAngle",void 0),Ft(this,"getAzimuthalAngle",void 0),Ft(this,"setPolarAngle",void 0),Ft(this,"setAzimuthalAngle",void 0),Ft(this,"getDistance",void 0),Ft(this,"listenToKeyEvents",void 0),Ft(this,"saveState",void 0),Ft(this,"reset",void 0),Ft(this,"update",void 0),Ft(this,"connect",void 0),Ft(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof mn?this.object.zoom:1,this.getPolarAngle=()=>v.phi,this.getAzimuthalAngle=()=>v.theta,this.setPolarAngle=he=>{let Ue=BB(he,2*Math.PI),at=v.phi;at<0&&(at+=2*Math.PI),Ue<0&&(Ue+=2*Math.PI);let Ut=Math.abs(Ue-at);2*Math.PI-Ut<Ut&&(Ue<at?Ue+=2*Math.PI:at+=2*Math.PI),p.phi=Ue-at,r.update()},this.setAzimuthalAngle=he=>{let Ue=BB(he,2*Math.PI),at=v.theta;at<0&&(at+=2*Math.PI),Ue<0&&(Ue+=2*Math.PI);let Ut=Math.abs(Ue-at);2*Math.PI-Ut<Ut&&(Ue<at?Ue+=2*Math.PI:at+=2*Math.PI),p.theta=Ue-at,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=he=>{he.addEventListener("keydown",oe),this._domElementKeyEvents=he},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object instanceof mn?r.object.zoom:1},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object instanceof mn&&(r.object.zoom=r.zoom0,r.object.updateProjectionMatrix()),r.dispatchEvent(i),r.update(),c=l.NONE},this.update=(()=>{const he=new U,Ue=new cr().setFromUnitVectors(e.up,new U(0,1,0)),at=Ue.clone().invert(),Ut=new U,an=new cr,gn=2*Math.PI;return function(){const Ui=r.object.position;he.copy(Ui).sub(r.target),he.applyQuaternion(Ue),v.setFromVector3(he),r.autoRotate&&c===l.NONE&&fe(ee()),r.enableDamping?(v.theta+=p.theta*r.dampingFactor,v.phi+=p.phi*r.dampingFactor):(v.theta+=p.theta,v.phi+=p.phi);let Mn=r.minAzimuthAngle,or=r.maxAzimuthAngle;return isFinite(Mn)&&isFinite(or)&&(Mn<-Math.PI?Mn+=gn:Mn>Math.PI&&(Mn-=gn),or<-Math.PI?or+=gn:or>Math.PI&&(or-=gn),Mn<=or?v.theta=Math.max(Mn,Math.min(or,v.theta)):v.theta=v.theta>(Mn+or)/2?Math.max(Mn,v.theta):Math.min(or,v.theta)),v.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,v.phi)),v.makeSafe(),v.radius*=m,v.radius=Math.max(r.minDistance,Math.min(r.maxDistance,v.radius)),r.enableDamping===!0?r.target.addScaledVector(x,r.dampingFactor):r.target.add(x),he.setFromSpherical(v),he.applyQuaternion(at),Ui.copy(r.target).add(he),r.object.lookAt(r.target),r.enableDamping===!0?(p.theta*=1-r.dampingFactor,p.phi*=1-r.dampingFactor,x.multiplyScalar(1-r.dampingFactor)):(p.set(0,0,0),x.set(0,0,0)),m=1,A||Ut.distanceToSquared(r.object.position)>h||8*(1-an.dot(r.object.quaternion))>h?(r.dispatchEvent(i),Ut.copy(r.object.position),an.copy(r.object.quaternion),A=!1,!0):!1}})(),this.connect=he=>{he===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=he,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Ie),r.domElement.addEventListener("pointerdown",z),r.domElement.addEventListener("pointercancel",Ae),r.domElement.addEventListener("wheel",tt)},this.dispose=()=>{var he,Ue,at,Ut,an,gn;(he=r.domElement)===null||he===void 0||he.removeEventListener("contextmenu",Ie),(Ue=r.domElement)===null||Ue===void 0||Ue.removeEventListener("pointerdown",z),(at=r.domElement)===null||at===void 0||at.removeEventListener("pointercancel",Ae),(Ut=r.domElement)===null||Ut===void 0||Ut.removeEventListener("wheel",tt),(an=r.domElement)===null||an===void 0||an.ownerDocument.removeEventListener("pointermove",W),(gn=r.domElement)===null||gn===void 0||gn.ownerDocument.removeEventListener("pointerup",ve),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",oe)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const h=1e-6,v=new VA,p=new VA;let m=1;const x=new U;let A=!1;const E=new Pe,M=new Pe,w=new Pe,_=new Pe,C=new Pe,b=new Pe,I=new Pe,B=new Pe,H=new Pe,D=[],O={};function ee(){return 2*Math.PI/60/60*r.autoRotateSpeed}function q(){return Math.pow(.95,r.zoomSpeed)}function fe(he){p.theta-=he}function ne(he){p.phi-=he}const te=(()=>{const he=new U;return function(at,Ut){he.setFromMatrixColumn(Ut,0),he.multiplyScalar(-at),x.add(he)}})(),$=(()=>{const he=new U;return function(at,Ut){r.screenSpacePanning===!0?he.setFromMatrixColumn(Ut,1):(he.setFromMatrixColumn(Ut,0),he.crossVectors(r.object.up,he)),he.multiplyScalar(at),x.add(he)}})(),le=(()=>{const he=new U;return function(at,Ut){const an=r.domElement;if(an&&r.object instanceof mn&&r.object.isPerspectiveCamera){const gn=r.object.position;he.copy(gn).sub(r.target);let Dn=he.length();Dn*=Math.tan(r.object.fov/2*Math.PI/180),te(2*at*Dn/an.clientHeight,r.object.matrix),$(2*Ut*Dn/an.clientHeight,r.object.matrix)}else an&&r.object instanceof Js&&r.object.isOrthographicCamera?(te(at*(r.object.right-r.object.left)/r.object.zoom/an.clientWidth,r.object.matrix),$(Ut*(r.object.top-r.object.bottom)/r.object.zoom/an.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function _e(he){r.object instanceof mn&&r.object.isPerspectiveCamera?m/=he:r.object instanceof Js&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*he)),r.object.updateProjectionMatrix(),A=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Be(he){r.object instanceof mn&&r.object.isPerspectiveCamera?m*=he:r.object instanceof Js&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/he)),r.object.updateProjectionMatrix(),A=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Ce(he){E.set(he.clientX,he.clientY)}function He(he){I.set(he.clientX,he.clientY)}function ue(he){_.set(he.clientX,he.clientY)}function Oe(he){M.set(he.clientX,he.clientY),w.subVectors(M,E).multiplyScalar(r.rotateSpeed);const Ue=r.domElement;Ue&&(fe(2*Math.PI*w.x/Ue.clientHeight),ne(2*Math.PI*w.y/Ue.clientHeight)),E.copy(M),r.update()}function ze(he){B.set(he.clientX,he.clientY),H.subVectors(B,I),H.y>0?_e(q()):H.y<0&&Be(q()),I.copy(B),r.update()}function Ee(he){C.set(he.clientX,he.clientY),b.subVectors(C,_).multiplyScalar(r.panSpeed),le(b.x,b.y),_.copy(C),r.update()}function F(he){he.deltaY<0?Be(q()):he.deltaY>0&&_e(q()),r.update()}function G(he){let Ue=!1;switch(he.code){case r.keys.UP:le(0,r.keyPanSpeed),Ue=!0;break;case r.keys.BOTTOM:le(0,-r.keyPanSpeed),Ue=!0;break;case r.keys.LEFT:le(r.keyPanSpeed,0),Ue=!0;break;case r.keys.RIGHT:le(-r.keyPanSpeed,0),Ue=!0;break}Ue&&(he.preventDefault(),r.update())}function X(){if(D.length==1)E.set(D[0].pageX,D[0].pageY);else{const he=.5*(D[0].pageX+D[1].pageX),Ue=.5*(D[0].pageY+D[1].pageY);E.set(he,Ue)}}function V(){if(D.length==1)_.set(D[0].pageX,D[0].pageY);else{const he=.5*(D[0].pageX+D[1].pageX),Ue=.5*(D[0].pageY+D[1].pageY);_.set(he,Ue)}}function K(){const he=D[0].pageX-D[1].pageX,Ue=D[0].pageY-D[1].pageY,at=Math.sqrt(he*he+Ue*Ue);I.set(0,at)}function Z(){r.enableZoom&&K(),r.enablePan&&V()}function se(){r.enableZoom&&K(),r.enableRotate&&X()}function j(he){if(D.length==1)M.set(he.pageX,he.pageY);else{const at=Kn(he),Ut=.5*(he.pageX+at.x),an=.5*(he.pageY+at.y);M.set(Ut,an)}w.subVectors(M,E).multiplyScalar(r.rotateSpeed);const Ue=r.domElement;Ue&&(fe(2*Math.PI*w.x/Ue.clientHeight),ne(2*Math.PI*w.y/Ue.clientHeight)),E.copy(M)}function re(he){if(D.length==1)C.set(he.pageX,he.pageY);else{const Ue=Kn(he),at=.5*(he.pageX+Ue.x),Ut=.5*(he.pageY+Ue.y);C.set(at,Ut)}b.subVectors(C,_).multiplyScalar(r.panSpeed),le(b.x,b.y),_.copy(C)}function ae(he){const Ue=Kn(he),at=he.pageX-Ue.x,Ut=he.pageY-Ue.y,an=Math.sqrt(at*at+Ut*Ut);B.set(0,an),H.set(0,Math.pow(B.y/I.y,r.zoomSpeed)),_e(H.y),I.copy(B)}function ye(he){r.enableZoom&&ae(he),r.enablePan&&re(he)}function ge(he){r.enableZoom&&ae(he),r.enableRotate&&j(he)}function z(he){if(r.enabled!==!1){if(D.length===0){var Ue,at;(Ue=r.domElement)===null||Ue===void 0||Ue.ownerDocument.addEventListener("pointermove",W),(at=r.domElement)===null||at===void 0||at.ownerDocument.addEventListener("pointerup",ve)}rt(he),he.pointerType==="touch"?Ve(he):Ne(he)}}function W(he){r.enabled!==!1&&(he.pointerType==="touch"?ke(he):We(he))}function ve(he){if(r.enabled!==!1&&(he.pointerType==="touch"?Qe():Ye(),It(he),D.length===0)){var Ue,at;(Ue=r.domElement)===null||Ue===void 0||Ue.ownerDocument.removeEventListener("pointermove",W),(at=r.domElement)===null||at===void 0||at.ownerDocument.removeEventListener("pointerup",ve)}}function Ae(he){It(he)}function Ne(he){let Ue;switch(he.button){case 0:Ue=r.mouseButtons.LEFT;break;case 1:Ue=r.mouseButtons.MIDDLE;break;case 2:Ue=r.mouseButtons.RIGHT;break;default:Ue=-1}switch(Ue){case _u.DOLLY:if(r.enableZoom===!1)return;He(he),c=l.DOLLY;break;case _u.ROTATE:if(he.ctrlKey||he.metaKey||he.shiftKey){if(r.enablePan===!1)return;ue(he),c=l.PAN}else{if(r.enableRotate===!1)return;Ce(he),c=l.ROTATE}break;case _u.PAN:if(he.ctrlKey||he.metaKey||he.shiftKey){if(r.enableRotate===!1)return;Ce(he),c=l.ROTATE}else{if(r.enablePan===!1)return;ue(he),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&r.dispatchEvent(s)}function We(he){if(r.enabled!==!1)switch(c){case l.ROTATE:if(r.enableRotate===!1)return;Oe(he);break;case l.DOLLY:if(r.enableZoom===!1)return;ze(he);break;case l.PAN:if(r.enablePan===!1)return;Ee(he);break}}function Ye(){r.dispatchEvent(o),c=l.NONE}function tt(he){r.enabled===!1||r.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(he.preventDefault(),r.dispatchEvent(s),F(he),r.dispatchEvent(o))}function oe(he){r.enabled===!1||r.enablePan===!1||G(he)}function Ve(he){switch(Ht(he),D.length){case 1:switch(r.touches.ONE){case wu.ROTATE:if(r.enableRotate===!1)return;X(),c=l.TOUCH_ROTATE;break;case wu.PAN:if(r.enablePan===!1)return;V(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(r.touches.TWO){case wu.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Z(),c=l.TOUCH_DOLLY_PAN;break;case wu.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;se(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&r.dispatchEvent(s)}function ke(he){switch(Ht(he),c){case l.TOUCH_ROTATE:if(r.enableRotate===!1)return;j(he),r.update();break;case l.TOUCH_PAN:if(r.enablePan===!1)return;re(he),r.update();break;case l.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ye(he),r.update();break;case l.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ge(he),r.update();break;default:c=l.NONE}}function Qe(){r.dispatchEvent(o),c=l.NONE}function Ie(he){r.enabled!==!1&&he.preventDefault()}function rt(he){D.push(he)}function It(he){delete O[he.pointerId];for(let Ue=0;Ue<D.length;Ue++)if(D[Ue].pointerId==he.pointerId){D.splice(Ue,1);return}}function Ht(he){let Ue=O[he.pointerId];Ue===void 0&&(Ue=new Pe,O[he.pointerId]=Ue),Ue.set(he.pageX,he.pageY)}function Kn(he){const Ue=he.pointerId===D[0].pointerId?D[1]:D[0];return O[Ue.pointerId]}t!==void 0&&this.connect(t),this.update()}}class RB extends Cn{constructor(e){super(e);this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new r4(t)}),this.register(function(t){return new l4(t)}),this.register(function(t){return new u4(t)}),this.register(function(t){return new i4(t)}),this.register(function(t){return new s4(t)}),this.register(function(t){return new o4(t)}),this.register(function(t){return new a4(t)}),this.register(function(t){return new t4(t)}),this.register(function(t){return new c4(t)})}load(e,t,r,i){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=ts.extractUrlBase(e),this.manager.itemStart(e);const l=function(h){i?i(h):console.error(h),s.manager.itemError(e),s.manager.itemEnd(e)},c=new Rr(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{s.parse(h,o,function(v){t(v),s.manager.itemEnd(e)},l)}catch(v){l(v)}},r,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},l={};if(typeof e=="string")s=e;else if(ts.decodeText(new Uint8Array(e,0,4))===PB){try{o[Xt.KHR_BINARY_GLTF]=new f4(e)}catch(p){i&&i(p);return}s=o[Xt.KHR_BINARY_GLTF].content}else s=ts.decodeText(new Uint8Array(e));const c=JSON.parse(s);if(c.asset===void 0||c.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new w4(c,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let v=0;v<this.pluginCallbacks.length;v++){const p=this.pluginCallbacks[v](h);l[p.name]=p,o[p.name]=!0}if(c.extensionsUsed)for(let v=0;v<c.extensionsUsed.length;++v){const p=c.extensionsUsed[v],m=c.extensionsRequired||[];switch(p){case Xt.KHR_MATERIALS_UNLIT:o[p]=new n4;break;case Xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[p]=new p4;break;case Xt.KHR_DRACO_MESH_COMPRESSION:o[p]=new d4(c,this.dracoLoader);break;case Xt.KHR_TEXTURE_TRANSFORM:o[p]=new h4;break;case Xt.KHR_MESH_QUANTIZATION:o[p]=new m4;break;default:m.indexOf(p)>=0&&l[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}h.setExtensions(o),h.setPlugins(l),h.parse(r,i)}}function e4(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Xt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class t4{constructor(e){this.parser=e,this.name=Xt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let h;const v=new je(16777215);c.color!==void 0&&v.fromArray(c.color);const p=c.range!==void 0?c.range:0;switch(c.type){case"directional":h=new nm(v),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new tm(v),h.distance=p;break;case"spot":h=new $p(v),h.distance=p,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,h.angle=c.spot.outerConeAngle,h.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return h.position.set(0,0,0),h.decay=2,c.intensity!==void 0&&(h.intensity=c.intensity),h.name=t.createUniqueName(c.name||"light_"+e),i=Promise.resolve(h),t.cache.add(r,i),i}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(c){return r._getNodeRef(t.cache,l,c)})}}class n4{constructor(){this.name=Xt.KHR_MATERIALS_UNLIT}getMaterialType(){return _r}extendParams(e,t,r){const i=[];e.color=new je(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture))}return Promise.all(i)}}class r4{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:wi}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Pe(l,-l)}return Promise.all(s)}}class i4{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:wi}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class s4{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:wi}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const l=o.attenuationColor||[1,1,1];return t.attenuationTint=new je(l[0],l[1],l[2]),Promise.all(s)}}class o4{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:wi}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class a4{constructor(e){this.parser=e,this.name=Xt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:wi}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const l=o.specularColorFactor||[1,1,1];return t.specularTint=new je(l[0],l[1],l[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularTintMap",o.specularColorTexture).then(function(c){c.encoding=ys})),Promise.all(s)}}class l4{constructor(e){this.parser=e,this.name=Xt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=r.images[s.source],l=t.options.ktx2Loader;if(!l){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,l)}}class u4{constructor(e){this.parser=e,this.name=Xt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=i.images[o.source];let c=r.textureLoader;if(l.uri){const h=r.options.manager.getHandler(l.uri);h!==null&&(c=h)}return this.detectSupport().then(function(h){if(h)return r.loadTextureImage(e,l,c);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class c4{constructor(e){this.name=Xt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,o.ready]).then(function(l){const c=i.byteOffset||0,h=i.byteLength||0,v=i.count,p=i.byteStride,m=new ArrayBuffer(v*p),x=new Uint8Array(l[0],c,h);return o.decodeGltfBuffer(new Uint8Array(m),v,p,x,i.mode,i.filter),m})}else return null}}const PB="glTF",fm=12,IB={JSON:1313821514,BIN:5130562};class f4{constructor(e){this.name=Xt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,fm);if(this.header={magic:ts.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==PB)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-fm,i=new DataView(e,fm);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const l=i.getUint32(s,!0);if(s+=4,l===IB.JSON){const c=new Uint8Array(e,fm+s,o);this.content=ts.decodeText(c)}else if(l===IB.BIN){const c=fm+s;this.body=e.slice(c,c+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class d4{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Xt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,l={},c={},h={};for(const v in o){const p=l1[v]||v.toLowerCase();l[p]=o[v]}for(const v in e.attributes){const p=l1[v]||v.toLowerCase();if(o[v]!==void 0){const m=r.accessors[e.attributes[v]],x=dm[m.componentType];h[p]=x,c[p]=m.normalized===!0}}return t.getDependency("bufferView",s).then(function(v){return new Promise(function(p){i.decodeDracoFile(v,function(m){for(const x in m.attributes){const A=m.attributes[x],E=c[x];E!==void 0&&(A.normalized=E)}p(m)},l,h)})})}}class h4{constructor(){this.name=Xt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class a1 extends Br{constructor(e){super();this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),r=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),l={specular:{value:new je().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=l,this.onBeforeCompile=function(c){for(const h in l)c.uniforms[h]=l[h];c.fragmentShader=c.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return l.specular.value},set:function(c){l.specular.value=c}},specularMap:{get:function(){return l.specularMap.value},set:function(c){l.specularMap.value=c,c?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return l.glossiness.value},set:function(c){l.glossiness.value=c}},glossinessMap:{get:function(){return l.glossinessMap.value},set:function(c){l.glossinessMap.value=c,c?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class p4{constructor(){this.name=Xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return a1}extendParams(e,t,r){const i=t.extensions[this.name];e.color=new je(1,1,1),e.opacity=1;const s=[];if(Array.isArray(i.diffuseFactor)){const o=i.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(i.diffuseTexture!==void 0&&s.push(r.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new je(0,0,0),e.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,e.specular=new je(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const o=i.specularGlossinessTexture;s.push(r.assignTexture(e,"glossinessMap",o)),s.push(r.assignTexture(e,"specularMap",o))}return Promise.all(s)}createMaterial(e){const t=new a1(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=oa,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class m4{constructor(){this.name=Xt.KHR_MESH_QUANTIZATION}}class md extends ui{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}}md.prototype.beforeStart_=md.prototype.copySampleValue_;md.prototype.afterEnd_=md.prototype.copySampleValue_;md.prototype.interpolate_=function(n,e,t,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,h=r-e,v=(t-e)/h,p=v*v,m=p*v,x=n*c,A=x-c,E=-2*m+3*p,M=m-p,w=1-E,_=M-p+v;for(let C=0;C!==o;C++){const b=s[A+C+o],I=s[A+C+l]*h,B=s[x+C+o],H=s[x+C]*h;i[C]=w*b+_*I+E*B+M*H}return i};const ga={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},dm={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},FB={9728:Un,9729:An,9984:Pf,9985:up,9986:If,9987:lo},DB={33071:zr,33648:Su,10497:Os},OB={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},l1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},xl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},g4={CUBICSPLINE:void 0,LINEAR:sa,STEP:Cu},u1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function NB(n,e){return typeof n!="string"||n===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(n)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:e+n)}function v4(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Br({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:el})),n.DefaultMaterial}function hm(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function $u(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function y4(n,e,t){let r=!1,i=!1;for(let l=0,c=e.length;l<c;l++){const h=e[l];if(h.POSITION!==void 0&&(r=!0),h.NORMAL!==void 0&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(n);const s=[],o=[];for(let l=0,c=e.length;l<c;l++){const h=e[l];if(r){const v=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;s.push(v)}if(i){const v=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;o.push(v)}}return Promise.all([Promise.all(s),Promise.all(o)]).then(function(l){const c=l[0],h=l[1];return r&&(n.morphAttributes.position=c),i&&(n.morphAttributes.normal=h),n.morphTargetsRelative=!0,n})}function x4(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function _4(n){const e=n.extensions&&n.extensions[Xt.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+GB(e.attributes):t=n.indices+":"+GB(n.attributes)+":"+n.mode,t}function GB(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function c1(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class w4{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new e4,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new sm(this.options.manager):this.textureLoader=new ud(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Rr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const l={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};hm(s,l,i),$u(l,i),Promise.all(r._invokeAll(function(c){return c.afterRoot&&c.afterRoot(l)})).then(function(){e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let l=0,c=o.length;l<c;l++)e[o[l]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone();return i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Xt.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(NB(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const l=o[0],c=OB[i.type],h=dm[i.componentType],v=h.BYTES_PER_ELEMENT,p=v*c,m=i.byteOffset||0,x=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,A=i.normalized===!0;let E,M;if(x&&x!==p){const w=Math.floor(m/x),_="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+w+":"+i.count;let C=t.cache.get(_);C||(E=new h(l,w*x,i.count*x/v),C=new li(E,x/v),t.cache.add(_,C)),M=new mo(C,c,m%x/v,A)}else l===null?E=new h(i.count*c):E=new h(l,m,i.count*c),M=new dt(E,c,A);if(i.sparse!==void 0){const w=OB.SCALAR,_=dm[i.sparse.indices.componentType],C=i.sparse.indices.byteOffset||0,b=i.sparse.values.byteOffset||0,I=new _(o[1],C,i.sparse.count*w),B=new h(o[2],b,i.sparse.count*c);l!==null&&(M=new dt(M.array.slice(),M.itemSize,M.normalized));for(let H=0,D=I.length;H<D;H++){const O=I[H];if(M.setX(O,B[H*c]),c>=2&&M.setY(O,B[H*c+1]),c>=3&&M.setZ(O,B[H*c+2]),c>=4&&M.setW(O,B[H*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return M})}loadTexture(e){const t=this.json,r=this.options,i=t.textures[e],s=t.images[i.source];let o=this.textureLoader;if(s.uri){const l=r.manager.getHandler(s.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,r){const i=this,s=this.json,o=this.options,l=s.textures[e],c=(t.uri||t.bufferView)+":"+l.sampler;if(this.textureCache[c])return this.textureCache[c];const h=self.URL||self.webkitURL;let v=t.uri||"",p=!1,m=!0;const x=v.search(/\.jpe?g($|\?)/i)>0||v.search(/^data\:image\/jpeg/)===0;if((t.mimeType==="image/jpeg"||x)&&(m=!1),t.bufferView!==void 0)v=i.getDependency("bufferView",t.bufferView).then(function(E){if(t.mimeType==="image/png"){const w=new DataView(E,25,1).getUint8(0,!1);m=w===6||w===4||w===3}p=!0;const M=new Blob([E],{type:t.mimeType});return v=h.createObjectURL(M),v});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const A=Promise.resolve(v).then(function(E){return new Promise(function(M,w){let _=M;r.isImageBitmapLoader===!0&&(_=function(C){const b=new nr(C);b.needsUpdate=!0,M(b)}),r.load(NB(E,o.path),_,void 0,w)})}).then(function(E){p===!0&&h.revokeObjectURL(v),E.flipY=!1,l.name&&(E.name=l.name),m||(E.format=vs);const w=(s.samplers||{})[l.sampler]||{};return E.magFilter=FB[w.magFilter]||An,E.minFilter=FB[w.minFilter]||lo,E.wrapS=DB[w.wrapS]||Os,E.wrapT=DB[w.wrapT]||Os,i.associations.set(E,{type:"textures",index:e}),E}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",v),null});return this.textureCache[c]=A,A}assignTexture(e,t,r){const i=this;return this.getDependency("texture",r.index).then(function(s){if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),i.extensions[Xt.KHR_TEXTURE_TRANSFORM]){const o=r.extensions!==void 0?r.extensions[Xt.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=i.associations.get(s);s=i.extensions[Xt.KHR_TEXTURE_TRANSFORM].extendTexture(s,o),i.associations.set(s,l)}}return e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent!==void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+r.uuid;let c=this.cache.get(l);c||(c=new ha,fn.prototype.copy.call(c,r),c.color.copy(r.color),c.map=r.map,c.sizeAttenuation=!1,this.cache.add(l,c)),r=c}else if(e.isLine){const l="LineBasicMaterial:"+r.uuid;let c=this.cache.get(l);c||(c=new fr,fn.prototype.copy.call(c,r),c.color.copy(r.color),this.cache.add(l,c)),r=c}if(i||s||o){let l="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(l+="specular-glossiness:"),i&&(l+="vertex-tangents:"),s&&(l+="vertex-colors:"),o&&(l+="flat-shading:");let c=this.cache.get(l);c||(c=r.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),i&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(l,c),this.associations.set(c,this.associations.get(r))),r=c}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return Br}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const l={},c=s.extensions||{},h=[];if(c[Xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const p=i[Xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=p.getMaterialType(),h.push(p.extendParams(l,s,t))}else if(c[Xt.KHR_MATERIALS_UNLIT]){const p=i[Xt.KHR_MATERIALS_UNLIT];o=p.getMaterialType(),h.push(p.extendParams(l,s,t))}else{const p=s.pbrMetallicRoughness||{};if(l.color=new je(1,1,1),l.opacity=1,Array.isArray(p.baseColorFactor)){const m=p.baseColorFactor;l.color.fromArray(m),l.opacity=m[3]}p.baseColorTexture!==void 0&&h.push(t.assignTexture(l,"map",p.baseColorTexture)),l.metalness=p.metallicFactor!==void 0?p.metallicFactor:1,l.roughness=p.roughnessFactor!==void 0?p.roughnessFactor:1,p.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(l,"metalnessMap",p.metallicRoughnessTexture)),h.push(t.assignTexture(l,"roughnessMap",p.metallicRoughnessTexture))),o=this._invokeOne(function(m){return m.getMaterialType&&m.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(m){return m.extendMaterialParams&&m.extendMaterialParams(e,l)})))}s.doubleSided===!0&&(l.side=Au);const v=s.alphaMode||u1.OPAQUE;return v===u1.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,v===u1.MASK&&(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==_r&&(h.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new Pe(1,-1),s.normalTexture.scale!==void 0&&l.normalScale.set(s.normalTexture.scale,-s.normalTexture.scale)),s.occlusionTexture!==void 0&&o!==_r&&(h.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==_r&&(l.emissive=new je().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==_r&&h.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture)),Promise.all(h).then(function(){let p;return o===a1?p=i[Xt.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(l):p=new o(l),s.name&&(p.name=s.name),p.map&&(p.map.encoding=ys),p.emissiveMap&&(p.emissiveMap.encoding=ys),$u(p,s),t.associations.set(p,{type:"materials",index:e}),s.extensions&&hm(i,p,s),p})}createUniqueName(e){const t=Pr.sanitizeNodeName(e||"");let r=t;for(let i=1;this.nodeNamesUsed[r];++i)r=t+"_"+i;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(l){return r[Xt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(c){return UB(c,l,t)})}const o=[];for(let l=0,c=e.length;l<c;l++){const h=e[l],v=_4(h),p=i[v];if(p)o.push(p.promise);else{let m;h.extensions&&h.extensions[Xt.KHR_DRACO_MESH_COMPRESSION]?m=s(h):m=UB(new ut,h,t),i[v]={primitive:h,promise:m},o.push(m)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,l=[];for(let c=0,h=o.length;c<h;c++){const v=o[c].material===void 0?v4(this.cache):this.getDependency("material",o[c].material);l.push(v)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(c){const h=c.slice(0,c.length-1),v=c[c.length-1],p=[];for(let x=0,A=v.length;x<A;x++){const E=v[x],M=o[x];let w;const _=h[x];if(M.mode===ga.TRIANGLES||M.mode===ga.TRIANGLE_STRIP||M.mode===ga.TRIANGLE_FAN||M.mode===void 0)w=s.isSkinnedMesh===!0?new Gu(E,_):new pn(E,_),w.isSkinnedMesh===!0&&!w.geometry.attributes.skinWeight.normalized&&w.normalizeSkinWeights(),M.mode===ga.TRIANGLE_STRIP?w.geometry=kB(w.geometry,_w):M.mode===ga.TRIANGLE_FAN&&(w.geometry=kB(w.geometry,hp));else if(M.mode===ga.LINES)w=new Jr(E,_);else if(M.mode===ga.LINE_STRIP)w=new es(E,_);else if(M.mode===ga.LINE_LOOP)w=new Hp(E,_);else if(M.mode===ga.POINTS)w=new fl(E,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);Object.keys(w.geometry.morphAttributes).length>0&&x4(w,s),w.name=t.createUniqueName(s.name||"mesh_"+e),$u(w,s),M.extensions&&hm(i,w,M),t.assignFinalMaterial(w),p.push(w)}if(p.length===1)return p[0];const m=new $i;for(let x=0,A=p.length;x<A;x++)m.add(p[x]);return m})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new mn(vt.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Js(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),$u(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(i){return r.inverseBindMatrices=i,r})}loadAnimation(e){const r=this.json.animations[e],i=[],s=[],o=[],l=[],c=[];for(let h=0,v=r.channels.length;h<v;h++){const p=r.channels[h],m=r.samplers[p.sampler],x=p.target,A=x.node!==void 0?x.node:x.id,E=r.parameters!==void 0?r.parameters[m.input]:m.input,M=r.parameters!==void 0?r.parameters[m.output]:m.output;i.push(this.getDependency("node",A)),s.push(this.getDependency("accessor",E)),o.push(this.getDependency("accessor",M)),l.push(m),c.push(x)}return Promise.all([Promise.all(i),Promise.all(s),Promise.all(o),Promise.all(l),Promise.all(c)]).then(function(h){const v=h[0],p=h[1],m=h[2],x=h[3],A=h[4],E=[];for(let w=0,_=v.length;w<_;w++){const C=v[w],b=p[w],I=m[w],B=x[w],H=A[w];if(C===void 0)continue;C.updateMatrix(),C.matrixAutoUpdate=!0;let D;switch(xl[H.path]){case xl.weights:D=zu;break;case xl.rotation:D=pl;break;case xl.position:case xl.scale:default:D=Vu;break}const O=C.name?C.name:C.uuid,ee=B.interpolation!==void 0?g4[B.interpolation]:sa,q=[];xl[H.path]===xl.weights?C.traverse(function(ne){ne.isMesh===!0&&ne.morphTargetInfluences&&q.push(ne.name?ne.name:ne.uuid)}):q.push(O);let fe=I.array;if(I.normalized){const ne=c1(fe.constructor),te=new Float32Array(fe.length);for(let $=0,le=fe.length;$<le;$++)te[$]=fe[$]*ne;fe=te}for(let ne=0,te=q.length;ne<te;ne++){const $=new D(q[ne]+"."+xl[H.path],b.array,fe,ee);B.interpolation==="CUBICSPLINE"&&($.createInterpolant=function(_e){return new md(this.times,this.values,this.getValueSize()/3,_e)},$.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),E.push($)}}const M=r.name?r.name:"animation_"+e;return new Ju(M,void 0,E)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(l){if(!!l.isMesh)for(let c=0,h=i.weights.length;c<h;c++)l.morphTargetInfluences[c]=i.weights[c]}),o})}loadNode(e){const t=this.json,r=this.extensions,i=this,s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"";return function(){const l=[],c=i._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return c&&l.push(c),s.camera!==void 0&&l.push(i.getDependency("camera",s.camera).then(function(h){return i._getNodeRef(i.cameraCache,s.camera,h)})),i._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){l.push(h)}),Promise.all(l)}().then(function(l){let c;if(s.isBone===!0?c=new Hu:l.length>1?c=new $i:l.length===1?c=l[0]:c=new mt,c!==l[0])for(let h=0,v=l.length;h<v;h++)c.add(l[h]);if(s.name&&(c.userData.name=s.name,c.name=o),$u(c,s),s.extensions&&hm(r,c,s),s.matrix!==void 0){const h=new lt;h.fromArray(s.matrix),c.applyMatrix4(h)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return i.associations.set(c,{type:"nodes",index:e}),c})}loadScene(e){const t=this.json,r=this.extensions,i=this.json.scenes[e],s=this,o=new $i;i.name&&(o.name=s.createUniqueName(i.name)),$u(o,i),i.extensions&&hm(r,o,i);const l=i.nodes||[],c=[];for(let h=0,v=l.length;h<v;h++)c.push(HB(l[h],o,t,s));return Promise.all(c).then(function(){return o})}}function HB(n,e,t,r){const i=t.nodes[n];return r.getDependency("node",n).then(function(s){if(i.skin===void 0)return s;let o;return r.getDependency("skin",i.skin).then(function(l){o=l;const c=[];for(let h=0,v=o.joints.length;h<v;h++)c.push(r.getDependency("node",o.joints[h]));return Promise.all(c)}).then(function(l){return s.traverse(function(c){if(!c.isMesh)return;const h=[],v=[];for(let p=0,m=l.length;p<m;p++){const x=l[p];if(x){h.push(x);const A=new lt;o.inverseBindMatrices!==void 0&&A.fromArray(o.inverseBindMatrices.array,p*16),v.push(A)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',o.joints[p])}c.bind(new sd(h,v),c.matrixWorld)}),s})}).then(function(s){e.add(s);const o=[];if(i.children){const l=i.children;for(let c=0,h=l.length;c<h;c++){const v=l[c];o.push(HB(v,s,t,r))}}return Promise.all(o)})}function A4(n,e,t){const r=e.attributes,i=new si;if(r.POSITION!==void 0){const l=t.json.accessors[r.POSITION],c=l.min,h=l.max;if(c!==void 0&&h!==void 0){if(i.set(new U(c[0],c[1],c[2]),new U(h[0],h[1],h[2])),l.normalized){const v=c1(dm[l.componentType]);i.min.multiplyScalar(v),i.max.multiplyScalar(v)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const l=new U,c=new U;for(let h=0,v=s.length;h<v;h++){const p=s[h];if(p.POSITION!==void 0){const m=t.json.accessors[p.POSITION],x=m.min,A=m.max;if(x!==void 0&&A!==void 0){if(c.setX(Math.max(Math.abs(x[0]),Math.abs(A[0]))),c.setY(Math.max(Math.abs(x[1]),Math.abs(A[1]))),c.setZ(Math.max(Math.abs(x[2]),Math.abs(A[2]))),m.normalized){const E=c1(dm[m.componentType]);c.multiplyScalar(E)}l.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(l)}n.boundingBox=i;const o=new fo;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function UB(n,e,t){const r=e.attributes,i=[];function s(o,l){return t.getDependency("accessor",o).then(function(c){n.setAttribute(l,c)})}for(const o in r){const l=l1[o]||o.toLowerCase();l in n.attributes||i.push(s(r[o],l))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(l){n.setIndex(l)});i.push(o)}return $u(n,e),A4(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?y4(n,e.targets,t):n})}function kB(n,e){let t=n.getIndex();if(t===null){const o=[],l=n.getAttribute("position");if(l!==void 0){for(let c=0;c<l.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(e===hp)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2==0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s}class M4 extends Xp{constructor(e){super(e);this.type=uo}parse(e){const t=-1,r=1,i=2,s=3,o=4,l=function(C,b){switch(C){case r:console.error("THREE.RGBELoader Read Error: "+(b||""));break;case i:console.error("THREE.RGBELoader Write Error: "+(b||""));break;case s:console.error("THREE.RGBELoader Bad File Format: "+(b||""));break;default:case o:console.error("THREE.RGBELoader: Error: "+(b||""))}return t},c=1,h=2,v=4,p=`
`,m=function(C,b,I){const B=128;b=b||1024;let H=C.pos,D=-1,O=0,ee="",q=String.fromCharCode.apply(null,new Uint16Array(C.subarray(H,H+B)));for(;0>(D=q.indexOf(p))&&O<b&&H<C.byteLength;)ee+=q,O+=q.length,H+=B,q+=String.fromCharCode.apply(null,new Uint16Array(C.subarray(H,H+B)));return-1<D?(I!==!1&&(C.pos+=O+D+1),ee+q.slice(0,D)):!1},x=function(C){const b=/^#\?(\S+)/,I=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,B=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,H=/^\s*FORMAT=(\S+)\s*$/,D=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,O={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ee,q;if(C.pos>=C.byteLength||!(ee=m(C)))return l(r,"no header found");if(!(q=ee.match(b)))return l(s,"bad initial token");for(O.valid|=c,O.programtype=q[1],O.string+=ee+`
`;ee=m(C),ee!==!1;){if(O.string+=ee+`
`,ee.charAt(0)==="#"){O.comments+=ee+`
`;continue}if((q=ee.match(I))&&(O.gamma=parseFloat(q[1],10)),(q=ee.match(B))&&(O.exposure=parseFloat(q[1],10)),(q=ee.match(H))&&(O.valid|=h,O.format=q[1]),(q=ee.match(D))&&(O.valid|=v,O.height=parseInt(q[1],10),O.width=parseInt(q[2],10)),O.valid&h&&O.valid&v)break}return O.valid&h?O.valid&v?O:l(s,"missing image size specifier"):l(s,"missing format specifier")},A=function(C,b,I){const B=b;if(B<8||B>32767||C[0]!==2||C[1]!==2||C[2]&128)return new Uint8Array(C);if(B!==(C[2]<<8|C[3]))return l(s,"wrong scanline width");const H=new Uint8Array(4*b*I);if(!H.length)return l(o,"unable to allocate buffer space");let D=0,O=0;const ee=4*B,q=new Uint8Array(4),fe=new Uint8Array(ee);let ne=I;for(;ne>0&&O<C.byteLength;){if(O+4>C.byteLength)return l(r);if(q[0]=C[O++],q[1]=C[O++],q[2]=C[O++],q[3]=C[O++],q[0]!=2||q[1]!=2||(q[2]<<8|q[3])!=B)return l(s,"bad rgbe scanline format");let te=0,$;for(;te<ee&&O<C.byteLength;){$=C[O++];const _e=$>128;if(_e&&($-=128),$===0||te+$>ee)return l(s,"bad scanline data");if(_e){const Be=C[O++];for(let Ce=0;Ce<$;Ce++)fe[te++]=Be}else fe.set(C.subarray(O,O+$),te),te+=$,O+=$}const le=B;for(let _e=0;_e<le;_e++){let Be=0;H[D]=fe[_e+Be],Be+=B,H[D+1]=fe[_e+Be],Be+=B,H[D+2]=fe[_e+Be],Be+=B,H[D+3]=fe[_e+Be],D+=4}ne--}return H},E=function(C,b,I,B){const H=C[b+3],D=Math.pow(2,H-128)/255;I[B+0]=C[b+0]*D,I[B+1]=C[b+1]*D,I[B+2]=C[b+2]*D},M=function(C,b,I,B){const H=C[b+3],D=Math.pow(2,H-128)/255;I[B+0]=Vy.toHalfFloat(C[b+0]*D),I[B+1]=Vy.toHalfFloat(C[b+1]*D),I[B+2]=Vy.toHalfFloat(C[b+2]*D)},w=new Uint8Array(e);w.pos=0;const _=x(w);if(t!==_){const C=_.width,b=_.height,I=A(w.subarray(w.pos),C,b);if(t!==I){let B,H,D,O;switch(this.type){case uo:B=I,H=lw,D=uo;break;case gs:O=I.length/4*3;const ee=new Float32Array(O);for(let fe=0;fe<O;fe++)E(I,fe*4,ee,fe*3);B=ee,H=vs,D=gs;break;case tl:O=I.length/4*3;const q=new Uint16Array(O);for(let fe=0;fe<O;fe++)M(I,fe*4,q,fe*3);B=q,H=vs,D=tl;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:C,height:b,data:B,header:_.string,gamma:_.gamma,exposure:_.exposure,format:H,type:D}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,l){switch(o.type){case uo:o.encoding=pp,o.minFilter=Un,o.magFilter=Un,o.generateMipmaps=!1,o.flipY=!0;break;case gs:o.encoding=Wr,o.minFilter=An,o.magFilter=An,o.generateMipmaps=!1,o.flipY=!0;break;case tl:o.encoding=Wr,o.minFilter=An,o.magFilter=An,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,l)}return super.load(e,s,r,i)}}const f1=new WeakMap;class E4 extends Cn{constructor(e){super(e);this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new Rr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,l).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const c in t.attributeTypes){const h=t.attributeTypes[c];h.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[c]=h.name)}const r=JSON.stringify(t);if(f1.has(e)){const c=f1.get(e);if(c.key===r)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,l=this._getWorker(s,o).then(c=>(i=c,new Promise((h,v)=>{i._callbacks[s]={resolve:h,reject:v},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return l.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),f1.set(e,{key:r,promise:l}),l}_createGeometry(e){const t=new ut;e.index&&t.setIndex(new dt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,l=i.itemSize;t.setAttribute(s,new dt(o,l))}return t}_loadLibrary(e,t){const r=new Rr(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=S4.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function S4(){let n,e;onmessage=function(o){const l=o.data;switch(l.type){case"init":n=l.decoderConfig,e=new Promise(function(v){n.onModuleLoaded=function(p){v({draco:p})},DracoDecoderModule(n)});break;case"decode":const c=l.buffer,h=l.taskConfig;e.then(v=>{const p=v.draco,m=new p.Decoder,x=new p.DecoderBuffer;x.Init(new Int8Array(c),c.byteLength);try{const A=t(p,m,x,h),E=A.attributes.map(M=>M.array.buffer);A.index&&E.push(A.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:A},E)}catch(A){console.error(A),self.postMessage({type:"error",id:l.id,error:A.message})}finally{p.destroy(x),p.destroy(m)}});break}};function t(o,l,c,h){const v=h.attributeIDs,p=h.attributeTypes;let m,x;const A=l.GetEncodedGeometryType(c);if(A===o.TRIANGULAR_MESH)m=new o.Mesh,x=l.DecodeBufferToMesh(c,m);else if(A===o.POINT_CLOUD)m=new o.PointCloud,x=l.DecodeBufferToPointCloud(c,m);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!x.ok()||m.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+x.error_msg());const E={index:null,attributes:[]};for(const M in v){const w=self[p[M]];let _,C;if(h.useUniqueIDs)C=v[M],_=l.GetAttributeByUniqueId(m,C);else{if(C=l.GetAttributeId(m,o[v[M]]),C===-1)continue;_=l.GetAttribute(m,C)}E.attributes.push(i(o,l,m,M,w,_))}return A===o.TRIANGULAR_MESH&&(E.index=r(o,l,m)),o.destroy(m),E}function r(o,l,c){const v=c.num_faces()*3,p=v*4,m=o._malloc(p);l.GetTrianglesUInt32Array(c,p,m);const x=new Uint32Array(o.HEAPF32.buffer,m,v).slice();return o._free(m),{array:x,itemSize:1}}function i(o,l,c,h,v,p){const m=p.num_components(),A=c.num_points()*m,E=A*v.BYTES_PER_ELEMENT,M=s(o,v),w=o._malloc(E);l.GetAttributeDataArrayForAllPoints(c,p,M,E,w);const _=new v(o.HEAPF32.buffer,w,A).slice();return o._free(w),{name:h,array:_,itemSize:m}}function s(o,l){switch(l){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let qy;const T4=()=>{if(qy)return qy;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(l(i),{}).then(p=>{s=p.instance,s.exports.__wasm_call_ctors()});function l(p){const m=new Uint8Array(p.length);for(let A=0;A<p.length;++A){const E=p.charCodeAt(A);m[A]=E>96?E-71:E>64?E-65:E>47?E+4:E>46?63:62}let x=0;for(let A=0;A<p.length;++A)m[x++]=m[A]<60?r[m[A]]:(m[A]-60)*64+m[++A];return m.buffer.slice(0,x)}function c(p,m,x,A,E,M){const w=s.exports.sbrk,_=x+3&~3,C=w(_*A),b=w(E.length),I=new Uint8Array(s.exports.memory.buffer);I.set(E,b);const B=p(C,x,A,b,E.length);if(B===0&&M&&M(C,_,A),m.set(I.subarray(C,C+x*A)),w(C-w(0)),B!==0)throw new Error(`Malformed buffer data: ${B}`)}const h={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},v={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return qy={ready:o,supported:!0,decodeVertexBuffer(p,m,x,A,E){c(s.exports.meshopt_decodeVertexBuffer,p,m,x,A,s.exports[h[E]])},decodeIndexBuffer(p,m,x,A){c(s.exports.meshopt_decodeIndexBuffer,p,m,x,A)},decodeIndexSequence(p,m,x,A){c(s.exports.meshopt_decodeIndexSequence,p,m,x,A)},decodeGltfBuffer(p,m,x,A,E,M){c(s.exports[v[E]],p,m,x,A,s.exports[h[M]])}},qy},d1={sunset:"venice_sunset_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",night:"dikhololo_night_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr",forest:"forest_slope_1k.hdr",apartment:"lebombo_1k.hdr",studio:"studio_small_03_1k.hdr",city:"potsdamer_platz_1k.hdr",park:"rooitou_park_1k.hdr",lobby:"st_fagans_interior_1k.hdr"};function C4(n,e,t){return t?(e.compileEquirectangularShader(),e.fromCubemap(n).texture):e.fromEquirectangular(n).texture}const b4="https://rawcdn.githack.com/pmndrs/drei-assets/aa3600359ba664d546d05821bcbca42013587df2";function O4({background:n=!1,files:e=["px.png","nx.png","py.png","ny.png","pz.png","nz.png"],path:t="/",preset:r=void 0,scene:i}){if(r){if(!(r in d1))throw new Error("Preset must be one of: "+Object.keys(d1).join(", "));e=d1[r],t=b4+"/hdri/"}const s=pd(({scene:m})=>m),o=pd(({gl:m})=>m),l=Array.isArray(e),h=Yy(l?xA:M4,l?[e]:e,m=>m.setPath(t)),v=l?h[0]:h,p=yo(()=>new Promise(m=>{const x=new cB(o),A=C4(v,x,l);x.dispose(),m(A)}),v);return Tt.exports.useLayoutEffect(()=>{const m=i?i.background:s.background,x=i?i.environment:s.environment;return i?(i.environment=p,n&&(i.background=p)):(s.environment=p,n&&(s.background=p)),()=>{i?(i.environment=x,i.background=m):(s.environment=x,s.background=m),yo.clear(v),p.dispose()}},[p,n,i]),null}const N4=Tt.exports.forwardRef((n,e)=>{let{camera:t,regress:r,enableDamping:i=!0}=n,s=Zz(n,["camera","regress","enableDamping"]);const o=pd(({invalidate:m})=>m),l=pd(({camera:m})=>m),c=pd(({gl:m})=>m),h=pd(({performance:m})=>m),v=t||l,p=Tt.exports.useMemo(()=>new $z(v),[v]);return Vz(()=>p.update()),Tt.exports.useEffect(()=>{const m=()=>{o(),r&&h.regress()};return p.connect(c.domElement),p.addEventListener("change",m),()=>{p.removeEventListener("change",m),p.dispose()}},[r,p,o]),Tt.exports.createElement("primitive",o1({ref:e,object:p,enableDamping:i},s))});function zB(n,e){return t=>{if(n){const r=new E4;r.setDecoderPath(typeof n=="string"?n:"https://www.gstatic.com/draco/v1/decoders/"),t.setDRACOLoader(r)}e&&t.setMeshoptDecoder(T4)}}function L4(n,e=!0,t=!0){return Yy(RB,n,zB(e,t))}L4.preload=(n,e=!0,t=!0)=>Yy.preload(RB,n,zB(e,t));var WB={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,v="__lodash_placeholder__",p=1,m=2,x=4,A=1,E=2,M=1,w=2,_=4,C=8,b=16,I=32,B=64,H=128,D=256,O=512,ee=30,q="...",fe=800,ne=16,te=1,$=2,le=3,_e=1/0,Be=9007199254740991,Ce=17976931348623157e292,He=0/0,ue=4294967295,Oe=ue-1,ze=ue>>>1,Ee=[["ary",H],["bind",M],["bindKey",w],["curry",C],["curryRight",b],["flip",O],["partial",I],["partialRight",B],["rearg",D]],F="[object Arguments]",G="[object Array]",X="[object AsyncFunction]",V="[object Boolean]",K="[object Date]",Z="[object DOMException]",se="[object Error]",j="[object Function]",re="[object GeneratorFunction]",ae="[object Map]",ye="[object Number]",ge="[object Null]",z="[object Object]",W="[object Promise]",ve="[object Proxy]",Ae="[object RegExp]",Ne="[object Set]",We="[object String]",Ye="[object Symbol]",tt="[object Undefined]",oe="[object WeakMap]",Ve="[object WeakSet]",ke="[object ArrayBuffer]",Qe="[object DataView]",Ie="[object Float32Array]",rt="[object Float64Array]",It="[object Int8Array]",Ht="[object Int16Array]",Kn="[object Int32Array]",he="[object Uint8Array]",Ue="[object Uint8ClampedArray]",at="[object Uint16Array]",Ut="[object Uint32Array]",an=/\b__p \+= '';/g,gn=/\b(__p \+=) '' \+/g,Dn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ui=/&(?:amp|lt|gt|quot|#39);/g,Mn=/[&<>"']/g,or=RegExp(Ui.source),xs=RegExp(Mn.source),js=/<%-([\s\S]+?)%>/g,ns=/<%([\s\S]+?)%>/g,_l=/<%=([\s\S]+?)%>/g,wl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,Se=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,we=/[\\^$.*+?()[\]{}|]/g,Re=RegExp(we.source),Ke=/^\s+/,kt=/\s/,At=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bt=/\{\n\/\* \[wrapped with (.+)\] \*/,Kt=/,? & /,Mt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vt=/[()=,{}\[\]\/\s]/,Et=/\\(\\)?/g,Yt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jr=/\w*$/,dr=/^[-+]0x[0-9a-f]+$/i,ki=/^0b[01]+$/i,vn=/^\[object .+?Constructor\]$/,zi=/^0o[0-7]+$/i,yn=/^(?:0|[1-9]\d*)$/,xo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,En=/($^)/,ar=/['\n\r\u2028\u2029\\]/g,en="\\ud800-\\udfff",Rn="\\u0300-\\u036f",Xs="\\ufe20-\\ufe2f",wr="\\u20d0-\\u20ff",Ir=Rn+Xs+wr,Ks="\\u2700-\\u27bf",_o="a-z\\xdf-\\xf6\\xf8-\\xff",Xr="\\xac\\xb1\\xd7\\xf7",ec="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",pm="\\u2000-\\u206f",mm=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Al="A-Z\\xc0-\\xd6\\xd8-\\xde",gd="\\ufe0e\\ufe0f",tc=Xr+ec+pm+mm,_s="['\u2019]",Qy="["+en+"]",Ml="["+tc+"]",tn="["+Ir+"]",Ys="\\d+",Zy="["+Ks+"]",gm="["+_o+"]",va="[^"+en+tc+Ys+Ks+_o+Al+"]",nc="\\ud83c[\\udffb-\\udfff]",rc="(?:"+tn+"|"+nc+")",wo="[^"+en+"]",El="(?:\\ud83c[\\udde6-\\uddff]){2}",ya="[\\ud800-\\udbff][\\udc00-\\udfff]",ci="["+Al+"]",vm="\\u200d",ym="(?:"+gm+"|"+va+")",$y="(?:"+ci+"|"+va+")",xm="(?:"+_s+"(?:d|ll|m|re|s|t|ve))?",ic="(?:"+_s+"(?:D|LL|M|RE|S|T|VE))?",sc=rc+"?",_m="["+gd+"]?",wm="(?:"+vm+"(?:"+[wo,El,ya].join("|")+")"+_m+sc+")*",vd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",e0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sl=_m+sc+wm,Am="(?:"+[Zy,El,ya].join("|")+")"+Sl,Mm="(?:"+[wo+tn+"?",tn,El,ya,Qy].join("|")+")",Em=RegExp(_s,"g"),Sm=RegExp(tn,"g"),Tl=RegExp(nc+"(?="+nc+")|"+Mm+Sl,"g"),t0=RegExp([ci+"?"+gm+"+"+xm+"(?="+[Ml,ci,"$"].join("|")+")",$y+"+"+ic+"(?="+[Ml,ci+ym,"$"].join("|")+")",ci+"?"+ym+"+"+xm,ci+"+"+ic,e0,vd,Ys,Am].join("|"),"g"),ws=RegExp("["+vm+en+Ir+gd+"]"),oc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Tm=-1,Rt={};Rt[Ie]=Rt[rt]=Rt[It]=Rt[Ht]=Rt[Kn]=Rt[he]=Rt[Ue]=Rt[at]=Rt[Ut]=!0,Rt[F]=Rt[G]=Rt[ke]=Rt[V]=Rt[Qe]=Rt[K]=Rt[se]=Rt[j]=Rt[ae]=Rt[ye]=Rt[z]=Rt[Ae]=Rt[Ne]=Rt[We]=Rt[oe]=!1;var qt={};qt[F]=qt[G]=qt[ke]=qt[Qe]=qt[V]=qt[K]=qt[Ie]=qt[rt]=qt[It]=qt[Ht]=qt[Kn]=qt[ae]=qt[ye]=qt[z]=qt[Ae]=qt[Ne]=qt[We]=qt[Ye]=qt[he]=qt[Ue]=qt[at]=qt[Ut]=!0,qt[se]=qt[j]=qt[oe]=!1;var Cm={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},As={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bm=parseFloat,n0=parseInt,Lm=typeof uh=="object"&&uh&&uh.Object===Object&&uh,Ei=typeof self=="object"&&self&&self.Object===Object&&self,hr=Lm||Ei||Function("return this")(),xa=e&&!e.nodeType&&e,Ao=xa&&!0&&n&&!n.nodeType&&n,Si=Ao&&Ao.exports===xa,_a=Si&&Lm.process,Fr=function(){try{var de=Ao&&Ao.require&&Ao.require("util").types;return de||_a&&_a.binding&&_a.binding("util")}catch{}}(),Mo=Fr&&Fr.isArrayBuffer,bl=Fr&&Fr.isDate,ac=Fr&&Fr.isMap,xd=Fr&&Fr.isRegExp,lc=Fr&&Fr.isSet,_d=Fr&&Fr.isTypedArray;function lr(de,be,Me){switch(Me.length){case 0:return de.call(be);case 1:return de.call(be,Me[0]);case 2:return de.call(be,Me[0],Me[1]);case 3:return de.call(be,Me[0],Me[1],Me[2])}return de.apply(be,Me)}function Ti(de,be,Me,nt){for(var Ct=-1,zt=de==null?0:de.length;++Ct<zt;){var In=de[Ct];be(nt,In,Me(In),de)}return nt}function Yn(de,be){for(var Me=-1,nt=de==null?0:de.length;++Me<nt&&be(de[Me],Me,de)!==!1;);return de}function wd(de,be){for(var Me=de==null?0:de.length;Me--&&be(de[Me],Me,de)!==!1;);return de}function Ad(de,be){for(var Me=-1,nt=de==null?0:de.length;++Me<nt;)if(!be(de[Me],Me,de))return!1;return!0}function Dr(de,be){for(var Me=-1,nt=de==null?0:de.length,Ct=0,zt=[];++Me<nt;){var In=de[Me];be(In,Me,de)&&(zt[Ct++]=In)}return zt}function Wi(de,be){var Me=de==null?0:de.length;return!!Me&&rs(de,be,0)>-1}function uc(de,be,Me){for(var nt=-1,Ct=de==null?0:de.length;++nt<Ct;)if(Me(be,de[nt]))return!0;return!1}function nn(de,be){for(var Me=-1,nt=de==null?0:de.length,Ct=Array(nt);++Me<nt;)Ct[Me]=be(de[Me],Me,de);return Ct}function Ms(de,be){for(var Me=-1,nt=be.length,Ct=de.length;++Me<nt;)de[Ct+Me]=be[Me];return de}function cc(de,be,Me,nt){var Ct=-1,zt=de==null?0:de.length;for(nt&&zt&&(Me=de[++Ct]);++Ct<zt;)Me=be(Me,de[Ct],Ct,de);return Me}function fc(de,be,Me,nt){var Ct=de==null?0:de.length;for(nt&&Ct&&(Me=de[--Ct]);Ct--;)Me=be(Me,de[Ct],Ct,de);return Me}function wa(de,be){for(var Me=-1,nt=de==null?0:de.length;++Me<nt;)if(be(de[Me],Me,de))return!0;return!1}var Bm=pc("length");function Rm(de){return de.split("")}function Pm(de){return de.match(Mt)||[]}function dc(de,be,Me){var nt;return Me(de,function(Ct,zt,In){if(be(Ct,zt,In))return nt=zt,!1}),nt}function Eo(de,be,Me,nt){for(var Ct=de.length,zt=Me+(nt?1:-1);nt?zt--:++zt<Ct;)if(be(de[zt],zt,de))return zt;return-1}function rs(de,be,Me){return be===be?On(de,be,Me):Eo(de,Md,Me)}function hc(de,be,Me,nt){for(var Ct=Me-1,zt=de.length;++Ct<zt;)if(nt(de[Ct],be))return Ct;return-1}function Md(de){return de!==de}function Ll(de,be){var Me=de==null?0:de.length;return Me?qs(de,be)/Me:He}function pc(de){return function(be){return be==null?t:be[de]}}function So(de){return function(be){return de==null?t:de[be]}}function fi(de,be,Me,nt,Ct){return Ct(de,function(zt,In,rn){Me=nt?(nt=!1,zt):be(Me,zt,In,rn)}),Me}function Bl(de,be){var Me=de.length;for(de.sort(be);Me--;)de[Me]=de[Me].value;return de}function qs(de,be){for(var Me,nt=-1,Ct=de.length;++nt<Ct;){var zt=be(de[nt]);zt!==t&&(Me=Me===t?zt:Me+zt)}return Me}function Ci(de,be){for(var Me=-1,nt=Array(de);++Me<de;)nt[Me]=be(Me);return nt}function Ed(de,be){return nn(be,function(Me){return[Me,de[Me]]})}function To(de){return de&&de.slice(0,Aa(de)+1).replace(Ke,"")}function Kr(de){return function(be){return de(be)}}function Rl(de,be){return nn(be,function(Me){return de[Me]})}function hn(de,be){return de.has(be)}function Pl(de,be){for(var Me=-1,nt=de.length;++Me<nt&&rs(be,de[Me],0)>-1;);return Me}function is(de,be){for(var Me=de.length;Me--&&rs(be,de[Me],0)>-1;);return Me}function Co(de,be){for(var Me=de.length,nt=0;Me--;)de[Me]===be&&++nt;return nt}var ss=So(Cm),Im=So(As);function Fm(de){return"\\"+Mi[de]}function Sd(de,be){return de==null?t:de[be]}function bo(de){return ws.test(de)}function mc(de){return oc.test(de)}function Td(de){for(var be,Me=[];!(be=de.next()).done;)Me.push(be.value);return Me}function Qs(de){var be=-1,Me=Array(de.size);return de.forEach(function(nt,Ct){Me[++be]=[Ct,nt]}),Me}function gc(de,be){return function(Me){return de(be(Me))}}function bi(de,be){for(var Me=-1,nt=de.length,Ct=0,zt=[];++Me<nt;){var In=de[Me];(In===be||In===v)&&(de[Me]=v,zt[Ct++]=Me)}return zt}function Or(de){var be=-1,Me=Array(de.size);return de.forEach(function(nt){Me[++be]=nt}),Me}function Il(de){var be=-1,Me=Array(de.size);return de.forEach(function(nt){Me[++be]=[nt,nt]}),Me}function On(de,be,Me){for(var nt=Me-1,Ct=de.length;++nt<Ct;)if(de[nt]===be)return nt;return-1}function Ar(de,be,Me){for(var nt=Me+1;nt--;)if(de[nt]===be)return nt;return nt}function Pn(de){return bo(de)?Cd(de):Bm(de)}function Yr(de){return bo(de)?bd(de):Rm(de)}function Aa(de){for(var be=de.length;be--&&kt.test(de.charAt(be)););return be}var qr=So(Cl);function Cd(de){for(var be=Tl.lastIndex=0;Tl.test(de);)++be;return be}function bd(de){return de.match(Tl)||[]}function Lo(de){return de.match(t0)||[]}var Bo=function de(be){be=be==null?hr:Nr.defaults(hr.Object(),be,Nr.pick(hr,yd));var Me=be.Array,nt=be.Date,Ct=be.Error,zt=be.Function,In=be.Math,rn=be.Object,Ma=be.RegExp,Ld=be.String,Qr=be.TypeError,Fl=Me.prototype,vc=zt.prototype,Ro=rn.prototype,Dl=be["__core-js_shared__"],Ol=vc.toString,Qt=Ro.hasOwnProperty,Dm=0,Bd=function(){var a=/[^.]+$/.exec(Dl&&Dl.keys&&Dl.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),yc=Ro.toString,Rd=Ol.call(rn),xc=hr._,r0=Ma("^"+Ol.call(Qt).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_c=Si?be.Buffer:t,Zs=be.Symbol,wc=be.Uint8Array,Li=_c?_c.allocUnsafe:t,pr=gc(rn.getPrototypeOf,rn),Pd=rn.create,Id=Ro.propertyIsEnumerable,Nl=Fl.splice,Ac=Zs?Zs.isConcatSpreadable:t,Ea=Zs?Zs.iterator:t,Es=Zs?Zs.toStringTag:t,Gl=function(){try{var a=nu(rn,"defineProperty");return a({},"",{}),a}catch{}}(),Fd=be.clearTimeout!==hr.clearTimeout&&be.clearTimeout,Om=nt&&nt.now!==hr.Date.now&&nt.now,Mc=be.setTimeout!==hr.setTimeout&&be.setTimeout,Hl=In.ceil,Ul=In.floor,Ec=rn.getOwnPropertySymbols,Nm=_c?_c.isBuffer:t,Dd=be.isFinite,Od=Fl.join,Gm=gc(rn.keys,rn),ln=In.max,xn=In.min,kl=nt.now,zl=be.parseInt,Wl=In.random,Sc=Fl.reverse,Tc=nu(be,"DataView"),Ss=nu(be,"Map"),Nd=nu(be,"Promise"),Sa=nu(be,"Set"),Po=nu(be,"WeakMap"),Io=nu(rn,"create"),Cc=Po&&new Po,Fo={},Hm=ru(Tc),i0=ru(Ss),Um=ru(Nd),s0=ru(Sa),km=ru(Po),bc=Zs?Zs.prototype:t,Ta=bc?bc.valueOf:t,Gd=bc?bc.toString:t;function N(a){if(Wn(a)&&!Pt(a)&&!(a instanceof Ot)){if(a instanceof di)return a;if(Qt.call(a,"__wrapped__"))return O1(a)}return new di(a)}var Do=function(){function a(){}return function(d){if(!Hn(d))return{};if(Pd)return Pd(d);a.prototype=d;var y=new a;return a.prototype=t,y}}();function Vl(){}function di(a,d){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=t}N.templateSettings={escape:js,evaluate:ns,interpolate:_l,variable:"",imports:{_:N}},N.prototype=Vl.prototype,N.prototype.constructor=N,di.prototype=Do(Vl.prototype),di.prototype.constructor=di;function Ot(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ue,this.__views__=[]}function Hd(){var a=new Ot(this.__wrapped__);return a.__actions__=wt(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=wt(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=wt(this.__views__),a}function zm(){if(this.__filtered__){var a=new Ot(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Ud(){var a=this.__wrapped__.value(),d=this.__dir__,y=Pt(a),T=d<0,R=y?a.length:0,k=$B(0,R,this.__views__),Q=k.start,ie=k.end,me=ie-Q,Fe=T?ie:Q-1,De=this.__iteratees__,Ge=De.length,Ze=0,ct=xn(me,this.__takeCount__);if(!y||!T&&R==me&&ct==me)return Y(a,this.__actions__);var xt=[];e:for(;me--&&Ze<ct;){Fe+=d;for(var Nt=-1,_t=a[Fe];++Nt<Ge;){var Wt=De[Nt],jt=Wt.iteratee,ji=Wt.type,gi=jt(_t);if(ji==$)_t=gi;else if(!gi){if(ji==te)continue e;break e}}xt[Ze++]=_t}return xt}Ot.prototype=Do(Vl.prototype),Ot.prototype.constructor=Ot;function $s(a){var d=-1,y=a==null?0:a.length;for(this.clear();++d<y;){var T=a[d];this.set(T[0],T[1])}}function Lc(){this.__data__=Io?Io(null):{},this.size=0}function o0(a){var d=this.has(a)&&delete this.__data__[a];return this.size-=d?1:0,d}function Bc(a){var d=this.__data__;if(Io){var y=d[a];return y===c?t:y}return Qt.call(d,a)?d[a]:t}function Rc(a){var d=this.__data__;return Io?d[a]!==t:Qt.call(d,a)}function Pc(a,d){var y=this.__data__;return this.size+=this.has(a)?0:1,y[a]=Io&&d===t?c:d,this}$s.prototype.clear=Lc,$s.prototype.delete=o0,$s.prototype.get=Bc,$s.prototype.has=Rc,$s.prototype.set=Pc;function Bi(a){var d=-1,y=a==null?0:a.length;for(this.clear();++d<y;){var T=a[d];this.set(T[0],T[1])}}function Ic(){this.__data__=[],this.size=0}function Jl(a){var d=this.__data__,y=ba(d,a);if(y<0)return!1;var T=d.length-1;return y==T?d.pop():Nl.call(d,y,1),--this.size,!0}function kd(a){var d=this.__data__,y=ba(d,a);return y<0?t:d[y][1]}function zd(a){return ba(this.__data__,a)>-1}function Wd(a,d){var y=this.__data__,T=ba(y,a);return T<0?(++this.size,y.push([a,d])):y[T][1]=d,this}Bi.prototype.clear=Ic,Bi.prototype.delete=Jl,Bi.prototype.get=kd,Bi.prototype.has=zd,Bi.prototype.set=Wd;function os(a){var d=-1,y=a==null?0:a.length;for(this.clear();++d<y;){var T=a[d];this.set(T[0],T[1])}}function Vd(){this.size=0,this.__data__={hash:new $s,map:new(Ss||Bi),string:new $s}}function Fc(a){var d=sg(this,a).delete(a);return this.size-=d?1:0,d}function a0(a){return sg(this,a).get(a)}function l0(a){return sg(this,a).has(a)}function Dc(a,d){var y=sg(this,a),T=y.size;return y.set(a,d),this.size+=y.size==T?0:1,this}os.prototype.clear=Vd,os.prototype.delete=Fc,os.prototype.get=a0,os.prototype.has=l0,os.prototype.set=Dc;function Ts(a){var d=-1,y=a==null?0:a.length;for(this.__data__=new os;++d<y;)this.add(a[d])}function Jd(a){return this.__data__.set(a,c),this}function gt(a){return this.__data__.has(a)}Ts.prototype.add=Ts.prototype.push=Jd,Ts.prototype.has=gt;function _n(a){var d=this.__data__=new Bi(a);this.size=d.size}function qn(){this.__data__=new Bi,this.size=0}function Mr(a){var d=this.__data__,y=d.delete(a);return this.size=d.size,y}function Oo(a){return this.__data__.get(a)}function jd(a){return this.__data__.has(a)}function mr(a,d){var y=this.__data__;if(y instanceof Bi){var T=y.__data__;if(!Ss||T.length<i-1)return T.push([a,d]),this.size=++y.size,this;y=this.__data__=new os(T)}return y.set(a,d),this.size=y.size,this}_n.prototype.clear=qn,_n.prototype.delete=Mr,_n.prototype.get=Oo,_n.prototype.has=jd,_n.prototype.set=mr;function jl(a,d){var y=Pt(a),T=!y&&iu(a),R=!y&&!T&&Ia(a),k=!y&&!T&&!R&&Yc(a),Q=y||T||R||k,ie=Q?Ci(a.length,Ld):[],me=ie.length;for(var Fe in a)(d||Qt.call(a,Fe))&&!(Q&&(Fe=="length"||R&&(Fe=="offset"||Fe=="parent")||k&&(Fe=="buffer"||Fe=="byteLength"||Fe=="byteOffset")||Xo(Fe,me)))&&ie.push(Fe);return ie}function No(a){var d=a.length;return d?a[Zr(0,d-1)]:t}function Xl(a,d){return og(wt(a),Er(d,0,a.length))}function Ca(a){return og(wt(a))}function Kl(a,d,y){(y!==t&&!Rs(a[d],y)||y===t&&!(d in a))&&Ri(a,d,y)}function Go(a,d,y){var T=a[d];(!(Qt.call(a,d)&&Rs(T,y))||y===t&&!(d in a))&&Ri(a,d,y)}function ba(a,d){for(var y=a.length;y--;)if(Rs(a[y][0],d))return y;return-1}function Xd(a,d,y,T){return Sr(a,function(R,k,Q){d(T,R,y(R),Q)}),T}function Cs(a,d){return a&&vr(d,Tr(d),a)}function it(a,d){return a&&vr(d,Ii(d),a)}function Ri(a,d,y){d=="__proto__"&&Gl?Gl(a,d,{configurable:!0,enumerable:!0,value:y,writable:!0}):a[d]=y}function Yl(a,d){for(var y=-1,T=d.length,R=Me(T),k=a==null;++y<T;)R[y]=k?t:I0(a,d[y]);return R}function Er(a,d,y){return a===a&&(y!==t&&(a=a<=y?a:y),d!==t&&(a=a>=d?a:d)),a}function Qn(a,d,y,T,R,k){var Q,ie=d&p,me=d&m,Fe=d&x;if(y&&(Q=R?y(a,T,R,k):y(a)),Q!==t)return Q;if(!Hn(a))return a;var De=Pt(a);if(De){if(Q=tR(a),!ie)return wt(a,Q)}else{var Ge=$r(a),Ze=Ge==j||Ge==re;if(Ia(a))return pi(a,ie);if(Ge==z||Ge==F||Ze&&!R){if(Q=me||Ze?{}:C1(a),!ie)return me?VB(a,it(Q,a)):m0(a,Cs(Q,a))}else{if(!qt[Ge])return R?a:{};Q=nR(a,Ge,ie)}}k||(k=new _n);var ct=k.get(a);if(ct)return ct;k.set(a,Q),nM(a)?a.forEach(function(_t){Q.add(Qn(_t,d,y,_t,a,k))}):eM(a)&&a.forEach(function(_t,Wt){Q.set(Wt,Qn(_t,d,y,Wt,a,k))});var xt=Fe?me?x0:y0:me?Ii:Tr,Nt=De?t:xt(a);return Yn(Nt||a,function(_t,Wt){Nt&&(Wt=_t,_t=a[Wt]),Go(Q,Wt,Qn(_t,d,y,Wt,a,k))}),Q}function ql(a){var d=Tr(a);return function(y){return La(y,a,d)}}function La(a,d,y){var T=y.length;if(a==null)return!T;for(a=rn(a);T--;){var R=y[T],k=d[R],Q=a[R];if(Q===t&&!(R in a)||!k(Q))return!1}return!0}function Oc(a,d,y){if(typeof a!="function")throw new Qr(o);return ah(function(){a.apply(t,y)},d)}function Ho(a,d,y,T){var R=-1,k=Wi,Q=!0,ie=a.length,me=[],Fe=d.length;if(!ie)return me;y&&(d=nn(d,Kr(y))),T?(k=uc,Q=!1):d.length>=i&&(k=hn,Q=!1,d=new Ts(d));e:for(;++R<ie;){var De=a[R],Ge=y==null?De:y(De);if(De=T||De!==0?De:0,Q&&Ge===Ge){for(var Ze=Fe;Ze--;)if(d[Ze]===Ge)continue e;me.push(De)}else k(d,Ge,T)||me.push(De)}return me}var Sr=h1(gr),Ba=h1(Vi,!0);function Kd(a,d){var y=!0;return Sr(a,function(T,R,k){return y=!!d(T,R,k),y}),y}function Uo(a,d,y){for(var T=-1,R=a.length;++T<R;){var k=a[T],Q=d(k);if(Q!=null&&(ie===t?Q===Q&&!Ji(Q):y(Q,ie)))var ie=Q,me=k}return me}function bs(a,d,y,T){var R=a.length;for(y=Dt(y),y<0&&(y=-y>R?0:R+y),T=T===t||T>R?R:Dt(T),T<0&&(T+=R),T=y>T?0:iM(T);y<T;)a[y++]=d;return a}function Ql(a,d){var y=[];return Sr(a,function(T,R,k){d(T,R,k)&&y.push(T)}),y}function Nn(a,d,y,T,R){var k=-1,Q=a.length;for(y||(y=iR),R||(R=[]);++k<Q;){var ie=a[k];d>0&&y(ie)?d>1?Nn(ie,d-1,y,T,R):Ms(R,ie):T||(R[R.length]=ie)}return R}var ko=p1(),Gr=p1(!0);function gr(a,d){return a&&ko(a,d,Tr)}function Vi(a,d){return a&&Gr(a,d,Tr)}function zo(a,d){return Dr(d,function(y){return Ko(a[y])})}function Zn(a,d){d=pt(d,a);for(var y=0,T=d.length;a!=null&&y<T;)a=a[to(d[y++])];return y&&y==T?a:t}function Yd(a,d,y){var T=d(a);return Pt(a)?T:Ms(T,y(a))}function zn(a){return a==null?a===t?tt:ge:Es&&Es in rn(a)?ZB(a):fR(a)}function Zl(a,d){return a>d}function u0(a,d){return a!=null&&Qt.call(a,d)}function Wm(a,d){return a!=null&&d in rn(a)}function Vm(a,d,y){return a>=xn(d,y)&&a<ln(d,y)}function Ra(a,d,y){for(var T=y?uc:Wi,R=a[0].length,k=a.length,Q=k,ie=Me(k),me=1/0,Fe=[];Q--;){var De=a[Q];Q&&d&&(De=nn(De,Kr(d))),me=xn(De.length,me),ie[Q]=!y&&(d||R>=120&&De.length>=120)?new Ts(Q&&De):t}De=a[0];var Ge=-1,Ze=ie[0];e:for(;++Ge<R&&Fe.length<me;){var ct=De[Ge],xt=d?d(ct):ct;if(ct=y||ct!==0?ct:0,!(Ze?hn(Ze,xt):T(Fe,xt,y))){for(Q=k;--Q;){var Nt=ie[Q];if(!(Nt?hn(Nt,xt):T(a[Q],xt,y)))continue e}Ze&&Ze.push(xt),Fe.push(ct)}}return Fe}function qd(a,d,y,T){return gr(a,function(R,k,Q){d(T,y(R),k,Q)}),T}function as(a,d,y){d=pt(d,a),a=R1(a,d);var T=a==null?a:a[to(ls(d))];return T==null?t:lr(T,a,y)}function Qd(a){return Wn(a)&&zn(a)==F}function Jm(a){return Wn(a)&&zn(a)==ke}function $l(a){return Wn(a)&&zn(a)==K}function eu(a,d,y,T,R){return a===d?!0:a==null||d==null||!Wn(a)&&!Wn(d)?a!==a&&d!==d:c0(a,d,y,T,eu,R)}function c0(a,d,y,T,R,k){var Q=Pt(a),ie=Pt(d),me=Q?G:$r(a),Fe=ie?G:$r(d);me=me==F?z:me,Fe=Fe==F?z:Fe;var De=me==z,Ge=Fe==z,Ze=me==Fe;if(Ze&&Ia(a)){if(!Ia(d))return!1;Q=!0,De=!1}if(Ze&&!De)return k||(k=new _n),Q||Yc(a)?E1(a,d,y,T,R,k):qB(a,d,me,y,T,R,k);if(!(y&A)){var ct=De&&Qt.call(a,"__wrapped__"),xt=Ge&&Qt.call(d,"__wrapped__");if(ct||xt){var Nt=ct?a.value():a,_t=xt?d.value():d;return k||(k=new _n),R(Nt,_t,y,T,k)}}return Ze?(k||(k=new _n),QB(a,d,y,T,R,k)):!1}function jm(a){return Wn(a)&&$r(a)==ae}function Nc(a,d,y,T){var R=y.length,k=R,Q=!T;if(a==null)return!k;for(a=rn(a);R--;){var ie=y[R];if(Q&&ie[2]?ie[1]!==a[ie[0]]:!(ie[0]in a))return!1}for(;++R<k;){ie=y[R];var me=ie[0],Fe=a[me],De=ie[1];if(Q&&ie[2]){if(Fe===t&&!(me in a))return!1}else{var Ge=new _n;if(T)var Ze=T(Fe,De,me,a,d,Ge);if(!(Ze===t?eu(De,Fe,A|E,T,Ge):Ze))return!1}}return!0}function eo(a){if(!Hn(a)||oR(a))return!1;var d=Ko(a)?r0:vn;return d.test(ru(a))}function f0(a){return Wn(a)&&zn(a)==Ae}function d0(a){return Wn(a)&&$r(a)==Ne}function Ls(a){return Wn(a)&&dg(a.length)&&!!Rt[zn(a)]}function Xm(a){return typeof a=="function"?a:a==null?Fi:typeof a=="object"?Pt(a)?Ym(a[0],a[1]):Km(a):mM(a)}function Gc(a){if(!oh(a))return Gm(a);var d=[];for(var y in rn(a))Qt.call(a,y)&&y!="constructor"&&d.push(y);return d}function h0(a){if(!Hn(a))return cR(a);var d=oh(a),y=[];for(var T in a)T=="constructor"&&(d||!Qt.call(a,T))||y.push(T);return y}function Hc(a,d){return a<d}function Bs(a,d){var y=-1,T=Pi(a)?Me(a.length):[];return Sr(a,function(R,k,Q){T[++y]=d(R,k,Q)}),T}function Km(a){var d=w0(a);return d.length==1&&d[0][2]?L1(d[0][0],d[0][1]):function(y){return y===a||Nc(y,a,d)}}function Ym(a,d){return M0(a)&&b1(d)?L1(to(a),d):function(y){var T=I0(y,a);return T===t&&T===d?F0(y,a):eu(d,T,A|E)}}function tu(a,d,y,T,R){a!==d&&ko(d,function(k,Q){if(R||(R=new _n),Hn(k))Uc(a,d,Q,y,tu,T,R);else{var ie=T?T(S0(a,Q),k,Q+"",a,d,R):t;ie===t&&(ie=k),Kl(a,Q,ie)}},Ii)}function Uc(a,d,y,T,R,k,Q){var ie=S0(a,y),me=S0(d,y),Fe=Q.get(me);if(Fe){Kl(a,y,Fe);return}var De=k?k(ie,me,y+"",a,d,Q):t,Ge=De===t;if(Ge){var Ze=Pt(me),ct=!Ze&&Ia(me),xt=!Ze&&!ct&&Yc(me);De=me,Ze||ct||xt?Pt(ie)?De=ie:$n(ie)?De=wt(ie):ct?(Ge=!1,De=pi(me,!0)):xt?(Ge=!1,De=ht(me,!0)):De=[]:lh(me)||iu(me)?(De=ie,iu(ie)?De=sM(ie):(!Hn(ie)||Ko(ie))&&(De=C1(me))):Ge=!1}Ge&&(Q.set(me,De),R(De,me,T,k,Q),Q.delete(me)),Kl(a,y,De)}function kc(a,d){var y=a.length;if(!!y)return d+=d<0?y:0,Xo(d,y)?a[d]:t}function Zd(a,d,y){d.length?d=nn(d,function(k){return Pt(k)?function(Q){return Zn(Q,k.length===1?k[0]:k)}:k}):d=[Fi];var T=-1;d=nn(d,Kr(yt()));var R=Bs(a,function(k,Q,ie){var me=nn(d,function(Fe){return Fe(k)});return{criteria:me,index:++T,value:k}});return Bl(R,function(k,Q){return bt(k,Q,y)})}function $d(a,d){return eh(a,d,function(y,T){return F0(a,T)})}function eh(a,d,y){for(var T=-1,R=d.length,k={};++T<R;){var Q=d[T],ie=Zn(a,Q);y(ie,Q)&&Wo(k,pt(Q,a),ie)}return k}function zc(a){return function(d){return Zn(d,a)}}function Wc(a,d,y,T){var R=T?hc:rs,k=-1,Q=d.length,ie=a;for(a===d&&(d=wt(d)),y&&(ie=nn(a,Kr(y)));++k<Q;)for(var me=0,Fe=d[k],De=y?y(Fe):Fe;(me=R(ie,De,me,T))>-1;)ie!==a&&Nl.call(ie,me,1),Nl.call(a,me,1);return a}function qm(a,d){for(var y=a?d.length:0,T=y-1;y--;){var R=d[y];if(y==T||R!==k){var k=R;Xo(R)?Nl.call(a,R,1):S(a,R)}}return a}function Zr(a,d){return a+Ul(Wl()*(d-a+1))}function th(a,d,y,T){for(var R=-1,k=ln(Hl((d-a)/(y||1)),0),Q=Me(k);k--;)Q[T?k:++R]=a,a+=y;return Q}function nh(a,d){var y="";if(!a||d<1||d>Be)return y;do d%2&&(y+=a),d=Ul(d/2),d&&(a+=a);while(d);return y}function St(a,d){return T0(B1(a,d,Fi),a+"")}function Vc(a){return No(qc(a))}function Pa(a,d){var y=qc(a);return og(y,Er(d,0,y.length))}function Wo(a,d,y,T){if(!Hn(a))return a;d=pt(d,a);for(var R=-1,k=d.length,Q=k-1,ie=a;ie!=null&&++R<k;){var me=to(d[R]),Fe=y;if(me==="__proto__"||me==="constructor"||me==="prototype")return a;if(R!=Q){var De=ie[me];Fe=T?T(De,me,ie):t,Fe===t&&(Fe=Hn(De)?De:Xo(d[R+1])?[]:{})}Go(ie,me,Fe),ie=ie[me]}return a}var Jc=Cc?function(a,d){return Cc.set(a,d),a}:Fi,rh=Gl?function(a,d){return Gl(a,"toString",{configurable:!0,enumerable:!1,value:O0(d),writable:!0})}:Fi;function p0(a){return og(qc(a))}function hi(a,d,y){var T=-1,R=a.length;d<0&&(d=-d>R?0:R+d),y=y>R?R:y,y<0&&(y+=R),R=d>y?0:y-d>>>0,d>>>=0;for(var k=Me(R);++T<R;)k[T]=a[T+d];return k}function Qm(a,d){var y;return Sr(a,function(T,R,k){return y=d(T,R,k),!y}),!!y}function Vo(a,d,y){var T=0,R=a==null?T:a.length;if(typeof d=="number"&&d===d&&R<=ze){for(;T<R;){var k=T+R>>>1,Q=a[k];Q!==null&&!Ji(Q)&&(y?Q<=d:Q<d)?T=k+1:R=k}return R}return ih(a,d,Fi,y)}function ih(a,d,y,T){var R=0,k=a==null?0:a.length;if(k===0)return 0;d=y(d);for(var Q=d!==d,ie=d===null,me=Ji(d),Fe=d===t;R<k;){var De=Ul((R+k)/2),Ge=y(a[De]),Ze=Ge!==t,ct=Ge===null,xt=Ge===Ge,Nt=Ji(Ge);if(Q)var _t=T||xt;else Fe?_t=xt&&(T||Ze):ie?_t=xt&&Ze&&(T||!ct):me?_t=xt&&Ze&&!ct&&(T||!Nt):ct||Nt?_t=!1:_t=T?Ge<=d:Ge<d;_t?R=De+1:k=De}return xn(k,Oe)}function Zm(a,d){for(var y=-1,T=a.length,R=0,k=[];++y<T;){var Q=a[y],ie=d?d(Q):Q;if(!y||!Rs(ie,me)){var me=ie;k[R++]=Q===0?0:Q}}return k}function u(a){return typeof a=="number"?a:Ji(a)?He:+a}function f(a){if(typeof a=="string")return a;if(Pt(a))return nn(a,f)+"";if(Ji(a))return Gd?Gd.call(a):"";var d=a+"";return d=="0"&&1/a==-_e?"-0":d}function g(a,d,y){var T=-1,R=Wi,k=a.length,Q=!0,ie=[],me=ie;if(y)Q=!1,R=uc;else if(k>=i){var Fe=d?null:KB(a);if(Fe)return Or(Fe);Q=!1,R=hn,me=new Ts}else me=d?[]:ie;e:for(;++T<k;){var De=a[T],Ge=d?d(De):De;if(De=y||De!==0?De:0,Q&&Ge===Ge){for(var Ze=me.length;Ze--;)if(me[Ze]===Ge)continue e;d&&me.push(Ge),ie.push(De)}else R(me,Ge,y)||(me!==ie&&me.push(Ge),ie.push(De))}return ie}function S(a,d){return d=pt(d,a),a=R1(a,d),a==null||delete a[to(ls(d))]}function L(a,d,y,T){return Wo(a,d,y(Zn(a,d)),T)}function P(a,d,y,T){for(var R=a.length,k=T?R:-1;(T?k--:++k<R)&&d(a[k],k,a););return y?hi(a,T?0:k,T?k+1:R):hi(a,T?k+1:0,T?R:k)}function Y(a,d){var y=a;return y instanceof Ot&&(y=y.value()),cc(d,function(T,R){return R.func.apply(R.thisArg,Ms([T],R.args))},y)}function ce(a,d,y){var T=a.length;if(T<2)return T?g(a[0]):[];for(var R=-1,k=Me(T);++R<T;)for(var Q=a[R],ie=-1;++ie<T;)ie!=R&&(k[R]=Ho(k[R]||Q,a[ie],d,y));return g(Nn(k,1),d,y)}function Te(a,d,y){for(var T=-1,R=a.length,k=d.length,Q={};++T<R;){var ie=T<k?d[T]:t;y(Q,a[T],ie)}return Q}function Xe(a){return $n(a)?a:[]}function ft(a){return typeof a=="function"?a:Fi}function pt(a,d){return Pt(a)?a:M0(a,d)?[a]:D1(sn(a))}var et=St;function Jt(a,d,y){var T=a.length;return y=y===t?T:y,!d&&y>=T?a:hi(a,d,y)}var wn=Fd||function(a){return hr.clearTimeout(a)};function pi(a,d){if(d)return a.slice();var y=a.length,T=Li?Li(y):new a.constructor(y);return a.copy(T),T}function xe(a){var d=new a.constructor(a.byteLength);return new wc(d).set(new wc(a)),d}function pe(a,d){var y=d?xe(a.buffer):a.buffer;return new a.constructor(y,a.byteOffset,a.byteLength)}function Le(a){var d=new a.constructor(a.source,jr.exec(a));return d.lastIndex=a.lastIndex,d}function $e(a){return Ta?rn(Ta.call(a)):{}}function ht(a,d){var y=d?xe(a.buffer):a.buffer;return new a.constructor(y,a.byteOffset,a.length)}function un(a,d){if(a!==d){var y=a!==t,T=a===null,R=a===a,k=Ji(a),Q=d!==t,ie=d===null,me=d===d,Fe=Ji(d);if(!ie&&!Fe&&!k&&a>d||k&&Q&&me&&!ie&&!Fe||T&&Q&&me||!y&&me||!R)return 1;if(!T&&!k&&!Fe&&a<d||Fe&&y&&R&&!T&&!k||ie&&y&&R||!Q&&R||!me)return-1}return 0}function bt(a,d,y){for(var T=-1,R=a.criteria,k=d.criteria,Q=R.length,ie=y.length;++T<Q;){var me=un(R[T],k[T]);if(me){if(T>=ie)return me;var Fe=y[T];return me*(Fe=="desc"?-1:1)}}return a.index-d.index}function Zt(a,d,y,T){for(var R=-1,k=a.length,Q=y.length,ie=-1,me=d.length,Fe=ln(k-Q,0),De=Me(me+Fe),Ge=!T;++ie<me;)De[ie]=d[ie];for(;++R<Q;)(Ge||R<k)&&(De[y[R]]=a[R]);for(;Fe--;)De[ie++]=a[R++];return De}function Gn(a,d,y,T){for(var R=-1,k=a.length,Q=-1,ie=y.length,me=-1,Fe=d.length,De=ln(k-ie,0),Ge=Me(De+Fe),Ze=!T;++R<De;)Ge[R]=a[R];for(var ct=R;++me<Fe;)Ge[ct+me]=d[me];for(;++Q<ie;)(Ze||R<k)&&(Ge[ct+y[Q]]=a[R++]);return Ge}function wt(a,d){var y=-1,T=a.length;for(d||(d=Me(T));++y<T;)d[y]=a[y];return d}function vr(a,d,y,T){var R=!y;y||(y={});for(var k=-1,Q=d.length;++k<Q;){var ie=d[k],me=T?T(y[ie],a[ie],ie,y,a):t;me===t&&(me=a[ie]),R?Ri(y,ie,me):Go(y,ie,me)}return y}function m0(a,d){return vr(a,A0(a),d)}function VB(a,d){return vr(a,S1(a),d)}function $m(a,d){return function(y,T){var R=Pt(y)?Ti:Xd,k=d?d():{};return R(y,a,yt(T,2),k)}}function jc(a){return St(function(d,y){var T=-1,R=y.length,k=R>1?y[R-1]:t,Q=R>2?y[2]:t;for(k=a.length>3&&typeof k=="function"?(R--,k):t,Q&&mi(y[0],y[1],Q)&&(k=R<3?t:k,R=1),d=rn(d);++T<R;){var ie=y[T];ie&&a(d,ie,T,k)}return d})}function h1(a,d){return function(y,T){if(y==null)return y;if(!Pi(y))return a(y,T);for(var R=y.length,k=d?R:-1,Q=rn(y);(d?k--:++k<R)&&T(Q[k],k,Q)!==!1;);return y}}function p1(a){return function(d,y,T){for(var R=-1,k=rn(d),Q=T(d),ie=Q.length;ie--;){var me=Q[a?ie:++R];if(y(k[me],me,k)===!1)break}return d}}function JB(a,d,y){var T=d&M,R=sh(a);function k(){var Q=this&&this!==hr&&this instanceof k?R:a;return Q.apply(T?y:this,arguments)}return k}function m1(a){return function(d){d=sn(d);var y=bo(d)?Yr(d):t,T=y?y[0]:d.charAt(0),R=y?Jt(y,1).join(""):d.slice(1);return T[a]()+R}}function Xc(a){return function(d){return cc(hM(dM(d).replace(Em,"")),a,"")}}function sh(a){return function(){var d=arguments;switch(d.length){case 0:return new a;case 1:return new a(d[0]);case 2:return new a(d[0],d[1]);case 3:return new a(d[0],d[1],d[2]);case 4:return new a(d[0],d[1],d[2],d[3]);case 5:return new a(d[0],d[1],d[2],d[3],d[4]);case 6:return new a(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new a(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var y=Do(a.prototype),T=a.apply(y,d);return Hn(T)?T:y}}function jB(a,d,y){var T=sh(a);function R(){for(var k=arguments.length,Q=Me(k),ie=k,me=Kc(R);ie--;)Q[ie]=arguments[ie];var Fe=k<3&&Q[0]!==me&&Q[k-1]!==me?[]:bi(Q,me);if(k-=Fe.length,k<y)return _1(a,d,eg,R.placeholder,t,Q,Fe,t,t,y-k);var De=this&&this!==hr&&this instanceof R?T:a;return lr(De,this,Q)}return R}function g1(a){return function(d,y,T){var R=rn(d);if(!Pi(d)){var k=yt(y,3);d=Tr(d),y=function(ie){return k(R[ie],ie,R)}}var Q=a(d,y,T);return Q>-1?R[k?d[Q]:Q]:t}}function v1(a){return jo(function(d){var y=d.length,T=y,R=di.prototype.thru;for(a&&d.reverse();T--;){var k=d[T];if(typeof k!="function")throw new Qr(o);if(R&&!Q&&ig(k)=="wrapper")var Q=new di([],!0)}for(T=Q?T:y;++T<y;){k=d[T];var ie=ig(k),me=ie=="wrapper"?_0(k):t;me&&E0(me[0])&&me[1]==(H|C|I|D)&&!me[4].length&&me[9]==1?Q=Q[ig(me[0])].apply(Q,me[3]):Q=k.length==1&&E0(k)?Q[ie]():Q.thru(k)}return function(){var Fe=arguments,De=Fe[0];if(Q&&Fe.length==1&&Pt(De))return Q.plant(De).value();for(var Ge=0,Ze=y?d[Ge].apply(this,Fe):De;++Ge<y;)Ze=d[Ge].call(this,Ze);return Ze}})}function eg(a,d,y,T,R,k,Q,ie,me,Fe){var De=d&H,Ge=d&M,Ze=d&w,ct=d&(C|b),xt=d&O,Nt=Ze?t:sh(a);function _t(){for(var Wt=arguments.length,jt=Me(Wt),ji=Wt;ji--;)jt[ji]=arguments[ji];if(ct)var gi=Kc(_t),Xi=Co(jt,gi);if(T&&(jt=Zt(jt,T,R,ct)),k&&(jt=Gn(jt,k,Q,ct)),Wt-=Xi,ct&&Wt<Fe){var er=bi(jt,gi);return _1(a,d,eg,_t.placeholder,y,jt,er,ie,me,Fe-Wt)}var Ps=Ge?y:this,qo=Ze?Ps[a]:a;return Wt=jt.length,ie?jt=dR(jt,ie):xt&&Wt>1&&jt.reverse(),De&&me<Wt&&(jt.length=me),this&&this!==hr&&this instanceof _t&&(qo=Nt||sh(qo)),qo.apply(Ps,jt)}return _t}function y1(a,d){return function(y,T){return qd(y,a,d(T),{})}}function tg(a,d){return function(y,T){var R;if(y===t&&T===t)return d;if(y!==t&&(R=y),T!==t){if(R===t)return T;typeof y=="string"||typeof T=="string"?(y=f(y),T=f(T)):(y=u(y),T=u(T)),R=a(y,T)}return R}}function g0(a){return jo(function(d){return d=nn(d,Kr(yt())),St(function(y){var T=this;return a(d,function(R){return lr(R,T,y)})})})}function ng(a,d){d=d===t?" ":f(d);var y=d.length;if(y<2)return y?nh(d,a):d;var T=nh(d,Hl(a/Pn(d)));return bo(d)?Jt(Yr(T),0,a).join(""):T.slice(0,a)}function XB(a,d,y,T){var R=d&M,k=sh(a);function Q(){for(var ie=-1,me=arguments.length,Fe=-1,De=T.length,Ge=Me(De+me),Ze=this&&this!==hr&&this instanceof Q?k:a;++Fe<De;)Ge[Fe]=T[Fe];for(;me--;)Ge[Fe++]=arguments[++ie];return lr(Ze,R?y:this,Ge)}return Q}function x1(a){return function(d,y,T){return T&&typeof T!="number"&&mi(d,y,T)&&(y=T=t),d=Yo(d),y===t?(y=d,d=0):y=Yo(y),T=T===t?d<y?1:-1:Yo(T),th(d,y,T,a)}}function rg(a){return function(d,y){return typeof d=="string"&&typeof y=="string"||(d=us(d),y=us(y)),a(d,y)}}function _1(a,d,y,T,R,k,Q,ie,me,Fe){var De=d&C,Ge=De?Q:t,Ze=De?t:Q,ct=De?k:t,xt=De?t:k;d|=De?I:B,d&=~(De?B:I),d&_||(d&=~(M|w));var Nt=[a,d,R,ct,Ge,xt,Ze,ie,me,Fe],_t=y.apply(t,Nt);return E0(a)&&P1(_t,Nt),_t.placeholder=T,I1(_t,a,d)}function v0(a){var d=In[a];return function(y,T){if(y=us(y),T=T==null?0:xn(Dt(T),292),T&&Dd(y)){var R=(sn(y)+"e").split("e"),k=d(R[0]+"e"+(+R[1]+T));return R=(sn(k)+"e").split("e"),+(R[0]+"e"+(+R[1]-T))}return d(y)}}var KB=Sa&&1/Or(new Sa([,-0]))[1]==_e?function(a){return new Sa(a)}:H0;function w1(a){return function(d){var y=$r(d);return y==ae?Qs(d):y==Ne?Il(d):Ed(d,a(d))}}function Jo(a,d,y,T,R,k,Q,ie){var me=d&w;if(!me&&typeof a!="function")throw new Qr(o);var Fe=T?T.length:0;if(Fe||(d&=~(I|B),T=R=t),Q=Q===t?Q:ln(Dt(Q),0),ie=ie===t?ie:Dt(ie),Fe-=R?R.length:0,d&B){var De=T,Ge=R;T=R=t}var Ze=me?t:_0(a),ct=[a,d,y,T,R,De,Ge,k,Q,ie];if(Ze&&uR(ct,Ze),a=ct[0],d=ct[1],y=ct[2],T=ct[3],R=ct[4],ie=ct[9]=ct[9]===t?me?0:a.length:ln(ct[9]-Fe,0),!ie&&d&(C|b)&&(d&=~(C|b)),!d||d==M)var xt=JB(a,d,y);else d==C||d==b?xt=jB(a,d,ie):(d==I||d==(M|I))&&!R.length?xt=XB(a,d,y,T):xt=eg.apply(t,ct);var Nt=Ze?Jc:P1;return I1(Nt(xt,ct),a,d)}function A1(a,d,y,T){return a===t||Rs(a,Ro[y])&&!Qt.call(T,y)?d:a}function M1(a,d,y,T,R,k){return Hn(a)&&Hn(d)&&(k.set(d,a),tu(a,d,t,M1,k),k.delete(d)),a}function YB(a){return lh(a)?t:a}function E1(a,d,y,T,R,k){var Q=y&A,ie=a.length,me=d.length;if(ie!=me&&!(Q&&me>ie))return!1;var Fe=k.get(a),De=k.get(d);if(Fe&&De)return Fe==d&&De==a;var Ge=-1,Ze=!0,ct=y&E?new Ts:t;for(k.set(a,d),k.set(d,a);++Ge<ie;){var xt=a[Ge],Nt=d[Ge];if(T)var _t=Q?T(Nt,xt,Ge,d,a,k):T(xt,Nt,Ge,a,d,k);if(_t!==t){if(_t)continue;Ze=!1;break}if(ct){if(!wa(d,function(Wt,jt){if(!hn(ct,jt)&&(xt===Wt||R(xt,Wt,y,T,k)))return ct.push(jt)})){Ze=!1;break}}else if(!(xt===Nt||R(xt,Nt,y,T,k))){Ze=!1;break}}return k.delete(a),k.delete(d),Ze}function qB(a,d,y,T,R,k,Q){switch(y){case Qe:if(a.byteLength!=d.byteLength||a.byteOffset!=d.byteOffset)return!1;a=a.buffer,d=d.buffer;case ke:return!(a.byteLength!=d.byteLength||!k(new wc(a),new wc(d)));case V:case K:case ye:return Rs(+a,+d);case se:return a.name==d.name&&a.message==d.message;case Ae:case We:return a==d+"";case ae:var ie=Qs;case Ne:var me=T&A;if(ie||(ie=Or),a.size!=d.size&&!me)return!1;var Fe=Q.get(a);if(Fe)return Fe==d;T|=E,Q.set(a,d);var De=E1(ie(a),ie(d),T,R,k,Q);return Q.delete(a),De;case Ye:if(Ta)return Ta.call(a)==Ta.call(d)}return!1}function QB(a,d,y,T,R,k){var Q=y&A,ie=y0(a),me=ie.length,Fe=y0(d),De=Fe.length;if(me!=De&&!Q)return!1;for(var Ge=me;Ge--;){var Ze=ie[Ge];if(!(Q?Ze in d:Qt.call(d,Ze)))return!1}var ct=k.get(a),xt=k.get(d);if(ct&&xt)return ct==d&&xt==a;var Nt=!0;k.set(a,d),k.set(d,a);for(var _t=Q;++Ge<me;){Ze=ie[Ge];var Wt=a[Ze],jt=d[Ze];if(T)var ji=Q?T(jt,Wt,Ze,d,a,k):T(Wt,jt,Ze,a,d,k);if(!(ji===t?Wt===jt||R(Wt,jt,y,T,k):ji)){Nt=!1;break}_t||(_t=Ze=="constructor")}if(Nt&&!_t){var gi=a.constructor,Xi=d.constructor;gi!=Xi&&"constructor"in a&&"constructor"in d&&!(typeof gi=="function"&&gi instanceof gi&&typeof Xi=="function"&&Xi instanceof Xi)&&(Nt=!1)}return k.delete(a),k.delete(d),Nt}function jo(a){return T0(B1(a,t,H1),a+"")}function y0(a){return Yd(a,Tr,A0)}function x0(a){return Yd(a,Ii,S1)}var _0=Cc?function(a){return Cc.get(a)}:H0;function ig(a){for(var d=a.name+"",y=Fo[d],T=Qt.call(Fo,d)?y.length:0;T--;){var R=y[T],k=R.func;if(k==null||k==a)return R.name}return d}function Kc(a){var d=Qt.call(N,"placeholder")?N:a;return d.placeholder}function yt(){var a=N.iteratee||N0;return a=a===N0?Xm:a,arguments.length?a(arguments[0],arguments[1]):a}function sg(a,d){var y=a.__data__;return sR(d)?y[typeof d=="string"?"string":"hash"]:y.map}function w0(a){for(var d=Tr(a),y=d.length;y--;){var T=d[y],R=a[T];d[y]=[T,R,b1(R)]}return d}function nu(a,d){var y=Sd(a,d);return eo(y)?y:t}function ZB(a){var d=Qt.call(a,Es),y=a[Es];try{a[Es]=t;var T=!0}catch{}var R=yc.call(a);return T&&(d?a[Es]=y:delete a[Es]),R}var A0=Ec?function(a){return a==null?[]:(a=rn(a),Dr(Ec(a),function(d){return Id.call(a,d)}))}:U0,S1=Ec?function(a){for(var d=[];a;)Ms(d,A0(a)),a=pr(a);return d}:U0,$r=zn;(Tc&&$r(new Tc(new ArrayBuffer(1)))!=Qe||Ss&&$r(new Ss)!=ae||Nd&&$r(Nd.resolve())!=W||Sa&&$r(new Sa)!=Ne||Po&&$r(new Po)!=oe)&&($r=function(a){var d=zn(a),y=d==z?a.constructor:t,T=y?ru(y):"";if(T)switch(T){case Hm:return Qe;case i0:return ae;case Um:return W;case s0:return Ne;case km:return oe}return d});function $B(a,d,y){for(var T=-1,R=y.length;++T<R;){var k=y[T],Q=k.size;switch(k.type){case"drop":a+=Q;break;case"dropRight":d-=Q;break;case"take":d=xn(d,a+Q);break;case"takeRight":a=ln(a,d-Q);break}}return{start:a,end:d}}function eR(a){var d=a.match(Bt);return d?d[1].split(Kt):[]}function T1(a,d,y){d=pt(d,a);for(var T=-1,R=d.length,k=!1;++T<R;){var Q=to(d[T]);if(!(k=a!=null&&y(a,Q)))break;a=a[Q]}return k||++T!=R?k:(R=a==null?0:a.length,!!R&&dg(R)&&Xo(Q,R)&&(Pt(a)||iu(a)))}function tR(a){var d=a.length,y=new a.constructor(d);return d&&typeof a[0]=="string"&&Qt.call(a,"index")&&(y.index=a.index,y.input=a.input),y}function C1(a){return typeof a.constructor=="function"&&!oh(a)?Do(pr(a)):{}}function nR(a,d,y){var T=a.constructor;switch(d){case ke:return xe(a);case V:case K:return new T(+a);case Qe:return pe(a,y);case Ie:case rt:case It:case Ht:case Kn:case he:case Ue:case at:case Ut:return ht(a,y);case ae:return new T;case ye:case We:return new T(a);case Ae:return Le(a);case Ne:return new T;case Ye:return $e(a)}}function rR(a,d){var y=d.length;if(!y)return a;var T=y-1;return d[T]=(y>1?"& ":"")+d[T],d=d.join(y>2?", ":" "),a.replace(At,`{
/* [wrapped with `+d+`] */
`)}function iR(a){return Pt(a)||iu(a)||!!(Ac&&a&&a[Ac])}function Xo(a,d){var y=typeof a;return d=d==null?Be:d,!!d&&(y=="number"||y!="symbol"&&yn.test(a))&&a>-1&&a%1==0&&a<d}function mi(a,d,y){if(!Hn(y))return!1;var T=typeof d;return(T=="number"?Pi(y)&&Xo(d,y.length):T=="string"&&d in y)?Rs(y[d],a):!1}function M0(a,d){if(Pt(a))return!1;var y=typeof a;return y=="number"||y=="symbol"||y=="boolean"||a==null||Ji(a)?!0:J.test(a)||!wl.test(a)||d!=null&&a in rn(d)}function sR(a){var d=typeof a;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?a!=="__proto__":a===null}function E0(a){var d=ig(a),y=N[d];if(typeof y!="function"||!(d in Ot.prototype))return!1;if(a===y)return!0;var T=_0(y);return!!T&&a===T[0]}function oR(a){return!!Bd&&Bd in a}var aR=Dl?Ko:k0;function oh(a){var d=a&&a.constructor,y=typeof d=="function"&&d.prototype||Ro;return a===y}function b1(a){return a===a&&!Hn(a)}function L1(a,d){return function(y){return y==null?!1:y[a]===d&&(d!==t||a in rn(y))}}function lR(a){var d=cg(a,function(T){return y.size===h&&y.clear(),T}),y=d.cache;return d}function uR(a,d){var y=a[1],T=d[1],R=y|T,k=R<(M|w|H),Q=T==H&&y==C||T==H&&y==D&&a[7].length<=d[8]||T==(H|D)&&d[7].length<=d[8]&&y==C;if(!(k||Q))return a;T&M&&(a[2]=d[2],R|=y&M?0:_);var ie=d[3];if(ie){var me=a[3];a[3]=me?Zt(me,ie,d[4]):ie,a[4]=me?bi(a[3],v):d[4]}return ie=d[5],ie&&(me=a[5],a[5]=me?Gn(me,ie,d[6]):ie,a[6]=me?bi(a[5],v):d[6]),ie=d[7],ie&&(a[7]=ie),T&H&&(a[8]=a[8]==null?d[8]:xn(a[8],d[8])),a[9]==null&&(a[9]=d[9]),a[0]=d[0],a[1]=R,a}function cR(a){var d=[];if(a!=null)for(var y in rn(a))d.push(y);return d}function fR(a){return yc.call(a)}function B1(a,d,y){return d=ln(d===t?a.length-1:d,0),function(){for(var T=arguments,R=-1,k=ln(T.length-d,0),Q=Me(k);++R<k;)Q[R]=T[d+R];R=-1;for(var ie=Me(d+1);++R<d;)ie[R]=T[R];return ie[d]=y(Q),lr(a,this,ie)}}function R1(a,d){return d.length<2?a:Zn(a,hi(d,0,-1))}function dR(a,d){for(var y=a.length,T=xn(d.length,y),R=wt(a);T--;){var k=d[T];a[T]=Xo(k,y)?R[k]:t}return a}function S0(a,d){if(!(d==="constructor"&&typeof a[d]=="function")&&d!="__proto__")return a[d]}var P1=F1(Jc),ah=Mc||function(a,d){return hr.setTimeout(a,d)},T0=F1(rh);function I1(a,d,y){var T=d+"";return T0(a,rR(T,hR(eR(T),y)))}function F1(a){var d=0,y=0;return function(){var T=kl(),R=ne-(T-y);if(y=T,R>0){if(++d>=fe)return arguments[0]}else d=0;return a.apply(t,arguments)}}function og(a,d){var y=-1,T=a.length,R=T-1;for(d=d===t?T:d;++y<d;){var k=Zr(y,R),Q=a[k];a[k]=a[y],a[y]=Q}return a.length=d,a}var D1=lR(function(a){var d=[];return a.charCodeAt(0)===46&&d.push(""),a.replace(Se,function(y,T,R,k){d.push(R?k.replace(Et,"$1"):T||y)}),d});function to(a){if(typeof a=="string"||Ji(a))return a;var d=a+"";return d=="0"&&1/a==-_e?"-0":d}function ru(a){if(a!=null){try{return Ol.call(a)}catch{}try{return a+""}catch{}}return""}function hR(a,d){return Yn(Ee,function(y){var T="_."+y[0];d&y[1]&&!Wi(a,T)&&a.push(T)}),a.sort()}function O1(a){if(a instanceof Ot)return a.clone();var d=new di(a.__wrapped__,a.__chain__);return d.__actions__=wt(a.__actions__),d.__index__=a.__index__,d.__values__=a.__values__,d}function pR(a,d,y){(y?mi(a,d,y):d===t)?d=1:d=ln(Dt(d),0);var T=a==null?0:a.length;if(!T||d<1)return[];for(var R=0,k=0,Q=Me(Hl(T/d));R<T;)Q[k++]=hi(a,R,R+=d);return Q}function mR(a){for(var d=-1,y=a==null?0:a.length,T=0,R=[];++d<y;){var k=a[d];k&&(R[T++]=k)}return R}function gR(){var a=arguments.length;if(!a)return[];for(var d=Me(a-1),y=arguments[0],T=a;T--;)d[T-1]=arguments[T];return Ms(Pt(y)?wt(y):[y],Nn(d,1))}var vR=St(function(a,d){return $n(a)?Ho(a,Nn(d,1,$n,!0)):[]}),yR=St(function(a,d){var y=ls(d);return $n(y)&&(y=t),$n(a)?Ho(a,Nn(d,1,$n,!0),yt(y,2)):[]}),xR=St(function(a,d){var y=ls(d);return $n(y)&&(y=t),$n(a)?Ho(a,Nn(d,1,$n,!0),t,y):[]});function _R(a,d,y){var T=a==null?0:a.length;return T?(d=y||d===t?1:Dt(d),hi(a,d<0?0:d,T)):[]}function wR(a,d,y){var T=a==null?0:a.length;return T?(d=y||d===t?1:Dt(d),d=T-d,hi(a,0,d<0?0:d)):[]}function AR(a,d){return a&&a.length?P(a,yt(d,3),!0,!0):[]}function MR(a,d){return a&&a.length?P(a,yt(d,3),!0):[]}function ER(a,d,y,T){var R=a==null?0:a.length;return R?(y&&typeof y!="number"&&mi(a,d,y)&&(y=0,T=R),bs(a,d,y,T)):[]}function N1(a,d,y){var T=a==null?0:a.length;if(!T)return-1;var R=y==null?0:Dt(y);return R<0&&(R=ln(T+R,0)),Eo(a,yt(d,3),R)}function G1(a,d,y){var T=a==null?0:a.length;if(!T)return-1;var R=T-1;return y!==t&&(R=Dt(y),R=y<0?ln(T+R,0):xn(R,T-1)),Eo(a,yt(d,3),R,!0)}function H1(a){var d=a==null?0:a.length;return d?Nn(a,1):[]}function SR(a){var d=a==null?0:a.length;return d?Nn(a,_e):[]}function TR(a,d){var y=a==null?0:a.length;return y?(d=d===t?1:Dt(d),Nn(a,d)):[]}function CR(a){for(var d=-1,y=a==null?0:a.length,T={};++d<y;){var R=a[d];T[R[0]]=R[1]}return T}function U1(a){return a&&a.length?a[0]:t}function bR(a,d,y){var T=a==null?0:a.length;if(!T)return-1;var R=y==null?0:Dt(y);return R<0&&(R=ln(T+R,0)),rs(a,d,R)}function LR(a){var d=a==null?0:a.length;return d?hi(a,0,-1):[]}var BR=St(function(a){var d=nn(a,Xe);return d.length&&d[0]===a[0]?Ra(d):[]}),RR=St(function(a){var d=ls(a),y=nn(a,Xe);return d===ls(y)?d=t:y.pop(),y.length&&y[0]===a[0]?Ra(y,yt(d,2)):[]}),PR=St(function(a){var d=ls(a),y=nn(a,Xe);return d=typeof d=="function"?d:t,d&&y.pop(),y.length&&y[0]===a[0]?Ra(y,t,d):[]});function IR(a,d){return a==null?"":Od.call(a,d)}function ls(a){var d=a==null?0:a.length;return d?a[d-1]:t}function FR(a,d,y){var T=a==null?0:a.length;if(!T)return-1;var R=T;return y!==t&&(R=Dt(y),R=R<0?ln(T+R,0):xn(R,T-1)),d===d?Ar(a,d,R):Eo(a,Md,R,!0)}function DR(a,d){return a&&a.length?kc(a,Dt(d)):t}var OR=St(k1);function k1(a,d){return a&&a.length&&d&&d.length?Wc(a,d):a}function NR(a,d,y){return a&&a.length&&d&&d.length?Wc(a,d,yt(y,2)):a}function GR(a,d,y){return a&&a.length&&d&&d.length?Wc(a,d,t,y):a}var HR=jo(function(a,d){var y=a==null?0:a.length,T=Yl(a,d);return qm(a,nn(d,function(R){return Xo(R,y)?+R:R}).sort(un)),T});function UR(a,d){var y=[];if(!(a&&a.length))return y;var T=-1,R=[],k=a.length;for(d=yt(d,3);++T<k;){var Q=a[T];d(Q,T,a)&&(y.push(Q),R.push(T))}return qm(a,R),y}function C0(a){return a==null?a:Sc.call(a)}function kR(a,d,y){var T=a==null?0:a.length;return T?(y&&typeof y!="number"&&mi(a,d,y)?(d=0,y=T):(d=d==null?0:Dt(d),y=y===t?T:Dt(y)),hi(a,d,y)):[]}function zR(a,d){return Vo(a,d)}function WR(a,d,y){return ih(a,d,yt(y,2))}function VR(a,d){var y=a==null?0:a.length;if(y){var T=Vo(a,d);if(T<y&&Rs(a[T],d))return T}return-1}function JR(a,d){return Vo(a,d,!0)}function jR(a,d,y){return ih(a,d,yt(y,2),!0)}function XR(a,d){var y=a==null?0:a.length;if(y){var T=Vo(a,d,!0)-1;if(Rs(a[T],d))return T}return-1}function KR(a){return a&&a.length?Zm(a):[]}function YR(a,d){return a&&a.length?Zm(a,yt(d,2)):[]}function qR(a){var d=a==null?0:a.length;return d?hi(a,1,d):[]}function QR(a,d,y){return a&&a.length?(d=y||d===t?1:Dt(d),hi(a,0,d<0?0:d)):[]}function ZR(a,d,y){var T=a==null?0:a.length;return T?(d=y||d===t?1:Dt(d),d=T-d,hi(a,d<0?0:d,T)):[]}function $R(a,d){return a&&a.length?P(a,yt(d,3),!1,!0):[]}function eP(a,d){return a&&a.length?P(a,yt(d,3)):[]}var tP=St(function(a){return g(Nn(a,1,$n,!0))}),nP=St(function(a){var d=ls(a);return $n(d)&&(d=t),g(Nn(a,1,$n,!0),yt(d,2))}),rP=St(function(a){var d=ls(a);return d=typeof d=="function"?d:t,g(Nn(a,1,$n,!0),t,d)});function iP(a){return a&&a.length?g(a):[]}function sP(a,d){return a&&a.length?g(a,yt(d,2)):[]}function oP(a,d){return d=typeof d=="function"?d:t,a&&a.length?g(a,t,d):[]}function b0(a){if(!(a&&a.length))return[];var d=0;return a=Dr(a,function(y){if($n(y))return d=ln(y.length,d),!0}),Ci(d,function(y){return nn(a,pc(y))})}function z1(a,d){if(!(a&&a.length))return[];var y=b0(a);return d==null?y:nn(y,function(T){return lr(d,t,T)})}var aP=St(function(a,d){return $n(a)?Ho(a,d):[]}),lP=St(function(a){return ce(Dr(a,$n))}),uP=St(function(a){var d=ls(a);return $n(d)&&(d=t),ce(Dr(a,$n),yt(d,2))}),cP=St(function(a){var d=ls(a);return d=typeof d=="function"?d:t,ce(Dr(a,$n),t,d)}),fP=St(b0);function dP(a,d){return Te(a||[],d||[],Go)}function hP(a,d){return Te(a||[],d||[],Wo)}var pP=St(function(a){var d=a.length,y=d>1?a[d-1]:t;return y=typeof y=="function"?(a.pop(),y):t,z1(a,y)});function W1(a){var d=N(a);return d.__chain__=!0,d}function mP(a,d){return d(a),a}function ag(a,d){return d(a)}var gP=jo(function(a){var d=a.length,y=d?a[0]:0,T=this.__wrapped__,R=function(k){return Yl(k,a)};return d>1||this.__actions__.length||!(T instanceof Ot)||!Xo(y)?this.thru(R):(T=T.slice(y,+y+(d?1:0)),T.__actions__.push({func:ag,args:[R],thisArg:t}),new di(T,this.__chain__).thru(function(k){return d&&!k.length&&k.push(t),k}))});function vP(){return W1(this)}function yP(){return new di(this.value(),this.__chain__)}function xP(){this.__values__===t&&(this.__values__=rM(this.value()));var a=this.__index__>=this.__values__.length,d=a?t:this.__values__[this.__index__++];return{done:a,value:d}}function _P(){return this}function wP(a){for(var d,y=this;y instanceof Vl;){var T=O1(y);T.__index__=0,T.__values__=t,d?R.__wrapped__=T:d=T;var R=T;y=y.__wrapped__}return R.__wrapped__=a,d}function AP(){var a=this.__wrapped__;if(a instanceof Ot){var d=a;return this.__actions__.length&&(d=new Ot(this)),d=d.reverse(),d.__actions__.push({func:ag,args:[C0],thisArg:t}),new di(d,this.__chain__)}return this.thru(C0)}function MP(){return Y(this.__wrapped__,this.__actions__)}var EP=$m(function(a,d,y){Qt.call(a,y)?++a[y]:Ri(a,y,1)});function SP(a,d,y){var T=Pt(a)?Ad:Kd;return y&&mi(a,d,y)&&(d=t),T(a,yt(d,3))}function TP(a,d){var y=Pt(a)?Dr:Ql;return y(a,yt(d,3))}var CP=g1(N1),bP=g1(G1);function LP(a,d){return Nn(lg(a,d),1)}function BP(a,d){return Nn(lg(a,d),_e)}function RP(a,d,y){return y=y===t?1:Dt(y),Nn(lg(a,d),y)}function V1(a,d){var y=Pt(a)?Yn:Sr;return y(a,yt(d,3))}function J1(a,d){var y=Pt(a)?wd:Ba;return y(a,yt(d,3))}var PP=$m(function(a,d,y){Qt.call(a,y)?a[y].push(d):Ri(a,y,[d])});function IP(a,d,y,T){a=Pi(a)?a:qc(a),y=y&&!T?Dt(y):0;var R=a.length;return y<0&&(y=ln(R+y,0)),hg(a)?y<=R&&a.indexOf(d,y)>-1:!!R&&rs(a,d,y)>-1}var FP=St(function(a,d,y){var T=-1,R=typeof d=="function",k=Pi(a)?Me(a.length):[];return Sr(a,function(Q){k[++T]=R?lr(d,Q,y):as(Q,d,y)}),k}),DP=$m(function(a,d,y){Ri(a,y,d)});function lg(a,d){var y=Pt(a)?nn:Bs;return y(a,yt(d,3))}function OP(a,d,y,T){return a==null?[]:(Pt(d)||(d=d==null?[]:[d]),y=T?t:y,Pt(y)||(y=y==null?[]:[y]),Zd(a,d,y))}var NP=$m(function(a,d,y){a[y?0:1].push(d)},function(){return[[],[]]});function GP(a,d,y){var T=Pt(a)?cc:fi,R=arguments.length<3;return T(a,yt(d,4),y,R,Sr)}function HP(a,d,y){var T=Pt(a)?fc:fi,R=arguments.length<3;return T(a,yt(d,4),y,R,Ba)}function UP(a,d){var y=Pt(a)?Dr:Ql;return y(a,fg(yt(d,3)))}function kP(a){var d=Pt(a)?No:Vc;return d(a)}function zP(a,d,y){(y?mi(a,d,y):d===t)?d=1:d=Dt(d);var T=Pt(a)?Xl:Pa;return T(a,d)}function WP(a){var d=Pt(a)?Ca:p0;return d(a)}function VP(a){if(a==null)return 0;if(Pi(a))return hg(a)?Pn(a):a.length;var d=$r(a);return d==ae||d==Ne?a.size:Gc(a).length}function JP(a,d,y){var T=Pt(a)?wa:Qm;return y&&mi(a,d,y)&&(d=t),T(a,yt(d,3))}var jP=St(function(a,d){if(a==null)return[];var y=d.length;return y>1&&mi(a,d[0],d[1])?d=[]:y>2&&mi(d[0],d[1],d[2])&&(d=[d[0]]),Zd(a,Nn(d,1),[])}),ug=Om||function(){return hr.Date.now()};function XP(a,d){if(typeof d!="function")throw new Qr(o);return a=Dt(a),function(){if(--a<1)return d.apply(this,arguments)}}function j1(a,d,y){return d=y?t:d,d=a&&d==null?a.length:d,Jo(a,H,t,t,t,t,d)}function X1(a,d){var y;if(typeof d!="function")throw new Qr(o);return a=Dt(a),function(){return--a>0&&(y=d.apply(this,arguments)),a<=1&&(d=t),y}}var L0=St(function(a,d,y){var T=M;if(y.length){var R=bi(y,Kc(L0));T|=I}return Jo(a,T,d,y,R)}),K1=St(function(a,d,y){var T=M|w;if(y.length){var R=bi(y,Kc(K1));T|=I}return Jo(d,T,a,y,R)});function Y1(a,d,y){d=y?t:d;var T=Jo(a,C,t,t,t,t,t,d);return T.placeholder=Y1.placeholder,T}function q1(a,d,y){d=y?t:d;var T=Jo(a,b,t,t,t,t,t,d);return T.placeholder=q1.placeholder,T}function Q1(a,d,y){var T,R,k,Q,ie,me,Fe=0,De=!1,Ge=!1,Ze=!0;if(typeof a!="function")throw new Qr(o);d=us(d)||0,Hn(y)&&(De=!!y.leading,Ge="maxWait"in y,k=Ge?ln(us(y.maxWait)||0,d):k,Ze="trailing"in y?!!y.trailing:Ze);function ct(er){var Ps=T,qo=R;return T=R=t,Fe=er,Q=a.apply(qo,Ps),Q}function xt(er){return Fe=er,ie=ah(Wt,d),De?ct(er):Q}function Nt(er){var Ps=er-me,qo=er-Fe,gM=d-Ps;return Ge?xn(gM,k-qo):gM}function _t(er){var Ps=er-me,qo=er-Fe;return me===t||Ps>=d||Ps<0||Ge&&qo>=k}function Wt(){var er=ug();if(_t(er))return jt(er);ie=ah(Wt,Nt(er))}function jt(er){return ie=t,Ze&&T?ct(er):(T=R=t,Q)}function ji(){ie!==t&&wn(ie),Fe=0,T=me=R=ie=t}function gi(){return ie===t?Q:jt(ug())}function Xi(){var er=ug(),Ps=_t(er);if(T=arguments,R=this,me=er,Ps){if(ie===t)return xt(me);if(Ge)return wn(ie),ie=ah(Wt,d),ct(me)}return ie===t&&(ie=ah(Wt,d)),Q}return Xi.cancel=ji,Xi.flush=gi,Xi}var KP=St(function(a,d){return Oc(a,1,d)}),YP=St(function(a,d,y){return Oc(a,us(d)||0,y)});function qP(a){return Jo(a,O)}function cg(a,d){if(typeof a!="function"||d!=null&&typeof d!="function")throw new Qr(o);var y=function(){var T=arguments,R=d?d.apply(this,T):T[0],k=y.cache;if(k.has(R))return k.get(R);var Q=a.apply(this,T);return y.cache=k.set(R,Q)||k,Q};return y.cache=new(cg.Cache||os),y}cg.Cache=os;function fg(a){if(typeof a!="function")throw new Qr(o);return function(){var d=arguments;switch(d.length){case 0:return!a.call(this);case 1:return!a.call(this,d[0]);case 2:return!a.call(this,d[0],d[1]);case 3:return!a.call(this,d[0],d[1],d[2])}return!a.apply(this,d)}}function QP(a){return X1(2,a)}var ZP=et(function(a,d){d=d.length==1&&Pt(d[0])?nn(d[0],Kr(yt())):nn(Nn(d,1),Kr(yt()));var y=d.length;return St(function(T){for(var R=-1,k=xn(T.length,y);++R<k;)T[R]=d[R].call(this,T[R]);return lr(a,this,T)})}),B0=St(function(a,d){var y=bi(d,Kc(B0));return Jo(a,I,t,d,y)}),Z1=St(function(a,d){var y=bi(d,Kc(Z1));return Jo(a,B,t,d,y)}),$P=jo(function(a,d){return Jo(a,D,t,t,t,d)});function e2(a,d){if(typeof a!="function")throw new Qr(o);return d=d===t?d:Dt(d),St(a,d)}function t2(a,d){if(typeof a!="function")throw new Qr(o);return d=d==null?0:ln(Dt(d),0),St(function(y){var T=y[d],R=Jt(y,0,d);return T&&Ms(R,T),lr(a,this,R)})}function n2(a,d,y){var T=!0,R=!0;if(typeof a!="function")throw new Qr(o);return Hn(y)&&(T="leading"in y?!!y.leading:T,R="trailing"in y?!!y.trailing:R),Q1(a,d,{leading:T,maxWait:d,trailing:R})}function r2(a){return j1(a,1)}function i2(a,d){return B0(ft(d),a)}function s2(){if(!arguments.length)return[];var a=arguments[0];return Pt(a)?a:[a]}function o2(a){return Qn(a,x)}function a2(a,d){return d=typeof d=="function"?d:t,Qn(a,x,d)}function l2(a){return Qn(a,p|x)}function u2(a,d){return d=typeof d=="function"?d:t,Qn(a,p|x,d)}function c2(a,d){return d==null||La(a,d,Tr(d))}function Rs(a,d){return a===d||a!==a&&d!==d}var f2=rg(Zl),d2=rg(function(a,d){return a>=d}),iu=Qd(function(){return arguments}())?Qd:function(a){return Wn(a)&&Qt.call(a,"callee")&&!Id.call(a,"callee")},Pt=Me.isArray,h2=Mo?Kr(Mo):Jm;function Pi(a){return a!=null&&dg(a.length)&&!Ko(a)}function $n(a){return Wn(a)&&Pi(a)}function p2(a){return a===!0||a===!1||Wn(a)&&zn(a)==V}var Ia=Nm||k0,m2=bl?Kr(bl):$l;function g2(a){return Wn(a)&&a.nodeType===1&&!lh(a)}function v2(a){if(a==null)return!0;if(Pi(a)&&(Pt(a)||typeof a=="string"||typeof a.splice=="function"||Ia(a)||Yc(a)||iu(a)))return!a.length;var d=$r(a);if(d==ae||d==Ne)return!a.size;if(oh(a))return!Gc(a).length;for(var y in a)if(Qt.call(a,y))return!1;return!0}function y2(a,d){return eu(a,d)}function x2(a,d,y){y=typeof y=="function"?y:t;var T=y?y(a,d):t;return T===t?eu(a,d,t,y):!!T}function R0(a){if(!Wn(a))return!1;var d=zn(a);return d==se||d==Z||typeof a.message=="string"&&typeof a.name=="string"&&!lh(a)}function _2(a){return typeof a=="number"&&Dd(a)}function Ko(a){if(!Hn(a))return!1;var d=zn(a);return d==j||d==re||d==X||d==ve}function $1(a){return typeof a=="number"&&a==Dt(a)}function dg(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Be}function Hn(a){var d=typeof a;return a!=null&&(d=="object"||d=="function")}function Wn(a){return a!=null&&typeof a=="object"}var eM=ac?Kr(ac):jm;function w2(a,d){return a===d||Nc(a,d,w0(d))}function A2(a,d,y){return y=typeof y=="function"?y:t,Nc(a,d,w0(d),y)}function M2(a){return tM(a)&&a!=+a}function E2(a){if(aR(a))throw new Ct(s);return eo(a)}function S2(a){return a===null}function T2(a){return a==null}function tM(a){return typeof a=="number"||Wn(a)&&zn(a)==ye}function lh(a){if(!Wn(a)||zn(a)!=z)return!1;var d=pr(a);if(d===null)return!0;var y=Qt.call(d,"constructor")&&d.constructor;return typeof y=="function"&&y instanceof y&&Ol.call(y)==Rd}var P0=xd?Kr(xd):f0;function C2(a){return $1(a)&&a>=-Be&&a<=Be}var nM=lc?Kr(lc):d0;function hg(a){return typeof a=="string"||!Pt(a)&&Wn(a)&&zn(a)==We}function Ji(a){return typeof a=="symbol"||Wn(a)&&zn(a)==Ye}var Yc=_d?Kr(_d):Ls;function b2(a){return a===t}function L2(a){return Wn(a)&&$r(a)==oe}function B2(a){return Wn(a)&&zn(a)==Ve}var R2=rg(Hc),P2=rg(function(a,d){return a<=d});function rM(a){if(!a)return[];if(Pi(a))return hg(a)?Yr(a):wt(a);if(Ea&&a[Ea])return Td(a[Ea]());var d=$r(a),y=d==ae?Qs:d==Ne?Or:qc;return y(a)}function Yo(a){if(!a)return a===0?a:0;if(a=us(a),a===_e||a===-_e){var d=a<0?-1:1;return d*Ce}return a===a?a:0}function Dt(a){var d=Yo(a),y=d%1;return d===d?y?d-y:d:0}function iM(a){return a?Er(Dt(a),0,ue):0}function us(a){if(typeof a=="number")return a;if(Ji(a))return He;if(Hn(a)){var d=typeof a.valueOf=="function"?a.valueOf():a;a=Hn(d)?d+"":d}if(typeof a!="string")return a===0?a:+a;a=To(a);var y=ki.test(a);return y||zi.test(a)?n0(a.slice(2),y?2:8):dr.test(a)?He:+a}function sM(a){return vr(a,Ii(a))}function I2(a){return a?Er(Dt(a),-Be,Be):a===0?a:0}function sn(a){return a==null?"":f(a)}var F2=jc(function(a,d){if(oh(d)||Pi(d)){vr(d,Tr(d),a);return}for(var y in d)Qt.call(d,y)&&Go(a,y,d[y])}),oM=jc(function(a,d){vr(d,Ii(d),a)}),pg=jc(function(a,d,y,T){vr(d,Ii(d),a,T)}),D2=jc(function(a,d,y,T){vr(d,Tr(d),a,T)}),O2=jo(Yl);function N2(a,d){var y=Do(a);return d==null?y:Cs(y,d)}var G2=St(function(a,d){a=rn(a);var y=-1,T=d.length,R=T>2?d[2]:t;for(R&&mi(d[0],d[1],R)&&(T=1);++y<T;)for(var k=d[y],Q=Ii(k),ie=-1,me=Q.length;++ie<me;){var Fe=Q[ie],De=a[Fe];(De===t||Rs(De,Ro[Fe])&&!Qt.call(a,Fe))&&(a[Fe]=k[Fe])}return a}),H2=St(function(a){return a.push(t,M1),lr(aM,t,a)});function U2(a,d){return dc(a,yt(d,3),gr)}function k2(a,d){return dc(a,yt(d,3),Vi)}function z2(a,d){return a==null?a:ko(a,yt(d,3),Ii)}function W2(a,d){return a==null?a:Gr(a,yt(d,3),Ii)}function V2(a,d){return a&&gr(a,yt(d,3))}function J2(a,d){return a&&Vi(a,yt(d,3))}function j2(a){return a==null?[]:zo(a,Tr(a))}function X2(a){return a==null?[]:zo(a,Ii(a))}function I0(a,d,y){var T=a==null?t:Zn(a,d);return T===t?y:T}function K2(a,d){return a!=null&&T1(a,d,u0)}function F0(a,d){return a!=null&&T1(a,d,Wm)}var Y2=y1(function(a,d,y){d!=null&&typeof d.toString!="function"&&(d=yc.call(d)),a[d]=y},O0(Fi)),q2=y1(function(a,d,y){d!=null&&typeof d.toString!="function"&&(d=yc.call(d)),Qt.call(a,d)?a[d].push(y):a[d]=[y]},yt),Q2=St(as);function Tr(a){return Pi(a)?jl(a):Gc(a)}function Ii(a){return Pi(a)?jl(a,!0):h0(a)}function Z2(a,d){var y={};return d=yt(d,3),gr(a,function(T,R,k){Ri(y,d(T,R,k),T)}),y}function $2(a,d){var y={};return d=yt(d,3),gr(a,function(T,R,k){Ri(y,R,d(T,R,k))}),y}var eI=jc(function(a,d,y){tu(a,d,y)}),aM=jc(function(a,d,y,T){tu(a,d,y,T)}),tI=jo(function(a,d){var y={};if(a==null)return y;var T=!1;d=nn(d,function(k){return k=pt(k,a),T||(T=k.length>1),k}),vr(a,x0(a),y),T&&(y=Qn(y,p|m|x,YB));for(var R=d.length;R--;)S(y,d[R]);return y});function nI(a,d){return lM(a,fg(yt(d)))}var rI=jo(function(a,d){return a==null?{}:$d(a,d)});function lM(a,d){if(a==null)return{};var y=nn(x0(a),function(T){return[T]});return d=yt(d),eh(a,y,function(T,R){return d(T,R[0])})}function iI(a,d,y){d=pt(d,a);var T=-1,R=d.length;for(R||(R=1,a=t);++T<R;){var k=a==null?t:a[to(d[T])];k===t&&(T=R,k=y),a=Ko(k)?k.call(a):k}return a}function sI(a,d,y){return a==null?a:Wo(a,d,y)}function oI(a,d,y,T){return T=typeof T=="function"?T:t,a==null?a:Wo(a,d,y,T)}var uM=w1(Tr),cM=w1(Ii);function aI(a,d,y){var T=Pt(a),R=T||Ia(a)||Yc(a);if(d=yt(d,4),y==null){var k=a&&a.constructor;R?y=T?new k:[]:Hn(a)?y=Ko(k)?Do(pr(a)):{}:y={}}return(R?Yn:gr)(a,function(Q,ie,me){return d(y,Q,ie,me)}),y}function lI(a,d){return a==null?!0:S(a,d)}function uI(a,d,y){return a==null?a:L(a,d,ft(y))}function cI(a,d,y,T){return T=typeof T=="function"?T:t,a==null?a:L(a,d,ft(y),T)}function qc(a){return a==null?[]:Rl(a,Tr(a))}function fI(a){return a==null?[]:Rl(a,Ii(a))}function dI(a,d,y){return y===t&&(y=d,d=t),y!==t&&(y=us(y),y=y===y?y:0),d!==t&&(d=us(d),d=d===d?d:0),Er(us(a),d,y)}function hI(a,d,y){return d=Yo(d),y===t?(y=d,d=0):y=Yo(y),a=us(a),Vm(a,d,y)}function pI(a,d,y){if(y&&typeof y!="boolean"&&mi(a,d,y)&&(d=y=t),y===t&&(typeof d=="boolean"?(y=d,d=t):typeof a=="boolean"&&(y=a,a=t)),a===t&&d===t?(a=0,d=1):(a=Yo(a),d===t?(d=a,a=0):d=Yo(d)),a>d){var T=a;a=d,d=T}if(y||a%1||d%1){var R=Wl();return xn(a+R*(d-a+bm("1e-"+((R+"").length-1))),d)}return Zr(a,d)}var mI=Xc(function(a,d,y){return d=d.toLowerCase(),a+(y?fM(d):d)});function fM(a){return D0(sn(a).toLowerCase())}function dM(a){return a=sn(a),a&&a.replace(xo,ss).replace(Sm,"")}function gI(a,d,y){a=sn(a),d=f(d);var T=a.length;y=y===t?T:Er(Dt(y),0,T);var R=y;return y-=d.length,y>=0&&a.slice(y,R)==d}function vI(a){return a=sn(a),a&&xs.test(a)?a.replace(Mn,Im):a}function yI(a){return a=sn(a),a&&Re.test(a)?a.replace(we,"\\$&"):a}var xI=Xc(function(a,d,y){return a+(y?"-":"")+d.toLowerCase()}),_I=Xc(function(a,d,y){return a+(y?" ":"")+d.toLowerCase()}),wI=m1("toLowerCase");function AI(a,d,y){a=sn(a),d=Dt(d);var T=d?Pn(a):0;if(!d||T>=d)return a;var R=(d-T)/2;return ng(Ul(R),y)+a+ng(Hl(R),y)}function MI(a,d,y){a=sn(a),d=Dt(d);var T=d?Pn(a):0;return d&&T<d?a+ng(d-T,y):a}function EI(a,d,y){a=sn(a),d=Dt(d);var T=d?Pn(a):0;return d&&T<d?ng(d-T,y)+a:a}function SI(a,d,y){return y||d==null?d=0:d&&(d=+d),zl(sn(a).replace(Ke,""),d||0)}function TI(a,d,y){return(y?mi(a,d,y):d===t)?d=1:d=Dt(d),nh(sn(a),d)}function CI(){var a=arguments,d=sn(a[0]);return a.length<3?d:d.replace(a[1],a[2])}var bI=Xc(function(a,d,y){return a+(y?"_":"")+d.toLowerCase()});function LI(a,d,y){return y&&typeof y!="number"&&mi(a,d,y)&&(d=y=t),y=y===t?ue:y>>>0,y?(a=sn(a),a&&(typeof d=="string"||d!=null&&!P0(d))&&(d=f(d),!d&&bo(a))?Jt(Yr(a),0,y):a.split(d,y)):[]}var BI=Xc(function(a,d,y){return a+(y?" ":"")+D0(d)});function RI(a,d,y){return a=sn(a),y=y==null?0:Er(Dt(y),0,a.length),d=f(d),a.slice(y,y+d.length)==d}function PI(a,d,y){var T=N.templateSettings;y&&mi(a,d,y)&&(d=t),a=sn(a),d=pg({},d,T,A1);var R=pg({},d.imports,T.imports,A1),k=Tr(R),Q=Rl(R,k),ie,me,Fe=0,De=d.interpolate||En,Ge="__p += '",Ze=Ma((d.escape||En).source+"|"+De.source+"|"+(De===_l?Yt:En).source+"|"+(d.evaluate||En).source+"|$","g"),ct="//# sourceURL="+(Qt.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Tm+"]")+`
`;a.replace(Ze,function(_t,Wt,jt,ji,gi,Xi){return jt||(jt=ji),Ge+=a.slice(Fe,Xi).replace(ar,Fm),Wt&&(ie=!0,Ge+=`' +
__e(`+Wt+`) +
'`),gi&&(me=!0,Ge+=`';
`+gi+`;
__p += '`),jt&&(Ge+=`' +
((__t = (`+jt+`)) == null ? '' : __t) +
'`),Fe=Xi+_t.length,_t}),Ge+=`';
`;var xt=Qt.call(d,"variable")&&d.variable;if(!xt)Ge=`with (obj) {
`+Ge+`
}
`;else if(Vt.test(xt))throw new Ct(l);Ge=(me?Ge.replace(an,""):Ge).replace(gn,"$1").replace(Dn,"$1;"),Ge="function("+(xt||"obj")+`) {
`+(xt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ie?", __e = _.escape":"")+(me?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ge+`return __p
}`;var Nt=pM(function(){return zt(k,ct+"return "+Ge).apply(t,Q)});if(Nt.source=Ge,R0(Nt))throw Nt;return Nt}function II(a){return sn(a).toLowerCase()}function FI(a){return sn(a).toUpperCase()}function DI(a,d,y){if(a=sn(a),a&&(y||d===t))return To(a);if(!a||!(d=f(d)))return a;var T=Yr(a),R=Yr(d),k=Pl(T,R),Q=is(T,R)+1;return Jt(T,k,Q).join("")}function OI(a,d,y){if(a=sn(a),a&&(y||d===t))return a.slice(0,Aa(a)+1);if(!a||!(d=f(d)))return a;var T=Yr(a),R=is(T,Yr(d))+1;return Jt(T,0,R).join("")}function NI(a,d,y){if(a=sn(a),a&&(y||d===t))return a.replace(Ke,"");if(!a||!(d=f(d)))return a;var T=Yr(a),R=Pl(T,Yr(d));return Jt(T,R).join("")}function GI(a,d){var y=ee,T=q;if(Hn(d)){var R="separator"in d?d.separator:R;y="length"in d?Dt(d.length):y,T="omission"in d?f(d.omission):T}a=sn(a);var k=a.length;if(bo(a)){var Q=Yr(a);k=Q.length}if(y>=k)return a;var ie=y-Pn(T);if(ie<1)return T;var me=Q?Jt(Q,0,ie).join(""):a.slice(0,ie);if(R===t)return me+T;if(Q&&(ie+=me.length-ie),P0(R)){if(a.slice(ie).search(R)){var Fe,De=me;for(R.global||(R=Ma(R.source,sn(jr.exec(R))+"g")),R.lastIndex=0;Fe=R.exec(De);)var Ge=Fe.index;me=me.slice(0,Ge===t?ie:Ge)}}else if(a.indexOf(f(R),ie)!=ie){var Ze=me.lastIndexOf(R);Ze>-1&&(me=me.slice(0,Ze))}return me+T}function HI(a){return a=sn(a),a&&or.test(a)?a.replace(Ui,qr):a}var UI=Xc(function(a,d,y){return a+(y?" ":"")+d.toUpperCase()}),D0=m1("toUpperCase");function hM(a,d,y){return a=sn(a),d=y?t:d,d===t?mc(a)?Lo(a):Pm(a):a.match(d)||[]}var pM=St(function(a,d){try{return lr(a,t,d)}catch(y){return R0(y)?y:new Ct(y)}}),kI=jo(function(a,d){return Yn(d,function(y){y=to(y),Ri(a,y,L0(a[y],a))}),a});function zI(a){var d=a==null?0:a.length,y=yt();return a=d?nn(a,function(T){if(typeof T[1]!="function")throw new Qr(o);return[y(T[0]),T[1]]}):[],St(function(T){for(var R=-1;++R<d;){var k=a[R];if(lr(k[0],this,T))return lr(k[1],this,T)}})}function WI(a){return ql(Qn(a,p))}function O0(a){return function(){return a}}function VI(a,d){return a==null||a!==a?d:a}var JI=v1(),jI=v1(!0);function Fi(a){return a}function N0(a){return Xm(typeof a=="function"?a:Qn(a,p))}function XI(a){return Km(Qn(a,p))}function KI(a,d){return Ym(a,Qn(d,p))}var YI=St(function(a,d){return function(y){return as(y,a,d)}}),qI=St(function(a,d){return function(y){return as(a,y,d)}});function G0(a,d,y){var T=Tr(d),R=zo(d,T);y==null&&!(Hn(d)&&(R.length||!T.length))&&(y=d,d=a,a=this,R=zo(d,Tr(d)));var k=!(Hn(y)&&"chain"in y)||!!y.chain,Q=Ko(a);return Yn(R,function(ie){var me=d[ie];a[ie]=me,Q&&(a.prototype[ie]=function(){var Fe=this.__chain__;if(k||Fe){var De=a(this.__wrapped__),Ge=De.__actions__=wt(this.__actions__);return Ge.push({func:me,args:arguments,thisArg:a}),De.__chain__=Fe,De}return me.apply(a,Ms([this.value()],arguments))})}),a}function QI(){return hr._===this&&(hr._=xc),this}function H0(){}function ZI(a){return a=Dt(a),St(function(d){return kc(d,a)})}var $I=g0(nn),e3=g0(Ad),t3=g0(wa);function mM(a){return M0(a)?pc(to(a)):zc(a)}function n3(a){return function(d){return a==null?t:Zn(a,d)}}var r3=x1(),i3=x1(!0);function U0(){return[]}function k0(){return!1}function s3(){return{}}function o3(){return""}function a3(){return!0}function l3(a,d){if(a=Dt(a),a<1||a>Be)return[];var y=ue,T=xn(a,ue);d=yt(d),a-=ue;for(var R=Ci(T,d);++y<a;)d(y);return R}function u3(a){return Pt(a)?nn(a,to):Ji(a)?[a]:wt(D1(sn(a)))}function c3(a){var d=++Dm;return sn(a)+d}var f3=tg(function(a,d){return a+d},0),d3=v0("ceil"),h3=tg(function(a,d){return a/d},1),p3=v0("floor");function m3(a){return a&&a.length?Uo(a,Fi,Zl):t}function g3(a,d){return a&&a.length?Uo(a,yt(d,2),Zl):t}function v3(a){return Ll(a,Fi)}function y3(a,d){return Ll(a,yt(d,2))}function x3(a){return a&&a.length?Uo(a,Fi,Hc):t}function _3(a,d){return a&&a.length?Uo(a,yt(d,2),Hc):t}var w3=tg(function(a,d){return a*d},1),A3=v0("round"),M3=tg(function(a,d){return a-d},0);function E3(a){return a&&a.length?qs(a,Fi):0}function S3(a,d){return a&&a.length?qs(a,yt(d,2)):0}return N.after=XP,N.ary=j1,N.assign=F2,N.assignIn=oM,N.assignInWith=pg,N.assignWith=D2,N.at=O2,N.before=X1,N.bind=L0,N.bindAll=kI,N.bindKey=K1,N.castArray=s2,N.chain=W1,N.chunk=pR,N.compact=mR,N.concat=gR,N.cond=zI,N.conforms=WI,N.constant=O0,N.countBy=EP,N.create=N2,N.curry=Y1,N.curryRight=q1,N.debounce=Q1,N.defaults=G2,N.defaultsDeep=H2,N.defer=KP,N.delay=YP,N.difference=vR,N.differenceBy=yR,N.differenceWith=xR,N.drop=_R,N.dropRight=wR,N.dropRightWhile=AR,N.dropWhile=MR,N.fill=ER,N.filter=TP,N.flatMap=LP,N.flatMapDeep=BP,N.flatMapDepth=RP,N.flatten=H1,N.flattenDeep=SR,N.flattenDepth=TR,N.flip=qP,N.flow=JI,N.flowRight=jI,N.fromPairs=CR,N.functions=j2,N.functionsIn=X2,N.groupBy=PP,N.initial=LR,N.intersection=BR,N.intersectionBy=RR,N.intersectionWith=PR,N.invert=Y2,N.invertBy=q2,N.invokeMap=FP,N.iteratee=N0,N.keyBy=DP,N.keys=Tr,N.keysIn=Ii,N.map=lg,N.mapKeys=Z2,N.mapValues=$2,N.matches=XI,N.matchesProperty=KI,N.memoize=cg,N.merge=eI,N.mergeWith=aM,N.method=YI,N.methodOf=qI,N.mixin=G0,N.negate=fg,N.nthArg=ZI,N.omit=tI,N.omitBy=nI,N.once=QP,N.orderBy=OP,N.over=$I,N.overArgs=ZP,N.overEvery=e3,N.overSome=t3,N.partial=B0,N.partialRight=Z1,N.partition=NP,N.pick=rI,N.pickBy=lM,N.property=mM,N.propertyOf=n3,N.pull=OR,N.pullAll=k1,N.pullAllBy=NR,N.pullAllWith=GR,N.pullAt=HR,N.range=r3,N.rangeRight=i3,N.rearg=$P,N.reject=UP,N.remove=UR,N.rest=e2,N.reverse=C0,N.sampleSize=zP,N.set=sI,N.setWith=oI,N.shuffle=WP,N.slice=kR,N.sortBy=jP,N.sortedUniq=KR,N.sortedUniqBy=YR,N.split=LI,N.spread=t2,N.tail=qR,N.take=QR,N.takeRight=ZR,N.takeRightWhile=$R,N.takeWhile=eP,N.tap=mP,N.throttle=n2,N.thru=ag,N.toArray=rM,N.toPairs=uM,N.toPairsIn=cM,N.toPath=u3,N.toPlainObject=sM,N.transform=aI,N.unary=r2,N.union=tP,N.unionBy=nP,N.unionWith=rP,N.uniq=iP,N.uniqBy=sP,N.uniqWith=oP,N.unset=lI,N.unzip=b0,N.unzipWith=z1,N.update=uI,N.updateWith=cI,N.values=qc,N.valuesIn=fI,N.without=aP,N.words=hM,N.wrap=i2,N.xor=lP,N.xorBy=uP,N.xorWith=cP,N.zip=fP,N.zipObject=dP,N.zipObjectDeep=hP,N.zipWith=pP,N.entries=uM,N.entriesIn=cM,N.extend=oM,N.extendWith=pg,G0(N,N),N.add=f3,N.attempt=pM,N.camelCase=mI,N.capitalize=fM,N.ceil=d3,N.clamp=dI,N.clone=o2,N.cloneDeep=l2,N.cloneDeepWith=u2,N.cloneWith=a2,N.conformsTo=c2,N.deburr=dM,N.defaultTo=VI,N.divide=h3,N.endsWith=gI,N.eq=Rs,N.escape=vI,N.escapeRegExp=yI,N.every=SP,N.find=CP,N.findIndex=N1,N.findKey=U2,N.findLast=bP,N.findLastIndex=G1,N.findLastKey=k2,N.floor=p3,N.forEach=V1,N.forEachRight=J1,N.forIn=z2,N.forInRight=W2,N.forOwn=V2,N.forOwnRight=J2,N.get=I0,N.gt=f2,N.gte=d2,N.has=K2,N.hasIn=F0,N.head=U1,N.identity=Fi,N.includes=IP,N.indexOf=bR,N.inRange=hI,N.invoke=Q2,N.isArguments=iu,N.isArray=Pt,N.isArrayBuffer=h2,N.isArrayLike=Pi,N.isArrayLikeObject=$n,N.isBoolean=p2,N.isBuffer=Ia,N.isDate=m2,N.isElement=g2,N.isEmpty=v2,N.isEqual=y2,N.isEqualWith=x2,N.isError=R0,N.isFinite=_2,N.isFunction=Ko,N.isInteger=$1,N.isLength=dg,N.isMap=eM,N.isMatch=w2,N.isMatchWith=A2,N.isNaN=M2,N.isNative=E2,N.isNil=T2,N.isNull=S2,N.isNumber=tM,N.isObject=Hn,N.isObjectLike=Wn,N.isPlainObject=lh,N.isRegExp=P0,N.isSafeInteger=C2,N.isSet=nM,N.isString=hg,N.isSymbol=Ji,N.isTypedArray=Yc,N.isUndefined=b2,N.isWeakMap=L2,N.isWeakSet=B2,N.join=IR,N.kebabCase=xI,N.last=ls,N.lastIndexOf=FR,N.lowerCase=_I,N.lowerFirst=wI,N.lt=R2,N.lte=P2,N.max=m3,N.maxBy=g3,N.mean=v3,N.meanBy=y3,N.min=x3,N.minBy=_3,N.stubArray=U0,N.stubFalse=k0,N.stubObject=s3,N.stubString=o3,N.stubTrue=a3,N.multiply=w3,N.nth=DR,N.noConflict=QI,N.noop=H0,N.now=ug,N.pad=AI,N.padEnd=MI,N.padStart=EI,N.parseInt=SI,N.random=pI,N.reduce=GP,N.reduceRight=HP,N.repeat=TI,N.replace=CI,N.result=iI,N.round=A3,N.runInContext=de,N.sample=kP,N.size=VP,N.snakeCase=bI,N.some=JP,N.sortedIndex=zR,N.sortedIndexBy=WR,N.sortedIndexOf=VR,N.sortedLastIndex=JR,N.sortedLastIndexBy=jR,N.sortedLastIndexOf=XR,N.startCase=BI,N.startsWith=RI,N.subtract=M3,N.sum=E3,N.sumBy=S3,N.template=PI,N.times=l3,N.toFinite=Yo,N.toInteger=Dt,N.toLength=iM,N.toLower=II,N.toNumber=us,N.toSafeInteger=I2,N.toString=sn,N.toUpper=FI,N.trim=DI,N.trimEnd=OI,N.trimStart=NI,N.truncate=GI,N.unescape=HI,N.uniqueId=c3,N.upperCase=UI,N.upperFirst=D0,N.each=V1,N.eachRight=J1,N.first=U1,G0(N,function(){var a={};return gr(N,function(d,y){Qt.call(N.prototype,y)||(a[y]=d)}),a}(),{chain:!1}),N.VERSION=r,Yn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){N[a].placeholder=N}),Yn(["drop","take"],function(a,d){Ot.prototype[a]=function(y){y=y===t?1:ln(Dt(y),0);var T=this.__filtered__&&!d?new Ot(this):this.clone();return T.__filtered__?T.__takeCount__=xn(y,T.__takeCount__):T.__views__.push({size:xn(y,ue),type:a+(T.__dir__<0?"Right":"")}),T},Ot.prototype[a+"Right"]=function(y){return this.reverse()[a](y).reverse()}}),Yn(["filter","map","takeWhile"],function(a,d){var y=d+1,T=y==te||y==le;Ot.prototype[a]=function(R){var k=this.clone();return k.__iteratees__.push({iteratee:yt(R,3),type:y}),k.__filtered__=k.__filtered__||T,k}}),Yn(["head","last"],function(a,d){var y="take"+(d?"Right":"");Ot.prototype[a]=function(){return this[y](1).value()[0]}}),Yn(["initial","tail"],function(a,d){var y="drop"+(d?"":"Right");Ot.prototype[a]=function(){return this.__filtered__?new Ot(this):this[y](1)}}),Ot.prototype.compact=function(){return this.filter(Fi)},Ot.prototype.find=function(a){return this.filter(a).head()},Ot.prototype.findLast=function(a){return this.reverse().find(a)},Ot.prototype.invokeMap=St(function(a,d){return typeof a=="function"?new Ot(this):this.map(function(y){return as(y,a,d)})}),Ot.prototype.reject=function(a){return this.filter(fg(yt(a)))},Ot.prototype.slice=function(a,d){a=Dt(a);var y=this;return y.__filtered__&&(a>0||d<0)?new Ot(y):(a<0?y=y.takeRight(-a):a&&(y=y.drop(a)),d!==t&&(d=Dt(d),y=d<0?y.dropRight(-d):y.take(d-a)),y)},Ot.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ot.prototype.toArray=function(){return this.take(ue)},gr(Ot.prototype,function(a,d){var y=/^(?:filter|find|map|reject)|While$/.test(d),T=/^(?:head|last)$/.test(d),R=N[T?"take"+(d=="last"?"Right":""):d],k=T||/^find/.test(d);!R||(N.prototype[d]=function(){var Q=this.__wrapped__,ie=T?[1]:arguments,me=Q instanceof Ot,Fe=ie[0],De=me||Pt(Q),Ge=function(Wt){var jt=R.apply(N,Ms([Wt],ie));return T&&Ze?jt[0]:jt};De&&y&&typeof Fe=="function"&&Fe.length!=1&&(me=De=!1);var Ze=this.__chain__,ct=!!this.__actions__.length,xt=k&&!Ze,Nt=me&&!ct;if(!k&&De){Q=Nt?Q:new Ot(this);var _t=a.apply(Q,ie);return _t.__actions__.push({func:ag,args:[Ge],thisArg:t}),new di(_t,Ze)}return xt&&Nt?a.apply(this,ie):(_t=this.thru(Ge),xt?T?_t.value()[0]:_t.value():_t)})}),Yn(["pop","push","shift","sort","splice","unshift"],function(a){var d=Fl[a],y=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",T=/^(?:pop|shift)$/.test(a);N.prototype[a]=function(){var R=arguments;if(T&&!this.__chain__){var k=this.value();return d.apply(Pt(k)?k:[],R)}return this[y](function(Q){return d.apply(Pt(Q)?Q:[],R)})}}),gr(Ot.prototype,function(a,d){var y=N[d];if(y){var T=y.name+"";Qt.call(Fo,T)||(Fo[T]=[]),Fo[T].push({name:d,func:y})}}),Fo[eg(t,w).name]=[{name:"wrapper",func:t}],Ot.prototype.clone=Hd,Ot.prototype.reverse=zm,Ot.prototype.value=Ud,N.prototype.at=gP,N.prototype.chain=vP,N.prototype.commit=yP,N.prototype.next=xP,N.prototype.plant=wP,N.prototype.reverse=AP,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=MP,N.prototype.first=N.prototype.head,Ea&&(N.prototype[Ea]=_P),N},Nr=Bo();Ao?((Ao.exports=Nr)._=Nr,xa._=Nr):hr._=Nr}).call(uh)})(WB,WB.exports);var G4=function(){function n(F){Cn.call(this,F),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(G){return new s(G)}),this.register(function(G){return new l(G)}),this.register(function(G){return new c(G)}),this.register(function(G){return new o(G)}),this.register(function(G){return new r(G)}),this.register(function(G){return new h(G)})}n.prototype=Object.assign(Object.create(Cn.prototype),{constructor:n,load:function(F,G,X,V){var K=this,Z;this.resourcePath!==""?Z=this.resourcePath:this.path!==""?Z=this.path:Z=ts.extractUrlBase(F),this.manager.itemStart(F);var se=function(re){V?V(re):console.error(re),K.manager.itemError(F),K.manager.itemEnd(F)},j=new Rr(this.manager);j.setPath(this.path),j.setResponseType("arraybuffer"),j.setRequestHeader(this.requestHeader),j.setWithCredentials(this.withCredentials),j.load(F,function(re){try{K.parse(re,Z,function(ae){G(ae),K.manager.itemEnd(F)},se)}catch(ae){se(ae)}},X,se)},setDRACOLoader:function(F){return this.dracoLoader=F,this},setDDSLoader:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')},setKTX2Loader:function(F){return this.ktx2Loader=F,this},setMeshoptDecoder:function(F){return this.meshoptDecoder=F,this},register:function(F){return this.pluginCallbacks.indexOf(F)===-1&&this.pluginCallbacks.push(F),this},unregister:function(F){return this.pluginCallbacks.indexOf(F)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(F),1),this},parse:function(F,G,X,V){var K,Z={},se={};if(typeof F=="string")K=F;else{var j=ts.decodeText(new Uint8Array(F,0,4));if(j===v){try{Z[t.KHR_BINARY_GLTF]=new x(F)}catch(ve){V&&V(ve);return}K=Z[t.KHR_BINARY_GLTF].content}else K=ts.decodeText(new Uint8Array(F))}var re=JSON.parse(K);if(re.asset===void 0||re.asset.version[0]<2){V&&V(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}var ae=new ue(re,{path:G||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});ae.fileLoader.setRequestHeader(this.requestHeader);for(var ye=0;ye<this.pluginCallbacks.length;ye++){var ge=this.pluginCallbacks[ye](ae);se[ge.name]=ge,Z[ge.name]=!0}if(re.extensionsUsed)for(var ye=0;ye<re.extensionsUsed.length;++ye){var z=re.extensionsUsed[ye],W=re.extensionsRequired||[];switch(z){case t.KHR_MATERIALS_UNLIT:Z[z]=new i;break;case t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:Z[z]=new w;break;case t.KHR_DRACO_MESH_COMPRESSION:Z[z]=new A(re,this.dracoLoader);break;case t.KHR_TEXTURE_TRANSFORM:Z[z]=new E;break;case t.KHR_MESH_QUANTIZATION:Z[z]=new _;break;default:W.indexOf(z)>=0&&se[z]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+z+'".')}}ae.setExtensions(Z),ae.setPlugins(se),ae.parse(X,V)}});function e(){var F={};return{get:function(G){return F[G]},add:function(G,X){F[G]=X},remove:function(G){delete F[G]},removeAll:function(){F={}}}}var t={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};function r(F){this.parser=F,this.name=t.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}r.prototype._markDefs=function(){for(var F=this.parser,G=this.parser.json.nodes||[],X=0,V=G.length;X<V;X++){var K=G[X];K.extensions&&K.extensions[this.name]&&K.extensions[this.name].light!==void 0&&F._addNodeRef(this.cache,K.extensions[this.name].light)}},r.prototype._loadLight=function(F){var G=this.parser,X="light:"+F,V=G.cache.get(X);if(V)return V;var K=G.json,Z=K.extensions&&K.extensions[this.name]||{},se=Z.lights||[],j=se[F],re,ae=new je(16777215);j.color!==void 0&&ae.fromArray(j.color);var ye=j.range!==void 0?j.range:0;switch(j.type){case"directional":re=new nm(ae),re.target.position.set(0,0,-1),re.add(re.target);break;case"point":re=new tm(ae),re.distance=ye;break;case"spot":re=new $p(ae),re.distance=ye,j.spot=j.spot||{},j.spot.innerConeAngle=j.spot.innerConeAngle!==void 0?j.spot.innerConeAngle:0,j.spot.outerConeAngle=j.spot.outerConeAngle!==void 0?j.spot.outerConeAngle:Math.PI/4,re.angle=j.spot.outerConeAngle,re.penumbra=1-j.spot.innerConeAngle/j.spot.outerConeAngle,re.target.position.set(0,0,-1),re.add(re.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+j.type)}return re.position.set(0,0,0),re.decay=2,j.intensity!==void 0&&(re.intensity=j.intensity),re.name=G.createUniqueName(j.name||"light_"+F),V=Promise.resolve(re),G.cache.add(X,V),V},r.prototype.createNodeAttachment=function(F){var G=this,X=this.parser,V=X.json,K=V.nodes[F],Z=K.extensions&&K.extensions[this.name]||{},se=Z.light;return se===void 0?null:this._loadLight(se).then(function(j){return X._getNodeRef(G.cache,se,j)})};function i(){this.name=t.KHR_MATERIALS_UNLIT}i.prototype.getMaterialType=function(){return _r},i.prototype.extendParams=function(F,G,X){var V=[];F.color=new je(1,1,1),F.opacity=1;var K=G.pbrMetallicRoughness;if(K){if(Array.isArray(K.baseColorFactor)){var Z=K.baseColorFactor;F.color.fromArray(Z),F.opacity=Z[3]}K.baseColorTexture!==void 0&&V.push(X.assignTexture(F,"map",K.baseColorTexture))}return Promise.all(V)};function s(F){this.parser=F,this.name=t.KHR_MATERIALS_CLEARCOAT}s.prototype.getMaterialType=function(F){var G=this.parser,X=G.json.materials[F];return!X.extensions||!X.extensions[this.name]?null:wi},s.prototype.extendMaterialParams=function(F,G){var X=this.parser,V=X.json.materials[F];if(!V.extensions||!V.extensions[this.name])return Promise.resolve();var K=[],Z=V.extensions[this.name];if(Z.clearcoatFactor!==void 0&&(G.clearcoat=Z.clearcoatFactor),Z.clearcoatTexture!==void 0&&K.push(X.assignTexture(G,"clearcoatMap",Z.clearcoatTexture)),Z.clearcoatRoughnessFactor!==void 0&&(G.clearcoatRoughness=Z.clearcoatRoughnessFactor),Z.clearcoatRoughnessTexture!==void 0&&K.push(X.assignTexture(G,"clearcoatRoughnessMap",Z.clearcoatRoughnessTexture)),Z.clearcoatNormalTexture!==void 0&&(K.push(X.assignTexture(G,"clearcoatNormalMap",Z.clearcoatNormalTexture)),Z.clearcoatNormalTexture.scale!==void 0)){var se=Z.clearcoatNormalTexture.scale;G.clearcoatNormalScale=new Pe(se,-se)}return Promise.all(K)};function o(F){this.parser=F,this.name=t.KHR_MATERIALS_TRANSMISSION}o.prototype.getMaterialType=function(F){var G=this.parser,X=G.json.materials[F];return!X.extensions||!X.extensions[this.name]?null:wi},o.prototype.extendMaterialParams=function(F,G){var X=this.parser,V=X.json.materials[F];if(!V.extensions||!V.extensions[this.name])return Promise.resolve();var K=[],Z=V.extensions[this.name];return Z.transmissionFactor!==void 0&&(G.transmission=Z.transmissionFactor),Z.transmissionTexture!==void 0&&K.push(X.assignTexture(G,"transmissionMap",Z.transmissionTexture)),Promise.all(K)};function l(F){this.parser=F,this.name=t.KHR_TEXTURE_BASISU}l.prototype.loadTexture=function(F){var G=this.parser,X=G.json,V=X.textures[F];if(!V.extensions||!V.extensions[this.name])return null;var K=V.extensions[this.name],Z=X.images[K.source],se=G.options.ktx2Loader;if(!se){if(X.extensionsRequired&&X.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return G.loadTextureImage(F,Z,se)};function c(F){this.parser=F,this.name=t.EXT_TEXTURE_WEBP,this.isSupported=null}c.prototype.loadTexture=function(F){var G=this.name,X=this.parser,V=X.json,K=V.textures[F];if(!K.extensions||!K.extensions[G])return null;var Z=K.extensions[G],se=V.images[Z.source],j=X.textureLoader;if(se.uri){var re=X.options.manager.getHandler(se.uri);re!==null&&(j=re)}return this.detectSupport().then(function(ae){if(ae)return X.loadTextureImage(F,se,j);if(V.extensionsRequired&&V.extensionsRequired.indexOf(G)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return X.loadTexture(F)})},c.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise(function(F){var G=new Image;G.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",G.onload=G.onerror=function(){F(G.height===1)}})),this.isSupported};function h(F){this.name=t.EXT_MESHOPT_COMPRESSION,this.parser=F}h.prototype.loadBufferView=function(F){var G=this.parser.json,X=G.bufferViews[F];if(X.extensions&&X.extensions[this.name]){var V=X.extensions[this.name],K=this.parser.getDependency("buffer",V.buffer),Z=this.parser.options.meshoptDecoder;if(!Z||!Z.supported){if(G.extensionsRequired&&G.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([K,Z.ready]).then(function(se){var j=V.byteOffset||0,re=V.byteLength||0,ae=V.count,ye=V.byteStride,ge=new ArrayBuffer(ae*ye),z=new Uint8Array(se[0],j,re);return Z.decodeGltfBuffer(new Uint8Array(ge),ae,ye,z,V.mode,V.filter),ge})}else return null};var v="glTF",p=12,m={JSON:1313821514,BIN:5130562};function x(F){this.name=t.KHR_BINARY_GLTF,this.content=null,this.body=null;var G=new DataView(F,0,p);if(this.header={magic:ts.decodeText(new Uint8Array(F.slice(0,4))),version:G.getUint32(4,!0),length:G.getUint32(8,!0)},this.header.magic!==v)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var X=this.header.length-p,V=new DataView(F,p),K=0;K<X;){var Z=V.getUint32(K,!0);K+=4;var se=V.getUint32(K,!0);if(K+=4,se===m.JSON){var j=new Uint8Array(F,p+K,Z);this.content=ts.decodeText(j)}else if(se===m.BIN){var re=p+K;this.body=F.slice(re,re+Z)}K+=Z}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function A(F,G){if(!G)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=t.KHR_DRACO_MESH_COMPRESSION,this.json=F,this.dracoLoader=G,this.dracoLoader.preload()}A.prototype.decodePrimitive=function(F,G){var X=this.json,V=this.dracoLoader,K=F.extensions[this.name].bufferView,Z=F.extensions[this.name].attributes,se={},j={},re={};for(var ae in Z){var ye=O[ae]||ae.toLowerCase();se[ye]=Z[ae]}for(ae in F.attributes){var ye=O[ae]||ae.toLowerCase();if(Z[ae]!==void 0){var ge=X.accessors[F.attributes[ae]],z=I[ge.componentType];re[ye]=z,j[ye]=ge.normalized===!0}}return G.getDependency("bufferView",K).then(function(W){return new Promise(function(ve){V.decodeDracoFile(W,function(Ae){for(var Ne in Ae.attributes){var We=Ae.attributes[Ne],Ye=j[Ne];Ye!==void 0&&(We.normalized=Ye)}ve(Ae)},se,re)})})};function E(){this.name=t.KHR_TEXTURE_TRANSFORM}E.prototype.extendTexture=function(F,G){return F=F.clone(),G.offset!==void 0&&F.offset.fromArray(G.offset),G.rotation!==void 0&&(F.rotation=G.rotation),G.scale!==void 0&&F.repeat.fromArray(G.scale),G.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),F.needsUpdate=!0,F};function M(F){Br.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var G=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),X=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),V=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),K=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),Z=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),se={specular:{value:new je().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=se,this.onBeforeCompile=function(j){for(var re in se)j.uniforms[re]=se[re];j.fragmentShader=j.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",G).replace("#include <metalnessmap_pars_fragment>",X).replace("#include <roughnessmap_fragment>",V).replace("#include <metalnessmap_fragment>",K).replace("#include <lights_physical_fragment>",Z)},Object.defineProperties(this,{specular:{get:function(){return se.specular.value},set:function(j){se.specular.value=j}},specularMap:{get:function(){return se.specularMap.value},set:function(j){se.specularMap.value=j,j?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return se.glossiness.value},set:function(j){se.glossiness.value=j}},glossinessMap:{get:function(){return se.glossinessMap.value},set:function(j){se.glossinessMap.value=j,j?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(F)}M.prototype=Object.create(Br.prototype),M.prototype.constructor=M,M.prototype.copy=function(F){return Br.prototype.copy.call(this,F),this.specularMap=F.specularMap,this.specular.copy(F.specular),this.glossinessMap=F.glossinessMap,this.glossiness=F.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this};function w(){return{name:t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return M},extendParams:function(F,G,X){var V=G.extensions[this.name];F.color=new je(1,1,1),F.opacity=1;var K=[];if(Array.isArray(V.diffuseFactor)){var Z=V.diffuseFactor;F.color.fromArray(Z),F.opacity=Z[3]}if(V.diffuseTexture!==void 0&&K.push(X.assignTexture(F,"map",V.diffuseTexture)),F.emissive=new je(0,0,0),F.glossiness=V.glossinessFactor!==void 0?V.glossinessFactor:1,F.specular=new je(1,1,1),Array.isArray(V.specularFactor)&&F.specular.fromArray(V.specularFactor),V.specularGlossinessTexture!==void 0){var se=V.specularGlossinessTexture;K.push(X.assignTexture(F,"glossinessMap",se)),K.push(X.assignTexture(F,"specularMap",se))}return Promise.all(K)},createMaterial:function(F){var G=new M(F);return G.fog=!0,G.color=F.color,G.map=F.map===void 0?null:F.map,G.lightMap=null,G.lightMapIntensity=1,G.aoMap=F.aoMap===void 0?null:F.aoMap,G.aoMapIntensity=1,G.emissive=F.emissive,G.emissiveIntensity=1,G.emissiveMap=F.emissiveMap===void 0?null:F.emissiveMap,G.bumpMap=F.bumpMap===void 0?null:F.bumpMap,G.bumpScale=1,G.normalMap=F.normalMap===void 0?null:F.normalMap,G.normalMapType=oa,F.normalScale&&(G.normalScale=F.normalScale),G.displacementMap=null,G.displacementScale=1,G.displacementBias=0,G.specularMap=F.specularMap===void 0?null:F.specularMap,G.specular=F.specular,G.glossinessMap=F.glossinessMap===void 0?null:F.glossinessMap,G.glossiness=F.glossiness,G.alphaMap=null,G.envMap=F.envMap===void 0?null:F.envMap,G.envMapIntensity=1,G.refractionRatio=.98,G}}}function _(){this.name=t.KHR_MESH_QUANTIZATION}function C(F,G,X,V){ui.call(this,F,G,X,V)}C.prototype=Object.create(ui.prototype),C.prototype.constructor=C,C.prototype.copySampleValue_=function(F){for(var G=this.resultBuffer,X=this.sampleValues,V=this.valueSize,K=F*V*3+V,Z=0;Z!==V;Z++)G[Z]=X[K+Z];return G},C.prototype.beforeStart_=C.prototype.copySampleValue_,C.prototype.afterEnd_=C.prototype.copySampleValue_,C.prototype.interpolate_=function(F,G,X,V){for(var K=this.resultBuffer,Z=this.sampleValues,se=this.valueSize,j=se*2,re=se*3,ae=V-G,ye=(X-G)/ae,ge=ye*ye,z=ge*ye,W=F*re,ve=W-re,Ae=-2*z+3*ge,Ne=z-ge,We=1-Ae,Ye=Ne-ge+ye,tt=0;tt!==se;tt++){var oe=Z[ve+tt+se],Ve=Z[ve+tt+j]*ae,ke=Z[W+tt+se],Qe=Z[W+tt]*ae;K[tt]=We*oe+Ye*Ve+Ae*ke+Ne*Qe}return K};var b={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},I={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},B={9728:Un,9729:An,9984:Pf,9985:up,9986:If,9987:lo},H={33071:zr,33648:Su,10497:Os},D={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},O={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ee={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},q={CUBICSPLINE:void 0,LINEAR:sa,STEP:Cu},fe={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function ne(F,G){return typeof F!="string"||F===""?"":(/^https?:\/\//i.test(G)&&/^\//.test(F)&&(G=G.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(F)||/^data:.*,.*$/i.test(F)||/^blob:.*$/i.test(F)?F:G+F)}function te(F){return F.DefaultMaterial===void 0&&(F.DefaultMaterial=new Br({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:el})),F.DefaultMaterial}function $(F,G,X){for(var V in X.extensions)F[V]===void 0&&(G.userData.gltfExtensions=G.userData.gltfExtensions||{},G.userData.gltfExtensions[V]=X.extensions[V])}function le(F,G){G.extras!==void 0&&(typeof G.extras=="object"?Object.assign(F.userData,G.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+G.extras))}function _e(F,G,X){for(var V=!1,K=!1,Z=0,se=G.length;Z<se;Z++){var j=G[Z];if(j.POSITION!==void 0&&(V=!0),j.NORMAL!==void 0&&(K=!0),V&&K)break}if(!V&&!K)return Promise.resolve(F);for(var re=[],ae=[],Z=0,se=G.length;Z<se;Z++){var j=G[Z];if(V){var ye=j.POSITION!==void 0?X.getDependency("accessor",j.POSITION):F.attributes.position;re.push(ye)}if(K){var ye=j.NORMAL!==void 0?X.getDependency("accessor",j.NORMAL):F.attributes.normal;ae.push(ye)}}return Promise.all([Promise.all(re),Promise.all(ae)]).then(function(ge){var z=ge[0],W=ge[1];return V&&(F.morphAttributes.position=z),K&&(F.morphAttributes.normal=W),F.morphTargetsRelative=!0,F})}function Be(F,G){if(F.updateMorphTargets(),G.weights!==void 0)for(var X=0,V=G.weights.length;X<V;X++)F.morphTargetInfluences[X]=G.weights[X];if(G.extras&&Array.isArray(G.extras.targetNames)){var K=G.extras.targetNames;if(F.morphTargetInfluences.length===K.length){F.morphTargetDictionary={};for(var X=0,V=K.length;X<V;X++)F.morphTargetDictionary[K[X]]=X}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Ce(F){var G=F.extensions&&F.extensions[t.KHR_DRACO_MESH_COMPRESSION],X;return G?X="draco:"+G.bufferView+":"+G.indices+":"+He(G.attributes):X=F.indices+":"+He(F.attributes)+":"+F.mode,X}function He(F){for(var G="",X=Object.keys(F).sort(),V=0,K=X.length;V<K;V++)G+=X[V]+":"+F[X[V]]+";";return G}function ue(F,G){this.json=F||{},this.extensions={},this.plugins={},this.options=G||{},this.cache=new e,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},typeof createImageBitmap!="undefined"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new sm(this.options.manager):this.textureLoader=new ud(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Rr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}ue.prototype.setExtensions=function(F){this.extensions=F},ue.prototype.setPlugins=function(F){this.plugins=F},ue.prototype.parse=function(F,G){var X=this,V=this.json,K=this.extensions;this.cache.removeAll(),this._invokeAll(function(Z){return Z._markDefs&&Z._markDefs()}),Promise.all(this._invokeAll(function(Z){return Z.beforeRoot&&Z.beforeRoot()})).then(function(){return Promise.all([X.getDependencies("scene"),X.getDependencies("animation"),X.getDependencies("camera")])}).then(function(Z){var se={scene:Z[0][V.scene||0],scenes:Z[0],animations:Z[1],cameras:Z[2],asset:V.asset,parser:X,userData:{}};$(K,se,V),le(se,V),Promise.all(X._invokeAll(function(j){return j.afterRoot&&j.afterRoot(se)})).then(function(){F(se)})}).catch(G)},ue.prototype._markDefs=function(){for(var F=this.json.nodes||[],G=this.json.skins||[],X=this.json.meshes||[],V=0,K=G.length;V<K;V++)for(var Z=G[V].joints,se=0,j=Z.length;se<j;se++)F[Z[se]].isBone=!0;for(var re=0,ae=F.length;re<ae;re++){var ye=F[re];ye.mesh!==void 0&&(this._addNodeRef(this.meshCache,ye.mesh),ye.skin!==void 0&&(X[ye.mesh].isSkinnedMesh=!0)),ye.camera!==void 0&&this._addNodeRef(this.cameraCache,ye.camera)}},ue.prototype._addNodeRef=function(F,G){G!==void 0&&(F.refs[G]===void 0&&(F.refs[G]=F.uses[G]=0),F.refs[G]++)},ue.prototype._getNodeRef=function(F,G,X){if(F.refs[G]<=1)return X;var V=X.clone();return V.name+="_instance_"+F.uses[G]++,V},ue.prototype._invokeOne=function(F){var G=Object.values(this.plugins);G.push(this);for(var X=0;X<G.length;X++){var V=F(G[X]);if(V)return V}},ue.prototype._invokeAll=function(F){var G=Object.values(this.plugins);G.unshift(this);for(var X=[],V=0;V<G.length;V++){var K=F(G[V]);K&&X.push(K)}return X},ue.prototype.getDependency=function(F,G){var X=F+":"+G,V=this.cache.get(X);if(!V){switch(F){case"scene":V=this.loadScene(G);break;case"node":V=this.loadNode(G);break;case"mesh":V=this._invokeOne(function(K){return K.loadMesh&&K.loadMesh(G)});break;case"accessor":V=this.loadAccessor(G);break;case"bufferView":V=this._invokeOne(function(K){return K.loadBufferView&&K.loadBufferView(G)});break;case"buffer":V=this.loadBuffer(G);break;case"material":V=this._invokeOne(function(K){return K.loadMaterial&&K.loadMaterial(G)});break;case"texture":V=this._invokeOne(function(K){return K.loadTexture&&K.loadTexture(G)});break;case"skin":V=this.loadSkin(G);break;case"animation":V=this.loadAnimation(G);break;case"camera":V=this.loadCamera(G);break;default:throw new Error("Unknown type: "+F)}this.cache.add(X,V)}return V},ue.prototype.getDependencies=function(F){var G=this.cache.get(F);if(!G){var X=this,V=this.json[F+(F==="mesh"?"es":"s")]||[];G=Promise.all(V.map(function(K,Z){return X.getDependency(F,Z)})),this.cache.add(F,G)}return G},ue.prototype.loadBuffer=function(F){var G=this.json.buffers[F],X=this.fileLoader;if(G.type&&G.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+G.type+" buffer type is not supported.");if(G.uri===void 0&&F===0)return Promise.resolve(this.extensions[t.KHR_BINARY_GLTF].body);var V=this.options;return new Promise(function(K,Z){X.load(ne(G.uri,V.path),K,void 0,function(){Z(new Error('THREE.GLTFLoader: Failed to load buffer "'+G.uri+'".'))})})},ue.prototype.loadBufferView=function(F){var G=this.json.bufferViews[F];return this.getDependency("buffer",G.buffer).then(function(X){var V=G.byteLength||0,K=G.byteOffset||0;return X.slice(K,K+V)})},ue.prototype.loadAccessor=function(F){var G=this,X=this.json,V=this.json.accessors[F];if(V.bufferView===void 0&&V.sparse===void 0)return Promise.resolve(null);var K=[];return V.bufferView!==void 0?K.push(this.getDependency("bufferView",V.bufferView)):K.push(null),V.sparse!==void 0&&(K.push(this.getDependency("bufferView",V.sparse.indices.bufferView)),K.push(this.getDependency("bufferView",V.sparse.values.bufferView))),Promise.all(K).then(function(Z){var se=Z[0],j=D[V.type],re=I[V.componentType],ae=re.BYTES_PER_ELEMENT,ye=ae*j,ge=V.byteOffset||0,z=V.bufferView!==void 0?X.bufferViews[V.bufferView].byteStride:void 0,W=V.normalized===!0,ve,Ae;if(z&&z!==ye){var Ne=Math.floor(ge/z),We="InterleavedBuffer:"+V.bufferView+":"+V.componentType+":"+Ne+":"+V.count,Ye=G.cache.get(We);Ye||(ve=new re(se,Ne*z,V.count*z/ae),Ye=new li(ve,z/ae),G.cache.add(We,Ye)),Ae=new mo(Ye,j,ge%z/ae,W)}else se===null?ve=new re(V.count*j):ve=new re(se,ge,V.count*j),Ae=new dt(ve,j,W);if(V.sparse!==void 0){var tt=D.SCALAR,oe=I[V.sparse.indices.componentType],Ve=V.sparse.indices.byteOffset||0,ke=V.sparse.values.byteOffset||0,Qe=new oe(Z[1],Ve,V.sparse.count*tt),Ie=new re(Z[2],ke,V.sparse.count*j);se!==null&&(Ae=new dt(Ae.array.slice(),Ae.itemSize,Ae.normalized));for(var rt=0,It=Qe.length;rt<It;rt++){var Ht=Qe[rt];if(Ae.setX(Ht,Ie[rt*j]),j>=2&&Ae.setY(Ht,Ie[rt*j+1]),j>=3&&Ae.setZ(Ht,Ie[rt*j+2]),j>=4&&Ae.setW(Ht,Ie[rt*j+3]),j>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Ae})},ue.prototype.loadTexture=function(F){var G=this.json,X=this.options,V=G.textures[F],K=G.images[V.source],Z=this.textureLoader;if(K.uri){var se=X.manager.getHandler(K.uri);se!==null&&(Z=se)}return this.loadTextureImage(F,K,Z)},ue.prototype.loadTextureImage=function(F,G,X){var V=this,K=this.json,Z=this.options,se=K.textures[F],j=self.URL||self.webkitURL,re=G.uri,ae=!1,ye=!0;if(G.mimeType==="image/jpeg"&&(ye=!1),G.bufferView!==void 0)re=V.getDependency("bufferView",G.bufferView).then(function(ge){if(G.mimeType==="image/png"){var z=new DataView(ge,25,1).getUint8(0,!1);ye=z===6||z===4||z===3}ae=!0;var W=new Blob([ge],{type:G.mimeType});return re=j.createObjectURL(W),re});else if(G.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+F+" is missing URI and bufferView");return Promise.resolve(re).then(function(ge){return new Promise(function(z,W){var ve=z;X.isImageBitmapLoader===!0&&(ve=function(Ae){z(new rA(Ae))}),X.load(ne(ge,Z.path),ve,void 0,W)})}).then(function(ge){ae===!0&&j.revokeObjectURL(re),ge.flipY=!1,se.name&&(ge.name=se.name),ye||(ge.format=vs);var z=K.samplers||{},W=z[se.sampler]||{};return ge.magFilter=B[W.magFilter]||An,ge.minFilter=B[W.minFilter]||lo,ge.wrapS=H[W.wrapS]||Os,ge.wrapT=H[W.wrapT]||Os,V.associations.set(ge,{type:"textures",index:F}),ge})},ue.prototype.assignTexture=function(F,G,X){var V=this;return this.getDependency("texture",X.index).then(function(K){if(X.texCoord!==void 0&&X.texCoord!=0&&!(G==="aoMap"&&X.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+X.texCoord+" for texture "+G+" not yet supported."),V.extensions[t.KHR_TEXTURE_TRANSFORM]){var Z=X.extensions!==void 0?X.extensions[t.KHR_TEXTURE_TRANSFORM]:void 0;if(Z){var se=V.associations.get(K);K=V.extensions[t.KHR_TEXTURE_TRANSFORM].extendTexture(K,Z),V.associations.set(K,se)}}F[G]=K})},ue.prototype.assignFinalMaterial=function(F){var G=F.geometry,X=F.material,V=G.attributes.tangent!==void 0,K=G.attributes.color!==void 0,Z=G.attributes.normal===void 0,se=F.isSkinnedMesh===!0,j=Object.keys(G.morphAttributes).length>0,re=j&&G.morphAttributes.normal!==void 0;if(F.isPoints){var ae="PointsMaterial:"+X.uuid,ye=this.cache.get(ae);ye||(ye=new ha,fn.prototype.copy.call(ye,X),ye.color.copy(X.color),ye.map=X.map,ye.sizeAttenuation=!1,this.cache.add(ae,ye)),X=ye}else if(F.isLine){var ae="LineBasicMaterial:"+X.uuid,ge=this.cache.get(ae);ge||(ge=new fr,fn.prototype.copy.call(ge,X),ge.color.copy(X.color),this.cache.add(ae,ge)),X=ge}if(V||K||Z||se||j){var ae="ClonedMaterial:"+X.uuid+":";X.isGLTFSpecularGlossinessMaterial&&(ae+="specular-glossiness:"),se&&(ae+="skinning:"),V&&(ae+="vertex-tangents:"),K&&(ae+="vertex-colors:"),Z&&(ae+="flat-shading:"),j&&(ae+="morph-targets:"),re&&(ae+="morph-normals:");var z=this.cache.get(ae);z||(z=X.clone(),se&&(z.skinning=!0),K&&(z.vertexColors=!0),Z&&(z.flatShading=!0),j&&(z.morphTargets=!0),re&&(z.morphNormals=!0),V&&(z.vertexTangents=!0,z.normalScale&&(z.normalScale.y*=-1),z.clearcoatNormalScale&&(z.clearcoatNormalScale.y*=-1)),this.cache.add(ae,z),this.associations.set(z,this.associations.get(X))),X=z}X.aoMap&&G.attributes.uv2===void 0&&G.attributes.uv!==void 0&&G.setAttribute("uv2",G.attributes.uv),F.material=X},ue.prototype.getMaterialType=function(){return Br},ue.prototype.loadMaterial=function(F){var G=this,X=this.json,V=this.extensions,K=X.materials[F],Z,se={},j=K.extensions||{},re=[];if(j[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var ae=V[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];Z=ae.getMaterialType(),re.push(ae.extendParams(se,K,G))}else if(j[t.KHR_MATERIALS_UNLIT]){var ye=V[t.KHR_MATERIALS_UNLIT];Z=ye.getMaterialType(),re.push(ye.extendParams(se,K,G))}else{var ge=K.pbrMetallicRoughness||{};if(se.color=new je(1,1,1),se.opacity=1,Array.isArray(ge.baseColorFactor)){var z=ge.baseColorFactor;se.color.fromArray(z),se.opacity=z[3]}ge.baseColorTexture!==void 0&&re.push(G.assignTexture(se,"map",ge.baseColorTexture)),se.metalness=ge.metallicFactor!==void 0?ge.metallicFactor:1,se.roughness=ge.roughnessFactor!==void 0?ge.roughnessFactor:1,ge.metallicRoughnessTexture!==void 0&&(re.push(G.assignTexture(se,"metalnessMap",ge.metallicRoughnessTexture)),re.push(G.assignTexture(se,"roughnessMap",ge.metallicRoughnessTexture))),Z=this._invokeOne(function(ve){return ve.getMaterialType&&ve.getMaterialType(F)}),re.push(Promise.all(this._invokeAll(function(ve){return ve.extendMaterialParams&&ve.extendMaterialParams(F,se)})))}K.doubleSided===!0&&(se.side=Au);var W=K.alphaMode||fe.OPAQUE;return W===fe.BLEND?(se.transparent=!0,se.depthWrite=!1):(se.transparent=!1,W===fe.MASK&&(se.alphaTest=K.alphaCutoff!==void 0?K.alphaCutoff:.5)),K.normalTexture!==void 0&&Z!==_r&&(re.push(G.assignTexture(se,"normalMap",K.normalTexture)),se.normalScale=new Pe(1,-1),K.normalTexture.scale!==void 0&&se.normalScale.set(K.normalTexture.scale,-K.normalTexture.scale)),K.occlusionTexture!==void 0&&Z!==_r&&(re.push(G.assignTexture(se,"aoMap",K.occlusionTexture)),K.occlusionTexture.strength!==void 0&&(se.aoMapIntensity=K.occlusionTexture.strength)),K.emissiveFactor!==void 0&&Z!==_r&&(se.emissive=new je().fromArray(K.emissiveFactor)),K.emissiveTexture!==void 0&&Z!==_r&&re.push(G.assignTexture(se,"emissiveMap",K.emissiveTexture)),Promise.all(re).then(function(){var ve;return Z===M?ve=V[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(se):ve=new Z(se),K.name&&(ve.name=K.name),ve.map&&(ve.map.encoding=ys),ve.emissiveMap&&(ve.emissiveMap.encoding=ys),le(ve,K),G.associations.set(ve,{type:"materials",index:F}),K.extensions&&$(V,ve,K),ve})},ue.prototype.createUniqueName=function(F){for(var G=Pr.sanitizeNodeName(F||""),X=G,V=1;this.nodeNamesUsed[X];++V)X=G+"_"+V;return this.nodeNamesUsed[X]=!0,X};function Oe(F,G,X){var V=G.attributes,K=new si;if(V.POSITION!==void 0){var Z=X.json.accessors[V.POSITION],se=Z.min,j=Z.max;if(se!==void 0&&j!==void 0)K.set(new U(se[0],se[1],se[2]),new U(j[0],j[1],j[2]));else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;var re=G.targets;if(re!==void 0){for(var ae=new U,ye=new U,ge=0,z=re.length;ge<z;ge++){var W=re[ge];if(W.POSITION!==void 0){var Z=X.json.accessors[W.POSITION],se=Z.min,j=Z.max;se!==void 0&&j!==void 0?(ye.setX(Math.max(Math.abs(se[0]),Math.abs(j[0]))),ye.setY(Math.max(Math.abs(se[1]),Math.abs(j[1]))),ye.setZ(Math.max(Math.abs(se[2]),Math.abs(j[2]))),ae.max(ye)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}K.expandByVector(ae)}F.boundingBox=K;var ve=new fo;K.getCenter(ve.center),ve.radius=K.min.distanceTo(K.max)/2,F.boundingSphere=ve}function ze(F,G,X){var V=G.attributes,K=[];function Z(ae,ye){return X.getDependency("accessor",ae).then(function(ge){F.setAttribute(ye,ge)})}for(var se in V){var j=O[se]||se.toLowerCase();j in F.attributes||K.push(Z(V[se],j))}if(G.indices!==void 0&&!F.index){var re=X.getDependency("accessor",G.indices).then(function(ae){F.setIndex(ae)});K.push(re)}return le(F,G),Oe(F,G,X),Promise.all(K).then(function(){return G.targets!==void 0?_e(F,G.targets,X):F})}function Ee(F,G){var X=F.getIndex();if(X===null){var V=[],K=F.getAttribute("position");if(K!==void 0){for(var Z=0;Z<K.count;Z++)V.push(Z);F.setIndex(V),X=F.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),F}var se=X.count-2,j=[];if(G===hp)for(var Z=1;Z<=se;Z++)j.push(X.getX(0)),j.push(X.getX(Z)),j.push(X.getX(Z+1));else for(var Z=0;Z<se;Z++)Z%2==0?(j.push(X.getX(Z)),j.push(X.getX(Z+1)),j.push(X.getX(Z+2))):(j.push(X.getX(Z+2)),j.push(X.getX(Z+1)),j.push(X.getX(Z)));j.length/3!==se&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var re=F.clone();return re.setIndex(j),re}return ue.prototype.loadGeometries=function(F){var G=this,X=this.extensions,V=this.primitiveCache;function K(z){return X[t.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(z,G).then(function(W){return ze(W,z,G)})}for(var Z=[],se=0,j=F.length;se<j;se++){var re=F[se],ae=Ce(re),ye=V[ae];if(ye)Z.push(ye.promise);else{var ge;re.extensions&&re.extensions[t.KHR_DRACO_MESH_COMPRESSION]?ge=K(re):ge=ze(new ut,re,G),V[ae]={primitive:re,promise:ge},Z.push(ge)}}return Promise.all(Z)},ue.prototype.loadMesh=function(F){for(var G=this,X=this.json,V=this.extensions,K=X.meshes[F],Z=K.primitives,se=[],j=0,re=Z.length;j<re;j++){var ae=Z[j].material===void 0?te(this.cache):this.getDependency("material",Z[j].material);se.push(ae)}return se.push(G.loadGeometries(Z)),Promise.all(se).then(function(ye){for(var ge=ye.slice(0,ye.length-1),z=ye[ye.length-1],W=[],ve=0,Ae=z.length;ve<Ae;ve++){var Ne=z[ve],We=Z[ve],Ye,tt=ge[ve];if(We.mode===b.TRIANGLES||We.mode===b.TRIANGLE_STRIP||We.mode===b.TRIANGLE_FAN||We.mode===void 0)Ye=K.isSkinnedMesh===!0?new Gu(Ne,tt):new pn(Ne,tt),Ye.isSkinnedMesh===!0&&!Ye.geometry.attributes.skinWeight.normalized&&Ye.normalizeSkinWeights(),We.mode===b.TRIANGLE_STRIP?Ye.geometry=Ee(Ye.geometry,_w):We.mode===b.TRIANGLE_FAN&&(Ye.geometry=Ee(Ye.geometry,hp));else if(We.mode===b.LINES)Ye=new Jr(Ne,tt);else if(We.mode===b.LINE_STRIP)Ye=new es(Ne,tt);else if(We.mode===b.LINE_LOOP)Ye=new Hp(Ne,tt);else if(We.mode===b.POINTS)Ye=new fl(Ne,tt);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+We.mode);Object.keys(Ye.geometry.morphAttributes).length>0&&Be(Ye,K),Ye.name=G.createUniqueName(K.name||"mesh_"+F),le(Ye,K),We.extensions&&$(V,Ye,We),G.assignFinalMaterial(Ye),W.push(Ye)}if(W.length===1)return W[0];for(var oe=new $i,ve=0,Ae=W.length;ve<Ae;ve++)oe.add(W[ve]);return oe})},ue.prototype.loadCamera=function(F){var G,X=this.json.cameras[F],V=X[X.type];if(!V){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return X.type==="perspective"?G=new mn(vt.radToDeg(V.yfov),V.aspectRatio||1,V.znear||1,V.zfar||2e6):X.type==="orthographic"&&(G=new Js(-V.xmag,V.xmag,V.ymag,-V.ymag,V.znear,V.zfar)),X.name&&(G.name=this.createUniqueName(X.name)),le(G,X),Promise.resolve(G)},ue.prototype.loadSkin=function(F){var G=this.json.skins[F],X={joints:G.joints};return G.inverseBindMatrices===void 0?Promise.resolve(X):this.getDependency("accessor",G.inverseBindMatrices).then(function(V){return X.inverseBindMatrices=V,X})},ue.prototype.loadAnimation=function(F){for(var G=this.json,X=G.animations[F],V=[],K=[],Z=[],se=[],j=[],re=0,ae=X.channels.length;re<ae;re++){var ye=X.channels[re],ge=X.samplers[ye.sampler],z=ye.target,W=z.node!==void 0?z.node:z.id,ve=X.parameters!==void 0?X.parameters[ge.input]:ge.input,Ae=X.parameters!==void 0?X.parameters[ge.output]:ge.output;V.push(this.getDependency("node",W)),K.push(this.getDependency("accessor",ve)),Z.push(this.getDependency("accessor",Ae)),se.push(ge),j.push(z)}return Promise.all([Promise.all(V),Promise.all(K),Promise.all(Z),Promise.all(se),Promise.all(j)]).then(function(Ne){for(var We=Ne[0],Ye=Ne[1],tt=Ne[2],oe=Ne[3],Ve=Ne[4],ke=[],Qe=0,Ie=We.length;Qe<Ie;Qe++){var rt=We[Qe],It=Ye[Qe],Ht=tt[Qe],Kn=oe[Qe],he=Ve[Qe];if(rt!==void 0){rt.updateMatrix(),rt.matrixAutoUpdate=!0;var Ue;switch(ee[he.path]){case ee.weights:Ue=zu;break;case ee.rotation:Ue=pl;break;case ee.position:case ee.scale:default:Ue=Vu;break}var at=rt.name?rt.name:rt.uuid,Ut=Kn.interpolation!==void 0?q[Kn.interpolation]:sa,an=[];ee[he.path]===ee.weights?rt.traverse(function(ns){ns.isMesh===!0&&ns.morphTargetInfluences&&an.push(ns.name?ns.name:ns.uuid)}):an.push(at);var gn=Ht.array;if(Ht.normalized){var Dn;if(gn.constructor===Int8Array)Dn=1/127;else if(gn.constructor===Uint8Array)Dn=1/255;else if(gn.constructor==Int16Array)Dn=1/32767;else if(gn.constructor===Uint16Array)Dn=1/65535;else throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");for(var Ui=new Float32Array(gn.length),Mn=0,or=gn.length;Mn<or;Mn++)Ui[Mn]=gn[Mn]*Dn;gn=Ui}for(var Mn=0,or=an.length;Mn<or;Mn++){var xs=new Ue(an[Mn]+"."+ee[he.path],It.array,gn,Ut);Kn.interpolation==="CUBICSPLINE"&&(xs.createInterpolant=function(J){return new C(this.times,this.values,this.getValueSize()/3,J)},xs.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),ke.push(xs)}}}var js=X.name?X.name:"animation_"+F;return new Ju(js,void 0,ke)})},ue.prototype.loadNode=function(F){var G=this.json,X=this.extensions,V=this,K=G.nodes[F],Z=K.name?V.createUniqueName(K.name):"";return function(){var se=[];return K.mesh!==void 0&&se.push(V.getDependency("mesh",K.mesh).then(function(j){var re=V._getNodeRef(V.meshCache,K.mesh,j);return K.weights!==void 0&&re.traverse(function(ae){if(!!ae.isMesh)for(var ye=0,ge=K.weights.length;ye<ge;ye++)ae.morphTargetInfluences[ye]=K.weights[ye]}),re})),K.camera!==void 0&&se.push(V.getDependency("camera",K.camera).then(function(j){return V._getNodeRef(V.cameraCache,K.camera,j)})),V._invokeAll(function(j){return j.createNodeAttachment&&j.createNodeAttachment(F)}).forEach(function(j){se.push(j)}),Promise.all(se)}().then(function(se){var j;if(K.isBone===!0?j=new Hu:se.length>1?j=new $i:se.length===1?j=se[0]:j=new mt,j!==se[0])for(var re=0,ae=se.length;re<ae;re++)j.add(se[re]);if(K.name&&(j.userData.name=K.name,j.name=Z),le(j,K),K.extensions&&$(X,j,K),K.matrix!==void 0){var ye=new lt;ye.fromArray(K.matrix),j.applyMatrix4(ye)}else K.translation!==void 0&&j.position.fromArray(K.translation),K.rotation!==void 0&&j.quaternion.fromArray(K.rotation),K.scale!==void 0&&j.scale.fromArray(K.scale);return V.associations.set(j,{type:"nodes",index:F}),j})},ue.prototype.loadScene=function(){function F(G,X,V,K){var Z=V.nodes[G];return K.getDependency("node",G).then(function(se){if(Z.skin===void 0)return se;var j;return K.getDependency("skin",Z.skin).then(function(re){j=re;for(var ae=[],ye=0,ge=j.joints.length;ye<ge;ye++)ae.push(K.getDependency("node",j.joints[ye]));return Promise.all(ae)}).then(function(re){return se.traverse(function(ae){if(!!ae.isMesh){for(var ye=[],ge=[],z=0,W=re.length;z<W;z++){var ve=re[z];if(ve){ye.push(ve);var Ae=new lt;j.inverseBindMatrices!==void 0&&Ae.fromArray(j.inverseBindMatrices.array,z*16),ge.push(Ae)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',j.joints[z])}ae.bind(new sd(ye,ge),ae.matrixWorld)}}),se})}).then(function(se){X.add(se);var j=[];if(Z.children)for(var re=Z.children,ae=0,ye=re.length;ae<ye;ae++){var ge=re[ae];j.push(F(ge,se,V,K))}return Promise.all(j)})}return function(X){var V=this.json,K=this.extensions,Z=this.json.scenes[X],se=this,j=new $i;Z.name&&(j.name=se.createUniqueName(Z.name)),le(j,Z),Z.extensions&&$(K,j,Z);for(var re=Z.nodes||[],ae=[],ye=0,ge=re.length;ye<ge;ye++)ae.push(F(re[ye],j,V,se));return Promise.all(ae).then(function(){return j})}}(),n}();export{NL as A,F4 as C,O4 as E,G4 as G,N4 as O,R4 as R,L4 as a,Vz as b,pd as c,hk as d,LL as e,je as f,P4 as g,WB as l,D4 as m,Tt as r,Yy as u};
