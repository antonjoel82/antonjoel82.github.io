var v=Object.defineProperty,P=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var L=(t,e,n)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g=(t,e)=>{for(var n in e||(e={}))h.call(e,n)&&L(t,n,e[n]);if(m)for(var n of m(e))x.call(e,n)&&L(t,n,e[n]);return t},R=(t,e)=>P(t,w(e));var y=(t,e)=>{var n={};for(var a in t)h.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&m)for(var a of m(t))e.indexOf(a)<0&&x.call(t,a)&&(n[a]=t[a]);return n};import{R as o,u as b,a as B,G as D,r as l,A as F,b as M,l as S,c as C,d as N,e as O,m as _,C as k,E as G,f as T}from"./vendor.f3c100fd.js";const j=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};j();const A="/disco_ball.gltf",q=o.forwardRef((s,a)=>{var r=s,{rotation:t,scale:e}=r,n=y(r,["rotation","scale"]);const u=b(D,A);return o.createElement("group",R(g({ref:a},n),{dispose:null}),o.createElement("primitive",{object:u.scene}))});B.preload(A);function z({position:t,minRadius:e,sound:n,rotationPerFrame:a=-.005}){const s=l.exports.useRef(null),r=l.exports.useRef(255);function u({sound:d}){const i=l.exports.useRef();return l.exports.useEffect(()=>{i.current=new F(d.current,256)},[d]),M(()=>{if(s.current&&(s.current.rotation.y+=a,i.current)){const p=i.current.getFrequencyData(),f=S.exports.mean(p.slice(0,8)),c=Math.max(f-r.current,0),E=e+c/1e4;s.current.scale.x=E,s.current.scale.y=E,s.current.scale.z=E,r.current=f<r.current&&f>0?f:r.current}}),o.createElement(o.Fragment,null)}return o.createElement(o.Fragment,null,o.createElement(q,{ref:s}),o.createElement(u,{sound:n}))}const I=l.exports.forwardRef((r,s)=>{var u=r,{url:t,distance:e=1,loop:n=!0}=u,a=y(u,["url","distance","loop"]);const d=l.exports.useRef(),i=C(({camera:c})=>c),[p]=l.exports.useState(()=>new N),f=b(O,t);return l.exports.useEffect(()=>{const c=d.current;c&&(c.setBuffer(f),c.setRefDistance(e),c.setLoop(n),a.autoplay&&!c.isPlaying&&c.play())},[f,i,e,n]),l.exports.useEffect(()=>{const c=d.current;return i.add(p),()=>{i.remove(p),c&&(c.isPlaying&&c.stop(),c.source&&c.source._connected&&c.disconnect())}},[]),l.exports.createElement("positionalAudio",g({ref:_([d,s]),args:[p]},a))});function K(){const t=l.exports.useRef(null),[e,n]=l.exports.useState(!1);function a(){const r=t.current;r&&(e?(r.setRefDistance(2e3),r.pause()):r.play(),n(!e))}l.exports.useEffect(()=>{var r,u;((r=t.current)==null?void 0:r.isPlaying)&&!e&&((u=t.current)==null||u.stop())},[e,t.current]);const s=()=>{var r;(r=t.current)==null||r.stop(),n(!1)};return o.createElement("div",{className:"App"},o.createElement(k,null,o.createElement("ambientLight",{intensity:1}),o.createElement(l.exports.Suspense,{fallback:null},o.createElement(I,{url:"/ColoursAndLights.mp3",distance:10,loop:!1,ref:t,autoplay:!1,onEnded:s}),o.createElement(z,{position:[0,0,-10],minRadius:.015,sound:t}),o.createElement(G,{preset:"night",background:!0}))),o.createElement("button",{"aria-label":"play",className:"toggleMusicBtn",onClick:a},e?"Pause":"Play"))}class U extends o.Component{constructor(e){super(e);this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error(e,n)}render(){return this.state.hasError?o.createElement("h1",null,"Something went wrong."):this.props.children}}T.render(o.createElement(o.StrictMode,null,o.createElement(U,null,o.createElement(K,null))),document.getElementById("root"));
